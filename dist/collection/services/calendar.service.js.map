{"version":3,"file":"calendar.service.js","sourceRoot":"","sources":["../../src/services/calendar.service.ts"],"names":[],"mappings":"AAAA,gEAAgE;AAChE,sDAAsD;AACtD,gDAAgD;AAChD,sDAAsD;AACtD,sDAAsD;AACtD,iDAAiD;AAEjD,MAAM,OAAO,eAAe;CAmE3B","sourcesContent":["// import calendarDataState from '@/stores/calendar-data.store';\r\n// import { BookingService } from './booking.service';\r\n// import { RoomService } from './room.service';\r\n// import { formatLegendColors } from '@/utils/utils';\r\n// import { bookingReasons } from '@/models/IBooking';\r\n// import { Socket, io } from 'socket.io-client';\r\n\r\nexport class CalendarService {\r\n  // private bookingService: BookingService;\r\n  // private roomService: RoomService;\r\n  // private socket: Socket;\r\n  // constructor() {\r\n  //   this.bookingService = new BookingService();\r\n  //   this.roomService = new RoomService();\r\n  // }\r\n  // public async Init(language: string, property_id: number, from_date: string, to_date: string) {\r\n  //   const [defaultTexts, roomResp, bookingResp, countryNodeList] = await Promise.all([\r\n  //     this.roomService.fetchLanguage(language),\r\n  //     this.roomService.fetchData(property_id, language),\r\n  //     this.bookingService.getCalendarData(property_id, from_date, to_date),\r\n  //     this.bookingService.getCountries(language),\r\n  //   ]);\r\n  //   calendarDataState.language = language;\r\n  //   this.setUpCalendarData(roomResp, bookingResp);\r\n  //   this.initializeSocket(property_id);\r\n  //   return { defaultTexts, roomResp, bookingResp, countryNodeList };\r\n  // }\r\n  // private setUpCalendarData(roomResp, bookingResp) {\r\n  //   calendarDataState.currency = roomResp['My_Result'].currency;\r\n  //   calendarDataState.allowedBookingSources = roomResp['My_Result'].allowed_booking_sources;\r\n  //   calendarDataState.adultChildConstraints = roomResp['My_Result'].adult_child_constraints;\r\n  //   calendarDataState.is_vacation_rental = roomResp['My_Result'].is_vacation_rental;\r\n  //   calendarDataState.legendData = roomResp['My_Result'].calendar_legends;\r\n  //   calendarDataState.startingDate = new Date(bookingResp.My_Params_Get_Rooming_Data.FROM).getTime();\r\n  //   calendarDataState.endingDate = new Date(bookingResp.My_Params_Get_Rooming_Data.TO).getTime();\r\n  //   calendarDataState.formattedLegendData = formatLegendColors(roomResp['My_Result'].calendar_legends);\r\n  // }\r\n  // private initializeSocket(property_id: number) {\r\n  //   this.socket = io('https://realtime.igloorooms.com/');\r\n  //   this.socket.on('MSG', async msg => {\r\n  //     this.handleSocketMessage(msg, property_id);\r\n  //   });\r\n  // }\r\n  // private async handleSocketMessage(msg: string, property_id: number) {\r\n  //   let msgAsObject = JSON.parse(msg);\r\n  //   if (msgAsObject && msgAsObject.KEY.toString() === property_id.toString()) {\r\n  //     const { REASON, PAYLOAD } = msgAsObject;\r\n  //     switch (REASON) {\r\n  //       case 'DORESERVATION':\r\n  //       case 'BLOCK_EXPOSED_UNIT':\r\n  //       case 'ASSIGN_EXPOSED_ROOM':\r\n  //       case 'REALLOCATE_EXPOSED_ROOM_BLOCK':\r\n  //         await this.handleBookingUpdates(REASON, PAYLOAD);\r\n  //         break;\r\n  //       case 'DELETE_CALENDAR_POOL':\r\n  //         this.handleDeleteCalendarPool(PAYLOAD);\r\n  //         break;\r\n  //       case 'GET_UNASSIGNED_DATES':\r\n  //         await this.handleGetUnassignedDates(PAYLOAD);\r\n  //         break;\r\n  //       default:\r\n  //         return;\r\n  //     }\r\n  //   }\r\n  // }\r\n  // private async handleBookingUpdates(reason: bookingReasons, payload: any) {\r\n  //   // Logic for booking updates\r\n  // }\r\n  // private handleDeleteCalendarPool(payload: any) {\r\n  //   // Logic for handling DELETE_CALENDAR_POOL\r\n  // }\r\n  // private async handleGetUnassignedDates(payload: any) {\r\n  //   // Logic for handling GET_UNASSIGNED_DATES\r\n  // }\r\n}\r\n"]}