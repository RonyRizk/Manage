{"version":3,"file":"igl-to-be-assigned.js","sourceRoot":"","sources":["../../../../src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h, Prop, Event, EventEmitter, State, Listen, Fragment, Watch } from '@stencil/core';\r\nimport { ToBeAssignedService } from '../../../services/toBeAssigned.service';\r\nimport { dateToFormattedString } from '../../../utils/utils';\r\nimport moment from 'moment';\r\nimport { Unsubscribe } from '@reduxjs/toolkit';\r\nimport { store } from '../../../redux/store';\r\n//import { updateCategories } from '../../../utils/events.utils';\r\n\r\n@Component({\r\n  tag: 'igl-to-be-assigned',\r\n  styleUrl: 'igl-to-be-assigned.css',\r\n  scoped: true,\r\n})\r\nexport class IglToBeAssigned {\r\n  @Prop() unassignedDatesProp: any;\r\n  @State() defaultTexts: any;\r\n  @Prop() propertyid: number;\r\n  @Prop() from_date: string;\r\n  @Prop() to_date: string;\r\n  @State() loadingMessage: string  ;\r\n  @Prop({ mutable: true }) calendarData: { [key: string]: any };\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true })\r\n  reduceAvailableUnitEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) addToBeAssignedEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true })\r\n  highlightToBeAssignedBookingEvent: EventEmitter;\r\n  @State() showDatesList: boolean = false;\r\n  @State() renderAgain: boolean = false;\r\n  @State() orderedDatesList: any[] = [];\r\n  private isGotoToBeAssignedDate: boolean = false;\r\n  private isLoading: boolean = true;\r\n  private selectedDate = null;\r\n  private data: { [key: string]: any } = {};\r\n  private today = new Date();\r\n  private categoriesData: { [key: string]: any } = {};\r\n  private toBeAssignedService: ToBeAssignedService = new ToBeAssignedService();\r\n  private unassignedDates: any;\r\n  private unsubscribe:Unsubscribe;\r\n  componentWillLoad() {\r\n    this.reArrangeData();\r\n    this.updateFromStore()\r\n    this.unsubscribe=store.subscribe(()=>this.updateFromStore())\r\n    this.loadingMessage=this.defaultTexts.entries.Lcz_FetchingUnAssignedUnits;\r\n  }\r\n  updateFromStore() {\r\n    const state = store.getState();\r\n    this.defaultTexts = state.languages;\r\n  }\r\n  disconnectedCallback(){\r\n    this.unsubscribe()\r\n  }\r\n  @Watch('unassignedDatesProp')\r\n  handleUnassignedDatesToBeAssignedChange(newValue: any) {\r\n    const { fromDate, toDate, data } = newValue;\r\n    let dt = new Date(fromDate);\r\n    dt.setHours(0);\r\n    dt.setMinutes(0);\r\n    dt.setSeconds(0);\r\n    let endDate = dt.getTime();\r\n    while (endDate <= new Date(toDate).getTime()) {\r\n      if (data && !data[endDate] && this.unassignedDates.hasOwnProperty(endDate)) {\r\n        delete this.unassignedDates[endDate];\r\n      } else if (data && data[endDate]) {\r\n        this.unassignedDates[endDate] = data[endDate];\r\n      }\r\n      endDate = moment(endDate).add(1, 'days').toDate().getTime();\r\n    }\r\n    this.data = { ...this.unassignedDates };\r\n    this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\r\n\r\n    if (this.orderedDatesList.length) {\r\n      if (!this.data.hasOwnProperty(this.selectedDate)) {\r\n        this.selectedDate = this.orderedDatesList.length ? this.orderedDatesList[0] : null;\r\n      }\r\n      this.showForDate(this.selectedDate, false);\r\n      this.renderView();\r\n    } else {\r\n      this.selectedDate = null;\r\n    }\r\n  }\r\n  handleAssignUnit(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const data = opt.data;\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    if (opt.key === 'assignUnit') {\r\n      if (Object.keys(this.data[data.selectedDate].categories).length === 1) {\r\n        this.isLoading = true;\r\n      }\r\n      this.data[data.selectedDate].categories[data.RT_ID] = this.data[data.selectedDate].categories[data.RT_ID].filter(eventData => eventData.ID != data.assignEvent.ID);\r\n      this.calendarData = data.calendarData;\r\n      // this.calendarData.bookingEvents.push(data.assignEvent);\r\n\r\n      // if (!this.data[data.selectedDate].categories[data.RT_ID].length) {\r\n      //   delete this.data[data.selectedDate].categories[data.RT_ID];\r\n\r\n      //   if (!Object.keys(this.data[data.selectedDate].categories).length) {\r\n      //     delete this.data[data.selectedDate];\r\n      //     //this.orderedDatesList = this.orderedDatesList.filter(dateStamp => dateStamp != data.selectedDate);\r\n      //     //this.selectedDate = this.orderedDatesList.length ? this.orderedDatesList[0] : null;\r\n      //   }\r\n      // }\r\n      this.renderView();\r\n\r\n      // this.reduceAvailableUnitEvent.emit({key: \"reduceAvailableDays\", data: {selectedDate: data.selectedDate}});\r\n    }\r\n  }\r\n\r\n  async updateCategories(key, calendarData) {\r\n    try {\r\n      //console.log(\"called\")\r\n      let categorisedRooms = {};\r\n      const result = await this.toBeAssignedService.getUnassignedRooms(\r\n        this.propertyid,\r\n        dateToFormattedString(new Date(+key)),\r\n        calendarData.roomsInfo,\r\n        calendarData.formattedLegendData,\r\n      );\r\n      result.forEach(room => {\r\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\r\n          categorisedRooms[room.RT_ID] = [room];\r\n        } else {\r\n          categorisedRooms[room.RT_ID].push(room);\r\n        }\r\n      });\r\n      this.unassignedDates[key].categories = categorisedRooms;\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n\r\n  async reArrangeData() {\r\n    try {\r\n      this.today.setHours(0, 0, 0, 0);\r\n      this.calendarData.roomsInfo.forEach(category => {\r\n        this.categoriesData[category.id] = {\r\n          name: category.name,\r\n          roomsList: category.physicalrooms,\r\n          roomIds: category.physicalrooms.map(room => {\r\n            return room.id;\r\n          }),\r\n        };\r\n      });\r\n\r\n      this.selectedDate = null;\r\n      //this.unassignedDates = await this.toBeAssignedService.getUnassignedDates(this.propertyid, dateToFormattedString(new Date()), this.to_date);\r\n      this.unassignedDates = this.calendarData.unassignedDates;\r\n\r\n      this.data = this.unassignedDates;\r\n      this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\r\n\r\n      if (!this.selectedDate && this.orderedDatesList.length) {\r\n        this.selectedDate = this.orderedDatesList[0];\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching unassigned dates:', error);\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n  async componentDidLoad() {\r\n    setTimeout(() => {\r\n      if (!this.isGotoToBeAssignedDate && Object.keys(this.unassignedDates).length > 0) {\r\n        //console.log(this.isGotoToBeAssignedDate);\r\n        const firstKey = Object.keys(this.unassignedDates)[0];\r\n\r\n        this.showForDate(firstKey);\r\n      }\r\n    }, 100);\r\n  }\r\n  @Listen('gotoToBeAssignedDate', { target: 'window' })\r\n  async gotoDate(event: CustomEvent) {\r\n    this.isGotoToBeAssignedDate = true;\r\n    this.showForDate(event.detail.data);\r\n    this.showDatesList = false;\r\n    this.renderView();\r\n  }\r\n\r\n  async showForDate(dateStamp, withLoading = true) {\r\n    try {\r\n      if (withLoading) {\r\n        this.isLoading = true;\r\n      }\r\n      if (this.showDatesList) {\r\n        this.showUnassignedDate();\r\n      }\r\n      await this.updateCategories(dateStamp, this.calendarData);\r\n      this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\r\n      this.showBookingPopup.emit({\r\n        key: 'calendar',\r\n        data: parseInt(dateStamp) - 86400000,\r\n      });\r\n      if (this.isGotoToBeAssignedDate) {\r\n        this.isGotoToBeAssignedDate = false;\r\n      }\r\n      this.isLoading = false;\r\n      this.selectedDate = dateStamp;\r\n      this.renderView();\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  getDay(dt) {\r\n    const currentDate = new Date(dt);\r\n    const locale = 'default'; //'en-US';\r\n    const dayOfWeek = this.getLocalizedDayOfWeek(currentDate, locale);\r\n    // const monthName = currentDate.toLocaleString(\"default\", { month: 'short' })\r\n    return dayOfWeek + ' ' + currentDate.getDate() + ', ' + currentDate.getFullYear();\r\n  }\r\n\r\n  getLocalizedDayOfWeek(date, locale) {\r\n    const options = { weekday: 'short' };\r\n    return date.toLocaleDateString(locale, options);\r\n  }\r\n\r\n  handleOptionEvent(key, data = '') {\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: 'highlightBookingId',\r\n      data: { bookingId: '----' },\r\n    });\r\n    this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  showUnassignedDate() {\r\n    this.showDatesList = !this.showDatesList;\r\n  }\r\n\r\n  getToBeAssignedEntities() {\r\n    // toBeAssignedEvents\r\n  }\r\n\r\n  getCategoryView() {\r\n    if (this.orderedDatesList.length && this.selectedDate && this.data[this.selectedDate]) {\r\n      return Object.entries(this.data[this.selectedDate].categories).map(([id, eventDatas], ind) => (\r\n        <igl-tba-category-view\r\n          calendarData={this.calendarData}\r\n          selectedDate={this.selectedDate}\r\n          categoryId={id}\r\n          categoryIndex={ind}\r\n          categoriesData={this.categoriesData}\r\n          eventDatas={eventDatas}\r\n          onAssignUnitEvent={evt => this.handleAssignUnit(evt)}\r\n        ></igl-tba-category-view>\r\n      ));\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"tobeAssignedContainer pr-1 text-left\">\r\n        <div>\r\n          <div>\r\n            <div class=\"stickyHeader\">\r\n              <div class=\"tobeAssignedHeader pt-1\">{this.defaultTexts.entries.Lcz_Assignments}</div>\r\n              <div class=\"closeBtn pt-1\" onClick={() => this.handleOptionEvent('closeSideMenu')}>\r\n                <i class=\"ft-chevrons-left\"></i>\r\n              </div>\r\n              <hr />\r\n              {Object.keys(this.data).length === 0 ? (\r\n                <p>{this.defaultTexts.entries.Lcz_AllBookingsAreAssigned\r\n                }</p>\r\n              ) : this.isLoading ? (\r\n                <p>{this.loadingMessage}</p>\r\n              ) : (\r\n                <Fragment>\r\n                  {this.orderedDatesList.length ? (\r\n                    <div\r\n                      class={`custom-dropdown border border-light rounded text-center ` + (this.showDatesList ? 'show' : '')}\r\n                      id=\"dropdownMenuButton\"\r\n                      data-toggle=\"dropdown\"\r\n                      aria-haspopup=\"true\"\r\n                      aria-expanded=\"false\"\r\n                    >\r\n                      <div\r\n                        class={'dropdown-toggle'}\r\n                        //onClick={() => this.showUnassignedDate()}\r\n                      >\r\n                        <span class=\"font-weight-bold\">{this.data[this.selectedDate].dateStr}</span>\r\n                        {/* <i class=\"la la-angle-down ml-2\"></i> */}\r\n                      </div>\r\n                      <div class=\"dropdown-menu dropdown-menu-right full-width\" aria-labelledby=\"dropdownMenuButton\">\r\n                        {this.orderedDatesList?.map(ordDate => (\r\n                          <div class=\"dropdown-item pointer\" onClick={() => this.showForDate(ordDate)}>\r\n                            {this.data[ordDate].dateStr}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    this.defaultTexts.entries.Lcz_AllBookingsAreAssigned\r\n                  )}\r\n                </Fragment>\r\n              )}\r\n            </div>\r\n            {!this.isLoading && (\r\n              <div class=\"scrollabledArea\">\r\n                {this.orderedDatesList.length ? (\r\n                  Object.keys(this.data[this.selectedDate].categories).length ? (\r\n                    this.getCategoryView()\r\n                  ) : (\r\n                    <div class=\"mt-1\">{this.defaultTexts.entries.Lcz_AllAssignForThisDay}</div>\r\n                  )\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}