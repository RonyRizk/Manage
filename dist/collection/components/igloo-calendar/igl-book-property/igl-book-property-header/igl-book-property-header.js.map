{"version":3,"file":"igl-book-property-header.js","sourceRoot":"","sources":["../../../../../src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Prop, h, Event, EventEmitter } from '@stencil/core';\r\nimport { TAdultChildConstraints, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '../../../../models/igl-book-property';\r\nimport { IToast } from '../../../ir-toast/toast';\r\n\r\n@Component({\r\n  tag: 'igl-book-property-header',\r\n  styleUrl: 'igl-book-property-header.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookPropertyHeader {\r\n  @Prop() splitBookingId: any = '';\r\n  @Prop() bookingData: any = '';\r\n  @Prop() sourceOptions: TSourceOptions[] = [];\r\n  @Prop() message: string;\r\n  @Prop() bookingDataDefaultDateRange: { [key: string]: any };\r\n  @Prop() showSplitBookingOption: boolean = false;\r\n  @Prop() adultChildConstraints: TAdultChildConstraints;\r\n  @Prop() splitBookings: any[];\r\n  @Prop() adultChildCount: { adult: number; child: number };\r\n  @Event() splitBookingDropDownChange: EventEmitter<any>;\r\n  @Event() sourceDropDownChange: EventEmitter<string>;\r\n  @Event() adultChild: EventEmitter<any>;\r\n  @Event() checkClicked: EventEmitter<any>;\r\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\r\n  @Event() toast: EventEmitter<IToast>;\r\n  private sourceOption: TSourceOption = {\r\n    code: '',\r\n    description: '',\r\n    tag: '',\r\n  };\r\n  getSplitBookings() {\r\n    return (this.bookingData.hasOwnProperty('splitBookingEvents') && this.bookingData.splitBookingEvents) || [];\r\n  }\r\n  getSelectedSplitBookingName(bookingId) {\r\n    let splitBooking = this.splitBookings.find(booking => booking.ID === bookingId);\r\n    return splitBooking.ID + ' ' + splitBooking.NAME;\r\n  }\r\n  getSplitBookingList() {\r\n    return (\r\n      <fieldset class=\"form-group col-12 text-left\">\r\n        <label class=\"h5\">To booking# </label>\r\n        <div class=\"btn-group ml-1\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.splitBookingDropDownChange.emit(evt)}>\r\n            <option value=\"\" selected={this.splitBookingId != ''}>\r\n              Select\r\n            </option>\r\n            {this.splitBookings.map(option => (\r\n              <option value={option.ID} selected={this.splitBookingId === option.ID}>\r\n                {this.getSelectedSplitBookingName(option.ID)}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  getSourceNode() {\r\n    return (\r\n      <fieldset class=\"d-flex flex-column text-left flex-lg-row align-items-lg-center\">\r\n        <label class=\"h5 mr-lg-1\">Source </label>\r\n        <div class=\"btn-group mt-1 mt-lg-0 sourceContainer\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.sourceDropDownChange.emit((evt.target as HTMLSelectElement).value)}>\r\n            {this.sourceOptions.map(option => {\r\n              if (option.type === 'LABEL') {\r\n                return <optgroup label={option.value}></optgroup>;\r\n              }\r\n              return (\r\n                <option value={option.id} selected={this.sourceOption.code === option.id}>\r\n                  {option.value}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  handleAdultChildChange(key: string, event: Event) {\r\n    const value = (event.target as HTMLSelectElement).value;\r\n    let obj = {};\r\n    if (value === '') {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: 0,\r\n      };\r\n    } else {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: value,\r\n      };\r\n    }\r\n    this.adultChild.emit(obj);\r\n  }\r\n\r\n  getAdultChildConstraints() {\r\n    return (\r\n      \r\n      <div class={\"mt-1 d-flex flex-column text-left\"}>\r\n         <label class=\"h5 d-lg-none\">Number of Guests </label>\r\n        <div class=\"form-group  text-left d-flex align-items-center justify-content-between justify-content-sm-start\">\r\n        <fieldset>\r\n          <div class=\"btn-group \">\r\n            <select class=\"form-control input-sm\" id=\"xAdultSmallSelect\" onChange={evt => this.handleAdultChildChange('adult', evt)}>\r\n              <option value=\"\">Ad..</option>\r\n              {Array.from(Array(this.adultChildConstraints.adult_max_nbr), (_, i) => i + 1).map(option => (\r\n                <option value={option}>{option}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </fieldset>\r\n        {this.adultChildConstraints.child_max_nbr > 0 && (\r\n          <fieldset class={'ml-1'}>\r\n            <div class=\"btn-group ml-1\">\r\n              <select class=\"form-control input-sm\" id=\"xChildrenSmallSelect\" onChange={evt => this.handleAdultChildChange('child', evt)}>\r\n                <option value={''}>{`Ch... < ${this.adultChildConstraints.child_max_age} years`}</option>\r\n                {Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => (\r\n                  <option value={option}>{option}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </fieldset>\r\n        )}\r\n        <button class={'btn btn-primary btn-sm ml-2 '} onClick={() => this.handleButtonClicked()}>\r\n          Check\r\n        </button>\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n  handleButtonClicked() {\r\n    if (this.adultChildCount.adult === 0) {\r\n      this.toast.emit({ type: 'error', title: 'Please select the number of guests', description: '', position: 'top-right' });\r\n    } else {\r\n      this.buttonClicked.emit({ key: 'check' });\r\n    }\r\n  }\r\n  isEventType(key: string) {\r\n    return this.bookingData.event_type === key;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {this.showSplitBookingOption ? this.getSplitBookingList() : this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM') ? null : this.getSourceNode()}\r\n        <div class={'d-lg-flex align-items-center'}>\r\n          <fieldset class=\" mt-1 mt-lg-0  \">\r\n            <igl-date-range disabled={this.isEventType('BAR_BOOKING')} defaultData={this.bookingDataDefaultDateRange}></igl-date-range>\r\n          </fieldset>\r\n          {!this.isEventType('EDIT_BOOKING') && this.getAdultChildConstraints()}\r\n        </div>\r\n        <p class=\"text-left mt-1\">{this.message}</p>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}