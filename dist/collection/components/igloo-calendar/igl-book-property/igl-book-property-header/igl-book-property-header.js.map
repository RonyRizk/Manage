{"version":3,"file":"igl-book-property-header.js","sourceRoot":"","sources":["../../../../../src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Prop, h, Event, EventEmitter } from '@stencil/core';\r\nimport { TAdultChildConstraints, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '../../../../models/igl-book-property';\r\nimport { IToast } from '../../../ir-toast/toast';\r\nimport moment from 'moment';\r\nimport { Languages } from '../../../../redux/features/languages';\r\n\r\n@Component({\r\n  tag: 'igl-book-property-header',\r\n  styleUrl: 'igl-book-property-header.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookPropertyHeader {\r\n  @Prop() splitBookingId: any = '';\r\n  @Prop() bookingData: any = '';\r\n  @Prop() minDate: string;\r\n  @Prop() sourceOptions: TSourceOptions[] = [];\r\n  @Prop() message: string;\r\n  @Prop() bookingDataDefaultDateRange: { [key: string]: any };\r\n  @Prop() showSplitBookingOption: boolean = false;\r\n  @Prop() adultChildConstraints: TAdultChildConstraints;\r\n  @Prop() splitBookings: any[];\r\n  @Prop() adultChildCount: { adult: number; child: number };\r\n  @Prop() dateRangeData: any;\r\n  @Prop() bookedByInfoData: any;\r\n  @Prop() defaultDaterange: { from_date: string; to_date: string };\r\n  @Prop() propertyId: number;\r\n  @Prop() defaultTexts: Languages;\r\n  @Event() splitBookingDropDownChange: EventEmitter<any>;\r\n  @Event() sourceDropDownChange: EventEmitter<string>;\r\n  @Event() adultChild: EventEmitter<any>;\r\n  @Event() checkClicked: EventEmitter<any>;\r\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\r\n  @Event() toast: EventEmitter<IToast>;\r\n  @Event() spiltBookingSelected: EventEmitter<{ key: string; data: unknown }>;\r\n  private sourceOption: TSourceOption = {\r\n    code: '',\r\n    description: '',\r\n    tag: '',\r\n  };\r\n\r\n  getSplitBookingList() {\r\n    return (\r\n      <fieldset class=\"form-group  text-left\">\r\n        <label class=\"h5\">{this.defaultTexts.entries.Lcz_Tobooking}# </label>\r\n        <div class=\"btn-group ml-1\">\r\n          <ir-autocomplete\r\n            value={\r\n              Object.keys(this.bookedByInfoData).length > 1 ? `${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}` : ''\r\n            }\r\n            from_date={moment(this.bookingDataDefaultDateRange.fromDate).format('YYYY-MM-DD')}\r\n            to_date={moment(this.bookingDataDefaultDateRange.toDate).format('YYYY-MM-DD')}\r\n            propertyId={this.propertyId}\r\n            placeholder={this.defaultTexts.entries.Lcz_BookingNumber}\r\n            onComboboxValue={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation;\r\n              this.spiltBookingSelected.emit(e.detail);\r\n            }}\r\n            isSplitBooking\r\n          ></ir-autocomplete>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  getSourceNode() {\r\n    return (\r\n      <fieldset class=\"d-flex flex-column text-left flex-lg-row align-items-lg-center\">\r\n        <label class=\"h5 mr-lg-1\">{this.defaultTexts.entries.Lcz_Source} </label>\r\n        <div class=\"btn-group mt-1 mt-lg-0 sourceContainer\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.sourceDropDownChange.emit((evt.target as HTMLSelectElement).value)}>\r\n            {this.sourceOptions.map(option => {\r\n              if (option.type === 'LABEL') {\r\n                return <optgroup label={option.value}></optgroup>;\r\n              }\r\n              return (\r\n                <option value={option.id} selected={this.sourceOption.code === option.id}>\r\n                  {option.value}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  handleAdultChildChange(key: string, event: Event) {\r\n    const value = (event.target as HTMLSelectElement).value;\r\n    let obj = {};\r\n    if (value === '') {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: 0,\r\n      };\r\n    } else {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: value,\r\n      };\r\n    }\r\n    this.adultChild.emit(obj);\r\n  }\r\n\r\n  getAdultChildConstraints() {\r\n    return (\r\n      <div class={'mt-1 d-flex flex-column text-left'}>\r\n        <label class=\"h5 d-lg-none\">{this.defaultTexts.entries.Lcz_NumberOfGuests} </label>\r\n        <div class=\"form-group  text-left d-flex align-items-center justify-content-between justify-content-sm-start\">\r\n          <fieldset>\r\n            <div class=\"btn-group \">\r\n              <select class=\"form-control input-sm\" id=\"xAdultSmallSelect\" onChange={evt => this.handleAdultChildChange('adult', evt)}>\r\n                <option value=\"\">{this.defaultTexts.entries.Lcz_AdultsCaption}</option>\r\n                {Array.from(Array(this.adultChildConstraints.adult_max_nbr), (_, i) => i + 1).map(option => (\r\n                  <option value={option}>{option}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </fieldset>\r\n          {this.adultChildConstraints.child_max_nbr > 0 && (\r\n            <fieldset class={'ml-1'}>\r\n              <div class=\"btn-group ml-1\">\r\n                <select class=\"form-control input-sm\" id=\"xChildrenSmallSelect\" onChange={evt => this.handleAdultChildChange('child', evt)}>\r\n                  <option value={''}>{this.renderChildCaption()}</option>\r\n                  {Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => (\r\n                    <option value={option}>{option}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </fieldset>\r\n          )}\r\n          <button class={'btn btn-primary btn-sm ml-2 '} onClick={() => this.handleButtonClicked()}>\r\n            {this.defaultTexts.entries.Lcz_Check}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  renderChildCaption() {\r\n    const maxAge = this.adultChildConstraints.child_max_age;\r\n    let years = this.defaultTexts.entries.Lcz_Years;\r\n\r\n    if (maxAge === 1) {\r\n      years = this.defaultTexts.entries.Lcz_Year;\r\n    }\r\n    return `${this.defaultTexts.entries.Lcz_ChildCaption} < ${this.adultChildConstraints.child_max_age} ${years}`;\r\n  }\r\n  handleButtonClicked() {\r\n    console.log(this.isEventType('SPLIT_BOOKING') && Object.keys(this.bookedByInfoData).length === 1);\r\n    if (this.isEventType('SPLIT_BOOKING') && Object.keys(this.bookedByInfoData).length <= 1) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: this.defaultTexts.entries.Lcz_ChooseBookingNumber,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n    } else if (this.minDate && new Date(this.dateRangeData.fromDate).getTime() > new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date).getTime()) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: `${this.defaultTexts.entries.Lcz_CheckInDateShouldBeMAx} ${moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format(\r\n          'ddd, DD MMM YYYY',\r\n        )} `,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n    } else if (this.adultChildCount.adult === 0) {\r\n      this.toast.emit({ type: 'error', title: this.defaultTexts.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\r\n    } else {\r\n      this.buttonClicked.emit({ key: 'check' });\r\n    }\r\n  }\r\n  isEventType(key: string) {\r\n    return this.bookingData.event_type === key;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {this.showSplitBookingOption ? this.getSplitBookingList() : this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM') ? null : this.getSourceNode()}\r\n        <div class={'d-lg-flex align-items-center'}>\r\n          <fieldset class=\" mt-1 mt-lg-0  \">\r\n            <igl-date-range\r\n              dateLabel={this.defaultTexts.entries.Lcz_Dates}\r\n              minDate={this.minDate}\r\n              disabled={this.isEventType('BAR_BOOKING')}\r\n              defaultData={this.bookingDataDefaultDateRange}\r\n            ></igl-date-range>\r\n          </fieldset>\r\n          {!this.isEventType('EDIT_BOOKING') && this.getAdultChildConstraints()}\r\n        </div>\r\n        <p class=\"text-left mt-1\">{this.message}</p>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}