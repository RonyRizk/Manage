{"version":3,"file":"igl-application-info.js","sourceRoot":"","sources":["../../../../src/components/igloo-calendar/igl-application-info/igl-application-info.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h, Prop, Event, EventEmitter, Watch, State } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport { getCurrencySymbol } from '../../../utils/utils';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'igl-application-info',\r\n  styleUrl: 'igl-application-info.css',\r\n  scoped: true,\r\n})\r\nexport class IglApplicationInfo {\r\n  @Prop() guestInfo: { [key: string]: any };\r\n  @Prop() currency;\r\n  @Prop({ reflect: true, mutable: true }) roomsList: { [key: string]: any }[] = [];\r\n  @Prop() guestRefKey: string;\r\n  @Prop() bedPreferenceType = [];\r\n  @Prop() selectedUnits: number[] = [];\r\n  @Prop() bookingType: string = 'PLUS_BOOKING';\r\n  @Prop() index: number;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() filterdRoomList = [];\r\n  private guestData: { [key: string]: any };\r\n\r\n  componentWillLoad() {\r\n    this.guestData = this.guestInfo ? { ...this.guestInfo } : {};\r\n    this.updateRoomList();\r\n  }\r\n\r\n  @Watch('selectedUnits')\r\n  async handleSelctedUnits() {\r\n    this.updateRoomList();\r\n  }\r\n  updateRoomList() {\r\n    const units = [...this.selectedUnits];\r\n    units[this.index] = -1;\r\n    this.filterdRoomList = this.roomsList.filter(e => !units.includes(e.id));\r\n  }\r\n  updateData() {\r\n    this.dataUpdateEvent.emit({\r\n      key: 'roomRatePlanUpdate',\r\n      guestRefKey: this.guestRefKey,\r\n      data: { ...this.guestData },\r\n    });\r\n  }\r\n\r\n  handleDataChange(key, value) {\r\n    this.guestData[key] = +value;\r\n    if (value === '') {\r\n      this.guestData['roomName'] = value;\r\n    }\r\n    if (key === 'roomId' && value !== '') {\r\n      this.guestData['roomName'] = this.filterdRoomList.find(room => room.id === +value).name || '';\r\n    }\r\n    this.updateData();\r\n  }\r\n\r\n  handleGuestNameChange(event) {\r\n    // console.log(\"On Guest name Change::\", event.target.value);\r\n    this.guestData.guestName = event.target.value;\r\n    this.updateData();\r\n  }\r\n\r\n  render() {\r\n    //console.log(this.guestInfo, this.roomsList);\r\n    return (\r\n      <Host>\r\n        <div class=\"text-left mt-1 \">\r\n          <div class=\" mb-1 \">\r\n            {this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING' ? (\r\n              <span class=\"h5 mr-1\">{this.guestInfo.roomCategoryName}</span>\r\n            ) : null}\r\n            <span class=\" font-weight-bold\">\r\n              {this.guestInfo.ratePlanName.replace(this.guestInfo.roomCategoryName + '/', '')}\r\n              <ir-tooltip class=\" mr-1\" message={this.guestInfo.cancelation + this.guestInfo.guarantee}></ir-tooltip>\r\n            </span>\r\n            <span>{this.guestInfo.adult_child_offering}</span>\r\n          </div>\r\n\r\n          <div class=\"d-flex m-0 p-0 align-items-center aplicationInfoContainer \">\r\n            <div class=\"mr-1 flex-fill\">\r\n              <input\r\n                id={v4()}\r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                placeholder={locales.entries.Lcz_GuestFirstnameAndLastname}\r\n                name=\"guestName\"\r\n                onInput={event => this.handleGuestNameChange(event)}\r\n                required\r\n                value={this.guestData.guestName}\r\n              />\r\n            </div>\r\n            {this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING' ? (\r\n              <div class=\"mr-1 p-0 flex-fill\">\r\n                <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('roomId', (event.target as HTMLInputElement).value)}>\r\n                  <option value=\"\" selected={this.guestData.roomId === ''}>\r\n                    {locales.entries.Lcz_Assignunits}\r\n                  </option>\r\n                  {this.filterdRoomList.map(room => (\r\n                    <option value={room.id} selected={+this.guestData.roomId === room.id}>\r\n                      {room.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            ) : null}\r\n\r\n            <div class=\"mr-1 flex-fill\">\r\n              <select class=\"form-control input-sm\" id={v4()} onChange={event => this.handleDataChange('preference', (event.target as HTMLInputElement).value)}>\r\n                <option value=\"\" selected={this.guestData.preference === ''}>\r\n                  {locales.entries.Lcz_NoPreference}\r\n                </option>\r\n                {this.bedPreferenceType.map(data => (\r\n                  <option value={data.CODE_NAME} selected={this.guestData.preference === data.CODE_NAME}>\r\n                    {data.CODE_VALUE_EN}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div class=\"\">{getCurrencySymbol(this.currency.code) + this.guestInfo.rate}</div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}