{"version":3,"file":"igl-application-info.js","sourceRoot":"","sources":["../../../../src/components/igloo-calendar/igl-application-info/igl-application-info.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  Watch,\r\n  State,\r\n} from \"@stencil/core\";\r\nimport { v4 } from \"uuid\";\r\n\r\n@Component({\r\n  tag: \"igl-application-info\",\r\n  styleUrl: \"igl-application-info.css\",\r\n  scoped: true,\r\n})\r\nexport class IglApplicationInfo {\r\n  @Prop() guestInfo: { [key: string]: any };\r\n  @Prop({ reflect: true, mutable: true }) roomsList: { [key: string]: any }[] =\r\n    [];\r\n  @Prop() guestRefKey: string;\r\n  @Prop() bedPreferenceType = [];\r\n  @Prop() selectedUnits: number[] = [];\r\n  @Prop() bookingType: string = \"PLUS_BOOKING\";\r\n  @Prop() index: number;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() filterdRoomList = [];\r\n  private guestData: { [key: string]: any };\r\n\r\n  componentWillLoad() {\r\n    this.guestData = this.guestInfo ? { ...this.guestInfo } : {};\r\n    this.updateRoomList();\r\n  }\r\n  @Watch(\"selectedUnits\")\r\n  async handleSelctedUnits() {\r\n    this.updateRoomList();\r\n  }\r\n  updateRoomList() {\r\n    const units = [...this.selectedUnits];\r\n    units[this.index] = -1;\r\n    this.filterdRoomList = this.roomsList.filter((e) => !units.includes(e.id));\r\n  }\r\n  updateData() {\r\n    this.dataUpdateEvent.emit({\r\n      key: \"roomRatePlanUpdate\",\r\n      guestRefKey: this.guestRefKey,\r\n      data: { ...this.guestData },\r\n    });\r\n  }\r\n\r\n  handleDataChange(key, value) {\r\n    this.guestData[key] = value;\r\n    if (key === \"roomId\") {\r\n      this.guestData[\"roomName\"] =\r\n        this.filterdRoomList.find((room) => room.id === value).name || \"\";\r\n    }\r\n    this.updateData();\r\n  }\r\n\r\n  handleGuestNameChange(event) {\r\n    // console.log(\"On Guest name Change::\", event.target.value);\r\n    this.guestData.guestName = event.target.value;\r\n    this.updateData();\r\n  }\r\n\r\n  render() {\r\n    //console.log(this.guestInfo, this.roomsList);\r\n    return (\r\n      <Host>\r\n        <div class=\"text-left mt-1\">\r\n          <div class=\"ml-1 mb-1\">\r\n            {this.bookingType === \"PLUS_BOOKING\" ||\r\n            this.bookingType === \"ADD_ROOM\" ||\r\n            this.bookingType === \"EDIT_BOOKING\" ? (\r\n              <span class=\"h5\">{this.guestInfo.roomCategoryName}</span>\r\n            ) : null}\r\n            <span class=\"ml-1 font-weight-bold\">\r\n              {this.guestInfo.ratePlanName.replace(\r\n                this.guestInfo.roomCategoryName + \"/\",\r\n                \"\"\r\n              )}\r\n              <ir-tooltip\r\n                class=\"ml-1 mr-1\"\r\n                message={this.guestInfo.cancelation + this.guestInfo.guarantee}\r\n              ></ir-tooltip>\r\n            </span>\r\n            <span>{this.guestInfo.adult_child_offering}</span>\r\n          </div>\r\n\r\n          <div class=\"row m-0 p-0 align-items-center\">\r\n            <div class=\"col-5\">\r\n              <input\r\n                id={v4()}\r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                placeholder=\"Guest first name & last name\"\r\n                name=\"guestName\"\r\n                onInput={(event) => this.handleGuestNameChange(event)}\r\n                required\r\n                value={this.guestData.guestName}\r\n              />\r\n            </div>\r\n            {this.bookingType === \"PLUS_BOOKING\" ||\r\n            this.bookingType === \"ADD_ROOM\" ||\r\n            this.bookingType === \"EDIT_BOOKING\" ? (\r\n              <div class=\"col-2 p-0\">\r\n                <select\r\n                  class=\"form-control input-sm pr-0\"\r\n                  id={v4()}\r\n                  onChange={(event) =>\r\n                    this.handleDataChange(\r\n                      \"roomId\",\r\n                      parseInt((event.target as HTMLInputElement).value)\r\n                    )\r\n                  }\r\n                >\r\n                  <option value=\"\" selected={this.guestData.roomId === \"\"}>\r\n                    Assign units\r\n                  </option>\r\n                  {this.filterdRoomList.map((room) => (\r\n                    <option\r\n                      value={room.id}\r\n                      selected={this.guestData.roomId === room.id}\r\n                    >\r\n                      {room.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            ) : null}\r\n\r\n            <div class=\"col-3\">\r\n              <select\r\n                class=\"form-control input-sm\"\r\n                id={v4()}\r\n                onChange={(event) =>\r\n                  this.handleDataChange(\r\n                    \"preference\",\r\n                    (event.target as HTMLInputElement).value\r\n                  )\r\n                }\r\n              >\r\n                <option value=\"\" selected={this.guestData.preference === \"\"}>\r\n                  No preference\r\n                </option>\r\n                {this.bedPreferenceType.map((data) => (\r\n                  <option\r\n                    value={data.CODE_NAME}\r\n                    selected={this.guestData.preference === data.CODE_NAME}\r\n                  >\r\n                    {data.CODE_VALUE_EN}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div class=\"col-2\">${this.guestInfo.rate}</div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}