{"version":3,"file":"ir-guest-info.js","sourceRoot":"","sources":["../../../src/components/ir-guest-info/ir-guest-info.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, State, h, Prop, EventEmitter, Event } from '@stencil/core';\r\nimport { selectOption } from '@/common/models';\r\nimport { Guest } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { ICountry } from '@/components';\r\nimport { ILocale } from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'ir-guest-info',\r\n  styleUrl: 'ir-guest-info.css',\r\n  scoped: true,\r\n})\r\nexport class GuestInfo {\r\n  @Prop({ mutable: true, reflect: true }) setupDataCountries: selectOption[] = null;\r\n  @Prop({ mutable: true, reflect: true }) setupDataCountriesCode: selectOption[] = null;\r\n  @Prop() defaultTexts: ILocale;\r\n  @Prop() language: string;\r\n  @Prop() email: string;\r\n  @Prop() booking_nbr: string;\r\n\r\n  @State() countries: ICountry[];\r\n  @State() submit: boolean = false;\r\n  @State() guest: Guest | null = null;\r\n  @State() isLoading: boolean = false;\r\n  @Event() closeSideBar: EventEmitter<null>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  async componentWillLoad() {\r\n    await this.init();\r\n  }\r\n  async init() {\r\n    try {\r\n      const [guest, countries] = await Promise.all([this.bookingService.fetchGuest(this.email), this.bookingService.getCountries(this.language)]);\r\n      this.countries = countries;\r\n      this.guest = guest;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  handleInputChange(key: keyof Guest, value: any) {\r\n    this.guest = { ...this.guest, [key]: value };\r\n  }\r\n\r\n  async editGuest() {\r\n    try {\r\n      this.isLoading = true;\r\n      await this.bookingService.editExposedGuest(this.guest, this.booking_nbr);\r\n      this.closeSideBar.emit(null);\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n      console.log('done');\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.guest) {\r\n      return null;\r\n    }\r\n    return [\r\n      <div class=\"p-0\">\r\n        <div class=\"position-sticky mb-1 shadow-none p-0\">\r\n          <div class=\"d-flex align-items-center justify-content-between ir-card-header py-1 p-0\">\r\n            <h3 class=\"card-title text-left font-medium-2 px-1 my-0\">{this.defaultTexts.entries.Lcz_GuestDetails}</h3>\r\n            <ir-icon\r\n              class=\"close close-icon px-1\"\r\n              onIconClickHandler={() => {\r\n                this.closeSideBar.emit(null);\r\n              }}\r\n            >\r\n              <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n                <path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\" />\r\n              </svg>\r\n            </ir-icon>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content collapse show\">\r\n          <div class=\"card-body pt-0 px-1\">\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_FirstName}\r\n              name=\"firstName\"\r\n              submited={this.submit}\r\n              value={this.guest?.first_name}\r\n              required\r\n              onTextChange={e => this.handleInputChange('first_name', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_LastName}\r\n              name=\"lastName\"\r\n              submited={this.submit}\r\n              value={this.guest?.last_name}\r\n              required\r\n              onTextChange={e => this.handleInputChange('last_name', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_Email}\r\n              name=\"email\"\r\n              submited={this.submit}\r\n              value={this.guest?.email}\r\n              required\r\n              onTextChange={e => this.handleInputChange('email', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_AlternativeEmail}\r\n              name=\"altEmail\"\r\n              value={this.guest?.alternative_email}\r\n              onTextChange={e => this.handleInputChange('alternative_email', e.detail)}\r\n            ></ir-input-text>\r\n            {/* <ir-input-text label=\"Password\" placeholder=\"\" name=\"password\" submited={this.submit} type=\"password\" value={this.Model.password} required></ir-input-text> */}\r\n            <ir-select\r\n              selectContainerStyle=\"mb-1\"\r\n              required\r\n              name=\"country\"\r\n              submited={this.submit}\r\n              label={this.defaultTexts.entries.Lcz_Country}\r\n              selectedValue={this.guest.country_id?.toString() ?? ''}\r\n              data={this.countries.map(item => {\r\n                return {\r\n                  value: item.id.toString(),\r\n                  text: item.name,\r\n                };\r\n              })}\r\n              firstOption={'...'}\r\n              onSelectChange={e => this.handleInputChange('country_id', e.detail)}\r\n            ></ir-select>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_City}\r\n              name=\"city\"\r\n              value={this.guest.city}\r\n              onTextChange={e => this.handleInputChange('city', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_Address}\r\n              name=\"address\"\r\n              value={this.guest.address}\r\n              onTextChange={e => this.handleInputChange('address', e.detail)}\r\n            ></ir-input-text>\r\n\r\n            <div class=\"form-group mr-0\">\r\n              <div class=\"input-group row m-0 p-0\">\r\n                <div class={`input-group-prepend col-3 p-0 text-dark border-none`}>\r\n                  <label class={`input-group-text  border-theme flex-grow-1 text-dark  `}>\r\n                    {this.defaultTexts.entries.Lcz_MobilePhone}\r\n                    {'*'}\r\n                  </label>\r\n                </div>\r\n                <select\r\n                  class={` form-control text-md  col-2 py-0 mobilePrefixSelect`}\r\n                  onInput={e => this.handleInputChange('country_id', (e.target as HTMLSelectElement).value)}\r\n                  required\r\n                >\r\n                  <option value={null}>...</option>\r\n                  {this.countries.map(item => (\r\n                    <option selected={this.guest.country_id?.toString() === item.id.toString()} value={item.id}>\r\n                      {item.phone_prefix}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <input\r\n                  type=\"text\"\r\n                  required\r\n                  value={this.guest.mobile}\r\n                  class={'form-control flex-fill mobilePrefixInput'}\r\n                  onInput={e => this.handleInputChange('mobile', (e.target as HTMLInputElement).value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class={'p-0 m-0'}>\r\n              <label class={`check-container m-0 p-0`}>\r\n                <input\r\n                  class={'m-0 p-0'}\r\n                  type=\"checkbox\"\r\n                  name=\"newsletter\"\r\n                  checked={this.guest.subscribe_to_news_letter}\r\n                  onInput={e => this.handleInputChange('subscribe_to_news_letter', (e.target as HTMLInputElement).checked)}\r\n                />\r\n                <span class=\"checkmark m-0 p-0\"></span>\r\n                <span class={'m-0 p-0  check-label'}>{this.defaultTexts.entries.Lcz_Newsletter}</span>\r\n              </label>\r\n            </div>\r\n\r\n            <hr />\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              btn_disabled={this.isLoading}\r\n              btn_styles=\"d-flex align-items-center justify-content-center\"\r\n              text={this.defaultTexts.entries.Lcz_Save}\r\n              onClickHanlder={this.editGuest.bind(this)}\r\n              color=\"btn-primary\"\r\n            ></ir-button>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n"]}