{"version":3,"file":"ir-general-settings.js","sourceRoot":"","sources":["../../../../src/components/ir-channel/ir-general-settings/ir-general-settings.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop, State, Event, EventEmitter, Watch } from '@stencil/core';\r\nimport { ChannelManager } from '../../../sample/channel/data';\r\nimport { selectOption } from '../../../common/models';\r\n@Component({\r\n  tag: 'ir-general-settings',\r\n})\r\nexport class IrGeneralSettings {\r\n  @State() testLoader: boolean = false;\r\n  @Prop() mode: string;\r\n  @Prop() allowed_channels   : selectOption[] = [];\r\n  @Prop() allowed_properties : selectOption[] = [];\r\n  @Prop() allowed_MinStayTypes : selectOption[] = [];\r\n  @Prop({ reflect: true, mutable: true }) connectionStatus: string = 'Not connected';\r\n  @Prop({ reflect: true, mutable: true }) data: ChannelManager = {\r\n    id: '123456',\r\n    channel: 'Channel Name',\r\n    status: 'Active',\r\n    //group: 'Group',\r\n    title: 'Title',\r\n    property: 'Property',\r\n    minimumStay: 'Arrival',\r\n    hotelId: 'hotelId',\r\n    RoomsMapping: null,\r\n  };\r\n  @State() selectedChannel: string = '';\r\n  @State() connected: boolean = false;\r\n  @Event({ bubbles: true, composed: true }) sendToParent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) connectionOff: EventEmitter;\r\n\r\n  @Watch('data')\r\n  watchHandler(newValue: any) {\r\n    this.selectedChannel = newValue.channel;\r\n  }\r\n\r\n  @Watch('mode')\r\n  modewatchHandler(newValue: any) {\r\n    if (newValue === 'edit') {\r\n      this.connected = true;\r\n      this.connectionStatus = 'Connected';\r\n      this.sendToParent.emit(this.data);\r\n    }\r\n  }\r\n\r\n  componentDidLoad() {\r\n    const channelSelect = document.querySelector('ir-select.channel-select');\r\n    channelSelect.addEventListener('selectChange', (event: CustomEvent) => {\r\n      this.connected = false;\r\n      this.selectedChannel = event.detail;\r\n      this.data = {...this.data,channel: event.detail};\r\n      this.sendToParent.emit(this.data);\r\n    });\r\n\r\n    const titleInput = document.querySelector('ir-input-text#title-input');\r\n    titleInput.addEventListener('textChange', (event: CustomEvent) => {\r\n      this.connected = false;\r\n      this.connectionOff.emit();\r\n      this.data = { ...this.data, title: event.detail };\r\n      this.sendToParent.emit(this.data);\r\n    });\r\n\r\n    const propertySelect = document.querySelector('ir-select#property-select');\r\n    propertySelect.addEventListener('selectChange', (event: CustomEvent) => {\r\n      this.connected = false;\r\n      this.connectionOff.emit();\r\n      this.data = { ...this.data, property: event.detail };\r\n      this.sendToParent.emit(this.data);\r\n    });\r\n\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    // const hotelID = document.querySelector('ir-input-text#hotel-id');\r\n    // hotelID.addEventListener('textChange', (event: CustomEvent) => {\r\n    //   this.connected = false;\r\n    //   this.connectionOff.emit();\r\n    //   this.connectionStatus = 'Not connected';\r\n    //   this.data = {\r\n    //     ...this.data,\r\n    //     hotelId: event.detail.trim(),\r\n    //   };\r\n    // });\r\n\r\n    // const minimumStay = document.querySelector('ir-select#minimum-stay-select');\r\n    // minimumStay.addEventListener('selectChange', (event: CustomEvent) => {\r\n    //   this.connected = false;\r\n    //   this.connectionOff.emit();\r\n    //   this.data = {\r\n    //     ...this.data,\r\n    //     minimumStay: event.detail.trim(),\r\n    //   };\r\n    // });\r\n\r\n    const channelSelect = document.querySelector('ir-select.channel-select');\r\n    channelSelect.addEventListener('selectChange', (event: CustomEvent) => {\r\n      this.connected = false;\r\n      this.connectionOff.emit();\r\n      this.selectedChannel = event.detail;\r\n      this.data = {\r\n        ...this.data,\r\n        channel: event.detail,\r\n      };\r\n      this.sendToParent.emit(this.data);\r\n    });\r\n\r\n    // const groupSelect = document.querySelector('ir-select#group-select');\r\n    // groupSelect.addEventListener('selectChange', (event: CustomEvent) => {\r\n    //   this.connected = false;\r\n    //   this.connectionOff.emit();\r\n    //   this.data = { ...this.data, group: event.detail };\r\n    // });\r\n\r\n    const titleInput = document.querySelector('ir-input-text#title-input');\r\n    titleInput.addEventListener('textChange', (event: CustomEvent) => {\r\n      this.connected = false;\r\n      this.connectionOff.emit();\r\n      this.data = { ...this.data, title: event.detail };\r\n      this.sendToParent.emit(this.data);\r\n    });\r\n\r\n    const propertySelect = document.querySelector('ir-select#property-select');\r\n    propertySelect.addEventListener('selectChange', (event: CustomEvent) => {\r\n      this.connected = false;\r\n      this.connectionOff.emit();\r\n      this.data = { ...this.data, property: event.detail };\r\n      this.sendToParent.emit(this.data);\r\n    });\r\n  }\r\n\r\n  testConnection() {\r\n    // check if all data is filled\r\n    if (!this.data.hotelId) {\r\n      const alertModal: any = document.querySelector('ir-modal.alertFields');\r\n      alertModal.openModal();\r\n    } else {\r\n      this.testLoader = true;\r\n      setTimeout(() => {\r\n        this.testLoader = false;\r\n        if (this.data.hotelId == '123456') {\r\n          this.connected = true;\r\n          this.connectionStatus = ' Connected';\r\n\r\n          this.sendToParent.emit(this.data);\r\n        } else {\r\n          this.connected = false;\r\n        }\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return [\r\n      <div class=\"General Settings font-size-small\">\r\n        <div class=\"container-fluid\">\r\n          {this.mode == 'edit' && <div class=\"text-light border-bottom-light mb-2\">{`ID ${this.data.id}`}</div>}\r\n          <div class=\"column\">\r\n            <ir-select\r\n              class=\"channel-select\"\r\n              label=\"Channel\"\r\n              data={this.allowed_channels}\r\n              label-background=\"white\"\r\n              label-position=\"right\"\r\n              label-border=\"none\"\r\n              size=\"sm\"\r\n              textSize=\"sm\"\r\n              labelWidth={4}\r\n              selectedValue={this.data !== null ? this.data.channel : null}\r\n            />\r\n            {/* <ir-select\r\n              id=\"group-select\"\r\n              label=\"Group\"\r\n              // placeholder=\"Group\"\r\n              data={[{ value: 'all', text: 'All' }]}\r\n              label-background=\"white\"\r\n              label-position=\"right\"\r\n              label-border=\"none\"\r\n              size=\"sm\"\r\n              textSize=\"sm\"\r\n              labelWidth={4}\r\n              selectedValue={this.data !== null ? this.data.group : null}\r\n            /> */}\r\n            <ir-input-text\r\n              id=\"title-input\"\r\n              label=\"Title\"\r\n              placeholder=\"Title\"\r\n              value={this.data !== null ? this.data.title : null}\r\n              label-background=\"white\"\r\n              label-position=\"right\"\r\n              label-border=\"none\"\r\n              size=\"sm\"\r\n              labelWidth={4}\r\n            />\r\n            <ir-select\r\n              id=\"property-select\"\r\n              label=\"Propery\"\r\n              // placeholder=\"Propery\"\r\n              data={this.allowed_properties}\r\n              label-background=\"white\"\r\n              label-position=\"right\"\r\n              label-border=\"none\"\r\n              size=\"sm\"\r\n              textSize=\"sm\"\r\n              labelWidth={4}\r\n              selectedValue={this.data !== null ? this.data.property : null}\r\n            />\r\n          </div>\r\n        </div>\r\n        {/* {this.selectedChannel && (\r\n          <div class=\"container-fluid mt-1\">\r\n            <div class=\"text-light border-bottom-light mb-2\">Connection Settings</div>\r\n            <div class=\"row\">\r\n              <ir-input-text\r\n                id={'hotel-id'}\r\n                label=\"Hotel ID\"\r\n                placeholder=\"Hotel ID\"\r\n                value={this.data !== null ? this.data.hotelId : null}\r\n                label-background=\"white\"\r\n                label-position=\"right\"\r\n                label-border=\"none\"\r\n                size=\"sm\"\r\n                labelWidth={4}\r\n                class=\"col-12\"\r\n              />\r\n              <ir-select\r\n                id=\"minimum-stay-select\"\r\n                label=\"Minimum Stay Type\"\r\n                data={this.allowed_MinStayTypes}\r\n                label-background=\"white\"\r\n                label-position=\"right\"\r\n                label-border=\"none\"\r\n                size=\"sm\"\r\n                textSize=\"sm\"\r\n                class=\"col-12\"\r\n                labelWidth={4}\r\n                selectedValue={this.data !== null ? this.data.minimumStay : null}\r\n              />\r\n              <div class=\"col-12 pb-1 \">\r\n                <div class=\"row\">\r\n                  <div class=\"col-4\"></div>\r\n                  <div class=\"col-8 d-flex justify-content-between align-items-center\">\r\n                    <div>\r\n                      {this.testLoader ? (\r\n                        <ir-loader size=\"xs\"></ir-loader>\r\n                      ) : (\r\n                        <span>\r\n                          <ir-icon class=\"test-icon\" icon={this.connected ? 'ft-check-circle success' : 'ft-alert-triangle warning'}></ir-icon>\r\n                          {this.connected ? 'Connected' : 'Not Connected'}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    {!this.connected && (\r\n                      <button onClick={() => this.testConnection()} class=\"btn btn-white border-light btn-sm text-dark \">\r\n                        Test Connection\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )} */}\r\n      </div>,\r\n      <ir-modal\r\n        class=\"alertFields\"\r\n        modalTitle=\"Please fill all the fields!\"\r\n        modalBody=\"There are fields that are not filled yet.\"\r\n        iconAvailable={true}\r\n        icon=\"ft-alert-circle warning h1\"\r\n        leftBtnActive={false}\r\n        btnPosition=\"center\"\r\n        rightBtnText=\"Close\"\r\n        rightBtnColor=\"primary\"\r\n      ></ir-modal>,\r\n    ];\r\n  }\r\n}\r\n"]}