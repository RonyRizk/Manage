{"version":3,"file":"ir-channel-general.js","sourceRoot":"","sources":["../../../../src/components/ir-channel/ir-channel-general/ir-channel-general.tsx"],"names":[],"mappings":"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","sourcesContent":["import channels_data, { selectChannel, testConnection, updateChannelSettings } from '@/stores/channel.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Host, Prop, State, h, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-channel-general',\r\n  styleUrl: 'ir-channel-general.css',\r\n  scoped: true,\r\n})\r\nexport class IrChannelGeneral {\r\n  @Prop() channel_status: 'create' | 'edit' | null = null;\r\n\r\n  @State() buttonClicked: boolean = false;\r\n  @State() connection_status_message = '';\r\n  @State() status: boolean = false;\r\n  @Event() connectionStatus: EventEmitter<boolean>;\r\n  componentWillLoad() {\r\n    if (this.channel_status !== 'create' || !channels_data.isConnectedToChannel) {\r\n      return;\r\n    }\r\n    this.connection_status_message = channels_data.isConnectedToChannel ? locales.entries?.Lcz_ConnectedChannel : '';\r\n    this.status = true;\r\n  }\r\n  handleTestConnectionClicked(e: Event) {\r\n    e.preventDefault();\r\n    this.buttonClicked = true;\r\n    if (this.channel_status !== 'create' || !channels_data.channel_settings?.hotel_id || channels_data.isConnectedToChannel) {\r\n      return;\r\n    }\r\n    const status = testConnection();\r\n    this.status = status;\r\n    this.connection_status_message = status ? locales.entries?.Lcz_ConnectedChannel : locales.entries?.Lcz_IncorrectConnection;\r\n    this.buttonClicked = false;\r\n    this.connectionStatus.emit(this.status);\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class=\"px-1\">\r\n        <section class=\"ml-18\">\r\n          <fieldset class=\"d-flex align-items-center\">\r\n            <label htmlFor=\"hotel_channels\" class=\"m-0 p-0 label-style\">\r\n              {locales.entries?.Lcz_Channel}\r\n            </label>\r\n            <ir-combobox\r\n              input_id=\"hotel_channels\"\r\n              disabled={channels_data.isConnectedToChannel}\r\n              class=\"flex-fill\"\r\n              value={channels_data.selectedChannel?.name}\r\n              onComboboxValueChange={(e: CustomEvent) => {\r\n                selectChannel(e.detail.data.toString());\r\n              }}\r\n              data={\r\n                channels_data.channels.map(channel => ({\r\n                  id: channel.id,\r\n                  name: channel.name,\r\n                })) as any\r\n              }\r\n            ></ir-combobox>\r\n          </fieldset>\r\n          <fieldset class=\"d-flex align-items-center mt-1\">\r\n            <label htmlFor=\"hotel_title\" class=\"m-0 p-0 label-style\">\r\n              {locales.entries?.Lcz_Title}\r\n            </label>\r\n            <div class=\"flex-fill\">\r\n              <input\r\n                id=\"hotel_title\"\r\n                value={channels_data.channel_settings?.hotel_title}\r\n                onInput={e => updateChannelSettings('hotel_title', (e.target as HTMLInputElement).value)}\r\n                class=\"form-control  flex-fill\"\r\n              />\r\n            </div>\r\n          </fieldset>\r\n        </section>\r\n        {channels_data.selectedChannel && (\r\n          <form onSubmit={this.handleTestConnectionClicked.bind(this)} class=\"mt-3 connection-container\">\r\n            <h3 class=\"text-left font-medium-2  py-0 my-0 connection-title py-1 mb-2\">{locales.entries?.Lcz_ConnectionSettings}</h3>\r\n            <div class=\"ml-18\">\r\n              <fieldset class=\"d-flex align-items-center my-1\">\r\n                <label htmlFor=\"hotel_id\" class=\"m-0 p-0 label-style\">\r\n                  {locales.entries?.Lcz_HotelID}\r\n                </label>\r\n                <div class=\"flex-fill\">\r\n                  <input\r\n                    id=\"hotel_id\"\r\n                    disabled={channels_data.isConnectedToChannel}\r\n                    class={`form-control  flex-fill bg-white ${this.buttonClicked && !channels_data.channel_settings?.hotel_id && 'border-danger'}`}\r\n                    value={channels_data.channel_settings?.hotel_id}\r\n                    onInput={e => updateChannelSettings('hotel_id', (e.target as HTMLInputElement).value)}\r\n                  />\r\n                </div>\r\n              </fieldset>\r\n              <div class={'connection-testing-container'}>\r\n                <div class=\"d-flex align-items-center\">\r\n                  {this.connection_status_message &&\r\n                    (this.status ? (\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"12\" viewBox=\"0 0 512 512\">\r\n                        <path\r\n                          fill=\"var(--green)\"\r\n                          d=\"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L369 209z\"\r\n                        />\r\n                      </svg>\r\n                    ) : (\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"12\" width=\"12\" viewBox=\"0 0 512 512\">\r\n                        <path\r\n                          fill=\"var(--yellow)\"\r\n                          d=\"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z\"\r\n                        />\r\n                      </svg>\r\n                    ))}\r\n                  <span>{this.connection_status_message}</span>\r\n                </div>\r\n                <button class=\"btn btn-outline-secondary btn-sm\" type=\"submit\">\r\n                  {locales.entries?.Lcz_TestConnection}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}