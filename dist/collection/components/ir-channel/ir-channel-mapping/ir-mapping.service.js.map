{"version":3,"file":"ir-mapping.service.js","sourceRoot":"","sources":["../../../../src/components/ir-channel/ir-channel-mapping/ir-mapping.service.ts"],"names":[],"mappings":"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","sourcesContent":["import calendar_data from '@/stores/calendar-data';\r\nimport channels_data from '@/stores/channel.store';\r\n\r\nexport class IrMappingService {\r\n  public checkMappingExists(id: string, isRoomType: boolean, roomTypeId?: string) {\r\n    const mapped_id = channels_data.mappedChannel.find(m => m.channel_id === id);\r\n    if (!mapped_id) {\r\n      return undefined;\r\n    }\r\n    if (isRoomType) {\r\n      return calendar_data.roomsInfo.find(room => room.id.toString() === mapped_id.ir_id);\r\n    }\r\n    if (!roomTypeId) {\r\n      throw new Error('Missing room type id');\r\n    }\r\n    const findRoomTypeId = channels_data.mappedChannel.find(m => m.channel_id.toString() === roomTypeId);\r\n\r\n    const room_type = calendar_data.roomsInfo.find(room => room.id.toString() === findRoomTypeId.ir_id);\r\n    if (!room_type) {\r\n      throw new Error('Invalid Room type');\r\n    }\r\n    return room_type.rateplans.find(r => r.id.toString() === mapped_id.ir_id);\r\n  }\r\n\r\n  public getAppropriateRooms(isRoomType: boolean, roomTypeId?: string) {\r\n    if (isRoomType) {\r\n      const filteredRoomTypes = calendar_data.roomsInfo.filter(\r\n        room => channels_data.mappedChannel.find(m => m.ir_id.toString() === room.id.toString()) === undefined && room.is_active,\r\n      );\r\n      return filteredRoomTypes.map(room => ({ id: room.id.toString(), name: room.name }));\r\n    }\r\n    if (!roomTypeId) {\r\n      throw new Error('Missing roomType id');\r\n    }\r\n    const findRoomTypeId = channels_data.mappedChannel.find(m => m.channel_id.toString() === roomTypeId);\r\n    if (!findRoomTypeId) {\r\n      throw new Error('Invalid room type id');\r\n    }\r\n    const selectedRoomType = calendar_data.roomsInfo.find(room => room.id.toString() === findRoomTypeId.ir_id);\r\n    return selectedRoomType.rateplans\r\n      .filter(rate_plan => channels_data.mappedChannel.find(r => rate_plan.id.toString() === r.ir_id) === undefined)\r\n      .map(rate_plan => ({\r\n        id: rate_plan.id.toString(),\r\n        name: rate_plan.name,\r\n      }));\r\n  }\r\n}\r\n"]}