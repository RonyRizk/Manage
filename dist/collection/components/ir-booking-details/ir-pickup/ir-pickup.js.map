{"version":3,"file":"ir-pickup.js","sourceRoot":"","sources":["../../../../src/components/ir-booking-details/ir-pickup/ir-pickup.tsx"],"names":[],"mappings":"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","sourcesContent":["import calendar_data from '@/stores/calendar-data';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Element, Event, EventEmitter, Fragment, Host, Prop, State, h } from '@stencil/core';\r\nimport { TPickupData } from './types';\r\nimport moment from 'moment';\r\nimport { IAllowedOptions } from '@/models/calendarData';\r\nimport { PickupService } from './pickup.service';\r\nimport { IBookingPickupInfo } from '@/models/booking.dto';\r\n\r\n@Component({\r\n  tag: 'ir-pickup',\r\n  styleUrl: 'ir-pickup.css',\r\n  scoped: true,\r\n})\r\nexport class IrPickup {\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop() defaultPickupData: IBookingPickupInfo | null;\r\n  @Prop() numberOfPersons: number = 0;\r\n  @Prop() bookingNumber: string;\r\n\r\n  @State() isLoading = false;\r\n  @State() allowedOptionsByLocation: IAllowedOptions[] = [];\r\n  @State() pickupData: TPickupData = {\r\n    location: -1,\r\n    flight_details: '',\r\n    due_upon_booking: '',\r\n    number_of_vehicles: 1,\r\n    vehicle_type_code: '',\r\n    currency: undefined,\r\n    arrival_time: '',\r\n    arrival_date: moment().format('YYYY-MM-DD'),\r\n    selected_option: undefined,\r\n  };\r\n  @State() vehicleCapacity: number[] = [];\r\n  @State() cause: keyof TPickupData | null = null;\r\n\r\n  @Event() closeModal: EventEmitter<null>;\r\n  @Event() resetBookingData: EventEmitter<null>;\r\n\r\n  private pickupService = new PickupService();\r\n\r\n  componentWillLoad() {\r\n    if (this.defaultPickupData) {\r\n      const transformedData = this.pickupService.transformDefaultPickupData(this.defaultPickupData);\r\n      this.vehicleCapacity = this.pickupService.getNumberOfVehicles(transformedData.selected_option.vehicle.capacity, this.numberOfPersons);\r\n      this.allowedOptionsByLocation = calendar_data.pickup_service.allowed_options.filter(option => option.location.id === transformedData.location);\r\n      this.pickupData = { ...transformedData };\r\n    }\r\n  }\r\n  handleLocationChange(event: CustomEvent) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const value = event.detail;\r\n    if (value === '') {\r\n      this.updatePickupData('location', -1);\r\n    }\r\n    if (value !== '') {\r\n      this.allowedOptionsByLocation = calendar_data.pickup_service.allowed_options.filter(option => option.location.id.toString() === value);\r\n      let locationChoice = this.allowedOptionsByLocation[0];\r\n      if (!locationChoice) {\r\n        return;\r\n      }\r\n      locationChoice.currency;\r\n      this.vehicleCapacity = this.pickupService.getNumberOfVehicles(locationChoice.vehicle.capacity, this.numberOfPersons);\r\n      this.pickupData = {\r\n        ...this.pickupData,\r\n        location: value,\r\n        selected_option: locationChoice,\r\n        number_of_vehicles: this.vehicleCapacity[0],\r\n        due_upon_booking: this.pickupService\r\n          .updateDue({\r\n            amount: locationChoice.amount,\r\n            code: locationChoice.pricing_model.code,\r\n            numberOfPersons: this.numberOfPersons,\r\n            number_of_vehicles: this.vehicleCapacity[0],\r\n          })\r\n          .toFixed(2),\r\n        vehicle_type_code: locationChoice.vehicle.code,\r\n        currency: locationChoice.currency,\r\n        // number_of_vehicles:this.pickupService\r\n      };\r\n      const input = this.el.querySelector('#pickup-time');\r\n      if (!input) {\r\n        setTimeout(() => {\r\n          this.initializeInputMask();\r\n        }, 100);\r\n      }\r\n    }\r\n  }\r\n  initializeInputMask() {\r\n    const input = this.el.querySelector('#pickup-time');\r\n    // if (this.pickupData) {\r\n    //   (input as HTMLInputElement).value = this.pickupData.arrival_time;\r\n    // }\r\n    if (input) {\r\n      Inputmask('Hh:mm', {\r\n        placeholder: 'HH:mm',\r\n        definitions: {\r\n          H: {\r\n            validator: '[0-1]',\r\n          },\r\n          h: {\r\n            validator: '[0-9]',\r\n          },\r\n          M: {\r\n            validator: '[0-5]',\r\n          },\r\n          m: {\r\n            validator: '[0-9]',\r\n          },\r\n        },\r\n        insertMode: true,\r\n        showMaskOnHover: false,\r\n        inputmode: 'numeric',\r\n        alias: 'datetime',\r\n        oncomplete: () => {\r\n          this.updatePickupData('arrival_time', (input as any).value);\r\n        },\r\n        oncleared: () => {\r\n          this.updatePickupData('arrival_time', '');\r\n        },\r\n        onincomplete: () => {\r\n          this.updatePickupData('arrival_time', (input as any).value);\r\n        },\r\n      }).mask(input as HTMLElement);\r\n    }\r\n  }\r\n  handleVehicleQuantityChange(e: CustomEvent) {\r\n    if (e.detail === '') {\r\n      return;\r\n    }\r\n    const value = +e.detail;\r\n    this.pickupData = {\r\n      ...this.pickupData,\r\n      number_of_vehicles: value,\r\n      due_upon_booking: this.pickupService\r\n        .updateDue({\r\n          amount: this.pickupData.selected_option.amount,\r\n          code: this.pickupData.selected_option.pricing_model.code,\r\n          numberOfPersons: this.numberOfPersons,\r\n          number_of_vehicles: value,\r\n        })\r\n        .toFixed(2),\r\n    };\r\n  }\r\n  componentDidLoad() {\r\n    if (this.defaultPickupData) {\r\n      this.initializeInputMask();\r\n    }\r\n  }\r\n  handleVehicleTypeChange(e: CustomEvent) {\r\n    if (e.detail === '') {\r\n      this.pickupData = {\r\n        ...this.pickupData,\r\n        due_upon_booking: '',\r\n        vehicle_type_code: '',\r\n      };\r\n      return;\r\n    }\r\n    let locationChoice = calendar_data.pickup_service.allowed_options.find(option => option.location.id === +this.pickupData.location && option.vehicle.code === e.detail);\r\n    if (!locationChoice) {\r\n      return;\r\n    }\r\n    this.vehicleCapacity = [...this.pickupService.getNumberOfVehicles(locationChoice.vehicle.capacity, this.numberOfPersons)];\r\n    this.pickupData = {\r\n      ...this.pickupData,\r\n      selected_option: locationChoice,\r\n      number_of_vehicles: this.vehicleCapacity[0],\r\n      due_upon_booking: this.pickupService\r\n        .updateDue({\r\n          amount: locationChoice.amount,\r\n          code: locationChoice.pricing_model.code,\r\n          numberOfPersons: this.numberOfPersons,\r\n          number_of_vehicles: this.vehicleCapacity[0],\r\n        })\r\n        .toFixed(2),\r\n      vehicle_type_code: locationChoice.vehicle.code,\r\n    };\r\n  }\r\n\r\n  updatePickupData(key: keyof TPickupData, value: any) {\r\n    this.pickupData = { ...this.pickupData, [key]: value };\r\n  }\r\n  async savePickup() {\r\n    try {\r\n      this.isLoading = true;\r\n      const isValid = this.pickupService.validateForm(this.pickupData);\r\n      if (isValid.error) {\r\n        this.cause = isValid.cause;\r\n        return;\r\n      }\r\n      if (this.cause) {\r\n        this.cause = null;\r\n      }\r\n      await this.pickupService.savePickup(this.pickupData, this.bookingNumber, this.defaultPickupData !== null && this.pickupData.location === -1);\r\n      this.resetBookingData.emit(null);\r\n      this.closeModal.emit(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class={'p-0'}>\r\n        <div class=\"position-sticky mb-0 shadow-none p-0\">\r\n          <div class=\"mt-2 custom-card-container pb-1 mb-3 px-1\">\r\n            <h3 class=\"card-title p-0  m-0 text-left font-medium-2\">{locales.entries.Lcz_Pickup}</h3>\r\n            <div>\r\n              <ir-icon\r\n                class={'close m-0 p-0 '}\r\n                onIconClickHandler={() => {\r\n                  this.closeModal.emit(null);\r\n                }}\r\n              >\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" class=\"m-0 p-0\" viewBox=\"0 0 384 512\" height={20} width={20}>\r\n                  <path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\" />\r\n                </svg>\r\n              </ir-icon>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <section class={'px-1'}>\r\n          <ir-select\r\n            selectedValue={this.pickupData.location}\r\n            selectContainerStyle=\"mb-1\"\r\n            onSelectChange={this.handleLocationChange.bind(this)}\r\n            firstOption={locales.entries.Lcz_Pickup_NoThankYou}\r\n            class={'m-0 mb-1'}\r\n            LabelAvailable={false}\r\n            data={this.pickupService.getAvailableLocations(locales.entries.Lcz_Pickup_YesFrom) as any}\r\n          ></ir-select>\r\n          {this.pickupData.location > 0 && (\r\n            <Fragment>\r\n              {/*Date and Time Picker container */}\r\n              <div class={'d-flex'}>\r\n                {/*Date Picker */}\r\n                <div class=\"form-group  mr-1\">\r\n                  <div class=\"input-group row m-0\">\r\n                    <div class={`input-group-prepend col-5 p-0 text-dark border-0`}>\r\n                      <label class={`input-group-text  flex-grow-1 text-dark border-theme `}>{locales.entries.Lcz_ArrivalDate}</label>\r\n                    </div>\r\n                    <div class=\"form-control form-control-md col-7 d-flex align-items-center pl-0\">\r\n                      <ir-date-picker\r\n                        minDate={moment().format('YYYY-MM-DD')}\r\n                        autoApply\r\n                        format=\"ddd, DD M YYYY\"\r\n                        singleDatePicker\r\n                        onDateChanged={evt => {\r\n                          this.updatePickupData('arrival_date', evt.detail.start.format('YYYY-MM-DD'));\r\n                        }}\r\n                      ></ir-date-picker>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/*Time Picker */}\r\n                <div class=\"form-group\">\r\n                  <div class=\"input-group  row m-0\">\r\n                    <div class={`input-group-prepend col-4 col-sm-3 p-0 text-dark border-0`}>\r\n                      <label htmlFor=\"pickup\" class={`input-group-text flex-grow-1 text-dark border-theme`}>\r\n                        {locales.entries.Lcz_Time}\r\n                      </label>\r\n                    </div>\r\n\r\n                    <input\r\n                      type=\"text\"\r\n                      value={this.pickupData.arrival_time}\r\n                      id=\"pickup-time\"\r\n                      class={`form-control col-8 col-sm-4 ${this.cause === 'arrival_time' && 'border-danger'}`}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <ir-input-text\r\n                value={this.pickupData.flight_details}\r\n                label={locales.entries.Lcz_FlightDetails}\r\n                onTextChange={e => this.updatePickupData('flight_details', e.detail)}\r\n                placeholder=\"\"\r\n                inputStyles={this.cause === 'flight_details' ? 'border-danger' : ''}\r\n              ></ir-input-text>\r\n              <ir-select\r\n                selectContainerStyle=\"mb-1\"\r\n                selectStyles={this.cause === 'vehicle_type_code' ? 'border-danger' : ''}\r\n                onSelectChange={this.handleVehicleTypeChange.bind(this)}\r\n                firstOption={locales.entries.Lcz_Select}\r\n                selectedValue={this.pickupData.vehicle_type_code}\r\n                class={'m-0'}\r\n                LabelAvailable={false}\r\n                data={\r\n                  this.allowedOptionsByLocation.map(option => ({\r\n                    text: option.vehicle.description,\r\n                    value: option.vehicle.code,\r\n                  })) as any\r\n                }\r\n              ></ir-select>\r\n              <div class={'d-flex flex-column flex-md-row'}>\r\n                <ir-select\r\n                  labelBorder=\"theme\"\r\n                  selectContainerStyle=\"mb-1\"\r\n                  onSelectChange={this.handleVehicleQuantityChange.bind(this)}\r\n                  selectStyles={this.cause === 'number_of_vehicles' ? 'border-danger' : ''}\r\n                  selectedValue={this.pickupData.number_of_vehicles}\r\n                  labelWidth={7}\r\n                  class={'m-0  mb-md-0 mr-md-1 flex-fill'}\r\n                  label={locales.entries.Lcz_NbrOfVehicles}\r\n                  data={\r\n                    this.vehicleCapacity.map(i => ({\r\n                      text: i,\r\n                      value: i,\r\n                    })) as any\r\n                  }\r\n                ></ir-select>\r\n                <ir-input-text\r\n                  labelBorder=\"theme\"\r\n                  readonly\r\n                  value={this.pickupData.due_upon_booking}\r\n                  labelWidth={7}\r\n                  label={`${locales.entries.Lcz_DueUponBooking}  ${this.pickupData.currency.symbol}`}\r\n                  placeholder=\"\"\r\n                  class=\"\"\r\n                ></ir-input-text>\r\n              </div>\r\n            </Fragment>\r\n          )}\r\n          <div class={'d-flex flex-column flex-sm-row mt-3'}>\r\n            <ir-button\r\n              onClick={() => this.closeModal.emit(null)}\r\n              btn_styles=\"justify-content-center\"\r\n              class={`mb-1 mb-sm-0 flex-fill  ${this.defaultPickupData || this.pickupData.location !== -1 ? 'mr-sm-1' : ''}`}\r\n              icon=\"\"\r\n              text={locales.entries.Lcz_Cancel}\r\n              btn_color=\"secondary\"\r\n            ></ir-button>\r\n            {(this.defaultPickupData || this.pickupData.location !== -1) && (\r\n              <ir-button\r\n                btn_styles=\"justify-content-center align-items-center\"\r\n                class={'m-0 flex-fill text-center'}\r\n                icon=\"\"\r\n                isLoading={this.isLoading}\r\n                text={locales.entries.Lcz_Save}\r\n                btn_color=\"primary\"\r\n                onClick={this.savePickup.bind(this)}\r\n              ></ir-button>\r\n            )}\r\n          </div>\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}