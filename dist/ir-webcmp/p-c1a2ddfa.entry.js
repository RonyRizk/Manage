import{r as t,c as e,h as i,H as s,F as o,g as n}from"./p-05195efb.js";import{c as l,g as a,R as r}from"./p-e98b4421.js";import{l as c,a as d}from"./p-16d91b49.js";import{T as h}from"./p-8895efb0.js";import{d as g,l as p,m as u,n as f,o as m}from"./p-eec37187.js";import{h as b}from"./p-fe6c3d31.js";import{_ as w,a as v}from"./p-30bf9f71.js";import{B as y}from"./p-c13df6722.js";import{c as k}from"./p-e0273742.js";import{v as x}from"./p-d4c9256e.js";import"./p-9a826b1f.js";import"./p-70521dff.js";const D=".sc-igl-cal-body-h{display:block}.bodyContainer.sc-igl-cal-body{position:relative}.roomRow.sc-igl-cal-body{width:max-content}.roomRow.sc-igl-cal-body:first-child{margin-top:80px}.categoryName.sc-igl-cal-body{font-weight:bold;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.cellData.sc-igl-cal-body{width:70px;height:30px;display:inline-grid;border-top:1px solid #e0e0e0;border-left:1px solid #e0e0e0;vertical-align:top}.cellData.sc-igl-cal-body:nth-child(2){border-left:0px}.cellData.sc-igl-cal-body:last-child{border-right:1px solid #e0e0e0}.roomHeaderCell.sc-igl-cal-body{position:-webkit-sticky;position:sticky;left:0;background:#fff;border-right:1px solid #ccc;width:170px;z-index:1}.currentDay.sc-igl-cal-body{background-color:#e3f3fa}.dragOverHighlight.sc-igl-cal-body{background-color:#f5f5dc !important}.selectedDay.sc-igl-cal-body{background-color:#f9f9c9 !important}.categoryTitle.sc-igl-cal-body{grid-template-columns:1fr 20px;padding-left:10px;cursor:pointer;height:40px;font-size:0.9em}.categoryTitle.sc-igl-cal-body>.sc-igl-cal-body:nth-child(1){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.roomTitle.sc-igl-cal-body{padding-left:20px;font-size:0.9em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.roomTitle.sc-igl-cal-body>.sc-igl-cal-body:nth-child(1){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.roomTitle.pl10.sc-igl-cal-body{padding-left:10px}.categoryPriceColumn.sc-igl-cal-body{align-items:center;height:40px;-webkit-user-select:none;user-select:none}.bookingEventsContainer.sc-igl-cal-body{position:absolute;top:0;left:0}";const C=class{constructor(i){t(this,i);this.showBookingPopup=e(this,"showBookingPopup",7);this.scrollPageToRoom=e(this,"scrollPageToRoom",7);this.addBookingDatasEvent=e(this,"addBookingDatasEvent",7);this.selectedRooms={};this.fromRoomId=-1;this.currentDate=new Date;this.isScrollViewDragging=undefined;this.calendarData=undefined;this.today=undefined;this.currency=undefined;this.language=undefined;this.countryNodeList=undefined;this.dragOverElement="";this.renderAgain=false}componentWillLoad(){this.currentDate.setHours(0,0,0,0)}dragOverHighlightElementHandler(t){this.dragOverElement=t.detail.dragOverElement}gotoRoom(t){let e=t.detail.roomId;let i=this.getRoomCategoryByRoomId(e);if(!i.expanded){this.toggleCategory(i);setTimeout((()=>{this.scrollToRoom(e)}),10)}else{this.scrollToRoom(e)}}addToBeAssignedEvents(t){this.addBookingDatas(t.detail.data);this.renderElement()}scrollToRoom(t){this.scrollPageToRoom.emit({key:"scrollPageToRoom",id:t,refClass:"room_"+t})}getRoomCategoryByRoomId(t){return this.calendarData.roomsInfo.find((e=>this.getCategoryRooms(e).find((e=>this.getRoomId(e)===t))))}getCategoryName(t){return t.name}getCategoryId(t){return t.id}getTotalPhysicalRooms(t){return this.getCategoryRooms(t).length}getCategoryRooms(t){return t&&t.physicalrooms||[]}getRoomName(t){return t.name}getRoomId(t){return t.id}getRoomById(t,e){return t.find((t=>this.getRoomId(t)===e))}getBookingData(){return this.calendarData.bookingEvents}addBookingDatas(t){this.addBookingDatasEvent.emit(t)}getSelectedCellRefName(t,e){return"room_"+t+"_"+e.currentDate}getSplitBookingEvents(t){console.log(t.FROM_DATE);return this.getBookingData().some((e=>{if(!["003","002","004"].includes(e.STATUS_CODE)){if(new Date(t.FROM_DATE).getTime()>=new Date(e.FROM_DATE).getTime()&&new Date(t.FROM_DATE).getTime()<=new Date(e.TO_DATE).getTime()){return e}}}))}closeWindow(){let t=this.getBookingData().findIndex((t=>t.ID==="NEW_TEMP_EVENT"));if(t!==-1){this.getBookingData().splice(t,1);console.log("removed item..");this.renderElement()}}addNewEvent(t){let e=Object.keys(this.selectedRooms);let s,o;if(this.selectedRooms[e[0]].currentDate<this.selectedRooms[e[1]].currentDate){s=new Date(this.selectedRooms[e[0]].currentDate);o=new Date(this.selectedRooms[e[1]].currentDate)}else{s=new Date(this.selectedRooms[e[1]].currentDate);o=new Date(this.selectedRooms[e[0]].currentDate)}this.newEvent={ID:"NEW_TEMP_EVENT",NAME:i("span",null,"Â "),EMAIL:"",PHONE:"",convertBooking:false,REFERENCE_TYPE:"PHONE",FROM_DATE:s.getFullYear()+"-"+this.getTwoDigitNumStr(s.getMonth()+1)+"-"+this.getTwoDigitNumStr(s.getDate()),TO_DATE:o.getFullYear()+"-"+this.getTwoDigitNumStr(o.getMonth()+1)+"-"+this.getTwoDigitNumStr(o.getDate()),BALANCE:"",NOTES:"",RELEASE_AFTER_HOURS:0,PR_ID:this.selectedRooms[e[0]].roomId,ENTRY_DATE:"",NO_OF_DAYS:(o-s)/864e5,ADULTS_COUNT:1,COUNTRY:"",INTERNAL_NOTE:"",RATE:"",TOTAL_PRICE:"",RATE_PLAN:"",ARRIVAL_TIME:"",TITLE:c.entries.Lcz_NewBookingFor,roomsInfo:[t],CATEGORY:t.name,event_type:"BAR_BOOKING",STATUS:"TEMP-EVENT",defaultDateRange:{fromDate:null,fromDateStr:"",toDate:null,toDateStr:"",dateDifference:(o-s)/864e5,editable:false,message:"Including 5.00% City Tax - Excluding 11.00% VAT"}};let n=t.name+" "+this.getRoomName(this.getRoomById(this.getCategoryRooms(t),this.selectedRooms[e[0]].roomId));this.newEvent.BLOCK_DATES_TITLE=c.entries.Lcz_BlockDatesFor+n;this.newEvent.TITLE+=n;this.newEvent.defaultDateRange.toDate=new Date(this.newEvent.TO_DATE+"T00:00:00");this.newEvent.defaultDateRange.fromDate=new Date(this.newEvent.FROM_DATE+"T00:00:00");this.newEvent.defaultDateRange.fromDateStr=this.getDateStr(this.newEvent.defaultDateRange.fromDate);this.newEvent.defaultDateRange.toDateStr=this.getDateStr(this.newEvent.defaultDateRange.toDate);this.newEvent.ENTRY_DATE=(new Date).toISOString();this.newEvent.legendData=this.calendarData.formattedLegendData;let l=this.getSplitBookingEvents(this.newEvent);if(l){this.newEvent.splitBookingEvents=l}this.getBookingData().push(this.newEvent);return this.newEvent}getTwoDigitNumStr(t){return t<=9?"0"+t:t}getDateStr(t,e="default"){return t.getDate()+" "+t.toLocaleString(e,{month:"short"})+" "+t.getFullYear()}removeNewEvent(){this.calendarData.bookingEvents=this.calendarData.bookingEvents.filter((t=>t.ID!=="NEW_TEMP_EVENT"));this.newEvent=null}clickCell(t,e,i){if(!this.isScrollViewDragging&&e.currentDate>=this.currentDate.getTime()){let s=this.getSelectedCellRefName(t,e);if(this.selectedRooms.hasOwnProperty(s)){this.removeNewEvent();delete this.selectedRooms[s];this.renderElement();return}else if(Object.keys(this.selectedRooms).length!=1||this.fromRoomId!=t){this.removeNewEvent();this.selectedRooms={};this.selectedRooms[s]=Object.assign(Object.assign({},e),{roomId:t});this.fromRoomId=t;this.renderElement()}else{this.selectedRooms[s]=Object.assign(Object.assign({},e),{roomId:t});this.addNewEvent(i);this.selectedRooms={};this.renderElement();this.showNewBookingPopup(this.newEvent)}}}showNewBookingPopup(t){console.log(t)}renderElement(){this.renderAgain=!this.renderAgain}getGeneralCategoryDayColumns(t,e=false,s){return l.days.map((o=>i("div",{class:`cellData  font-weight-bold categoryPriceColumn ${t+"_"+o.day} ${o.day===this.today?"currentDay":""}`},e?i("span",{class:"categoryName"},o.rate[s].exposed_inventory.rts):"")))}getGeneralRoomDayColumns(t,e){return this.calendarData.days.map((s=>i("div",{class:`cellData ${"room_"+t+"_"+s.day} ${s.day===this.today?"currentDay":""} ${this.dragOverElement===t+"_"+s.day?"dragOverHighlight":""} ${this.selectedRooms.hasOwnProperty(this.getSelectedCellRefName(t,s))?"selectedDay":""}`,onClick:()=>this.clickCell(t,s,e)})))}toggleCategory(t){t.expanded=!t.expanded;this.renderElement()}getRoomCategoryRow(t,e){if(this.getTotalPhysicalRooms(t)<=1){return null}return i("div",{class:"roomRow"},i("div",{class:`cellData text-left align-items-center roomHeaderCell categoryTitle ${"category_"+this.getCategoryId(t)}`,onClick:()=>this.toggleCategory(t)},i("div",{class:"categoryName"},this.getCategoryName(t)),t.expanded?i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:14,width:14},i("path",{fill:"#6b6f82",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"})):i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",height:14,width:14},i("path",{fill:"#6b6f82",d:"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"}))),this.getGeneralCategoryDayColumns("category_"+this.getCategoryId(t),true,e))}getRoomsByCategory(t){var e;if(!t.expanded){return[]}return(e=this.getCategoryRooms(t))===null||e===void 0?void 0:e.map((e=>i("div",{class:"roomRow"},i("div",{class:`cellData text-left align-items-center roomHeaderCell  roomTitle ${this.getTotalPhysicalRooms(t)<=1?"pl10":""} ${"room_"+this.getRoomId(e)}`,"data-room":this.getRoomId(e)},i("div",null,this.getTotalPhysicalRooms(t)<=1?this.getCategoryName(t):this.getRoomName(e))),this.getGeneralRoomDayColumns(this.getRoomId(e),t))))}getRoomRows(){return this.calendarData.roomsInfo.map(((t,e)=>{if(t.is_active){return[this.getRoomCategoryRow(t,e),this.getRoomsByCategory(t)]}else{return null}}))}render(){var t;return i(s,null,i("div",{class:"bodyContainer"},this.getRoomRows(),i("div",{class:"bookingEventsContainer preventPageScroll"},(t=this.getBookingData())===null||t===void 0?void 0:t.map((t=>i("igl-booking-event",{language:this.language,is_vacation_rental:this.calendarData.is_vacation_rental,countryNodeList:this.countryNodeList,currency:this.currency,"data-component-id":t.ID,bookingEvent:t,allBookingEvents:this.getBookingData()}))))))}};C.style=D;const E=".sc-igl-cal-footer-h{display:block;position:sticky;bottom:0;width:max-content;z-index:3}.footerCell.sc-igl-cal-footer{display:-moz-inline-grid;display:-ms-inline-grid;display:inline-grid;position:-webkit-sticky;position:sticky;bottom:0;width:70px;height:40px;background:#fff;vertical-align:top;border-top:1px solid #e0e0e0}.bottomLeftCell.sc-igl-cal-footer{left:-1px;z-index:2;width:170px;text-align:left;padding-left:15px;color:#000000}.footerCell.sc-igl-cal-footer i.sc-igl-cal-footer{margin-right:5px}.legendBtn.sc-igl-cal-footer{color:#41bff3;cursor:pointer}.isOnline.sc-igl-cal-footer i.sc-igl-cal-footer{color:#2f9c3f;font-weight:bold}.isOffline.sc-igl-cal-footer i.sc-igl-cal-footer{font-weight:bold}.isOffline.sc-igl-cal-footer{color:#a40000}.dayTitle.sc-igl-cal-footer{font-size:0.8em;font-weight:600;display:grid;user-select:none}.currentDay.sc-igl-cal-footer .dayTitle.sc-igl-cal-footer{font-weight:bold}.currentDay.sc-igl-cal-footer{background-color:#e3f3fa}.dayCapacityPercent.sc-igl-cal-footer{font-size:0.75em}.badge-pill.sc-igl-cal-footer{padding-left:1em;padding-right:1em;font-size:0.7em;margin-bottom:2px}";const _=class{constructor(i){t(this,i);this.optionEvent=e(this,"optionEvent",7);this.calendarData=undefined;this.today=undefined}handleOptionEvent(t,e=""){this.optionEvent.emit({key:t,data:e})}render(){return i(s,{class:"footerContainer"},i("div",{class:"footerCell bottomLeftCell align-items-center preventPageScroll"},i("div",{class:"legendBtn",onClick:()=>this.handleOptionEvent("showLegend")},i("i",{class:"la la-square"}),i("u",null,c.entries.Lcz_Legend))),this.calendarData.days.map((t=>i("div",{class:"footerCell align-items-center"},i("div",{class:`dayTitle full-height align-items-center ${t.day===this.today?"currentDay":""}`},t.dayDisplayName)))))}};_.style=E;const T=".sc-igl-cal-header-h{display:block;position:absolute;top:0;height:100%}.svg-icon.sc-igl-cal-header{height:20px;width:20px}.darkGrey.sc-igl-cal-header{background:#ececec}.btn.sc-igl-cal-header{pointer-events:auto}.stickyCell.sc-igl-cal-header{display:-ms-inline-grid;display:-moz-inline-grid;display:inline-grid;position:-webkit-sticky;position:sticky;top:0px;height:82px;display:inline-block;vertical-align:top;z-index:2}.headersContainer.sc-igl-cal-header{background-color:#ffffff}.headerCell.sc-igl-cal-header{display:inline-grid;width:70px;height:60px;vertical-align:top;background-color:#ffffff;border-bottom:1px solid #e0e0e0}.datePickerHidden.sc-igl-cal-header{position:absolute;top:0;left:0;width:100%;opacity:0}.monthsContainer.sc-igl-cal-header{height:20px;background-color:#ffffff;margin-bottom:0.2em}.monthCell.sc-igl-cal-header{display:inline-grid;height:20px;background-color:#ececec;border-right:1px solid #c7c7c7;vertical-align:top}.monthCell.sc-igl-cal-header:nth-child(odd){background-color:#dddddd}.monthTitle.sc-igl-cal-header{overflow:hidden;text-overflow:ellipsis;font-size:0.9em;text-transform:uppercase;font-weight:bold;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.topLeftCell.sc-igl-cal-header{left:0px;z-index:3;width:170px;background-color:#ffffff;display:-ms-inline-grid;display:-moz-inline-grid;display:inline-grid}.caledarBtns.sc-igl-cal-header{position:relative;cursor:pointer;font-size:1.75em;line-height:1em;padding:0.4rem;display:flex;align-items:center;justify-content:center}.caledarBtns.sc-igl-cal-header .la.sc-igl-cal-header{font-size:1.1em}.caledarBtns.sc-igl-cal-header:hover{background-color:#f6f6f6}.dayTitle.sc-igl-cal-header{font-size:0.8em;font-weight:600;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.currentDay.sc-igl-cal-header .dayTitle.sc-igl-cal-header{font-weight:bold}.currentDay.sc-igl-cal-header{background-color:#e3f3fa}.dayCapacityPercent.sc-igl-cal-header{font-size:0.75em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.badge-pill.sc-igl-cal-header{padding:3px 1em;font-size:0.8em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.pointer.sc-igl-cal-header{cursor:pointer}.searchContiner.sc-igl-cal-header{padding-left:10px;padding-right:10px}.searchListContainer.sc-igl-cal-header{background:#fff;border:1px solid #ccc;border-bottom:none}.searchListItem.sc-igl-cal-header{background:white;border-bottom:1px solid #ccc;padding-left:8px}.badge-light.sc-igl-cal-header{background-color:#999999;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.min-width-full.sc-igl-cal-header{min-width:100%}";const R=class{constructor(i){t(this,i);this.optionEvent=e(this,"optionEvent",7);this.gotoRoomEvent=e(this,"gotoRoomEvent",7);this.gotoToBeAssignedDate=e(this,"gotoToBeAssignedDate",7);this.searchValue="";this.searchList=[];this.roomsList=[];this.toBeAssignedService=new h;this.calendarData=undefined;this.today=undefined;this.propertyid=undefined;this.unassignedDates=undefined;this.to_date=undefined;this.renderAgain=false;this.unassignedRoomsNumber={}}componentWillLoad(){try{this.initializeRoomsList();if(!this.calendarData.is_vacation_rental&&Object.keys(this.unassignedDates).length>0){this.fetchAndAssignUnassignedRooms()}}catch(t){console.error("Error in componentWillLoad:",t)}}handleCalendarDataChanged(){this.fetchAndAssignUnassignedRooms()}initializeRoomsList(){this.roomsList=[];this.calendarData.roomsInfo.forEach((t=>{this.roomsList=this.roomsList.concat(...t.physicalrooms)}))}async fetchAndAssignUnassignedRooms(){await this.assignRoomsToDate()}async assignRoomsToDate(){try{const{fromDate:t,toDate:e,data:i}=this.unassignedDates;let s=new Date(t);s.setHours(0);s.setMinutes(0);s.setSeconds(0);let o=s.getTime();while(o<=new Date(e).getTime()){const t=b(o).format("D_M_YYYY");if(i[o]){const e=await this.toBeAssignedService.getUnassignedRooms(this.propertyid,g(new Date(o)),this.calendarData.roomsInfo,this.calendarData.formattedLegendData);this.unassignedRoomsNumber[t]=e.length}else if(this.unassignedRoomsNumber[t]){this.unassignedRoomsNumber[t]=this.unassignedRoomsNumber[t]-1}o=b(o).add(1,"days").toDate().getTime();this.renderView()}}catch(t){console.error(t)}}handleReduceAvailableUnitEvent(t){t.stopImmediatePropagation();t.stopPropagation();const{fromDate:e,toDate:i}=t.detail;let s=new Date(e).getTime();while(s<new Date(i).getTime()){const t=b(s).format("D_M_YYYY");this.unassignedRoomsNumber[t]=this.unassignedRoomsNumber[t]-1;s=b(s).add(1,"days").toDate().getTime()}this.renderView()}showToBeAssigned(t){if(this.unassignedRoomsNumber[t.day]||0){this.handleOptionEvent("showAssigned");setTimeout((()=>{this.gotoToBeAssignedDate.emit({key:"gotoToBeAssignedDate",data:t.currentDate})}),100)}}handleOptionEvent(t,e=""){this.optionEvent.emit({key:t,data:e})}handleDateSelect(t){if(Object.keys(t.detail).length>0){this.handleOptionEvent("calendar",t.detail)}}handleClearSearch(){this.searchValue="";this.searchList=[];this.renderView()}handleFilterRooms(t){const e=t.target;let i=e.value.trim();this.searchValue=i;i=i.toLowerCase();if(i===""){this.handleClearSearch()}else{this.searchList=this.roomsList.filter((t=>t.name.toLocaleLowerCase().indexOf(i)!=-1))}this.renderView()}handleScrollToRoom(t){this.handleClearSearch();this.gotoRoomEvent.emit({key:"gotoRoom",roomId:t})}getStringDateFormat(t){return t.getFullYear()+"-"+(t.getMonth()<9?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<=9?"0":"")+t.getDate()}getNewBookingModel(){let t=new Date;t.setHours(0,0,0,0);let e=this.getStringDateFormat(t);t.setDate(t.getDate()+1);t.setHours(0,0,0,0);let i=this.getStringDateFormat(t);return{ID:"",NAME:"",EMAIL:"",PHONE:"",REFERENCE_TYPE:"PHONE",FROM_DATE:e,TO_DATE:i,roomsInfo:this.calendarData.roomsInfo,TITLE:c.entries.Lcz_NewBooking,event_type:"PLUS_BOOKING",legendData:this.calendarData.formattedLegendData,defaultDateRange:{fromDate:new Date(e),fromDateStr:"",toDate:new Date(i),toDateStr:"",dateDifference:0,editabled:true,message:""}}}renderView(){this.renderAgain=!this.renderAgain}render(){return i(s,null,i("div",{class:"stickyCell align-items-center topLeftCell preventPageScroll"},i("div",{class:"row justify-content-around no-gutters"},!this.calendarData.is_vacation_rental&&i("div",{class:"caledarBtns",onClick:()=>this.handleOptionEvent("showAssigned"),"data-toggle":"tooltip","data-placement":"bottom",title:c.entries.Lcz_UnassignedUnitsTooltip},i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"svg-icon"},i("path",{fill:"#6b6f82",d:"M448 160H320V128H448v32zM48 64C21.5 64 0 85.5 0 112v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zM448 352v32H192V352H448zM48 288c-26.5 0-48 21.5-48 48v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V336c0-26.5-21.5-48-48-48H48z"}))),i("div",{class:"caledarBtns",onClick:()=>this.handleOptionEvent("calendar"),"data-toggle":"tooltip","data-placement":"bottom",title:c.entries.Lcz_Navigate},i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"svg-icon"},i("path",{fill:"#6b6f82",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),i("ir-date-picker",{minDate:b().add(-2,"months").startOf("month").format("YYYY-MM-DD"),autoApply:true,singleDatePicker:true,onDateChanged:t=>{console.log("evt",t);this.handleDateSelect(t)},class:"datePickerHidden"})),i("div",{class:"caledarBtns",onClick:()=>this.handleOptionEvent("gotoToday"),"data-toggle":"tooltip","data-placement":"bottom",title:c.entries.Lcz_Today},i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"svg-icon"},i("path",{fill:"#6b6f82",d:"M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"}))),i("div",{class:"caledarBtns",onClick:()=>this.handleOptionEvent("add",this.getNewBookingModel()),"data-toggle":"tooltip","data-placement":"bottom",title:c.entries.Lcz_CreateNewBooking},i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"svg-icon"},i("path",{fill:"#6b6f82",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"})))),i("div",{class:"row justify-content-around no-gutters searchContiner"},i("fieldset",{class:`form-group position-relative ${this.searchValue!=""?"show":""}`},i("input",{type:"text",class:"form-control form-control-sm input-sm",id:"iconLeft7",value:this.searchValue,placeholder:c.entries.Lcz_FindUnit,onInput:t=>this.handleFilterRooms(t)}),this.searchValue!==""?i("div",{class:"form-control-position pointer",onClick:()=>this.handleClearSearch(),"data-toggle":"tooltip","data-placement":"top","data-original-title":"Clear Selection"},i("i",{class:"la la-close font-small-4"})):null,this.searchList.length?i("div",{class:"position-absolute searchListContainer dropdown-menu dropdown-menu-left min-width-full"},this.searchList.map((t=>i("div",{class:"searchListItem1 dropdown-item px-1 text-left pointer",onClick:()=>this.handleScrollToRoom(t.id)},t.name)))):null))),i("div",{class:"stickyCell headersContainer"},i("div",{class:"monthsContainer"},this.calendarData.monthsInfo.map((t=>i("div",{class:"monthCell",style:{width:t.daysCount*70+"px"}},i("div",{class:"monthTitle"},t.monthName))))),this.calendarData.days.map((t=>i("div",{class:`headerCell align-items-center ${"day-"+t.day} ${t.day===this.today?"currentDay":""}`,"data-day":t.day},!this.calendarData.is_vacation_rental&&i("div",{class:"preventPageScroll"},i("span",{class:`badge badge-${this.unassignedRoomsNumber[t.day]||t.unassigned_units_nbr!==0?"info pointer":"light"} badge-pill`,onClick:()=>this.showToBeAssigned(t)},this.unassignedRoomsNumber[t.day]||t.unassigned_units_nbr)),i("div",{class:"dayTitle"},t.dayDisplayName),i("div",{class:"dayCapacityPercent"},t.occupancy,"%"))))))}static get watchers(){return{unassignedDates:["handleCalendarDataChanged"]}}};R.style=T;const H=".sc-igl-legends-h{display:block}.legendHeader.sc-igl-legends{font-weight:500;letter-spacing:0.05rem;font-size:1.12rem;padding-top:5px;margin-bottom:1rem}.legendCloseBtn.sc-igl-legends{position:absolute;top:50%;right:0;cursor:pointer;font-size:1.75em;line-height:1em;padding:0.4rem;display:flex;align-items:center;justify-content:center;border-radius:3px;transform:translateY(-50%)}.legendCloseBtn.sc-igl-legends:hover{background-color:#f6f6f6}.stickyHeader.sc-igl-legends{position:-webkit-sticky;position:sticky;top:0;background-color:#ffffff;z-index:1}.legendRow.sc-igl-legends{position:relative;vertical-align:middle;margin-bottom:0.3rem}.legendRow.sc-igl-legends div.sc-igl-legends{display:inline-block;vertical-align:middle}.legend_skew.sc-igl-legends,.legend_skew-bordered.sc-igl-legends,.legend_skewsplit.sc-igl-legends{transform:skew(-30deg);width:15px;height:16px}.legend_skew-bordered.sc-igl-legends{border:1px solid black}.legend_circle.sc-igl-legends{border-radius:100%;width:10px;height:10px;margin:3px 3px 3px 2px}.legend_skewsplit.sc-igl-legends{border-right:2px solid #000000}.headerCell.sc-igl-legends .blueColor.sc-igl-legends{background-color:#31bef1}.greenColor.sc-igl-legends{background-color:#45b16d}.yellowColor.sc-igl-legends{background-color:#f4d552}.greyColor.sc-igl-legends{background-color:#a0a0a0}.redColor.sc-igl-legends{background-color:#f34752}.pinkColor.sc-igl-legends{background-color:#f9b4b7}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends{margin-bottom:0}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends:first-child .legendCal.sc-igl-legends{background-color:#ececec}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends div.sc-igl-legends{display:inline-block;vertical-align:middle;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.total-availability.sc-igl-legends{font-size:1em !important}.legendCalendar.sc-igl-legends .legendCal.sc-igl-legends{width:80px;height:25px;text-align:center;display:inline-grid !important;align-content:center;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legendCalendar.sc-igl-legends .legendCal.sc-igl-legends .badge.sc-igl-legends{margin-top:0.2rem;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legendCalendar.sc-igl-legends .legendCal.legendCal-h2.sc-igl-legends{height:40px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.br-t.sc-igl-legends{border-top:1px solid #a0a0a0}.br-s.sc-igl-legends{border-left:1px solid #a0a0a0;border-right:1px solid #a0a0a0}.br-bt.sc-igl-legends{border-bottom:1px solid #a0a0a0}.highphenLegend.sc-igl-legends{font-size:0.9em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.highphenLegend.sc-igl-legends::before{width:12px;height:0.5px;content:' ';background-color:#000000;vertical-align:middle;display:inline-block;margin-left:5px;margin-right:5px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.badge-pill.sc-igl-legends{padding:3px 1em;font-size:0.8em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.headerCell.sc-igl-legends{width:70px;display:flex;align-items:center;justify-content:center}.dayTitle.sc-igl-legends{font-size:0.8em;font-weight:600;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.dayCapacityPercent.sc-igl-legends{font-size:0.75em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}";const z=class{constructor(i){t(this,i);this.optionEvent=e(this,"optionEvent",7);this.legendData=undefined}handleOptionEvent(t,e=""){this.optionEvent.emit({key:t,data:e})}render(){return i(s,{class:"legendContainer pr-1 text-left"},i("div",{class:"w-full"},i("div",{class:"w-full"},i("div",{class:"stickyHeader pt-1 "},i("p",{class:"legendHeader"},c.entries.Lcz_Legend),i("div",{class:"legendCloseBtn",onClick:()=>this.handleOptionEvent("closeSideMenu")},i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},i("path",{fill:"#6b6f82",d:"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"}))),i("hr",null)),i("div",{class:"mt-2 pl-1"},this.legendData.map((t=>i("div",{class:"legendRow "},i("div",{class:`legend_${t.design} mr-1`,style:{backgroundColor:t.color}}),i("span",{class:"font-small-3"},t.name))))),i("hr",null),i("div",{class:"mt-2"},i("div",{class:"legendCalendar"},i("div",{class:"legendRow align-items-center"},i("div",{class:"legendCal br-t br-s br-bt"},i("strong",null,"MAR 2022")),i("div",{class:"highphenLegend"},c.entries.Lcz_MonthAndYear)),i("div",{class:"legendRow"},i("div",{class:"legendCal headerCell align-items-center br-s"},i("span",{class:"badge badge-info  badge-pill"},"3")),i("div",{class:"highphenLegend"},i("div",null,c.entries.Lcz_UnassignedUnits))),i("div",{class:"legendRow"},i("div",{class:"legendCal dayTitle br-s"},"Fri 18"),i("div",{class:"highphenLegend"},c.entries.Lcz_Date)),i("div",{class:"legendRow"},i("div",{class:"legendCal br-s br-bt dayCapacityPercent"},"15%"),i("div",{class:"highphenLegend"},c.entries.Lcz_Occupancy)),i("div",{class:"legendRow"},i("div",{class:"legendCal br-s br-bt  font-weight-bold total-availability"},"20"),i("div",{class:"highphenLegend"},c.entries.Lcz_TotalAvailability)))))))}};z.style=H;const B=".sc-igl-to-be-assigned-h{display:block}.custom-dropdown.sc-igl-to-be-assigned{cursor:pointer;padding:5px 10px;width:min-content;margin-left:auto;margin-right:auto}.dropdown-toggle.sc-igl-to-be-assigned{all:unset;display:flex;width:max-content;align-items:center;gap:10px}.dropdown-menu.sc-igl-to-be-assigned{max-height:250px;overflow-y:auto}.tobeAssignedHeader.sc-igl-to-be-assigned{font-weight:500;letter-spacing:0.05rem;font-size:1.12rem;padding-top:5px;margin-bottom:1rem}.closeBtn.sc-igl-to-be-assigned{position:absolute;top:0;right:0;cursor:pointer;line-height:1em;padding:0.4rem}.closeBtn.sc-igl-to-be-assigned:hover{background-color:#f6f6f6}.dropdown-toggle.sc-igl-to-be-assigned::after{content:none;display:none}.dropdown-toggle.sc-igl-to-be-assigned .caret-icon.sc-igl-to-be-assigned{transition:transform 0.2s ease}.show.sc-igl-to-be-assigned .caret-icon.sc-igl-to-be-assigned{transform:rotate(-180deg)}.stickyHeader.sc-igl-to-be-assigned{position:-webkit-sticky;position:sticky;top:0;background-color:#ffffff;z-index:1}.pointer.sc-igl-to-be-assigned{cursor:pointer}";const O=class{constructor(i){t(this,i);this.optionEvent=e(this,"optionEvent",7);this.reduceAvailableUnitEvent=e(this,"reduceAvailableUnitEvent",7);this.showBookingPopup=e(this,"showBookingPopup",7);this.addToBeAssignedEvent=e(this,"addToBeAssignedEvent",7);this.highlightToBeAssignedBookingEvent=e(this,"highlightToBeAssignedBookingEvent",7);this.isGotoToBeAssignedDate=false;this.isLoading=true;this.selectedDate=null;this.data={};this.today=new Date;this.categoriesData={};this.toBeAssignedService=new h;this.unassignedDatesProp=undefined;this.propertyid=undefined;this.from_date=undefined;this.to_date=undefined;this.loadingMessage=undefined;this.calendarData=undefined;this.showDatesList=false;this.renderAgain=false;this.orderedDatesList=[]}componentWillLoad(){this.reArrangeData();this.loadingMessage=c.entries.Lcz_FetchingUnAssignedUnits}handleUnassignedDatesToBeAssignedChange(t){const{fromDate:e,toDate:i,data:s}=t;let o=new Date(e);o.setHours(0);o.setMinutes(0);o.setSeconds(0);let n=o.getTime();while(n<=new Date(i).getTime()){if(s&&!s[n]&&this.unassignedDates.hasOwnProperty(n)){delete this.unassignedDates[n]}else if(s&&s[n]){this.unassignedDates[n]=s[n]}n=b(n).add(1,"days").toDate().getTime()}this.data=Object.assign({},this.unassignedDates);this.orderedDatesList=Object.keys(this.data).sort(((t,e)=>parseInt(t)-parseInt(e)));if(this.orderedDatesList.length){if(!this.data.hasOwnProperty(this.selectedDate)){this.selectedDate=this.orderedDatesList.length?this.orderedDatesList[0]:null}this.showForDate(this.selectedDate,false);this.renderView()}else{this.selectedDate=null}}handleAssignUnit(t){const e=t.detail;const i=e.data;t.stopImmediatePropagation();t.stopPropagation();if(e.key==="assignUnit"){if(Object.keys(this.data[i.selectedDate].categories).length===1){this.isLoading=true}this.data[i.selectedDate].categories[i.RT_ID]=this.data[i.selectedDate].categories[i.RT_ID].filter((t=>t.ID!=i.assignEvent.ID));this.calendarData=i.calendarData;this.renderView()}}async updateCategories(t,e){try{let i={};const s=await this.toBeAssignedService.getUnassignedRooms(this.propertyid,g(new Date(+t)),e.roomsInfo,e.formattedLegendData);s.forEach((t=>{if(!i.hasOwnProperty(t.RT_ID)){i[t.RT_ID]=[t]}else{i[t.RT_ID].push(t)}}));this.unassignedDates[t].categories=i}catch(t){}}async reArrangeData(){try{this.today.setHours(0,0,0,0);this.calendarData.roomsInfo.forEach((t=>{this.categoriesData[t.id]={name:t.name,roomsList:t.physicalrooms,roomIds:t.physicalrooms.map((t=>t.id))}}));this.selectedDate=null;this.unassignedDates=a();console.log(this.unassignedDates);this.data=this.unassignedDates;this.orderedDatesList=Object.keys(this.data).sort(((t,e)=>parseInt(t)-parseInt(e)));if(!this.selectedDate&&this.orderedDatesList.length){this.selectedDate=this.orderedDatesList[0]}}catch(t){console.error("Error fetching unassigned dates:",t)}}async componentDidLoad(){setTimeout((()=>{if(!this.isGotoToBeAssignedDate&&Object.keys(this.unassignedDates).length>0){const t=Object.keys(this.unassignedDates)[0];this.showForDate(t)}}),100)}async gotoDate(t){this.isGotoToBeAssignedDate=true;this.showForDate(t.detail.data);this.showDatesList=false;this.renderView()}async showForDate(t,e=true){try{if(e){this.isLoading=true}if(this.showDatesList){this.showUnassignedDate()}await this.updateCategories(t,this.calendarData);this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.showBookingPopup.emit({key:"calendar",data:parseInt(t)-864e5});if(this.isGotoToBeAssignedDate){this.isGotoToBeAssignedDate=false}this.isLoading=false;this.selectedDate=t;this.renderView()}catch(t){}}getDay(t){const e=new Date(t);const i="default";const s=this.getLocalizedDayOfWeek(e,i);return s+" "+e.getDate()+", "+e.getFullYear()}getLocalizedDayOfWeek(t,e){const i={weekday:"short"};return t.toLocaleDateString(e,i)}handleOptionEvent(t,e=""){this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:"----"}});this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.optionEvent.emit({key:t,data:e})}showUnassignedDate(){this.showDatesList=!this.showDatesList}getToBeAssignedEntities(){}getCategoryView(){if(this.orderedDatesList.length&&this.selectedDate&&this.data[this.selectedDate]){return Object.entries(this.data[this.selectedDate].categories).map((([t,e],s)=>i("igl-tba-category-view",{calendarData:this.calendarData,selectedDate:this.selectedDate,categoryId:t,categoryIndex:s,categoriesData:this.categoriesData,eventDatas:e,onAssignUnitEvent:t=>this.handleAssignUnit(t)})))}else{return null}}renderView(){this.renderAgain=!this.renderAgain}render(){var t;return i(s,{class:"tobeAssignedContainer pr-1 text-left"},i("div",null,i("div",null,i("div",{class:"stickyHeader pt-1"},i("p",{class:"tobeAssignedHeader "},c.entries.Lcz_Assignments),i("ir-icon",{class:"closeBtn pt-2",onIconClickHandler:()=>this.handleOptionEvent("closeSideMenu")},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},i("path",{fill:"#6b6f82",d:"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"}))),i("hr",null),Object.keys(this.data).length===0?i("p",null,c.entries.Lcz_AllBookingsAreAssigned):this.isLoading?i("p",null,this.loadingMessage):i(o,null,this.orderedDatesList.length?i("div",{class:`custom-dropdown border border-light rounded text-center `+(this.showDatesList?"show":""),id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},i("div",{class:"dropdown-toggle"},i("span",{class:"font-weight-bold"},this.data[this.selectedDate].dateStr),i("svg",{class:"caret-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:14,width:14},i("path",{fill:"#6b6f82",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),i("div",{class:"dropdown-menu dropdown-menu-right full-width","aria-labelledby":"dropdownMenuButton"},(t=this.orderedDatesList)===null||t===void 0?void 0:t.map((t=>i("div",{class:"dropdown-item pointer",onClick:()=>this.showForDate(t)},this.data[t].dateStr))))):c.entries.Lcz_AllBookingsAreAssigned)),!this.isLoading&&i("div",{class:"scrollabledArea"},this.orderedDatesList.length?Object.keys(this.data[this.selectedDate].categories).length?this.getCategoryView():i("div",{class:"mt-1"},c.entries.Lcz_AllAssignForThisDay):null))))}static get watchers(){return{unassignedDatesProp:["handleUnassignedDatesToBeAssignedChange"]}}};O.style=B;const M=".sc-ir-booking-details-h{overflow-x:hidden}.confirmed.sc-ir-booking-details{color:#fff;display:flex;align-items:center}.bg-ir-green.sc-ir-booking-details{background:#629a4c;height:28px;padding-top:0 !important;padding-bottom:0 !important}.h-28.sc-ir-booking-details{height:2rem}.bg-ir-red.sc-ir-booking-details{background:#ff4961;height:28px;padding-top:0 !important;padding-bottom:0 !important}.bg-ir-orange.sc-ir-booking-details{background:#ff9149;height:28px;padding-top:0 !important;padding-bottom:0 !important}.date-margin.sc-ir-booking-details{margin-right:5px}.pickup-margin.sc-ir-booking-details{margin-bottom:7px !important}.header-date.sc-ir-booking-details{padding-left:5px !important}.pointer.sc-ir-booking-details{cursor:pointer}.sc-ir-booking-details:root{--sidebar-width:50rem}.sm-padding-right.sc-ir-booking-details{padding-right:0.2rem}.sm-padding-left.sc-ir-booking-details{padding-left:0.2rem}.sm-padding-top.sc-ir-booking-details{padding-top:0.2rem}.sm-padding-bottom.sc-ir-booking-details{padding-bottom:0.2rem}.info-notes.sc-ir-booking-details{list-style:none;padding-left:0}.light-blue-bg.sc-ir-booking-details{background-color:#acecff;padding:0rem 0.1rem}.iframeHeight.sc-ir-booking-details{height:17.5rem}";const A=class{constructor(i){t(this,i);this.toast=e(this,"toast",7);this.bookingService=new y;this.roomService=new r;this.language="";this.ticket="";this.bookingNumber="";this.baseurl="";this.propertyid=undefined;this.is_from_front_desk=false;this.hasPrint=false;this.hasReceipt=false;this.hasDelete=false;this.hasMenu=false;this.hasRoomEdit=false;this.hasRoomDelete=false;this.hasRoomAdd=false;this.hasCheckIn=false;this.hasCheckOut=false;this.bookingItem=null;this.statusData=[];this.tempStatus=null;this.showPaymentDetails=undefined;this.bookingData=undefined;this.countryNodeList=undefined;this.calendarData={};this.guestData=null;this.defaultTexts=undefined;this.rerenderFlag=false;this.sidebarState=null;this.isUpdateClicked=false}componentDidLoad(){if(this.baseurl){d.defaults.baseURL=this.baseurl}if(this.ticket!==""){this.initializeApp()}}async ticketChanged(){sessionStorage.setItem("token",JSON.stringify(this.ticket));this.initializeApp()}setRoomsData(t){var e,i;let s=new Array;if((i=(e=t.My_Result)===null||e===void 0?void 0:e.roomtypes)===null||i===void 0?void 0:i.length){s=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}this.calendarData.roomsInfo=s}async initializeApp(){try{const[t,e,i,s]=await Promise.all([this.roomService.fetchData(this.propertyid,this.language),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language),this.bookingService.getExposedBooking(this.bookingNumber,this.language)]);console.log(e);if(!c.entries){c.entries=e.entries;c.direction=e.direction}this.defaultTexts=e;console.log(this.defaultTexts);this.countryNodeList=i;const{allowed_payment_methods:o,currency:n,allowed_booking_sources:l,adult_child_constraints:a,calendar_legends:r}=t["My_Result"];this.calendarData={currency:n,allowed_booking_sources:l,adult_child_constraints:a,legendData:r};console.log(this.calendarData);this.setRoomsData(t);const d=["001","004"];this.showPaymentDetails=o.some((t=>d.includes(t.code)));this.guestData=s.guest;this.bookingData=s;this.rerenderFlag=!this.rerenderFlag}catch(t){console.error("Error initializing app:",t)}}handleIconClick(t){const e=t.target;switch(e.id){case"pickup":this.sidebarState="pickup";return;case"print":window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.bookingData.system_id}&&PM=B&TK=${this.ticket}`);return;case"receipt":window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.bookingData.system_id}&&PM=I&TK=${this.ticket}`);return;case"book-delete":return;case"menu":window.location.href="https://x.igloorooms.com/manage/acbookinglist.aspx";return;case"room-add":this.bookingItem={ID:"",NAME:this.bookingData.guest.last_name,EMAIL:this.bookingData.guest.email,PHONE:this.bookingData.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.bookingData.from_date,ARRIVAL:this.bookingData.arrival,TO_DATE:this.bookingData.to_date,TITLE:`${c.entries.Lcz_AddingUnitToBooking}# ${this.bookingData.booking_nbr}`,defaultDateRange:{fromDate:new Date(this.bookingData.from_date),fromDateStr:"",toDate:new Date(this.bookingData.to_date),toDateStr:"",dateDifference:0,message:""},event_type:"ADD_ROOM",BOOKING_NUMBER:this.bookingData.booking_nbr,ADD_ROOM_TO_BOOKING:this.bookingData.booking_nbr,GUEST:this.bookingData.guest,message:this.bookingData.remark,SOURCE:this.bookingData.source,ROOMS:this.bookingData.rooms};return;case"add-payment":return}}handleEditSidebar(){this.sidebarState="guest"}handleSelectChange(t){t.stopPropagation();t.stopImmediatePropagation();const e=t.target;this.tempStatus=e.selectedValue}openEditSidebar(){const t=document.querySelector("ir-sidebar#editGuestInfo");t.open=true}_calculateNights(t,e){const i=b(e).diff(b(t),"days");return i}async updateStatus(){if(this.tempStatus!==""&&this.tempStatus!==null){try{this.isUpdateClicked=true;await d.post(`/Change_Exposed_Booking_Status?Ticket=${this.ticket}`,{book_nbr:this.bookingNumber,status:this.tempStatus});this.toast.emit({type:"success",description:"",title:c.entries.Lcz_StatusUpdatedSuccessfully,position:"top-right"});await this.resetBookingData()}catch(t){console.log(t)}finally{this.isUpdateClicked=false}}else{this.toast.emit({type:"error",description:"",title:c.entries.Lcz_SelectStatus,position:"top-right"})}}handleEditInitiated(t){this.bookingItem=t.detail}handleCloseBookingWindow(){this.bookingItem=null}handleDeleteFinish(t){this.bookingData=Object.assign(Object.assign({},this.bookingData),{rooms:this.bookingData.rooms.filter((e=>e.identifier!==t.detail))})}async resetBookingData(){try{const t=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);this.bookingData=Object.assign({},t)}catch(t){console.log(t)}}async handleResetBookingData(t){t.stopPropagation();t.stopImmediatePropagation();await this.resetBookingData()}render(){var t;if(!this.bookingData){return null}let e="";switch(this.bookingData.status.code){case"001":e="bg-ir-orange";break;case"002":e="bg-ir-green";break;case"003":e="bg-ir-red";break;case"004":e="bg-ir-red";break}return[i(o,null,!this.is_from_front_desk&&i(o,null,i("ir-toast",null),i("ir-interceptor",null))),i("div",{class:"fluid-container p-1"},i("div",{class:"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between mt-1"},i("div",{class:"m-0 p-0 mb-1 mb-lg-0 mt-md-0  d-flex justify-content-start align-items-center"},i("p",{class:"font-size-large m-0 p-0"},`${this.defaultTexts.entries.Lcz_Booking}#${this.bookingNumber}`),i("p",{class:"m-0 p-0 ml-1"},!this.bookingData.is_direct&&i("span",{class:"mr-1 m-0"},this.bookingData.channel_booking_nbr," "),i("span",{class:"date-margin"},w(this.bookingData.booked_on.date)),v(this.bookingData.booked_on.hour.toString(),+" "+this.bookingData.booked_on.minute.toString()))),i("div",{class:"d-flex justify-content-end align-items-center"},i("span",{class:`confirmed btn-sm m-0 mr-2 ${e}`},this.bookingData.status.description),this.bookingData.allowed_actions.length>0&&i(o,null,i("ir-select",{selectContainerStyle:"h-28",selectStyles:"d-flex align-items-center h-28",firstOption:c.entries.Lcz_Select,id:"update-status",size:"sm","label-available":"false",data:this.bookingData.allowed_actions.map((t=>({text:t.description,value:t.code}))),textSize:"sm",class:"sm-padding-right m-0"}),i("ir-button",{onClickHanlder:this.updateStatus.bind(this),btn_styles:"h-28",isLoading:this.isUpdateClicked,btn_disabled:this.isUpdateClicked,id:"update-status-btn",size:"sm",text:"Update"})),this.hasReceipt&&i("ir-icon",{id:"receipt",class:"mx-1"},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",stroke:"#104064",height:"24",width:"19",viewBox:"0 0 384 512"},i("path",{fill:"#104064",d:"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM80 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm16 96H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V256c0-17.7 14.3-32 32-32zm0 32v64H288V256H96zM240 416h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H240c-8.8 0-16-7.2-16-16s7.2-16 16-16z"}))),this.hasPrint&&i("ir-icon",{id:"print",icon:"ft-printer h1 color-ir-dark-blue-hover m-0 ml-1  pointer"},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 512 512"},i("path",{fill:"#104064",d:"M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"}))),this.hasDelete&&i("ir-icon",{id:"book-delete",icon:"ft-trash-2 h1 danger m-0 ml-1 pointer"}),this.hasMenu&&i("ir-icon",{id:"menu",class:"m-0 ml-1 pointer"},i("svg",{slot:"icon",height:24,width:24,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i("path",{fill:"#104064",d:"M40 48C26.7 48 16 58.7 16 72v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V232c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V392c0-13.3-10.7-24-24-24H40z"})))))),i("div",{class:"fluid-container p-1 text-left mx-0"},i("div",{class:"row m-0"},i("div",{class:"col-12 p-0 mx-0 pr-lg-1 col-lg-6"},i("div",{class:"card"},i("div",{class:"p-1"},this.bookingData.property.name||"",i("ir-label",{label:`${this.defaultTexts.entries.Lcz_Source}:`,value:this.bookingData.origin.Label,imageSrc:this.bookingData.origin.Icon}),i("ir-label",{label:`${this.defaultTexts.entries.Lcz_BookedBy}:`,value:`${this.bookingData.guest.first_name} ${this.bookingData.guest.last_name}`,iconShown:true}),i("ir-label",{label:`${this.defaultTexts.entries.Lcz_Phone}:`,value:this.bookingData.guest.mobile}),i("ir-label",{label:`${this.defaultTexts.entries.Lcz_Email}:`,value:this.bookingData.guest.email}),this.bookingData.guest.alternative_email&&i("ir-label",{label:`${this.defaultTexts.entries.Lcz_AlternativeEmail}:`,value:this.bookingData.guest.alternative_email}),i("ir-label",{label:`${this.defaultTexts.entries.Lcz_Address}:`,value:this.bookingData.guest.address}),i("ir-label",{label:`${this.defaultTexts.entries.Lcz_ArrivalTime}:`,value:this.bookingData.arrival.description}),i("ir-label",{label:`${this.defaultTexts.entries.Lcz_Note}:`,value:this.bookingData.remark}))),i("p",{class:"font-size-large d-flex justify-content-between align-items-center mb-1"},`${w(this.bookingData.from_date)} - ${w(this.bookingData.to_date)} (${this._calculateNights(this.bookingData.from_date,this.bookingData.to_date)} ${this._calculateNights(this.bookingData.from_date,this.bookingData.to_date)>1?` ${this.defaultTexts.entries.Lcz_Nights}`:` ${this.defaultTexts.entries.Lcz_Night}`})`,this.hasRoomAdd&&this.bookingData.is_direct&&i("ir-icon",{id:"room-add"},i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"17.5",viewBox:"0 0 448 512",slot:"icon"},i("path",{fill:"#6b6f82",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"})))),i("div",{class:"card p-0 mx-0"},this.bookingData.rooms.map(((t,e)=>{const s=t.rateplan.name;const o=t.roomtype.name;return[i("ir-room",{defaultTexts:this.defaultTexts,legendData:this.calendarData.legendData,roomsInfo:this.calendarData.roomsInfo,myRoomTypeFoodCat:o,mealCodeName:s,currency:this.bookingData.currency.code,hasRoomEdit:this.hasRoomEdit&&this.bookingData.status.code!=="003"&&this.bookingData.is_direct,hasRoomDelete:this.hasRoomDelete&&this.bookingData.status.code!=="003"&&this.bookingData.is_direct,hasCheckIn:this.hasCheckIn,hasCheckOut:this.hasCheckOut,bookingEvent:this.bookingData,bookingIndex:e,ticket:this.ticket,onDeleteFinished:this.handleDeleteFinish.bind(this)}),e!==this.bookingData.rooms.length-1&&i("hr",{class:"mr-2 ml-2 my-0 p-0"})]}))),k.pickup_service.is_enabled&&this.bookingData.is_direct&&i("div",{class:"mb-1"},i("div",{class:"d-flex w-100 mb-1 align-items-center justify-content-between"},i("p",{class:"font-size-large p-0 m-0 "},c.entries.Lcz_Pickup),i("ir-icon",{class:"pointer ",id:"pickup"},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20",viewBox:"0 0 512 512"},i("path",{fill:"#6b6f82",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"})))),this.bookingData.pickup_info&&i("div",{class:"card"},i("div",{class:"p-1"},i("div",{class:"d-flex align-items-center py-0 my-0 pickup-margin"},i("p",{class:"font-weight-bold mr-1 py-0 my-0"},c.entries.Lcz_Date,": ",i("span",{class:"font-weight-normal"},b(this.bookingData.pickup_info.date,"YYYY-MM-DD").format("ddd, DD MM YYYY"))),i("p",{class:"font-weight-bold flex-fill py-0 my-0"},c.entries.Lcz_Time,":",i("span",{class:"font-weight-normal"}," ",`${this.bookingData.pickup_info.hour}:${this.bookingData.pickup_info.minute}`)),i("p",{class:"font-weight-bold py-0 my-0"},c.entries.Lcz_DueUponBooking,":"," ",i("span",{class:"font-weight-normal"},this.bookingData.pickup_info.currency.symbol,this.bookingData.pickup_info.total))),i("p",{class:"font-weight-bold py-0 my-0"},c.entries.Lcz_FlightDetails,":",i("span",{class:"font-weight-normal"}," ",`${this.bookingData.pickup_info.details}`)),i("p",{class:"py-0 my-0 pickup-margin"},`${this.bookingData.pickup_info.selected_option.vehicle.description}`),i("p",{class:"font-weight-bold py-0 my-0 pickup-margin"},c.entries.Lcz_NbrOfVehicles,":",i("span",{class:"font-weight-normal"}," ",`${this.bookingData.pickup_info.nbr_of_units}`)),i("p",{class:"small py-0 my-0 pickup-margin"},k.pickup_service.pickup_instruction.description,k.pickup_service.pickup_cancelation_prepayment.description))))),i("div",{class:"col-12 p-0 m-0 pl-lg-1 col-lg-6"},i("ir-payment-details",{defaultTexts:this.defaultTexts,bookingDetails:this.bookingData})))),i("ir-sidebar",{open:this.sidebarState!==null,side:"right",id:"editGuestInfo",onIrSidebarToggle:t=>{t.stopImmediatePropagation();t.stopPropagation();this.sidebarState=null},showCloseButton:false},this.sidebarState==="guest"&&i("ir-guest-info",{booking_nbr:this.bookingNumber,defaultTexts:this.defaultTexts,email:(t=this.bookingData)===null||t===void 0?void 0:t.guest.email,language:this.language,onCloseSideBar:()=>this.sidebarState=null}),this.sidebarState==="pickup"&&i("ir-pickup",{defaultPickupData:this.bookingData.pickup_info,bookingNumber:this.bookingData.booking_nbr,numberOfPersons:this.bookingData.occupancy.adult_nbr+this.bookingData.occupancy.children_nbr,onCloseModal:()=>this.sidebarState=null})),i(o,null,this.bookingItem&&i("igl-book-property",{allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countryNodeList:this.countryNodeList,currency:this.calendarData.currency,language:this.language,propertyid:this.propertyid,bookingData:this.bookingItem,onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))]}get element(){return n(this)}static get watchers(){return{ticket:["ticketChanged"]}}};A.style=M;const I=".sc-ir-room-nights-h{display:block;box-sizing:border-box;margin:0}.close-icon.sc-ir-room-nights{position:absolute;top:18px;right:33px;outline:none}.close.sc-ir-room-nights{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.card.sc-ir-room-nights{top:0;z-index:1000}.card-title.sc-ir-room-nights{border-bottom:1px solid #e4e5ec;width:100%}.irfontgreen.sc-ir-room-nights{color:#0e930e}.currency.sc-ir-room-nights{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-ir-room-nights{font-size:14px;line-height:0;padding:0;height:0;border-left:0;border-radius:0.25rem !important}.rate-input-container.sc-ir-room-nights{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-ir-room-nights{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-ir-room-nights span[data-state='focus'].sc-ir-room-nights{border-color:var(--blue)}.input-group-prepend.sc-ir-room-nights span[data-disabled].sc-ir-room-nights{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}";const L=class{constructor(i){t(this,i);this.closeRoomNightsDialog=e(this,"closeRoomNightsDialog",7);this.bookingService=new y;this.bookingNumber=undefined;this.baseUrl=undefined;this.propertyId=undefined;this.language=undefined;this.identifier=undefined;this.toDate=undefined;this.fromDate=undefined;this.pool=undefined;this.ticket=undefined;this.bookingEvent=undefined;this.selectedRoom=undefined;this.rates=[];this.isLoading=false;this.initialLoading=false;this.inventory=null;this.isEndDateBeforeFromDate=false;this.defaultTotalNights=0;this.isInputFocused=-1}componentWillLoad(){if(this.baseUrl){d.defaults.baseURL=this.baseUrl}this.init()}isButtonDisabled(){return this.isLoading||this.rates.some((t=>t.amount===-1))||this.inventory===0||this.inventory===null}async init(){var t;try{this.bookingEvent=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);if(this.bookingEvent){const e=this.bookingEvent.rooms.filter((t=>t.identifier===this.identifier));this.selectedRoom=e[0];const i=(t=this.selectedRoom)===null||t===void 0?void 0:t.days[this.selectedRoom.days.length-1];if(b(this.toDate).add(-1,"days").isSame(b(i.date))){const t=await this.fetchBookingAvailability(this.fromDate,this.selectedRoom.days[0].date,this.selectedRoom.rateplan.id,this.selectedRoom.rateplan.selected_variation.adult_child_offering);const e=p(this.selectedRoom.days[0].date,this.fromDate);this.isEndDateBeforeFromDate=true;this.rates=[...e.map((e=>({amount:t,date:e}))),...this.selectedRoom.days]}else{const t=await this.fetchBookingAvailability(i.date,b(this.toDate,"YYYY-MM-DD").add(-1,"days").format("YYYY-MM-DD"),this.selectedRoom.rateplan.id,this.selectedRoom.rateplan.selected_variation.adult_child_offering);const e=p(i.date,this.toDate);this.rates=[...this.selectedRoom.days,...e.map((e=>({amount:t,date:e})))]}this.defaultTotalNights=this.rates.length-this.selectedRoom.days.length}}catch(t){console.log(t)}}handleInput(t,e){let i=t.target;let s=i.value;let o=[...this.rates];s=s.replace(/[^0-9.]/g,"");if(s===""){o[e].amount=-1}else{const t=s.split(".");if(t.length>2){s=s.substring(0,s.length-1);i.value=s}else if(t.length===2&&t[1].length>2){s=`${t[0]}.${t[1].substring(0,2)}`;i.value=s}if(!isNaN(Number(s))){o[e].amount=Number(s)}}this.rates=o;console.log(this.rates)}async fetchBookingAvailability(t,e,i,s){try{this.initialLoading=true;const o=await this.bookingService.getBookingAvailability(t,e,this.propertyId,{adult:this.selectedRoom.rateplan.selected_variation.adult_nbr,child:this.selectedRoom.rateplan.selected_variation.child_nbr},this.language,[this.selectedRoom.roomtype.id],this.bookingEvent.currency);this.inventory=o.roomtypes[0].inventory;const n=o.roomtypes[0].rateplans.find((t=>t.id===i));const{amount:l}=n.variations.find((t=>t.adult_child_offering===s));return l}catch(t){console.log(t)}finally{this.initialLoading=false}}renderInputField(t,e,s){return i("fieldset",{class:"col-2 ml-1 position-relative has-icon-left m-0 p-0 rate-input-container"},i("div",{class:"input-group-prepend"},i("span",{"data-disabled":this.inventory===0||this.inventory===null,"data-state":this.isInputFocused===t?"focus":"",class:"input-group-text new-currency",id:"basic-addon1"},e)),i("input",{onFocus:()=>this.isInputFocused=t,onBlur:()=>this.isInputFocused=-1,disabled:this.inventory===0||this.inventory===null,type:"text",class:"form-control pl-0 input-sm rate-input py-0 m-0 rounded-0 rateInputBorder",id:x(),value:s.amount>0?s.amount:"",placeholder:c.entries.Lcz_Rate||"Rate",onInput:e=>this.handleInput(e,t)}))}renderReadOnlyField(t,e){return i("p",{class:"col-9 ml-1 m-0 p-0"},`${t}${Number(e.amount).toFixed(2)}`)}renderRateFields(t,e,i){if(this.isEndDateBeforeFromDate){if(t<this.defaultTotalNights){return this.renderInputField(t,e,i)}else{return this.renderReadOnlyField(e,i)}}else{return t<this.selectedRoom.days.length?this.renderReadOnlyField(e,i):this.renderInputField(t,e,i)}}renderDates(){var t;const e=u(this.bookingEvent.currency.code);return i("div",{class:"mt-2 m-0"},(t=this.rates)===null||t===void 0?void 0:t.map(((t,s)=>i("div",{class:"row m-0 mt-1 align-items-center"},i("p",{class:"col-2 m-0 p-0"},f(t.date)),this.renderRateFields(s,e,t)))))}async handleRoomConfirmation(){try{this.isLoading=true;let t=[...this.bookingEvent.rooms];let e=t.findIndex((t=>t.identifier===this.identifier));if(e===-1){throw new Error("Invalid Pool")}t[e]=Object.assign(Object.assign({},t[e]),{days:this.rates,to_date:this.toDate,from_date:this.fromDate});const i={assign_units:true,check_in:true,is_pms:true,is_direct:true,booking:{booking_nbr:this.bookingNumber,from_date:this.fromDate,to_date:this.toDate,remark:this.bookingEvent.remark,property:this.bookingEvent.property,source:this.bookingEvent.source,currency:this.bookingEvent.currency,arrival:this.bookingEvent.arrival,guest:this.bookingEvent.guest,rooms:t}};const{data:s}=await d.post(`/DoReservation?Ticket=${this.ticket}`,i);if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}this.closeRoomNightsDialog.emit({type:"confirm",pool:this.pool})}catch(t){}finally{this.isLoading=false}}render(){var t,e,n;if(!this.bookingEvent){return i("p",null,c.entries.Lcz_Loading)}return i(s,null,i("div",{class:"card position-sticky mb-0 shadow-none p-0 "},i("div",{class:"d-flex mt-2 align-items-center justify-content-between "},i("h3",{class:"card-title text-left pb-1 font-medium-2 px-2"},c.entries.Lcz_AddingRoomNightsTo," ",(e=(t=this.selectedRoom)===null||t===void 0?void 0:t.roomtype)===null||e===void 0?void 0:e.name," ",((n=this.selectedRoom)===null||n===void 0?void 0:n.unit).name),i("button",{type:"button",class:"close close-icon",onClick:()=>this.closeRoomNightsDialog.emit({type:"cancel",pool:this.pool})},i("ir-icon",{icon:"ft-x",class:"m-0"})))),i("section",{class:"text-left px-2"},i("p",{class:"font-medium-1"},`${c.entries.Lcz_Booking}#`," ",this.bookingNumber),i("p",{class:"font-weight-bold font-medium-1"},`${m(this.fromDate,"YYYY-MM-DD")} - ${m(this.toDate,"YYYY-MM-DD")}`),this.initialLoading?i("p",{class:"mt-2 text-secondary"},c.entries["Lcz_CheckingRoomAvailability "]):i(o,null,i("p",{class:"font-medium-1 mb-0"},`${this.selectedRoom.rateplan.name}`," ",this.selectedRoom.rateplan.is_non_refundable&&i("span",{class:"irfontgreen"},c.entries.Lcz_NonRefundable)),(this.inventory===0||this.inventory===null)&&i("p",{class:"font-medium-1 text danger"},c.entries.Lcz_NoAvailabilityForAdditionalNights),this.selectedRoom.rateplan.custom_text&&i("p",{class:"text-secondary mt-0"},this.selectedRoom.rateplan.custom_text),this.renderDates())),i("section",{class:"d-flex align-items-center mt-2 px-2"},i("ir-button",{btn_color:"secondary",btn_disabled:this.isLoading,text:c===null||c===void 0?void 0:c.entries.Lcz_Cancel,class:"full-width",btn_styles:"justify-content-center",onClickHanlder:()=>this.closeRoomNightsDialog.emit({type:"cancel",pool:this.pool})}),this.inventory>0&&this.inventory!==null&&i("ir-button",{isLoading:this.isLoading,text:c===null||c===void 0?void 0:c.entries.Lcz_Confirm,btn_disabled:this.isButtonDisabled(),class:"ml-1 full-width",btn_styles:"justify-content-center",onClickHanlder:this.handleRoomConfirmation.bind(this)})))}};L.style=I;export{C as igl_cal_body,_ as igl_cal_footer,R as igl_cal_header,z as igl_legends,O as igl_to_be_assigned,A as ir_booking_details,L as ir_room_nights};
//# sourceMappingURL=p-c1a2ddfa.entry.js.map