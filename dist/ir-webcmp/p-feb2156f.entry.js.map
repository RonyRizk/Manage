{"version":3,"names":["iglApplicationInfoCss","IglApplicationInfo","componentWillLoad","this","guestData","guestInfo","Object","assign","updateRoomList","handleSelctedUnits","units","selectedUnits","index","filterdRoomList","roomsList","filter","e","includes","id","updateData","dataUpdateEvent","emit","key","guestRefKey","data","handleDataChange","value","find","room","name","handleGuestNameChange","event","guestName","target","render","h","Host","class","bookingType","roomCategoryName","ratePlanName","replace","message","cancelation","guarantee","adult_child_offering","v4","type","placeholder","onInput","required","onChange","parseInt","selected","roomId","map","preference","bedPreferenceType","CODE_NAME","CODE_VALUE_EN","rate","bind","fn","thisArg","wrap","apply","arguments","toString","prototype","getPrototypeOf","kindOf","cache","thing","str","call","slice","toLowerCase","create","kindOfTest","typeOfTest","isArray","Array","isUndefined","isBuffer","val","constructor","isFunction","isArrayBuffer","isArrayBufferView","result","ArrayBuffer","isView","buffer","isString","isNumber","isObject","isBoolean","isPlainObject","Symbol","toStringTag","iterator","isDate","isFile","isBlob","isFileList","isStream","pipe","isFormData","kind","FormData","append","isURLSearchParams","trim","forEach","obj","allOwnKeys","i","l","length","keys","getOwnPropertyNames","len","findKey","_key","_global","globalThis","self","window","global","isContextDefined","context","merge","caseless","assignValue","targetKey","extend","a","b","stripBOM","content","charCodeAt","inherits","superConstructor","props","descriptors","defineProperty","toFlatObject","sourceObj","destObj","propFilter","prop","merged","endsWith","searchString","position","String","undefined","lastIndex","indexOf","toArray","arr","isTypedArray","TypedArray","Uint8Array","forEachEntry","generator","next","done","pair","matchAll","regExp","matches","exec","push","isHTMLForm","toCamelCase","replacer","m","p1","p2","toUpperCase","hasOwnProperty","isRegExp","reduceDescriptors","reducer","getOwnPropertyDescriptors","reducedDescriptors","descriptor","ret","defineProperties","freezeMethods","enumerable","writable","set","Error","toObjectSet","arrayOrString","delimiter","define","split","noop","toFiniteNumber","defaultValue","Number","isFinite","ALPHA","DIGIT","ALPHABET","ALPHA_DIGIT","generateString","size","alphabet","Math","random","isSpecCompliantForm","toJSONObject","stack","visit","source","reducedValue","isAsyncFn","isThenable","then","catch","utils","hasOwnProp","AxiosError","code","config","request","response","captureStackTrace","toJSON","description","number","fileName","lineNumber","columnNumber","status","from","error","customProps","axiosError","cause","httpAdapter","isVisitable","removeBrackets","renderKey","path","dots","concat","each","token","join","isFlatArray","some","predicates","test","toFormData","formData","options","TypeError","metaTokens","indexes","defined","option","visitor","defaultVisitor","_Blob","Blob","useBlob","convertValue","toISOString","Buffer","JSON","stringify","el","exposedHelpers","build","pop","encode","charMap","encodeURIComponent","match","AxiosURLSearchParams","params","_pairs","encoder","_encode","buildURL","url","serializeFn","serialize","serializedParams","hashmarkIndex","InterceptorManager","handlers","use","fulfilled","rejected","synchronous","runWhen","eject","clear","forEachHandler","transitionalDefaults","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","URLSearchParams$1","URLSearchParams","FormData$1","Blob$1","isStandardBrowserEnv","product","navigator","document","isStandardBrowserWebWorkerEnv","WorkerGlobalScope","importScripts","platform","isBrowser","classes","protocols","toURLEncodedForm","helpers","parsePropPath","arrayToObject","formDataToJSON","buildPath","isNumericKey","isLast","entries","stringifySafely","rawValue","parser","parse","defaults","transitional","adapter","transformRequest","headers","contentType","getContentType","hasJSONContentType","isObjectPayload","setContentType","formSerializer","_FormData","env","transformResponse","JSONRequested","responseType","strictJSONParsing","ERR_BAD_RESPONSE","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","common","Accept","method","ignoreDuplicateOf","parseHeaders","rawHeaders","parsed","line","substring","$internals","normalizeHeader","header","normalizeValue","parseTokens","tokens","tokensRE","isValidHeaderName","matchHeaderValue","isHeaderNameFilter","formatHeader","w","char","buildAccessors","accessorName","methodName","arg1","arg2","arg3","configurable","AxiosHeaders","valueOrRewrite","rewrite","setHeader","_value","_header","_rewrite","lHeader","setHeaders","get","has","matcher","deleted","deleteHeader","normalize","format","normalized","targets","asStrings","first","computed","accessor","internals","accessors","defineAccessor","mapped","headerValue","transformData","fns","transform","isCancel","__CANCEL__","CanceledError","ERR_CANCELED","settle","resolve","reject","ERR_BAD_REQUEST","floor","cookies","standardBrowserEnv","write","expires","domain","secure","cookie","Date","toGMTString","read","RegExp","decodeURIComponent","remove","now","nonStandardBrowserEnv","isAbsoluteURL","combineURLs","baseURL","relativeURL","buildFullPath","requestedURL","isURLSameOrigin","msie","userAgent","urlParsingNode","createElement","originURL","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","location","requestURL","parseProtocol","speedometer","samplesCount","min","bytes","timestamps","head","tail","firstSampleTS","chunkLength","startedAt","bytesCount","passed","round","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","loaded","total","lengthComputable","progressBytes","inRange","progress","estimated","isXHRAdapterSupported","XMLHttpRequest","xhrAdapter","Promise","dispatchXhrRequest","requestData","requestHeaders","onCanceled","cancelToken","unsubscribe","signal","removeEventListener","auth","username","password","unescape","btoa","fullPath","open","paramsSerializer","onloadend","responseHeaders","getAllResponseHeaders","responseData","responseText","statusText","_resolve","_reject","err","onreadystatechange","handleLoad","readyState","responseURL","setTimeout","onabort","handleAbort","ECONNABORTED","onerror","handleError","ERR_NETWORK","ontimeout","handleTimeout","timeoutErrorMessage","ETIMEDOUT","xsrfValue","setRequestHeader","withCredentials","onDownloadProgress","addEventListener","onUploadProgress","upload","cancel","abort","subscribe","aborted","send","knownAdapters","http","xhr","renderReason","reason","isResolvedHandle","adapters","getAdapter","nameOrAdapter","rejectedReasons","reasons","state","s","throwIfCancellationRequested","throwIfRequested","dispatchRequest","onAdapterResolution","onAdapterRejection","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","timeoutMessage","decompress","beforeRedirect","transport","httpAgent","httpsAgent","socketPath","responseEncoding","computeConfigValue","configValue","VERSION","validators","validator","deprecatedWarnings","version","formatMessage","opt","desc","opts","ERR_DEPRECATED","console","warn","assertOptions","schema","allowUnknown","ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","Axios","instanceConfig","interceptors","configOrUrl","boolean","function","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","unshiftRequestInterceptors","interceptor","unshift","responseInterceptorChain","pushResponseInterceptors","promise","chain","newConfig","onFulfilled","onRejected","getUri","forEachMethodNoData","forEachMethodWithData","generateHTTPMethod","isForm","httpMethod","CancelToken","executor","resolvePromise","promiseExecutor","_listeners","onfulfilled","splice","c","spread","callback","isAxiosError","payload","HttpStatusCode","Continue","SwitchingProtocols","Processing","EarlyHints","Ok","Created","Accepted","NonAuthoritativeInformation","NoContent","ResetContent","PartialContent","MultiStatus","AlreadyReported","ImUsed","MultipleChoices","MovedPermanently","Found","SeeOther","NotModified","UseProxy","Unused","TemporaryRedirect","PermanentRedirect","BadRequest","Unauthorized","PaymentRequired","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","ProxyAuthenticationRequired","RequestTimeout","Conflict","Gone","LengthRequired","PreconditionFailed","PayloadTooLarge","UriTooLong","UnsupportedMediaType","RangeNotSatisfiable","ExpectationFailed","ImATeapot","MisdirectedRequest","UnprocessableEntity","Locked","FailedDependency","TooEarly","UpgradeRequired","PreconditionRequired","TooManyRequests","RequestHeaderFieldsTooLarge","UnavailableForLegalReasons","InternalServerError","NotImplemented","BadGateway","ServiceUnavailable","GatewayTimeout","HttpVersionNotSupported","VariantAlsoNegotiates","InsufficientStorage","LoopDetected","NotExtended","NetworkAuthenticationRequired","createInstance","defaultConfig","instance","axios","Cancel","all","promises","formToJSON","default","convertDateToCustomFormat","dayWithWeekday","monthWithYear","months","_","day","month","year","monthIndex","convertDateToTime","getTime","dateDifference","FROM_DATE","TO_DATE","startDate","endDate","ceil","dateToFormattedString","date","getFullYear","getMonth","padStart","getDate","formatLegendColors","legendData","formattedLegendData","statusId","clsName","CONFIRMED","BLOCKED","NOTES","legend","getCurrencySymbol","currencyCode","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","findCountry","countries","country","getReleaseHoursString","releaseDate","dt","releaseAfterHours","setHours","getHours","getMinutes","BLOCKED_TILL_DATE","BLOCKED_TILL_HOUR","BLOCKED_TILL_MINUTE","computeEndDate","numberOfDays","dateObj","moment","add","convertDMYToISO","async","getMyBookings","myBookings","stayStatus","getStayStatus","days","room_types","assignBooking","physicalrooms","physicalRoom","calendar_cell","Is_Available","addOrUpdateBooking","formatName","firstName","lastName","sessionStorage","getItem","post","TBL_NAMES","My_Result","d","log","getDefaultData","cell","STAY_STATUS_CODE","ID","POOL","My_Block_Info","BALANCE","NAME","st","RELEASE_AFTER_HOURS","DESCRIPTION","PR_ID","pr_id","ENTRY_DATE","ENTRY_HOUR","ENTRY_MINUTE","OPTIONAL_REASON","DATE","NO_OF_DAYS","STATUS","STATUS_CODE","OUT_OF_SERVICE","FROM_DATE_STR","from_date","TO_DATE_STR","to_date","booking","booking_nbr","IS_EDITABLE","is_editable","guest","first_name","last_name","PHONE","_a","mobile","booked_on","RATE","RATE_PLAN","rateplan","SPLIT_BOOKING","RATE_PLAN_ID","IDENTIFIER","identifier","RATE_TYPE","ADULTS_COUNT","occupancy","adult_nbr","CHILDREN_COUNT","children_nbr","GUEST","rooms","TOTAL_PRICE","COUNTRY","country_id","updateBookingWithStayData","arrival","ARRIVAL_TIME","findIndex","newData","updatedData","BookingService","getCalendarData","propertyid","ExceptionMsg","customMonths","myBooking","daysCount","monthName","currentDate","dayDisplayName","unassigned_units_nbr","flat","ExceptionCode","My_Params_Get_Rooming_Data","AC_ID","FROM","My_Params_Get_Exposed_Calendar","TO","defaultMonths","getBookingAvailability","language","room_type_ids","child_nbr","currency_ref","getCountries","fetchSetupEntries","res","arrivalTime","TBL_NAME","bookingSource","ratePricingMode","getBlockedInfo","blockUnit","getUserInfo","email","generateDays","amount","setDate","bookUser","bookedByInfoData","assign_units","fromDate","toDate","totalNights","bookingNumber","defaultGuest","fromDateStr","toDateStr","countryId","city","contactNumber","address","dob","subscribe_to_news_letter","emailGuest","body","remark","property","selectedArrivalTime","roomtype","roomCategoryId","rateplans","availabilities","inventory","ratePlanId","rate_restrictions","variations","unit","adultCount","childrenCount","infant_nbr","notes","iglBlockDatesViewCss","IglBlockDatesView","blockDatesData","releaseList","bookingService","defaultData","emitData","handleOptionalReason","handleReleaseAfterChange","evt","entryDate","renderPage","entryHour","entryMinute","toLocaleString","handleOutOfService","checked","renderAgain","releaseItem","EventsService","reallocateEvent","pool","destination_pr_id","deleteEvent","updateBlockedEvent","bookingEvent","releaseData","formatDate","iglBookPropertyCss","IglBookProperty","PAGE_ZERO","PAGE_ONE","PAGE_TWO","PAGE_BLOCK_DATES","showSplitBookingOption","sourceOptions","selectedRooms","eventsService","bookingData","defaultDateRange","dateRangeData","setupEntries","setSourceOptions","setOtherProperties","isEventType","setEditingRoomInfo","page","getDefaultPage","sourceOption","category","getRoomCategoryByRoomId","getBookingPreferenceRoomId","rateType","totalRooms","initializeBookingAvailability","roomsInfo","roomtypes","tax_statement","roomCategory","event_type","getSplitBookings","splitBookingEvents","closeWindow","isConvertedBooking","closeBookingWindow","isEditBooking","onRoomsDataUpdate","changedKey","detail","roomCategoryKey","getRoomCategoryKey","ratePlanKey","getRatePlanKey","shouldClearData","initializeRoomCategoryIfNeeded","applyBookingEditToSelectedRoom","setSelectedRoomData","cleanupEmptyData","isEditBookingEvent","hasSelectedRoomData","onDateRangeSelect","handleBlockDateUpdate","stopImmediatePropagation","stopPropagation","handleSubmit","preventDefault","handleGuestInfoUpdate","handleBookedByInfoUpdate","isActiveSouceOption","srcIndex","handleSourceDropDown","selectedOption","gotoSplitPageTwo","gotoPage","showSplitBooking","getSelectedSplitBookingName","bookingId","splitBooking","isActiveSplitBookingOption","spltIndex","splitBookingId","handleSplitBookingDropDown","isPageZero","isPageOne","isPageTwo","isPageBlockDates","getSplitBookingList","getSourceNode","getRoomsListFromCategoryId","categoryId","getPageZeroView","onClick","getPageOneView","onDateSelectEvent","roomInfo","roomTypeData","onDataUpdateEvent","disabled","getPageBlockDatesView","handleBlockDate","handleButtonClicked","handlePageTwoDataUpdateEvent","reload","setLoadingState","getArrivalTimeForBooking","resetLoadingState","isLoading","BLOCK_DATES_TITLE","TITLE","countryNodeList","isEditOrAddRoomEvent","onButtonClicked","iglBookingEventCss","IglBookingEvent","dayWidth","eventSpace","vertSpace","showInfoPopup","bubbleInfoTopSide","resizeSide","isDragging","handleMouseMoveBind","handleMouseMove","handleMouseUpBind","handleMouseUp","handleClickOutsideBind","handleClickOutside","componentDidLoad","isNewEvent","hideBubble","showEventInfo","disconnectedCallback","clickedElement","element","contains","hideBubbleInfoPopup","currentInfoBubbleId","getBookingId","moveBookingToHandler","moveToDay","toRoomId","fromRoomId","isTouchStart","moveDiffereneX","moveDiffereneY","getBookedRoomId","onMoveUpdateBooking","renderElement","getUniqueId","reverse","tempDate","getStayDays","isSplitBooking","isHighlightEventType","getEventType","getBookingStatus","getBookedBy","getEventStartingDate","getEventEndingDate","getEventLegend","orderRide","color","_b","getLegendOfStatus","aStatusId","getNoteNode","INTERNAL_NOTE","getBalanceNode","setStayDays","aStayDays","getPosition","startingDate","startingCellClass","bodyContainer","querySelector","startingCell","pos","top","left","width","height","getBoundingClientRect","bodyContainerRect","boundingRect","getNumber","aData","parseFloat","startDragging","side","initialX","clientX","touches","initialY","clientY","elementRect","offsetX","offsetY","dragInitPos","x","y","dragEndPos","dragOverEventData","initialWidth","offsetWidth","initialLeft","offsetLeft","currentX","distanceX","currentY","distanceY","newWidth","max","newLeft","finalWidth","abs","nbOfDays","initialStayDays","updateEventData","showInfo","midPoint","hideBubbleInfo","noteNode","balanceNode","backgroundColor","onTouchStart","onMouseDown","bubbleInfoTop","iglBookingEventHoverCss","IglBookingEventHover","todayTimeStamp","eventService","getTotalOccupants","getPhoneNumber","getCountry","getPhoneCode","phone_prefix","renderPhone","getGuestNote","getInternalNote","getTotalPrice","getCheckInDate","getCheckOutDate","getArrivalTime","getRatePlan","getEntryDate","getReleaseAfterHours","isNewBooking","isCheckedIn","isCheckedOut","isBlockedDateEvent","getRoomId","getCategoryByRoomId","hasSplitBooking","canCheckIn","fromTimeStamp","toTimeStamp","canCheckOut","handleEditBooking","handleBookingOption","getStringDateFormat","handleAddRoom","from_date_str","to_date_str","eventData","ADD_ROOM_TO_BOOKING","editabled","handleCustomerCheckIn","handleCustomerCheckOut","handleDeleteEvent","deleteButton","handleUpdateBlockedDates","handleConvertBlockedDateToBooking","getRoomInfo","roomIdToFind","selectedRoom","CATEGORY","ROOM_NAME","ROOMS_INFO","eventType","roomData","showBookingPopup","getInfoElement","role","getNewBookingOptions","getBlockedView","iglBookingRoomRatePlanCss","IglBookingRoomRatePlan","selectedData","ratePlanData","isRateModified","defaultSelectedRate","getSelectedOffering","variation","ratePlanDataChanged","handleRateDaysUpdate","handleInput","inputElement","inputValue","numericRegex","offering","bookProperty","gotoSplitPageTwoEvent","totalAvailableRooms","iglBookingRoomsCss","IglBookingRooms","validBookingTypes","fill","roomsDistributions","onRoomDataUpdate","newValue","updateRatePlanTotalRooms","ratePlanIndex","calculateTotalSelectedRoomsExcludingIndex","excludedIndex","reduce","acc","idx","ratePlan","totalSelectedRoomsExcludingCurrent","availableRooms","iglCalBodyCss","IglCalBody","dragOverHighlightElementHandler","dragOverElement","gotoRoom","expanded","toggleCategory","scrollToRoom","addToBeAssignedEvents","addBookingDatas","scrollPageToRoom","refClass","calendarData","getCategoryRooms","getCategoryName","getCategoryId","getTotalPhysicalRooms","getRoomName","getRoomById","physicalRooms","physical_room","getBookingData","bookingEvents","getSelectedCellRefName","selectedDay","getSplitBookingEvents","newEvent","ind","ev","addNewEvent","EMAIL","convertBooking","REFERENCE_TYPE","getTwoDigitNumStr","editable","popupTitle","getDateStr","num","locale","removeNewEvent","events","clickCell","isScrollViewDragging","refKey","showNewBookingPopup","getGeneralCategoryDayColumns","addClass","isCategory","dayInfo","today","getGeneralRoomDayColumns","getRoomCategoryRow","getRoomsByCategory","getRoomRows","allBookingEvents","iglCalFooterCss","IglCalFooter","handleOptionEvent","optionEvent","iglCalHeaderCss","IglCalHeader","searchValue","searchList","handleReduceAvailableUnitEvent","selectedDate","tobeAssignedCount","renderView","showToBeAssigned","gotoToBeAssignedDate","handleDateSelect","picker","blur","handleClearSearch","handleFilterRooms","toLocaleLowerCase","handleScrollToRoom","gotoRoomEvent","getNewBookingModel","monthsInfo","monthInfo","iglDateRangeCss","IglDateRange","getFormattedDateString","calculateTotalNights","handleDateSelectEvent","dateSelectEvent","handleDateChange","start","end","autoApply","onDateChanged","iglLegendsCss","IglLegends","legendInfo","design","iglPagetwoCss","IglPagetwo","initializeGuestData","newSelectedUnits","handleOnApplicationInfoDataUpdateEvent","categoryIdKey","updatedUnits","buttonClicked","iglPropertyBookedByCss","IglPropertyBookedBy","arrivalTimeList","expiryMonths","expiryYears","currentMonth","isdCode","cardNumber","cardHolderName","expiryMonth","expiryYear","initializeExpiryYears","initializeDateData","populateBookedByData","currentYear","bookedByData","foundTime","time","handleNumberInput","handleEmailInput","isValidEmail","checkUser","emailId","emailPattern","onBlur","countryNode","rows","pattern","ToBeAssignedService","getUnassignedDates","convertUnassignedDates","getUnassignedRooms","specific_date","transformToAssignable","assignUnit","cleanSpacesAndSpecialChars","regex","customer","unassigned_rooms","roomTypeName","room_type_name","guest_name","unassigned_date","BOOKING_NUMBER","book_nbr","fromDateTimeStamp","toDateTimeStamp","RT_ID","getRoomTypeId","updateAvailableRooms","addDefaultDateRange","roomName","assignable_units","Is_Fully_Available","Is_Not_Available","dates","convertedDates","categories","dateStr","iglTbaBookingViewCss","IglTbaBookingView","highlightSection","allRoomsList","toBeAssignedService","onSelectRoom","componentShouldUpdate","oldValue","propName","categoryIndex","eventIndex","handleHighlightAvailability","handleAssignUnit","assignEvent","addToBeAssignedEvent","assignRoomEvent","highlightToBeAssignedBookingEvent","filteredEvents","handleCloseAssignment","highlightBookingEvent","iglTbaCategoryViewCss","IglTbaCategoryView","handleAssignRoomEvent","eventDatas","assignUnitEvent","getEventView","categoriesData","onAssignRoomEvent","iglToBeAssignedCss","IglToBeAssigned","reArrangeData","updateCategories","categorisedRooms","unassignedDates","roomIds","firstKey","orderedDatesList","sort","gotoDate","showForDate","showDatesList","dateStamp","showUnassignedDate","getDay","dayOfWeek","getLocalizedDayOfWeek","weekday","toLocaleDateString","getToBeAssignedEntities","getCategoryView","onAssignUnitEvent","reduceAvailableUnitEvent","loadingMessage","Fragment","ordDate","RoomService","fetchData","iglooCalendarCss","IglooCalendar","visibleCalendarCells","roomService","scrollViewDragPos","onScrollContentMoveHandler","dx","dy","scrollContainer","scrollTop","scrollLeft","scrollViewDragging","onScrollContentMoveEndHandler","ticketChanged","setItem","ticket","initializeApp","baseurl","roomResp","setRoomsData","bookingResp","getLegendData","endingDate","toBeAssignedEvents","updateBookingEventsDateRange","startingDay","getStartingDateOfCalendar","scrollToElement","handledeleteEvent","roomServiceResp","roomsData","calendar_legends","getEndingDateOfCalendar","getLocalizedMonth","goToDate","topLeftCell","gotoDay","scrollTo","gotoRect","containerRect","topLeftCellRect","targetScrollClass","shouldRenderCalendarView","onOptionSelect","calendarElement","classList","toggle","showLegend","bookingItem","closeSideMenu","dragScrollContent","isPreventPageScroll","hasAncestorWithClass","calendarScrolling","leftSideMenuSize","maxWidth","leftX","rightX","cells","querySelectorAll","monthContainer","monthRect","titleElement","marginLeft","monthWidth","className","currentElement","parentElement","showBookingPopupEventDataHandler","updateEventDataHandler","bookedData","bookedEvent","dragOverEventDataHandler","containerDays","containerRooms","htmlElement","getAttribute","offsetTop","offsetHeight","highlightDragOver","hightLightElement","currentPosition","xElement","yElement","dragOverHighlightElement","moveBookingTo","onOptionEvent","onScroll","onCloseBookingWindow","onlineResources","isCSS","link","IrCommon","parseRefs","initializeStyles","hrefsChanged","extraResources","resources","appendTag","tagName","attributes","tag","selectorParts","attr","selector","existingTag","appendChild","rel","isJS","src","irDatePickerCss","IrDatePicker","dateRangeInput","$","daterangepicker","opens","maxSpan","separator","applyLabel","cancelLabel","fromLabel","toLabel","customRangeLabel","weekLabel","daysOfWeek","monthNames","firstDay","dateChanged","irInterceptorCss","IrInterceptor","successMessage","errorMessage","setupAxiosInterceptors","handleRequest","handleResponse","extractEndpoint","isHandledEndpoint","handledEndpoints","defaultMessage","showToast","handleCompletion","isShown","hideToastAfterDelay","isSuccess","delay","success","renderMessage","viewBox","xmlns","irTooltipCss","IrTooltip","toggleOpen","shouldOpen","tooltipTimeout","clearTimeout","onMouseEnter","onMouseLeave","innerHTML"],"sources":["src/components/igloo-calendar/igl-application-info/igl-application-info.css?tag=igl-application-info&encapsulation=scoped","src/components/igloo-calendar/igl-application-info/igl-application-info.tsx","node_modules/axios/lib/helpers/bind.js","node_modules/axios/lib/utils.js","node_modules/axios/lib/core/AxiosError.js","node_modules/axios/lib/helpers/null.js","node_modules/axios/lib/helpers/toFormData.js","node_modules/axios/lib/helpers/AxiosURLSearchParams.js","node_modules/axios/lib/helpers/buildURL.js","node_modules/axios/lib/core/InterceptorManager.js","node_modules/axios/lib/defaults/transitional.js","node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","node_modules/axios/lib/platform/browser/classes/FormData.js","node_modules/axios/lib/platform/browser/classes/Blob.js","node_modules/axios/lib/platform/browser/index.js","node_modules/axios/lib/helpers/toURLEncodedForm.js","node_modules/axios/lib/helpers/formDataToJSON.js","node_modules/axios/lib/defaults/index.js","node_modules/axios/lib/helpers/parseHeaders.js","node_modules/axios/lib/core/AxiosHeaders.js","node_modules/axios/lib/core/transformData.js","node_modules/axios/lib/cancel/isCancel.js","node_modules/axios/lib/cancel/CanceledError.js","node_modules/axios/lib/core/settle.js","node_modules/axios/lib/helpers/cookies.js","node_modules/axios/lib/helpers/isAbsoluteURL.js","node_modules/axios/lib/helpers/combineURLs.js","node_modules/axios/lib/core/buildFullPath.js","node_modules/axios/lib/helpers/isURLSameOrigin.js","node_modules/axios/lib/helpers/parseProtocol.js","node_modules/axios/lib/helpers/speedometer.js","node_modules/axios/lib/adapters/xhr.js","node_modules/axios/lib/adapters/adapters.js","node_modules/axios/lib/core/dispatchRequest.js","node_modules/axios/lib/core/mergeConfig.js","node_modules/axios/lib/env/data.js","node_modules/axios/lib/helpers/validator.js","node_modules/axios/lib/core/Axios.js","node_modules/axios/lib/cancel/CancelToken.js","node_modules/axios/lib/helpers/spread.js","node_modules/axios/lib/helpers/isAxiosError.js","node_modules/axios/lib/helpers/HttpStatusCode.js","node_modules/axios/lib/axios.js","src/utils/utils.ts","src/utils/booking.ts","src/services/booking.service.ts","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.css?tag=igl-block-dates-view&encapsulation=scoped","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.tsx","src/services/events.service.ts","src/components/igloo-calendar/igl-book-property/igl-book-property.css?tag=igl-book-property&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property.tsx","src/components/igloo-calendar/igl-booking-event/igl-booking-event.css?tag=igl-booking-event&encapsulation=scoped","src/components/igloo-calendar/igl-booking-event/igl-booking-event.tsx","src/components/igloo-calendar/igl-booking-event-hover/igl-booking-event-hover.css?tag=igl-booking-event-hover&encapsulation=scoped","src/components/igloo-calendar/igl-booking-event-hover/igl-booking-event-hover.tsx","src/components/igloo-calendar/igl-booking-room-rate-plan/igl-booking-room-rate-plan.css?tag=igl-booking-room-rate-plan&encapsulation=scoped","src/components/igloo-calendar/igl-booking-room-rate-plan/igl-booking-room-rate-plan.tsx","src/components/igloo-calendar/igl-booking-rooms/igl-booking-rooms.css?tag=igl-booking-rooms&encapsulation=scoped","src/components/igloo-calendar/igl-booking-rooms/igl-booking-rooms.tsx","src/components/igloo-calendar/igl-cal-body/igl-cal-body.css?tag=igl-cal-body&encapsulation=scoped","src/components/igloo-calendar/igl-cal-body/igl-cal-body.tsx","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.css?tag=igl-cal-footer&encapsulation=scoped","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.tsx","src/components/igloo-calendar/igl-cal-header/igl-cal-header.css?tag=igl-cal-header&encapsulation=scoped","src/components/igloo-calendar/igl-cal-header/igl-cal-header.tsx","src/components/igloo-calendar/igl-date-range/igl-date-range.css?tag=igl-date-range&encapsulation=scoped","src/components/igloo-calendar/igl-date-range/igl-date-range.tsx","src/components/igloo-calendar/igl-legends/igl-legends.css?tag=igl-legends&encapsulation=scoped","src/components/igloo-calendar/igl-legends/igl-legends.tsx","src/components/igloo-calendar/igl-pagetwo/igl-pagetwo.css?tag=igl-pagetwo&encapsulation=scoped","src/components/igloo-calendar/igl-pagetwo/igl-pagetwo.tsx","src/components/igloo-calendar/igl-property-booked-by/igl-property-booked-by.css?tag=igl-property-booked-by&encapsulation=scoped","src/components/igloo-calendar/igl-property-booked-by/igl-property-booked-by.tsx","src/services/toBeAssigned.service.ts","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-booking-view/igl-tba-booking-view.css?tag=igl-tba-booking-view&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-booking-view/igl-tba-booking-view.tsx","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-category-view/igl-tba-category-view.css?tag=igl-tba-category-view&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-category-view/igl-tba-category-view.tsx","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.css?tag=igl-to-be-assigned&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.tsx","src/services/room.service.ts","src/components/igloo-calendar/igloo-calendar.css?tag=igloo-calendar&encapsulation=scoped","src/components/igloo-calendar/igloo-calendar.tsx","src/common/ir.common.resources.ts","src/components/ir-common/ir-common.tsx","src/components/ir-date-picker/ir-date-picker.css?tag=ir-date-picker&encapsulation=scoped","src/components/ir-date-picker/ir-date-picker.tsx","src/components/ir-interceptor/ir-interceptor.css?tag=ir-interceptor&encapsulation=scoped","src/components/ir-interceptor/ir-interceptor.tsx","src/components/ir-tooltip/ir-tooltip.css?tag=ir-tooltip&encapsulation=scoped","src/components/ir-tooltip/ir-tooltip.tsx"],"sourcesContent":["@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  Watch,\r\n  State,\r\n} from \"@stencil/core\";\r\nimport { v4 } from \"uuid\";\r\n\r\n@Component({\r\n  tag: \"igl-application-info\",\r\n  styleUrl: \"igl-application-info.css\",\r\n  scoped: true,\r\n})\r\nexport class IglApplicationInfo {\r\n  @Prop() guestInfo: { [key: string]: any };\r\n  @Prop({ reflect: true, mutable: true }) roomsList: { [key: string]: any }[] =\r\n    [];\r\n  @Prop() guestRefKey: string;\r\n  @Prop() bedPreferenceType = [];\r\n  @Prop() selectedUnits: number[] = [];\r\n  @Prop() bookingType: string = \"PLUS_BOOKING\";\r\n  @Prop() index: number;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() filterdRoomList = [];\r\n  private guestData: { [key: string]: any };\r\n\r\n  componentWillLoad() {\r\n    this.guestData = this.guestInfo ? { ...this.guestInfo } : {};\r\n    this.updateRoomList();\r\n  }\r\n  @Watch(\"selectedUnits\")\r\n  async handleSelctedUnits() {\r\n    this.updateRoomList();\r\n  }\r\n  updateRoomList() {\r\n    const units = [...this.selectedUnits];\r\n    units[this.index] = -1;\r\n    this.filterdRoomList = this.roomsList.filter((e) => !units.includes(e.id));\r\n  }\r\n  updateData() {\r\n    this.dataUpdateEvent.emit({\r\n      key: \"roomRatePlanUpdate\",\r\n      guestRefKey: this.guestRefKey,\r\n      data: { ...this.guestData },\r\n    });\r\n  }\r\n\r\n  handleDataChange(key, value) {\r\n    this.guestData[key] = value;\r\n    if (key === \"roomId\") {\r\n      this.guestData[\"roomName\"] =\r\n        this.filterdRoomList.find((room) => room.id === value).name || \"\";\r\n    }\r\n    this.updateData();\r\n  }\r\n\r\n  handleGuestNameChange(event) {\r\n    // console.log(\"On Guest name Change::\", event.target.value);\r\n    this.guestData.guestName = event.target.value;\r\n    this.updateData();\r\n  }\r\n\r\n  render() {\r\n    //console.log(this.guestInfo, this.roomsList);\r\n    return (\r\n      <Host>\r\n        <div class=\"text-left mt-1\">\r\n          <div class=\"ml-1 mb-1\">\r\n            {this.bookingType === \"PLUS_BOOKING\" ||\r\n            this.bookingType === \"ADD_ROOM\" ||\r\n            this.bookingType === \"EDIT_BOOKING\" ? (\r\n              <span class=\"h5\">{this.guestInfo.roomCategoryName}</span>\r\n            ) : null}\r\n            <span class=\"ml-1 font-weight-bold\">\r\n              {this.guestInfo.ratePlanName.replace(\r\n                this.guestInfo.roomCategoryName + \"/\",\r\n                \"\"\r\n              )}\r\n              <ir-tooltip\r\n                class=\"ml-1 mr-1\"\r\n                message={this.guestInfo.cancelation + this.guestInfo.guarantee}\r\n              ></ir-tooltip>\r\n            </span>\r\n            <span>{this.guestInfo.adult_child_offering}</span>\r\n          </div>\r\n\r\n          <div class=\"row m-0 p-0 align-items-center\">\r\n            <div class=\"col-5\">\r\n              <input\r\n                id={v4()}\r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                placeholder=\"Guest first name & last name\"\r\n                name=\"guestName\"\r\n                onInput={(event) => this.handleGuestNameChange(event)}\r\n                required\r\n                value={this.guestData.guestName}\r\n              />\r\n            </div>\r\n            {this.bookingType === \"PLUS_BOOKING\" ||\r\n            this.bookingType === \"ADD_ROOM\" ||\r\n            this.bookingType === \"EDIT_BOOKING\" ? (\r\n              <div class=\"col-2 p-0\">\r\n                <select\r\n                  class=\"form-control input-sm pr-0\"\r\n                  id={v4()}\r\n                  onChange={(event) =>\r\n                    this.handleDataChange(\r\n                      \"roomId\",\r\n                      parseInt((event.target as HTMLInputElement).value)\r\n                    )\r\n                  }\r\n                >\r\n                  <option value=\"\" selected={this.guestData.roomId === \"\"}>\r\n                    Assign units\r\n                  </option>\r\n                  {this.filterdRoomList.map((room) => (\r\n                    <option\r\n                      value={room.id}\r\n                      selected={this.guestData.roomId === room.id}\r\n                    >\r\n                      {room.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            ) : null}\r\n\r\n            <div class=\"col-3\">\r\n              <select\r\n                class=\"form-control input-sm\"\r\n                id={v4()}\r\n                onChange={(event) =>\r\n                  this.handleDataChange(\r\n                    \"preference\",\r\n                    (event.target as HTMLInputElement).value\r\n                  )\r\n                }\r\n              >\r\n                <option value=\"\" selected={this.guestData.preference === \"\"}>\r\n                  No preference\r\n                </option>\r\n                {this.bedPreferenceType.map((data) => (\r\n                  <option\r\n                    value={data.CODE_NAME}\r\n                    selected={this.guestData.preference === data.CODE_NAME}\r\n                  >\r\n                    {data.CODE_VALUE_EN}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div class=\"col-2\">${this.guestInfo.rate}</div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in val) && !(Symbol.iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[Symbol.iterator];\n\n  const iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  value = +value;\n  return Number.isFinite(value) ? value : defaultValue;\n}\n\nconst ALPHA = 'abcdefghijklmnopqrstuvwxyz'\n\nconst DIGIT = '0123456789';\n\nconst ALPHABET = {\n  DIGIT,\n  ALPHA,\n  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT\n}\n\nconst generateString = (size = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {\n  let str = '';\n  const {length} = alphabet;\n  while (size--) {\n    str += alphabet[Math.random() * length|0]\n  }\n\n  return str;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[Symbol.toStringTag] === 'FormData' && thing[Symbol.iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  ALPHABET,\n  generateString,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  response && (this.response = response);\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.response && this.response.status ? this.response.status : null\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?object} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst isStandardBrowserEnv = (() => {\n  let product;\n  if (typeof navigator !== 'undefined' && (\n    (product = navigator.product) === 'ReactNative' ||\n    product === 'NativeScript' ||\n    product === 'NS')\n  ) {\n    return false;\n  }\n\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n})();\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\n const isStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  isStandardBrowserEnv,\n  isStandardBrowserWebWorkerEnv,\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      if (!hasJSONContentType) {\n        return data;\n      }\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.isStandardBrowserEnv ?\n\n// Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        const cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n// Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })();\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.isStandardBrowserEnv ?\n\n// Standard browser envs have full support of the APIs needed to test\n// whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    const msie = /(msie|trident)/i.test(navigator.userAgent);\n    const urlParsingNode = document.createElement('a');\n    let originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      let href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n          urlParsingNode.pathname :\n          '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      const parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n          parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })();\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","'use strict';\n\nimport utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport cookies from './../helpers/cookies.js';\nimport buildURL from './../helpers/buildURL.js';\nimport buildFullPath from '../core/buildFullPath.js';\nimport isURLSameOrigin from './../helpers/isURLSameOrigin.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport speedometer from '../helpers/speedometer.js';\n\nfunction progressEventReducer(listener, isDownloadStream) {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e\n    };\n\n    data[isDownloadStream ? 'download' : 'upload'] = true;\n\n    listener(data);\n  };\n}\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    let requestData = config.data;\n    const requestHeaders = AxiosHeaders.from(config.headers).normalize();\n    const responseType = config.responseType;\n    let onCanceled;\n    function done() {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(onCanceled);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', onCanceled);\n      }\n    }\n\n    let contentType;\n\n    if (utils.isFormData(requestData)) {\n      if (platform.isStandardBrowserEnv || platform.isStandardBrowserWebWorkerEnv) {\n        requestHeaders.setContentType(false); // Let the browser set it\n      } else if(!requestHeaders.getContentType(/^\\s*multipart\\/form-data/)){\n        requestHeaders.setContentType('multipart/form-data'); // mobile/desktop app frameworks\n      } else if(utils.isString(contentType = requestHeaders.getContentType())){\n        // fix semicolon duplication issue for ReactNative FormData implementation\n        requestHeaders.setContentType(contentType.replace(/^\\s*(multipart\\/form-data);+/, '$1'))\n      }\n    }\n\n    let request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      const username = config.auth.username || '';\n      const password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.set('Authorization', 'Basic ' + btoa(username + ':' + password));\n    }\n\n    const fullPath = buildFullPath(config.baseURL, config.url);\n\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = config.transitional || transitionalDefaults;\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (platform.isStandardBrowserEnv) {\n      // Add xsrf header\n      // regarding CVE-2023-45857 config.withCredentials condition was removed temporarily\n      const xsrfValue = isURLSameOrigin(fullPath) && config.xsrfCookieName && cookies.read(config.xsrfCookieName);\n\n      if (xsrfValue) {\n        requestHeaders.set(config.xsrfHeaderName, xsrfValue);\n      }\n    }\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', progressEventReducer(config.onDownloadProgress, true));\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', progressEventReducer(config.onUploadProgress));\n    }\n\n    if (config.cancelToken || config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      config.cancelToken && config.cancelToken.subscribe(onCanceled);\n      if (config.signal) {\n        config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(fullPath);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? thing.toJSON() : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b) => mergeDeepProperties(headersToObject(a), headersToObject(b), true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","export const VERSION = \"1.6.0\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig;\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","import moment from \"moment\";\r\nimport IBooking, { ICountry, PhysicalRoomType } from \"../models/IBooking\";\r\n\r\nexport function convertDateToCustomFormat(\r\n  dayWithWeekday: string,\r\n  monthWithYear: string\r\n): string {\r\n  const months = [\r\n    \"JAN\",\r\n    \"FEB\",\r\n    \"MAR\",\r\n    \"APR\",\r\n    \"MAY\",\r\n    \"JUN\",\r\n    \"JUL\",\r\n    \"AUG\",\r\n    \"SEP\",\r\n    \"OCT\",\r\n    \"NOV\",\r\n    \"DEC\",\r\n  ];\r\n\r\n  const [_, day] = dayWithWeekday.split(\" \");\r\n  const [month, year] = monthWithYear.split(\" \");\r\n\r\n  const monthIndex = months.indexOf(month);\r\n  if (monthIndex !== -1) {\r\n    return `${day}_${monthIndex + 1}_${year}`;\r\n  } else {\r\n    throw new Error(\"Invalid Month\");\r\n  }\r\n}\r\n\r\nexport function convertDateToTime(\r\n  dayWithWeekday: string,\r\n  monthWithYear: string\r\n): number {\r\n  const months = [\r\n    \"JAN\",\r\n    \"FEB\",\r\n    \"MAR\",\r\n    \"APR\",\r\n    \"MAY\",\r\n    \"JUN\",\r\n    \"JUL\",\r\n    \"AUG\",\r\n    \"SEP\",\r\n    \"OCT\",\r\n    \"NOV\",\r\n    \"DEC\",\r\n  ];\r\n\r\n  const [_, day] = dayWithWeekday.split(\" \");\r\n  const [month, year] = monthWithYear.split(\" \");\r\n\r\n  const monthIndex = months.indexOf(month);\r\n  if (monthIndex !== -1) {\r\n    return new Date(`${year}-${monthIndex + 1}-${day}`).getTime();\r\n  } else {\r\n    throw new Error(\"Invalid Month\");\r\n  }\r\n}\r\nexport function dateDifference(FROM_DATE: string, TO_DATE: string): number {\r\n  const startDate = new Date(FROM_DATE);\r\n  const endDate = new Date(TO_DATE);\r\n  return Math.ceil(\r\n    (endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24)\r\n  );\r\n}\r\nexport const getBrowserLanguage = (): string => {\r\n  const defaultLang = \"en\";\r\n  const lang = navigator.language || defaultLang;\r\n  return lang.toUpperCase().split(\"-\")[0];\r\n};\r\n\r\nexport const transformBooking = (\r\n  physicalRoom: PhysicalRoomType[]\r\n): IBooking[] => {\r\n  const myBookings: IBooking[] = [];\r\n  physicalRoom.forEach((room) => {\r\n    Object.keys(room.calendar_cell).forEach((key) => {\r\n      if (room.calendar_cell[key].Is_Available === false) {\r\n        if (myBookings.find((b) => b.ID === room.id.toString())) {\r\n        } else {\r\n          //myBookings.push({})\r\n        }\r\n      }\r\n    });\r\n  });\r\n  return myBookings;\r\n};\r\n\r\nexport function dateToFormattedString(date: Date): string {\r\n  const year = date.getFullYear();\r\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\"); // +1 because months are 0-based in JS\r\n  const day = date.getDate().toString().padStart(2, \"0\");\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\nexport function formatLegendColors(legendData) {\r\n  let formattedLegendData: any = {};\r\n\r\n  const statusId = {\r\n    \"IN-HOUSE\": { id: 1, clsName: \"IN_HOUSE\" },\r\n    CONFIRMED: { id: 2, clsName: \"CONFIRMED\" },\r\n    \"PENDING-CONFIRMATION\": { id: 3, clsName: \"PENDING_CONFIRMATION\" },\r\n    \"SPLIT-UNIT\": { id: 4, clsName: \"SPLIT_UNIT\" },\r\n    \"CHECKED-IN\": { id: 5, clsName: \"CHECKED_IN\" },\r\n    \"CHECKED-OUT\": { id: 5, clsName: \"CHECKED_OUT\" },\r\n    BLOCKED: { id: 6, clsName: \"BLOCKED\" },\r\n    \"BLOCKED-WITH-DATES\": { id: 7, clsName: \"BLOCKED_WITH_DATES\" },\r\n    NOTES: { id: 8, clsName: \"NOTES\" },\r\n    \"OUTSTANDING-BALANCE\": { id: 9, clsName: \"OUTSTANDING_BALANCE\" },\r\n  };\r\n\r\n  legendData.forEach((legend) => {\r\n    formattedLegendData[legend.id] = legend;\r\n    formattedLegendData.statusId = statusId; // NOTE: This will overwrite the 'statusId' property with every iteration.\r\n  });\r\n\r\n  return formattedLegendData;\r\n}\r\nexport function getCurrencySymbol(currencyCode) {\r\n  const formatter = new Intl.NumberFormat(undefined, {\r\n    style: \"currency\",\r\n    currency: currencyCode,\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n  });\r\n  return formatter.format(0).replace(/[0-9]/g, \"\").trim();\r\n}\r\nexport const findCountry = (id: number, countries: ICountry[]): ICountry =>\r\n  countries.find((country) => country.id === id);\r\n\r\nexport function getReleaseHoursString(releaseDate: number) {\r\n  const dt = new Date();\r\n  const releaseAfterHours = releaseDate;\r\n\r\n  dt.setHours(dt.getHours() + releaseAfterHours, dt.getMinutes(), 0, 0);\r\n\r\n  return {\r\n    BLOCKED_TILL_DATE: dateToFormattedString(dt),\r\n    BLOCKED_TILL_HOUR: dt.getHours().toString(),\r\n    BLOCKED_TILL_MINUTE: dt.getMinutes().toString(),\r\n  };\r\n}\r\n\r\nexport function computeEndDate(\r\n  startDate: string,\r\n  numberOfDays: number\r\n): string {\r\n  const dateObj = moment(startDate, \"D_M_YYYY\");\r\n  dateObj.add(numberOfDays, \"days\");\r\n  return dateObj.format(\"YYYY-MM-DD\");\r\n}\r\n\r\nexport function convertDMYToISO(date: string) {\r\n  const dateObj = moment(date, \"D_M_YYYY\");\r\n  return dateObj.format(\"YYYY-MM-DD\");\r\n}\r\n","import axios from \"axios\";\r\nimport {\r\n  PhysicalRoomType,\r\n  MonthType,\r\n  CellType,\r\n  STATUS,\r\n} from \"../models/IBooking\";\r\nimport { dateDifference } from \"./utils\";\r\n\r\nexport async function getMyBookings(months: MonthType[]): Promise<any[]> {\r\n  const myBookings: any[] = [];\r\n  const stayStatus = await getStayStatus();\r\n  for (const month of months) {\r\n    for (const day of month.days) {\r\n      for (const room of day.room_types) {\r\n        assignBooking(room.physicalrooms, myBookings, stayStatus);\r\n      }\r\n    }\r\n  }\r\n\r\n  return myBookings;\r\n}\r\n\r\nfunction assignBooking(\r\n  physicalRoom: PhysicalRoomType[],\r\n  myBookings: any[],\r\n  stayStatus: { code: string; value: string }[]\r\n): void {\r\n  for (const room of physicalRoom) {\r\n    for (const key in room.calendar_cell) {\r\n      if (room.calendar_cell[key].Is_Available === false) {\r\n        addOrUpdateBooking(room.calendar_cell[key], myBookings, stayStatus);\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction formatName(firstName: string | null, lastName: string | null) {\r\n  if (firstName === null && lastName === null) return \"\";\r\n  if (lastName !== null) {\r\n    return `${firstName ?? \"\"} , ${lastName ?? \"\"}`;\r\n  }\r\n  return firstName;\r\n}\r\nasync function getStayStatus() {\r\n  try {\r\n    const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n    if (token) {\r\n      const { data } = await axios.post(\r\n        `/Get_Setup_Entries_By_TBL_NAME_Multi?Ticket=${token}`,\r\n        {\r\n          TBL_NAMES: [\"_STAY_STATUS\"],\r\n        }\r\n      );\r\n      return data.My_Result.map((d) => ({\r\n        code: d.CODE_NAME,\r\n        value: d.CODE_VALUE_EN,\r\n      }));\r\n    } else {\r\n      throw new Error(\"Invalid Token\");\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nconst status: Record<string, STATUS> = {\r\n  \"004\": \"BLOCKED\",\r\n  \"003\": \"BLOCKED-WITH-DATES\",\r\n  \"002\": \"BLOCKED\",\r\n  \"001\": \"IN-HOUSE\",\r\n};\r\n\r\nfunction getDefaultData(\r\n  cell: CellType,\r\n  stayStatus: { code: string; value: string }[]\r\n): any {\r\n  if ([\"003\", \"002\", \"004\"].includes(cell.STAY_STATUS_CODE)) {\r\n    // console.log(\"blocked cells\",cell);\r\n    return {\r\n      ID: cell.POOL,\r\n      NOTES: cell.My_Block_Info.NOTES,\r\n      BALANCE: \"\",\r\n      NAME:\r\n        stayStatus.find((st) => st.code === cell.STAY_STATUS_CODE).value || \"\",\r\n      RELEASE_AFTER_HOURS: cell.My_Block_Info.DESCRIPTION,\r\n      PR_ID: cell.My_Block_Info.pr_id,\r\n      ENTRY_DATE: cell.My_Block_Info.BLOCKED_TILL_DATE,\r\n      ENTRY_HOUR: cell.My_Block_Info.BLOCKED_TILL_HOUR,\r\n      ENTRY_MINUTE: cell.My_Block_Info.BLOCKED_TILL_MINUTE,\r\n      OPTIONAL_REASON: cell.My_Block_Info.NOTES,\r\n      FROM_DATE: cell.DATE,\r\n      TO_DATE: cell.DATE,\r\n      NO_OF_DAYS: 1,\r\n      STATUS: status[cell.STAY_STATUS_CODE],\r\n      POOL: cell.POOL,\r\n      STATUS_CODE: cell.STAY_STATUS_CODE,\r\n      OUT_OF_SERVICE: cell.STAY_STATUS_CODE === \"004\",\r\n      FROM_DATE_STR: cell.My_Block_Info.format.from_date,\r\n      TO_DATE_STR: cell.My_Block_Info.format.to_date,\r\n    };\r\n  }\r\n  //console.log(\"booked cells\",cell);\r\n  return {\r\n    ID: cell.booking.booking_nbr,\r\n    TO_DATE: cell.DATE,\r\n    FROM_DATE: cell.DATE,\r\n    NO_OF_DAYS: 1,\r\n    IS_EDITABLE: cell.booking.is_editable,\r\n    STATUS: status[cell.STAY_STATUS_CODE],\r\n    NAME: formatName(cell.room.guest.first_name, cell.room.guest.last_name),\r\n    PHONE: cell.booking.guest.mobile ?? \"\",\r\n    ENTRY_DATE: cell.booking.booked_on.date,\r\n    RATE: cell.room.total,\r\n    RATE_PLAN: cell.room.rateplan.name,\r\n    SPLIT_BOOKING: false,\r\n    RATE_PLAN_ID: cell.room.rateplan.id,\r\n    IDENTIFIER: cell.room.identifier,\r\n    RATE_TYPE: 1,\r\n    ADULTS_COUNT: cell.room.occupancy.adult_nbr,\r\n    CHILDREN_COUNT: cell.room.occupancy.children_nbr,\r\n    PR_ID: cell.pr_id,\r\n    POOL: cell.POOL,\r\n    GUEST: cell.booking.guest,\r\n    rooms: cell.booking.rooms,\r\n    TOTAL_PRICE: cell.room.total,\r\n    COUNTRY: cell.booking.guest.country_id,\r\n    FROM_DATE_STR: cell.booking.format.from_date,\r\n    TO_DATE_STR: cell.booking.format.to_date,\r\n  };\r\n}\r\n\r\nfunction updateBookingWithStayData(data: any, cell: CellType): any {\r\n  data.NO_OF_DAYS = dateDifference(data.FROM_DATE, cell.DATE);\r\n  data.TO_DATE = cell.DATE;\r\n\r\n  if (cell.booking) {\r\n    const { arrival } = cell.booking;\r\n    Object.assign(data, {\r\n      ARRIVAL_TIME: arrival.description,\r\n    });\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction addOrUpdateBooking(\r\n  cell: CellType,\r\n  myBookings: any[],\r\n  stayStatus: { code: string; value: string }[]\r\n): void {\r\n  const index = myBookings.findIndex((booking) => booking.POOL === cell.POOL);\r\n\r\n  if (index === -1) {\r\n    const newData = getDefaultData(cell, stayStatus);\r\n    myBookings.push(newData);\r\n  } else {\r\n    const updatedData = updateBookingWithStayData(myBookings[index], cell);\r\n    myBookings[index] = updatedData;\r\n  }\r\n}\r\n","import { DayData } from \"../models/DayType\";\r\nimport axios from \"axios\";\r\nimport {\r\n  BookingDetails,\r\n  IBlockUnit,\r\n  ICountry,\r\n  IEntries,\r\n  ISetupEntries,\r\n  MonthType,\r\n} from \"../models/IBooking\";\r\n\r\nimport {\r\n  convertDateToCustomFormat,\r\n  convertDateToTime,\r\n  dateToFormattedString,\r\n} from \"../utils/utils\";\r\nimport { getMyBookings } from \"../utils/booking\";\r\nimport { Day } from \"../models/booking.dto\";\r\n\r\nexport class BookingService {\r\n  public async getCalendarData(\r\n    propertyid: number,\r\n    from_date: string,\r\n    to_date: string\r\n  ): Promise<{ [key: string]: any }> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token !== null) {\r\n        const { data } = await axios.post(\r\n          `/Get_Exposed_Calendar?Ticket=${token}`,\r\n          {\r\n            propertyid,\r\n            from_date,\r\n            to_date,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        const months: MonthType[] = data.My_Result.months;\r\n        const customMonths: { daysCount: number; monthName: string }[] = [];\r\n        const myBooking = await getMyBookings(months);\r\n        const days: DayData[] = months\r\n          .map((month) => {\r\n            customMonths.push({\r\n              daysCount: month.days.length,\r\n              monthName: month.description,\r\n            });\r\n            return month.days.map((day) => ({\r\n              day: convertDateToCustomFormat(\r\n                day.description,\r\n                month.description\r\n              ),\r\n              currentDate: convertDateToTime(\r\n                day.description,\r\n                month.description\r\n              ),\r\n              dayDisplayName: day.description,\r\n              rate: day.room_types,\r\n              unassigned_units_nbr: day.unassigned_units_nbr,\r\n              occupancy: day.occupancy,\r\n            }));\r\n          })\r\n          .flat();\r\n\r\n        return Promise.resolve({\r\n          ExceptionCode: null,\r\n          ExceptionMsg: \"\",\r\n          My_Params_Get_Rooming_Data: {\r\n            AC_ID: propertyid,\r\n            FROM: data.My_Params_Get_Exposed_Calendar.from_date,\r\n            TO: data.My_Params_Get_Exposed_Calendar.to_date,\r\n          },\r\n          days,\r\n          months: customMonths,\r\n          myBookings: myBooking,\r\n          defaultMonths: months,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n  public async getBookingAvailability(\r\n    from_date: string,\r\n    to_date: string,\r\n    propertyid: number,\r\n    language: string,\r\n    room_type_ids: number[],\r\n    currency: { id: number; code: string }\r\n  ): Promise<BookingDetails> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Exposed_Booking_Availability?Ticket=${token}`,\r\n          {\r\n            propertyid,\r\n            from_date,\r\n            to_date,\r\n            adult_nbr: 2,\r\n            child_nbr: 0,\r\n            language,\r\n            currency_ref: currency.code,\r\n            room_type_ids,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data[\"My_Result\"];\r\n      } else {\r\n        throw new Error(\"Token doesn't exist\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async getCountries(language: string): Promise<ICountry[]> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Exposed_Countries?Ticket=${token}`,\r\n          {\r\n            language,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data.My_Result;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async fetchSetupEntries(): Promise<ISetupEntries> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Setup_Entries_By_TBL_NAME_MULTI?Ticket=${token}`,\r\n          {\r\n            TBL_NAMES: [\r\n              \"_ARRIVAL_TIME\",\r\n              \"_BOOKING_SOURCE\",\r\n              \"_RATE_PRICING_MODE\",\r\n              \"_BED_PREFERENCE_TYPE\",\r\n            ],\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        const res: any[] = data.My_Result;\r\n        return {\r\n          arrivalTime: res.filter((e) => e.TBL_NAME === \"_ARRIVAL_TIME\"),\r\n          bookingSource: res.filter((e) => e.TBL_NAME === \"_BOOKING_SOURCE\"),\r\n          ratePricingMode: res.filter(\r\n            (e) => e.TBL_NAME === \"_RATE_PRICING_MODE\"\r\n          ),\r\n          bedPreferenceType: res.filter(\r\n            (e) => e.TBL_NAME === \"_BED_PREFERENCE_TYPE\"\r\n          ),\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  public async getBlockedInfo(): Promise<IEntries[]> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Setup_Entries_By_TBL_NAME_MULTI?Ticket=${token}`,\r\n          { TBL_NAMES: [\"_CALENDAR_BLOCKED_TILL\"] }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data.My_Result;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async blockUnit(params: IBlockUnit) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Block_Exposed_Unit?Ticket=${token}`,\r\n          params\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async getUserInfo(email: string) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/GET_EXPOSED_GUEST?Ticket=${token}`,\r\n          {\r\n            email,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data.My_Result;\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  private generateDays(\r\n    from_date: string,\r\n    to_date: string,\r\n    amount: number\r\n  ): Day[] {\r\n    const startDate = new Date(from_date);\r\n    const endDate = new Date(to_date);\r\n    const days: Day[] = [];\r\n\r\n    while (startDate < endDate) {\r\n      days.push({\r\n        date: startDate.toISOString().split(\"T\")[0],\r\n        amount: amount,\r\n      });\r\n      startDate.setDate(startDate.getDate() + 1);\r\n    }\r\n\r\n    return days;\r\n  }\r\n\r\n  public async bookUser(\r\n    bookedByInfoData,\r\n    assign_units: boolean,\r\n    fromDate: Date,\r\n    toDate: Date,\r\n    guestData,\r\n    totalNights: number,\r\n    source: { code: string; description: string },\r\n    propertyid: number,\r\n    currency: { id: number; code: string },\r\n    bookingNumber?: string,\r\n    defaultGuest?: any,\r\n    arrivalTime?: any,\r\n    pr_id?: number\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const fromDateStr = dateToFormattedString(fromDate);\r\n        const toDateStr = dateToFormattedString(toDate);\r\n        let guest: any = {\r\n          email: bookedByInfoData.email || null,\r\n          first_name: bookedByInfoData.firstName,\r\n          last_name: bookedByInfoData.lastName,\r\n          country_id: bookedByInfoData.countryId,\r\n          city: null,\r\n          mobile: bookedByInfoData.contactNumber,\r\n          address: \"\",\r\n          dob: null,\r\n          subscribe_to_news_letter: bookedByInfoData.emailGuest || false,\r\n        };\r\n        if (bookedByInfoData.id) {\r\n          guest = { ...guest, id: bookedByInfoData.id };\r\n        }\r\n        const body = {\r\n          assign_units,\r\n          booking: {\r\n            booking_nbr: bookingNumber || \"\",\r\n            from_date: fromDateStr,\r\n            to_date: toDateStr,\r\n            remark: bookedByInfoData.message || null,\r\n            property: {\r\n              id: propertyid,\r\n            },\r\n            source,\r\n            currency,\r\n            arrival: {\r\n              code: arrivalTime || bookedByInfoData.selectedArrivalTime,\r\n            },\r\n            guest: defaultGuest || guest,\r\n            rooms: guestData.map((data) => ({\r\n              roomtype: {\r\n                id: data.roomCategoryId,\r\n                name: data.roomCategoryName,\r\n                physicalrooms: null,\r\n                rateplans: null,\r\n                availabilities: null,\r\n                inventory: data.inventory,\r\n                rate: data.rate / totalNights,\r\n              },\r\n              rateplan: {\r\n                id: data.ratePlanId,\r\n                name: data.ratePlanName,\r\n                rate_restrictions: null,\r\n                variations: null,\r\n                cancelation: data.cancelation,\r\n                guarantee: data.guarantee,\r\n              },\r\n              unit: { id: pr_id || data.roomId },\r\n              occupancy: {\r\n                adult_nbr: data.adultCount,\r\n                children_nbr: data.childrenCount,\r\n                infant_nbr: null,\r\n              },\r\n              from_date: fromDateStr,\r\n              to_date: toDateStr,\r\n              notes: null,\r\n              days: this.generateDays(\r\n                fromDateStr,\r\n                toDateStr,\r\n                +data.rate / totalNights\r\n              ),\r\n              guest: {\r\n                email: null,\r\n                first_name: data.guestName,\r\n                last_name: null,\r\n                country_id: null,\r\n                city: null,\r\n                mobile: null,\r\n                address: null,\r\n                dob: null,\r\n                subscribe_to_news_letter: null,\r\n              },\r\n            })),\r\n          },\r\n        };\r\n        console.log(\"haida lbody\", body);\r\n        const { data } = await axios.post(\r\n          `/DoReservation?Ticket=${token}`,\r\n          body\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        console.log(data);\r\n        return data;\r\n      } else {\r\n        throw new Error(\"Invalid token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n:host .controlContainer {\r\n  width: 24px;\r\n}\r\n\r\n:host .checkBoxContainer input {\r\n  height: 1.2rem !important;\r\n  width: 30px;\r\n}\r\n\r\n.releaseTime {\r\n  padding-left: 5px;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  State,\r\n  Event,\r\n  EventEmitter,\r\n} from \"@stencil/core\";\r\nimport { BookingService } from \"../../../services/booking.service\";\r\nimport { IEntries } from \"../../../models/IBooking\";\r\n\r\n@Component({\r\n  tag: \"igl-block-dates-view\",\r\n  styleUrl: \"igl-block-dates-view.css\",\r\n  scoped: true,\r\n})\r\nexport class IglBlockDatesView {\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop() fromDate: string;\r\n  @Prop() toDate: string;\r\n  @Prop({ mutable: true }) entryDate: string;\r\n  @Prop() entryHour: number;\r\n  @Prop() entryMinute: number;\r\n  @State() renderAgain: boolean = false;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n\r\n  private blockDatesData: { [key: string]: any } = {\r\n    RELEASE_AFTER_HOURS: 0,\r\n    OPTIONAL_REASON: \"\",\r\n    OUT_OF_SERVICE: false,\r\n  }; // Change of property name might require updates in booking-event-hover\r\n  private releaseList: IEntries[] = [];\r\n  private bookingService: BookingService = new BookingService();\r\n  async componentWillLoad() {\r\n    try {\r\n      this.releaseList = await this.bookingService.getBlockedInfo();\r\n      if (this.defaultData) {\r\n        this.blockDatesData = { ...this.defaultData };\r\n      } else {\r\n        this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(\r\n          this.releaseList[0].CODE_NAME\r\n        );\r\n        this.emitData();\r\n      }\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  handleOptionalReason(event) {\r\n    this.blockDatesData.OPTIONAL_REASON = event.target.value;\r\n    this.emitData();\r\n  }\r\n\r\n  handleReleaseAfterChange(evt) {\r\n    if (this.entryDate) this.entryDate = undefined;\r\n    this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(evt.target.value);\r\n    this.renderPage();\r\n    this.emitData();\r\n  }\r\n\r\n  emitData() {\r\n    this.dataUpdateEvent.emit({\r\n      key: \"blockDatesData\",\r\n      data: { ...this.blockDatesData },\r\n    });\r\n  }\r\n\r\n  getReleaseHoursString() {\r\n    // console.log(\"entry date\", this.entryDate);\r\n    // console.log(\"blocked date data\", this.blockDatesData);\r\n    let dt = this.entryDate ? new Date(this.entryDate) : new Date();\r\n    if (this.entryDate && this.entryHour && this.entryMinute) {\r\n      dt.setHours(this.entryHour, this.entryMinute, 0, 0);\r\n    } else {\r\n      dt.setHours(\r\n        dt.getHours() + this.blockDatesData.RELEASE_AFTER_HOURS,\r\n        dt.getMinutes(),\r\n        0,\r\n        0\r\n      );\r\n    }\r\n\r\n    return (\r\n      dt.toLocaleString(\"default\", { month: \"short\" }) +\r\n      \" \" +\r\n      dt.getDate() +\r\n      \", \" +\r\n      dt.getHours() +\r\n      \":\" +\r\n      dt.getMinutes()\r\n    );\r\n  }\r\n\r\n  handleOutOfService(evt) {\r\n    this.blockDatesData.OUT_OF_SERVICE = evt.target.checked;\r\n    if (this.blockDatesData.OUT_OF_SERVICE) {\r\n      this.blockDatesData.OPTIONAL_REASON = \"\";\r\n      this.blockDatesData.RELEASE_AFTER_HOURS = 0;\r\n    }\r\n    this.renderPage();\r\n    this.emitData();\r\n  }\r\n\r\n  renderPage() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"row m-0 p-0 ml-1 mb-1\">\r\n          <div class=\"col-12 text-left p-0\">\r\n            <span class=\"pr-1\">\r\n              <span class=\"text-bold-700 font-medium-1\">From: </span>\r\n              {this.fromDate}\r\n            </span>{\" \"}\r\n            <span class=\"text-bold-700 font-medium-1\">To: </span>\r\n            {this.toDate}\r\n          </div>\r\n        </div>\r\n        <div class=\"col mb-1 text-left\">\r\n          <div class=\"mb-1\">\r\n            <label class=\"p-0 text-bold-700 font-medium-1 m-0 align-middle\">\r\n              Reason:\r\n            </label>\r\n            <div class=\"p-0 m-0 pr-1 controlContainer checkBoxContainer d-inline-block align-middle\">\r\n              <input\r\n                class=\"form-control\"\r\n                type=\"checkbox\"\r\n                checked={this.blockDatesData.OUT_OF_SERVICE}\r\n                id=\"userinput6\"\r\n                onChange={(event) => this.handleOutOfService(event)}\r\n              />\r\n            </div>{\" \"}\r\n            <span class=\"align-middle\">Out of service</span>\r\n          </div>\r\n          {!this.blockDatesData.OUT_OF_SERVICE ? (\r\n            <div>\r\n              <div class=\"mb-1 d-flex w-100 align-items-center\">\r\n                <span class=\"align-middle\">or </span>\r\n                <div class=\"d-inline-flex col pr-0 align-middle\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"Optional reason\"\r\n                    id=\"optReason\"\r\n                    value={this.blockDatesData.OPTIONAL_REASON}\r\n                    onInput={(event) => this.handleOptionalReason(event)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"mb-1 w-100 pr-0 \">\r\n                <span class=\"text-bold-700 font-medium-1\">\r\n                  Automatic release in:{\" \"}\r\n                </span>\r\n                <div class=\"d-inline-block\">\r\n                  <select\r\n                    class=\"form-control input-sm\"\r\n                    id=\"zSmallSelect\"\r\n                    onChange={(evt) => this.handleReleaseAfterChange(evt)}\r\n                  >\r\n                    {this.releaseList.map((releaseItem) => (\r\n                      <option\r\n                        value={+releaseItem.CODE_NAME}\r\n                        selected={\r\n                          this.blockDatesData.RELEASE_AFTER_HOURS ==\r\n                          +releaseItem.CODE_NAME\r\n                        }\r\n                      >\r\n                        {releaseItem.CODE_VALUE_EN}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                {this.blockDatesData.RELEASE_AFTER_HOURS ? (\r\n                  <div class=\"d-inline-block releaseTime\">\r\n                    <em>on {this.getReleaseHoursString()}</em>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import axios from \"axios\";\r\nimport { BookingService } from \"./booking.service\";\r\nimport { getReleaseHoursString } from \"../utils/utils\";\r\n\r\nexport class EventsService {\r\n  private readonly bookingService: BookingService = new BookingService();\r\n\r\n  async reallocateEvent(\r\n    pool: string,\r\n    destination_pr_id: number,\r\n    from_date: string,\r\n    to_date: string\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        console.log(pool, destination_pr_id, from_date, to_date);\r\n        const { data } = await axios.post(\r\n          `/ReAllocate_Exposed_Room?Ticket=${token}`,\r\n          { pool, destination_pr_id, from_date, to_date }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        console.log(data);\r\n        return data;\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  public async deleteEvent(POOL: string) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/UnBlock_Exposed_Unit?Ticket=${token}`,\r\n          {\r\n            POOL,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data.My_Result;\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async updateBlockedEvent(bookingEvent: any) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const releaseData = getReleaseHoursString(\r\n          +bookingEvent.RELEASE_AFTER_HOURS\r\n        );\r\n        await this.deleteEvent(bookingEvent.POOL);\r\n        await this.bookingService.blockUnit({\r\n          from_date: this.formatDate(bookingEvent.FROM_DATE),\r\n          to_date: this.formatDate(bookingEvent.TO_DATE),\r\n          pr_id: bookingEvent.PR_ID,\r\n          STAY_STATUS_CODE: bookingEvent.OUT_OF_SERVICE\r\n            ? \"004\"\r\n            : bookingEvent.RELEASE_AFTER_HOURS === 0\r\n            ? \"002\"\r\n            : \"003\",\r\n          DESCRIPTION: bookingEvent.RELEASE_AFTER_HOURS || \"\",\r\n          NOTES: bookingEvent.OPTIONAL_REASON || \"\",\r\n          ...releaseData,\r\n        });\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  private formatDate(date: string) {\r\n    return date.split(\"/\").join(\"-\");\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 30;\r\n  /* min-width: 450px; */\r\n}\r\n\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n\r\n.background-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.formContainer {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n}\r\n\r\n.sideWindow {\r\n  /* display: grid; */\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  background-color: #ffffff;\r\n}\r\n\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n\r\nbutton:not(:disabled),\r\n[type=\"button\"]:not(:disabled) {\r\n  cursor: pointer;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, State, h, Listen } from '@stencil/core';\r\nimport { BookingService } from '../../../services/booking.service';\r\nimport { dateToFormattedString, getReleaseHoursString } from '../../../utils/utils';\r\nimport { IEntries } from '../../../models/IBooking';\r\nimport { IPageTwoDataUpdateProps, PageTwoButtonsTypes } from '../../../models/models';\r\nimport { EventsService } from '../../../services/events.service';\r\n\r\n@Component({\r\n  tag: 'igl-book-property',\r\n  styleUrls: ['igl-book-property.css'],\r\n  scoped: true,\r\n})\r\nexport class IglBookProperty {\r\n  @Prop() propertyid: number;\r\n  @Prop() language: string;\r\n  @Prop() countryNodeList;\r\n  @Prop() currency: { id: number; code: string };\r\n  @Prop({ reflect: true, mutable: true }) bookingData: { [key: string]: any };\r\n  @Event() closeBookingWindow: EventEmitter<{ [key: string]: any }>;\r\n  @State() sourceOption: { code: string; description: string } = {\r\n    code: '',\r\n    description: '',\r\n  };\r\n  @State() splitBookingId: any = '';\r\n  @State() renderAgain: boolean = false;\r\n  @State() message: string = '';\r\n  @State() isLoading: string;\r\n  @State() isConvertedBooking: boolean;\r\n  @State() dateRangeData: { [key: string]: any };\r\n  @State() selectedUnits: { [key: string]: any } = {};\r\n  private PAGE_ZERO: string = 'page_zero';\r\n  private PAGE_ONE: string = 'page_one';\r\n  private PAGE_TWO: string = 'page_two';\r\n  private PAGE_BLOCK_DATES: string = 'page_block_date';\r\n  private page: string;\r\n  private showSplitBookingOption: boolean = false;\r\n  private sourceOptions: { id: string; value: string }[] = [];\r\n  private selectedRooms: { [key: string]: any } = {};\r\n  private guestData: { [key: string]: any }[] = [];\r\n  private bookedByInfoData: { [key: string]: any } = {};\r\n  private blockDatesData: { [key: string]: any } = {};\r\n  private ratePricingMode: IEntries[] = [];\r\n  private bedPreferenceType: IEntries[] = [];\r\n  private bookingService: BookingService = new BookingService();\r\n  private eventsService = new EventsService();\r\n\r\n  async componentWillLoad() {\r\n    if (!this.bookingData.defaultDateRange) {\r\n      return;\r\n    }\r\n\r\n    this.dateRangeData = { ...this.bookingData.defaultDateRange };\r\n\r\n    try {\r\n      const setupEntries = await this.fetchSetupEntries();\r\n      this.setSourceOptions(setupEntries.bookingSource);\r\n      this.setOtherProperties(setupEntries);\r\n\r\n      if (this.isEventType('EDIT_BOOKING')) {\r\n        this.setEditingRoomInfo();\r\n      }\r\n      //this.bookingData.roomsInfo = [];\r\n      this.page = this.getDefaultPage();\r\n    } catch (error) {\r\n      console.error('Error fetching setup entries:', error);\r\n    }\r\n  }\r\n\r\n  async fetchSetupEntries() {\r\n    return await this.bookingService.fetchSetupEntries();\r\n  }\r\n\r\n  setSourceOptions(bookingSource: any[]) {\r\n    this.sourceOptions = bookingSource.map(source => ({\r\n      id: source.CODE_NAME,\r\n      value: source.CODE_VALUE_EN,\r\n    }));\r\n    this.sourceOption = {\r\n      code: bookingSource[0].CODE_NAME,\r\n      description: bookingSource[0].CODE_VALUE_EN,\r\n    };\r\n  }\r\n\r\n  setOtherProperties(res: any) {\r\n    this.ratePricingMode = res.ratePricingMode;\r\n    this.bookedByInfoData.arrivalTime = res.arrivalTime;\r\n    this.bedPreferenceType = res.bedPreferenceType;\r\n  }\r\n\r\n  setEditingRoomInfo() {\r\n    const category = this.getRoomCategoryByRoomId(this.getBookingPreferenceRoomId());\r\n    const key = `c_${category.id}`;\r\n    this.selectedRooms[key] = {\r\n      [`p_${this.bookingData.RATE_PLAN_ID}`]: {\r\n        adultCount: this.bookingData.ADULTS_COUNT,\r\n        rate: this.bookingData.RATE,\r\n        rateType: this.bookingData.RATE_TYPE,\r\n        ratePlanId: this.bookingData.RATE_PLAN_ID,\r\n        roomCategoryId: category.id,\r\n        roomCategoryName: category.name,\r\n        totalRooms: 1,\r\n        ratePlanName: this.bookingData.RATE_PLAN,\r\n        roomId: this.bookingData.PR_ID,\r\n        guestName: this.bookingData.NAME,\r\n      },\r\n    };\r\n  }\r\n\r\n  async initializeBookingAvailability(from_date: string, to_date: string) {\r\n    try {\r\n      const room_type_ids = this.bookingData.roomsInfo.map(room => room.id);\r\n      const data = await this.bookingService.getBookingAvailability(from_date, to_date, this.propertyid, this.language, room_type_ids, this.currency);\r\n      this.message = '';\r\n      this.bookingData = {\r\n        ...this.bookingData,\r\n        roomsInfo: data.roomtypes,\r\n      };\r\n      this.message = data.tax_statement;\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n  getRoomCategoryByRoomId(roomId) {\r\n    return this.bookingData.roomsInfo?.find(roomCategory => {\r\n      return roomCategory.physicalrooms.find(room => room.id === +roomId);\r\n    });\r\n  }\r\n\r\n  getDefaultPage() {\r\n    if (this.bookingData.event_type === 'BLOCK_DATES') {\r\n      return this.PAGE_BLOCK_DATES;\r\n    } else if (this.bookingData.event_type === 'SPLIT_BOOKING') {\r\n      this.showSplitBookingOption = true;\r\n      return this.PAGE_ONE;\r\n    } else {\r\n      // if( || this.bookingData.event_type === \"NEW_BOOKING\")\r\n      return this.PAGE_ONE;\r\n    }\r\n  }\r\n\r\n  getBookingPreferenceRoomId() {\r\n    //console.log(this.bookingData);\r\n    return (this.bookingData.hasOwnProperty('PR_ID') && this.bookingData.PR_ID) || null;\r\n  }\r\n\r\n  getSplitBookings() {\r\n    return (this.bookingData.hasOwnProperty('splitBookingEvents') && this.bookingData.splitBookingEvents) || [];\r\n  }\r\n  isEventType(key: string) {\r\n    return this.bookingData.event_type === key;\r\n  }\r\n\r\n  closeWindow() {\r\n    this.isConvertedBooking = false;\r\n    this.closeBookingWindow.emit();\r\n  }\r\n  isEditBooking() {\r\n    return this.bookingData.event_type === 'EDIT_BOOKING';\r\n  }\r\n  onRoomsDataUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    const { data, key, changedKey } = event.detail;\r\n    const roomCategoryKey = this.getRoomCategoryKey(data.roomCategoryId);\r\n    const ratePlanKey = this.getRatePlanKey(data.ratePlanId);\r\n\r\n    if (this.shouldClearData(key)) {\r\n      this.selectedRooms = {};\r\n    }\r\n\r\n    this.initializeRoomCategoryIfNeeded(roomCategoryKey);\r\n\r\n    if (this.isEditBooking()) {\r\n      if (changedKey === 'rate') {\r\n        if (this.selectedRooms.hasOwnProperty(roomCategoryKey) && this.selectedRooms[roomCategoryKey].hasOwnProperty(ratePlanKey)) {\r\n          this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data);\r\n        }\r\n      } else {\r\n        if (changedKey !== 'rateType') {\r\n          if (changedKey === 'adult_child_offering') {\r\n            if (this.selectedRooms.hasOwnProperty(roomCategoryKey) && this.selectedRooms[roomCategoryKey].hasOwnProperty(ratePlanKey)) {\r\n              this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data);\r\n            }\r\n          } else {\r\n            this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      this.setSelectedRoomData(roomCategoryKey, ratePlanKey, data);\r\n    }\r\n\r\n    this.cleanupEmptyData(roomCategoryKey, ratePlanKey);\r\n    this.renderPage();\r\n  }\r\n  getRoomCategoryKey(roomCategoryId: string): string {\r\n    return `c_${roomCategoryId}`;\r\n  }\r\n\r\n  getRatePlanKey(ratePlanId: string): string {\r\n    return `p_${ratePlanId}`;\r\n  }\r\n\r\n  shouldClearData(key: string | undefined): boolean {\r\n    return key === 'clearData' || this.isEditBookingEvent(key);\r\n  }\r\n\r\n  isEditBookingEvent(key: string | undefined): boolean {\r\n    return key === 'EDIT_BOOKING';\r\n  }\r\n\r\n  initializeRoomCategoryIfNeeded(roomCategoryKey: string) {\r\n    if (!this.selectedRooms[roomCategoryKey]) {\r\n      this.selectedRooms[roomCategoryKey] = {};\r\n    }\r\n  }\r\n\r\n  setSelectedRoomData(roomCategoryKey: string, ratePlanKey: string, data: any) {\r\n    this.selectedRooms[roomCategoryKey][ratePlanKey] = data;\r\n  }\r\n\r\n  hasSelectedRoomData(roomCategoryKey: string, ratePlanKey: string): boolean {\r\n    return this.selectedRooms[roomCategoryKey] && this.selectedRooms[roomCategoryKey][ratePlanKey];\r\n  }\r\n\r\n  cleanupEmptyData(roomCategoryKey: string, ratePlanKey: string) {\r\n    if (this.selectedRooms[roomCategoryKey][ratePlanKey]?.totalRooms === 0) {\r\n      delete this.selectedRooms[roomCategoryKey][ratePlanKey];\r\n    }\r\n\r\n    if (!Object.keys(this.selectedRooms[roomCategoryKey]).length) {\r\n      delete this.selectedRooms[roomCategoryKey];\r\n    }\r\n  }\r\n\r\n  applyBookingEditToSelectedRoom(roomCategoryKey: string, ratePlanKey: string, data) {\r\n    this.selectedRooms = {\r\n      [roomCategoryKey]: {\r\n        [ratePlanKey]: {\r\n          ...data,\r\n          guestName: this.bookingData.NAME,\r\n          roomId: this.bookingData.PR_ID,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  onDateRangeSelect(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    if (opt.key === 'selectedDateRange') {\r\n      this.dateRangeData = opt.data;\r\n      this.bookingData.defaultDateRange.fromDate = new Date(this.dateRangeData.fromDate);\r\n      this.bookingData.defaultDateRange.toDate = new Date(this.dateRangeData.toDate);\r\n      this.initializeBookingAvailability(dateToFormattedString(this.bookingData.defaultDateRange.fromDate), dateToFormattedString(this.bookingData.defaultDateRange.toDate));\r\n    }\r\n  }\r\n\r\n  handleBlockDateUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.blockDatesData = opt.data;\r\n    //console.log(\"blocked date data\", this.blockDatesData);\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    //console.log(event);\r\n  }\r\n\r\n  handleGuestInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    const opt = event.detail;\r\n    if (opt.guestRefKey) {\r\n      this.guestData[opt.guestRefKey] = opt.data;\r\n    }\r\n  }\r\n\r\n  handleBookedByInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.bookedByInfoData = opt.value.data;\r\n  }\r\n\r\n  isActiveSouceOption(srcIndex) {\r\n    return this.sourceOption === srcIndex ? 'active' : '';\r\n  }\r\n\r\n  handleSourceDropDown(selectedOption) {\r\n    this.sourceOption = {\r\n      code: selectedOption.target.value,\r\n      description: this.sourceOptions.find(opt => opt.id === selectedOption.target.value.toString()).value || '',\r\n    };\r\n  }\r\n\r\n  renderPage() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  @Listen('gotoSplitPageTwoEvent', { target: 'window' })\r\n  gotoSplitPageTwo() {\r\n    this.gotoPage(this.PAGE_TWO);\r\n  }\r\n\r\n  gotoPage(gotoPage) {\r\n    this.page = gotoPage;\r\n    this.renderPage();\r\n  }\r\n\r\n  showSplitBooking() {\r\n    this.showSplitBookingOption = true;\r\n    this.gotoPage(this.PAGE_ONE);\r\n  }\r\n\r\n  getSelectedSplitBookingName(bookingId) {\r\n    let splitBooking = this.getSplitBookings().find(booking => booking.ID === bookingId);\r\n    return splitBooking.ID + ' ' + splitBooking.NAME;\r\n  }\r\n\r\n  isActiveSplitBookingOption(spltIndex) {\r\n    return this.splitBookingId === spltIndex ? 'active' : '';\r\n  }\r\n\r\n  handleSplitBookingDropDown(evt) {\r\n    this.splitBookingId = evt.target.value;\r\n  }\r\n\r\n  isPageZero() {\r\n    return this.page === this.PAGE_ZERO;\r\n  }\r\n\r\n  isPageOne() {\r\n    return this.page === this.PAGE_ONE;\r\n  }\r\n\r\n  isPageTwo() {\r\n    return this.page === this.PAGE_TWO;\r\n  }\r\n\r\n  isPageBlockDates() {\r\n    return this.page === this.PAGE_BLOCK_DATES;\r\n  }\r\n\r\n  getSplitBookingList() {\r\n    return (\r\n      <fieldset class=\"form-group col-12 text-left\">\r\n        <label class=\"h5\">To booking# </label>\r\n        <div class=\"btn-group ml-1\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.handleSplitBookingDropDown(evt)}>\r\n            <option value=\"\" selected={this.splitBookingId != ''}>\r\n              Select\r\n            </option>\r\n            {this.getSplitBookings().map(option => (\r\n              <option value={option.ID} selected={this.splitBookingId === option.ID}>\r\n                {this.getSelectedSplitBookingName(option.ID)}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {/* <button type=\"button\" class=\"btn btn-primary dropdown-toggle\" name=\"sourceType\" data-toggle=\"dropdown\">\r\n                    {this.splitBookingId!=null ? this.getSelectedSplitBookingName(this.splitBookingId) : \"Select\"}\r\n                </button>\r\n                <div class=\"dropdown-menu\">\r\n                  {this.getSplitBookings().map((option) => <button class={`dropdown-item ${this.isActiveSplitBookingOption(option.ID)}`}  type=\"button\" onClick={() => this.handleSplitBookingDropDown(option.ID)}>{this.getSelectedSplitBookingName(option.ID)}</button>)}\r\n                </div> */}\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n\r\n  getSourceNode() {\r\n    return (\r\n      <fieldset class=\"form-group col-12 text-left\">\r\n        <label class=\"h5\">Source </label>\r\n        <div class=\"btn-group ml-1\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.handleSourceDropDown(evt)}>\r\n            {this.sourceOptions.map(option => (\r\n              <option value={option.id} selected={this.sourceOption.code === option.id}>\r\n                {option.value}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n\r\n  getRoomsListFromCategoryId(categoryId) {\r\n    let category = this.bookingData.roomsInfo?.find(category => category.id === categoryId);\r\n    return (category && category.physicalrooms) || [];\r\n  }\r\n\r\n  getPageZeroView() {\r\n    return (\r\n      <div class=\"scrollContent\">\r\n        <div class=\"row p-0 mb-1\">\r\n          <div class=\"col-md-3 col-sm-12 mb-1\">\r\n            <button class=\"btn btn-primary full-width\" onClick={() => this.gotoPage(this.PAGE_ONE)}>\r\n              Create New Booking\r\n            </button>\r\n          </div>\r\n          {this.getSplitBookings().length ? (\r\n            <div class=\"col-md-3 col-sm-12 mb-1\">\r\n              <button class=\"btn btn-primary full-width\" onClick={() => this.showSplitBooking()}>\r\n                Add Unit to Existing Booking\r\n              </button>\r\n            </div>\r\n          ) : null}\r\n          <div class=\"col-md-3 col-sm-12 mb-1\">\r\n            <button class=\"btn btn-primary full-width\" onClick={() => this.gotoPage(this.PAGE_BLOCK_DATES)}>\r\n              Block Dates\r\n            </button>\r\n          </div>\r\n          <div class=\"col-md-3 col-sm-12 mb-1\">\r\n            <button class=\"btn btn-secondary full-width\" onClick={() => this.closeWindow()}>\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getPageOneView() {\r\n    return (\r\n      <div class=\"scrollContent\">\r\n        {this.showSplitBookingOption ? this.getSplitBookingList() : this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM') ? null : this.getSourceNode()}\r\n\r\n        <fieldset class=\"form-group col-12 row\">\r\n          <igl-date-range message={this.message} defaultData={this.bookingData.defaultDateRange} onDateSelectEvent={evt => this.onDateRangeSelect(evt)}></igl-date-range>\r\n        </fieldset>\r\n\r\n        <div class=\"col text-left\">\r\n          {this.bookingData.roomsInfo?.map(roomInfo => (\r\n            <igl-booking-rooms\r\n              currency={this.currency}\r\n              ratePricingMode={this.ratePricingMode}\r\n              dateDifference={this.dateRangeData.dateDifference}\r\n              bookingType={this.bookingData.event_type}\r\n              roomTypeData={roomInfo}\r\n              class=\"mt-2 mb-1\"\r\n              defaultData={this.selectedRooms['c_' + roomInfo.id]}\r\n              onDataUpdateEvent={evt => this.onRoomsDataUpdate(evt)}\r\n            ></igl-booking-rooms>\r\n          ))}\r\n        </div>\r\n\r\n        {this.isEventType('EDIT_BOOKING') ? (\r\n          <div class=\"row p-0 mb-1 mt-2\">\r\n            <div class=\"col-6\">\r\n              <button class=\"btn btn-secondary full-width\" onClick={() => this.closeWindow()}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <button class=\"btn btn-primary full-width\" onClick={() => this.gotoPage(this.PAGE_TWO)}>\r\n                Next &gt;&gt;\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div class=\"row p-0 mb-1 mt-2\">\r\n            <div class={this.bookingData.event_type === 'PLUS_BOOKING' || this.isEventType('ADD_ROOM') ? 'col-6' : 'col-12'}>\r\n              <button class=\"btn btn-secondary full-width\" onClick={() => this.closeWindow()}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n            {this.bookingData.event_type === 'PLUS_BOOKING' || this.isEventType('ADD_ROOM') ? (\r\n              <div class=\"col-6\">\r\n                <button class=\"btn btn-primary full-width\" disabled={Object.keys(this.selectedRooms).length === 0} onClick={() => this.gotoPage(this.PAGE_TWO)}>\r\n                  Next &gt;&gt;\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getPageBlockDatesView() {\r\n    return (\r\n      <div class=\"scrollContent blockDatesForm\">\r\n        <igl-block-dates-view\r\n          fromDate={this.dateRangeData.fromDateStr}\r\n          toDate={this.dateRangeData.toDateStr}\r\n          entryDate={this.bookingData.ENTRY_DATE}\r\n          onDataUpdateEvent={event => this.handleBlockDateUpdate(event)}\r\n        ></igl-block-dates-view>\r\n        <div class=\"row p-0 mb-1 mt-2\">\r\n          <div class=\"col-6\">\r\n            <button class=\"btn btn-secondary full-width\" onClick={() => this.closeWindow()}>\r\n              Cancel\r\n            </button>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <button class=\"btn btn-primary full-width\" onClick={() => this.handleBlockDate()}>\r\n              Block dates\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleButtonClicked(\r\n    event: CustomEvent<{\r\n      key: PageTwoButtonsTypes;\r\n      data?: CustomEvent;\r\n    }>,\r\n  ) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    switch (event.detail.key) {\r\n      case 'save':\r\n        this.bookUser(true);\r\n        break;\r\n      case 'cancel':\r\n        this.closeWindow();\r\n        break;\r\n      case 'back':\r\n        this.gotoPage(this.PAGE_ONE);\r\n        break;\r\n      case 'book':\r\n        this.bookUser(false);\r\n        break;\r\n      case 'bookAndCheckIn':\r\n        this.bookUser(true);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  handlePageTwoDataUpdateEvent(event: CustomEvent<IPageTwoDataUpdateProps>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    if (event.detail.key === 'propertyBookedBy') {\r\n      this.handleBookedByInfoUpdate(event);\r\n    } else {\r\n      this.handleGuestInfoUpdate(event);\r\n    }\r\n  }\r\n  async handleBlockDate() {\r\n    const releaseData = getReleaseHoursString(+this.blockDatesData.RELEASE_AFTER_HOURS);\r\n    await this.bookingService.blockUnit({\r\n      from_date: dateToFormattedString(this.bookingData.defaultDateRange.fromDate),\r\n      to_date: dateToFormattedString(this.bookingData.defaultDateRange.toDate),\r\n      NOTES: this.blockDatesData.OPTIONAL_REASON || '',\r\n      pr_id: this.bookingData.PR_ID.toString(),\r\n      STAY_STATUS_CODE: this.blockDatesData.OUT_OF_SERVICE ? '004' : this.blockDatesData.RELEASE_AFTER_HOURS === 0 ? '002' : '003',\r\n      DESCRIPTION: this.blockDatesData.RELEASE_AFTER_HOURS || '',\r\n      ...releaseData,\r\n    });\r\n    this.closeWindow();\r\n    window.location.reload();\r\n  }\r\n\r\n  async bookUser(assign_units: boolean) {\r\n    this.setLoadingState(assign_units);\r\n\r\n    try {\r\n      if (['003', '002', '004'].includes(this.bookingData.STATUS_CODE)) {\r\n        this.eventsService.deleteEvent(this.bookingData.POOL);\r\n      }\r\n\r\n      const arrivalTime = this.isEventType('EDIT_BOOKING') ? this.getArrivalTimeForBooking() : '';\r\n      const pr_id = this.isEventType('BAR_BOOKING') ? this.bookingData.PR_ID : undefined;\r\n      const booking_nbr = this.isEventType('EDIT_BOOKING') ? this.bookingData.ID : undefined;\r\n      await this.bookingService.bookUser(\r\n        this.bookedByInfoData,\r\n        assign_units,\r\n        this.bookingData.defaultDateRange.fromDate,\r\n        this.bookingData.defaultDateRange.toDate,\r\n        this.guestData,\r\n        this.dateRangeData.dateDifference,\r\n        this.sourceOption,\r\n        this.propertyid,\r\n        this.currency,\r\n        booking_nbr,\r\n        this.bookingData.GUEST,\r\n        arrivalTime,\r\n        pr_id,\r\n      );\r\n      //console.log(\"booking data \", this.bookingData);\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    } finally {\r\n      this.resetLoadingState();\r\n    }\r\n  }\r\n\r\n  setLoadingState(assign_units: boolean) {\r\n    if (this.isEventType('EDIT_BOOKING')) {\r\n      this.isLoading = 'save';\r\n    } else {\r\n      this.isLoading = assign_units ? 'bookAndCheckIn' : 'book';\r\n    }\r\n  }\r\n\r\n  getArrivalTimeForBooking(): string {\r\n    return this.bookedByInfoData.arrivalTime.find(e => e.CODE_VALUE_EN === this.bookingData.ARRIVAL_TIME).CODE_NAME;\r\n  }\r\n\r\n  resetLoadingState() {\r\n    this.isLoading = '';\r\n    setTimeout(() => {\r\n      this.closeWindow();\r\n    }, 100);\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"background-overlay\" onClick={() => this.closeWindow()}></div>\r\n        <div class={'sideWindow ' + (this.isPageBlockDates() ? 'col-sm-12 col-md-6 col-lg-5 col-xl-4' : 'col-sm-12 col-md-11 col-lg-9 col-xl-8')}>\r\n          <div class=\"card mb-0 shadow-none p-0\">\r\n            <div class=\"card-header\">\r\n              <h3 class=\"card-title text-left pb-1 font-medium-2\">{this.isPageBlockDates() ? this.bookingData.BLOCK_DATES_TITLE : this.bookingData.TITLE}</h3>\r\n              <button type=\"button\" class=\"close close-icon\" onClick={() => this.closeWindow()}>\r\n                <i class=\"ft-x\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {this.isPageZero() && this.getPageZeroView()}\r\n\r\n          {this.isPageOne() && this.getPageOneView()}\r\n\r\n          {this.isPageTwo() && (\r\n            <igl-pagetwo\r\n              countryNodeList={this.countryNodeList}\r\n              isLoading={this.isLoading}\r\n              selectedRooms={this.selectedRooms}\r\n              bedPreferenceType={this.bedPreferenceType}\r\n              dateRangeData={this.dateRangeData}\r\n              bookingData={this.bookingData}\r\n              showSplitBookingOption={this.showSplitBookingOption}\r\n              language={this.language}\r\n              bookedByInfoData={this.bookedByInfoData}\r\n              isEditOrAddRoomEvent={this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')}\r\n              onDataUpdateEvent={event => this.handlePageTwoDataUpdateEvent(event)}\r\n              onButtonClicked={event => this.handleButtonClicked(event)}\r\n            ></igl-pagetwo>\r\n          )}\r\n\r\n          {this.isPageBlockDates() ? this.getPageBlockDatesView() : null}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: absolute;\r\n}\r\n\r\n.bookingEventBase {\r\n  position: absolute;\r\n  background-color: rgb(49, 190, 241);\r\n  width: 100%;\r\n  height: 100%;\r\n  transform: skewX(-22deg);\r\n}\r\n\r\n.bookingEventHiddenBase {\r\n  position: absolute;\r\n  top: 0;\r\n  left: -4px;\r\n  width: calc(100% + 8);\r\n}\r\n\r\n.bookingEventDragHandle {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 15px;\r\n  height: 100%;\r\n  opacity: 0.1;\r\n  background-color: rgba(0, 0, 0, 0.15);\r\n  transform: skewX(-22deg);\r\n  /* display: none; */\r\n  cursor: pointer;\r\n}\r\n\r\n.splitBooking {\r\n  border-right: 2px solid #000000;\r\n}\r\n\r\n:host:hover .bookingEventDragHandle {\r\n  display: block;\r\n  opacity: 1;\r\n}\r\n\r\n:host.newEvent:hover .bookingEventDragHandle {\r\n  display: none;\r\n  opacity: 1;\r\n}\r\n\r\n.leftSide {\r\n  left: 0;\r\n}\r\n\r\n.rightSide {\r\n  right: 0;\r\n}\r\n\r\n.bookingEventTitle {\r\n  color: #fff;\r\n  font-size: 0.8em;\r\n  position: relative;\r\n  max-width: calc(100% - 10px);\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  top: 2px;\r\n  left: 5px;\r\n}\r\n\r\n.legend_circle {\r\n  border-radius: 100%;\r\n  width: 10px;\r\n  height: 10px;\r\n  margin: 3px 3px 3px 2px;\r\n  border: 1px solid #fff;\r\n}\r\n\r\n.noteIcon {\r\n  position: absolute;\r\n  bottom: -8px;\r\n  left: 2px;\r\n}\r\n\r\n.balanceIcon {\r\n  position: absolute;\r\n  top: -8px;\r\n  right: 2px;\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, Listen, Prop, State, h } from '@stencil/core';\r\nimport { EventsService } from '../../../services/events.service';\r\n\r\n@Component({\r\n  tag: 'igl-booking-event',\r\n  styleUrl: 'igl-booking-event.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookingEvent {\r\n  @Element() private element: HTMLElement;\r\n  @Prop() currency;\r\n  @Event({ bubbles: true, composed: true }) hideBubbleInfo: EventEmitter;\r\n\r\n  @Event() updateEventData: EventEmitter;\r\n  @Event() dragOverEventData: EventEmitter;\r\n\r\n  @Prop() bookingEvent: { [key: string]: any };\r\n  @Prop() allBookingEvents: { [key: string]: any } = [];\r\n  @Prop() countryNodeList;\r\n\r\n  @State() renderElement: boolean = false;\r\n  @State() position: { [key: string]: any };\r\n\r\n  dayWidth: number = 0;\r\n  eventSpace: number = 8;\r\n  vertSpace: number = 10;\r\n\r\n  /* show bubble */\r\n  private showInfoPopup: boolean = false;\r\n  private bubbleInfoTopSide: boolean = false;\r\n  private eventsService = new EventsService();\r\n  /* Resize props */\r\n  resizeSide: string = '';\r\n  isDragging: boolean = false;\r\n  initialX: number;\r\n  initialY: number;\r\n  currentX: number;\r\n  currentY: number;\r\n  initialWidth: number;\r\n  initialLeft: number;\r\n  finalWidth: number;\r\n  dragInitPos: { [key: string]: any };\r\n  dragEndPos: { [key: string]: any };\r\n  elementRect: { [key: string]: any };\r\n  isTouchStart: boolean;\r\n  moveDiffereneX: number;\r\n  moveDiffereneY: number;\r\n\r\n  handleMouseMoveBind = this.handleMouseMove.bind(this);\r\n  handleMouseUpBind = this.handleMouseUp.bind(this);\r\n  handleClickOutsideBind = this.handleClickOutside.bind(this);\r\n\r\n  componentWillLoad() {\r\n    window.addEventListener('click', this.handleClickOutsideBind);\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (this.isNewEvent()) {\r\n      if (!this.bookingEvent.hideBubble) {\r\n        /* auto matically open the popup, calling the method shows bubble either top or bottom based on available space. */\r\n        setTimeout(() => {\r\n          this.showEventInfo(true);\r\n          this.renderAgain();\r\n        }, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    window.removeEventListener('click', this.handleClickOutsideBind);\r\n  }\r\n\r\n  @Listen('click', { target: 'window' })\r\n  handleClickOutside(event: Event) {\r\n    const clickedElement = event.target as HTMLElement;\r\n    // Check if the clicked element is not within the target div\r\n    if (!this.element.contains(clickedElement)) {\r\n      // The click occurred outside the target div\r\n      this.showEventInfo(false);\r\n    }\r\n  }\r\n\r\n  @Listen('hideBubbleInfo', { target: 'window' })\r\n  hideBubbleInfoPopup(event: CustomEvent) {\r\n    if (event.detail.currentInfoBubbleId != this.getBookingId() || (event.detail.key === 'hidebubble' && event.detail.currentInfoBubbleId === this.getBookingId())) {\r\n      this.showInfoPopup = false;\r\n      this.renderAgain();\r\n    }\r\n  }\r\n\r\n  @Listen('moveBookingTo', { target: 'window' })\r\n  async moveBookingToHandler(event: CustomEvent) {\r\n    try {\r\n      if (event.detail.bookingId !== this.getBookingId()) {\r\n        this.showEventInfo(false);\r\n        return;\r\n      }\r\n      // event.detail.fromRoomId === this.getBookedRoomId() && ()\r\n      if (event.detail.moveToDay === 'revert' || event.detail.toRoomId === 'revert') {\r\n        event.detail.moveToDay = this.bookingEvent.FROM_DATE;\r\n        event.detail.toRoomId = event.detail.fromRoomId;\r\n        if (this.isTouchStart && this.moveDiffereneX <= 5 && this.moveDiffereneY <= 5) {\r\n          this.showEventInfo(true);\r\n        }\r\n      } else {\r\n        if (this.isTouchStart && this.moveDiffereneX <= 5 && this.moveDiffereneY <= 5) {\r\n          this.showEventInfo(true);\r\n        } else {\r\n          const { pool, from_date, to_date, toRoomId } = event.detail as any;\r\n          console.log(pool, from_date, to_date, toRoomId);\r\n          const result = await this.eventsService.reallocateEvent(pool, toRoomId, from_date, to_date);\r\n          this.bookingEvent.POOL = result.My_Result.POOL;\r\n          // console.log(event.detail);\r\n          // console.log(\"calll update here\");\r\n        }\r\n      }\r\n\r\n      if (event.detail.fromRoomId === this.getBookedRoomId()) {\r\n        // Temporarily set to some other title and revert it.. as refresh issue is happening when there minimum change in top / left.\r\n        // this.onMoveUpdateBooking({ toRoomId: \"X\", moveToDay: \"01_01_2023\" });\r\n        // this.renderAgain();\r\n        // setTimeout(() => {\r\n        // }, 20);\r\n        this.onMoveUpdateBooking(event.detail);\r\n        this.renderAgain();\r\n      }\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n\r\n  renderAgain() {\r\n    this.renderElement = !this.renderElement;\r\n  }\r\n\r\n  getUniqueId() {\r\n    return new Date().getTime();\r\n  }\r\n\r\n  onMoveUpdateBooking(data) {\r\n    this.bookingEvent.PR_ID = data.toRoomId;\r\n    this.bookingEvent.FROM_DATE = data.moveToDay.split('_').reverse().join('/');\r\n    let tempDate = new Date(this.bookingEvent.FROM_DATE);\r\n    tempDate.setDate(tempDate.getDate() + this.getStayDays());\r\n    this.bookingEvent.TO_DATE = tempDate.getFullYear() + '/' + (tempDate.getMonth() + 1) + '/' + tempDate.getDate();\r\n  }\r\n  /* End of Resize props */\r\n\r\n  isSplitBooking() {\r\n    return !!this.bookingEvent.SPLIT_BOOKING;\r\n  }\r\n\r\n  isNewEvent() {\r\n    return this.getBookingId() === 'NEW_TEMP_EVENT';\r\n  }\r\n\r\n  isHighlightEventType() {\r\n    return this.getEventType() === 'HIGH_LIGHT';\r\n  }\r\n\r\n  getBookingId() {\r\n    return this.bookingEvent.ID;\r\n  }\r\n\r\n  getBookingStatus() {\r\n    return this.bookingEvent.STATUS;\r\n  }\r\n\r\n  getBookedBy() {\r\n    return this.bookingEvent.NAME;\r\n  }\r\n\r\n  getBookedRoomId() {\r\n    return this.bookingEvent.PR_ID;\r\n  }\r\n\r\n  getEventStartingDate() {\r\n    return new Date(this.bookingEvent.FROM_DATE);\r\n  }\r\n\r\n  getEventEndingDate() {\r\n    return new Date(this.bookingEvent.TO_DATE);\r\n  }\r\n\r\n  getEventType() {\r\n    return this.bookingEvent.event_type;\r\n  }\r\n\r\n  getEventLegend() {\r\n    // console.log(this.getBookingStatus());\r\n    let status = this.bookingEvent?.legendData.statusId[this.getBookingStatus()];\r\n    let orderRide = this.isNewEvent() ? { color: '#f9f9c9' } : {};\r\n    return {\r\n      ...this.bookingEvent?.legendData[status.id],\r\n      ...status,\r\n      ...orderRide,\r\n    };\r\n  }\r\n\r\n  getLegendOfStatus(aStatusId) {\r\n    // console.log(aStatusId);\r\n    let status = this.bookingEvent?.legendData.statusId[aStatusId];\r\n    return { ...this.bookingEvent.legendData[status.id], ...status };\r\n  }\r\n\r\n  getNoteNode() {\r\n    if (this.bookingEvent.NOTES || this.bookingEvent.INTERNAL_NOTE) {\r\n      return this.getLegendOfStatus('NOTES');\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getBalanceNode() {\r\n    if (this.bookingEvent.BALANCE) {\r\n      return this.getLegendOfStatus('OUTSTANDING-BALANCE');\r\n    }\r\n    return null;\r\n  }\r\n\r\n  setStayDays(aStayDays: number) {\r\n    this.bookingEvent.NO_OF_DAYS = aStayDays;\r\n    this.renderAgain();\r\n    // this.updateData({id: this.getBookedRoomId(), data: { NO_OF_DAYS: aStayDays }});\r\n  }\r\n\r\n  getStayDays() {\r\n    return this.bookingEvent.NO_OF_DAYS;\r\n  }\r\n\r\n  getPosition() {\r\n    let startingDate = this.getEventStartingDate();\r\n    let startingCellClass = '.room_' + this.getBookedRoomId() + '_' + startingDate.getDate() + '_' + (startingDate.getMonth() + 1) + '_' + startingDate.getFullYear();\r\n    let bodyContainer = document.querySelector('.bodyContainer');\r\n    let startingCell = document.querySelector(startingCellClass);\r\n    let pos = { top: '0', left: '0', width: '0', height: '20px' };\r\n    if (startingCell && bodyContainer && startingCell.getBoundingClientRect() && bodyContainer.getBoundingClientRect()) {\r\n      let bodyContainerRect = bodyContainer.getBoundingClientRect();\r\n      let boundingRect = startingCell.getBoundingClientRect();\r\n      this.dayWidth = this.dayWidth || boundingRect.width;\r\n      pos.top = boundingRect.top + boundingRect.height / 2 - this.vertSpace - bodyContainerRect.top + 'px';\r\n      pos.left = boundingRect.left + this.dayWidth / 2 + this.eventSpace / 2 - bodyContainerRect.left + 'px';\r\n      pos.width = this.getStayDays() * this.dayWidth - this.eventSpace + 'px';\r\n    } else {\r\n      console.log('Locating event cell failed ', startingCellClass);\r\n    }\r\n    //console.log(pos);\r\n    return pos;\r\n  }\r\n\r\n  getNumber(aData) {\r\n    return aData ? parseFloat(aData) : 0;\r\n  }\r\n\r\n  startDragging(event: any, side: string) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    event.stopImmediatePropagation();\r\n\r\n    if (this.isNewEvent() || this.isHighlightEventType()) {\r\n      return null;\r\n    }\r\n\r\n    this.resizeSide = side;\r\n    this.isDragging = true;\r\n\r\n    this.showEventInfo(false); // Hide bubble;\r\n\r\n    if (side === 'move') {\r\n      this.initialX = event.clientX || event.touches[0].clientX;\r\n      this.initialY = event.clientY || event.touches[0].clientY;\r\n      this.elementRect = this.element.getBoundingClientRect();\r\n      const offsetX = 0; //this.initialX - this.elementRect.left - 18;\r\n      const offsetY = 0; // this.initialY - this.elementRect.top - (this.elementRect.height/2);\r\n      this.dragInitPos = {\r\n        id: this.getBookingId(),\r\n        fromRoomId: this.getBookedRoomId(),\r\n        top: this.getNumber(this.element.style.top) + offsetY,\r\n        left: this.getNumber(this.element.style.left) + offsetX,\r\n      };\r\n      this.dragInitPos.x = this.dragInitPos.left; // + 18;\r\n      this.dragInitPos.y = this.dragInitPos.top; // + (this.elementRect.height/2);\r\n      this.dragEndPos = { ...this.dragInitPos };\r\n      this.element.style.top = `${this.dragInitPos.top}px`;\r\n      this.element.style.left = `${this.dragInitPos.left}px`;\r\n      this.isTouchStart = true; // !!(event.touches && event.touches.length);\r\n      this.dragOverEventData.emit({\r\n        id: 'CALCULATE_DRAG_OVER_BOUNDS',\r\n        data: this.dragInitPos,\r\n      });\r\n    } else {\r\n      this.initialWidth = this.element.offsetWidth;\r\n      this.initialLeft = this.element.offsetLeft;\r\n      this.initialX = event.clientX || event.touches[0].clientX;\r\n      this.dragOverEventData.emit({\r\n        id: 'CALCULATE_DRAG_OVER_BOUNDS',\r\n        data: {\r\n          id: this.getBookingId(),\r\n          fromRoomId: this.getBookedRoomId(),\r\n          top: this.getNumber(this.element.style.top),\r\n          left: this.initialLeft,\r\n          x: this.initialX,\r\n          y: event.clientY || event.touches[0].clientY,\r\n        },\r\n      });\r\n    }\r\n\r\n    document.addEventListener('mousemove', this.handleMouseMoveBind);\r\n    document.addEventListener('touchmove', this.handleMouseMoveBind);\r\n    document.addEventListener('pointermove', this.handleMouseMoveBind);\r\n\r\n    document.addEventListener('mouseup', this.handleMouseUpBind);\r\n    document.addEventListener('touchup', this.handleMouseUpBind);\r\n    document.addEventListener('pointerup', this.handleMouseUpBind);\r\n  }\r\n\r\n  handleMouseMove(event: any) {\r\n    if (this.isDragging) {\r\n      this.currentX = event.clientX || event.touches[0].clientX;\r\n      let distanceX = this.currentX - this.initialX;\r\n      if (this.resizeSide === 'move') {\r\n        this.currentY = event.clientY || event.touches[0].clientY;\r\n        let distanceY = this.currentY - this.initialY;\r\n        this.element.style.top = `${this.dragInitPos.top + distanceY}px`;\r\n        this.element.style.left = `${this.dragInitPos.left + distanceX}px`;\r\n        this.dragEndPos = {\r\n          id: this.getBookingId(),\r\n          fromRoomId: this.getBookedRoomId(),\r\n          top: this.dragInitPos.top + distanceY,\r\n          left: this.dragInitPos.left + distanceX,\r\n        };\r\n        this.dragEndPos.x = this.dragEndPos.left; // + 18;\r\n        this.dragEndPos.y = this.dragEndPos.top; // + (this.elementRect.height/2);\r\n        this.dragOverEventData.emit({ id: 'DRAG_OVER', data: this.dragEndPos });\r\n      } else {\r\n        let newWidth = this.initialWidth;\r\n        if (this.resizeSide == 'rightSide') {\r\n          newWidth = this.initialWidth + distanceX;\r\n          newWidth = Math.min(newWidth, this.initialX + this.element.offsetWidth);\r\n          newWidth = Math.max(this.dayWidth - this.eventSpace, newWidth);\r\n          this.element.style.width = `${newWidth}px`;\r\n        } else if (this.resizeSide == 'leftSide') {\r\n          newWidth = Math.max(this.dayWidth - this.eventSpace, this.initialWidth - distanceX);\r\n          let newLeft = this.initialLeft + (this.initialWidth - newWidth);\r\n          this.element.style.left = `${newLeft}px`;\r\n          this.element.style.width = `${newWidth}px`;\r\n        }\r\n        this.finalWidth = newWidth;\r\n      }\r\n    } else {\r\n      console.log('still mouse move listening...');\r\n    }\r\n  }\r\n\r\n  handleMouseUp() {\r\n    if (this.isDragging) {\r\n      if (this.resizeSide === 'move') {\r\n        // console.log(\"Initial X::\"+this.dragInitPos.x);\r\n        // console.log(\"Initial Y::\"+this.dragInitPos.y);\r\n        // console.log(\"End X::\"+this.dragEndPos.x);\r\n        // console.log(\"End Y::\"+this.dragEndPos.y);\r\n        if (this.isTouchStart) {\r\n          this.moveDiffereneX = Math.abs(this.dragEndPos.x - this.dragInitPos.x);\r\n          this.moveDiffereneY = Math.abs(this.dragEndPos.y - this.dragInitPos.y);\r\n        }\r\n        this.dragOverEventData.emit({\r\n          id: 'DRAG_OVER_END',\r\n          data: {\r\n            ...this.dragEndPos,\r\n            pool: this.bookingEvent.POOL,\r\n            nbOfDays: this.bookingEvent.NO_OF_DAYS,\r\n          },\r\n        });\r\n      } else {\r\n        let numberOfDays = Math.round(this.finalWidth / this.dayWidth);\r\n        let initialStayDays = this.getStayDays();\r\n        if (initialStayDays != numberOfDays) {\r\n          this.setStayDays(numberOfDays);\r\n          if (this.resizeSide == 'leftSide') {\r\n            this.element.style.left = `${this.initialLeft + (initialStayDays - numberOfDays) * this.dayWidth}px`;\r\n            // set FROM_DATE = TO_DATE - numberOfDays\r\n          } else {\r\n            // set TO_DATE = FROM_DATE + numberOfDays\r\n          }\r\n          this.dragOverEventData.emit({\r\n            id: 'STRETCH_OVER_END',\r\n            data: {\r\n              id: this.getBookingId(),\r\n              fromRoomId: +this.getBookedRoomId(),\r\n              x: +this.element.style.left.replace('px', ''),\r\n              y: +this.element.style.top.replace('px', ''),\r\n              pool: this.bookingEvent.POOL,\r\n              nbOfDays: this.bookingEvent.NO_OF_DAYS,\r\n            },\r\n          });\r\n          this.element.style.width = `${numberOfDays * this.dayWidth - this.eventSpace}px`;\r\n        } else {\r\n          this.element.style.left = `${this.initialLeft}px`;\r\n          this.element.style.width = `${numberOfDays * this.dayWidth - this.eventSpace}px`;\r\n        }\r\n      }\r\n    } else {\r\n      console.log('still mouse up listening...');\r\n    }\r\n    this.isDragging = false;\r\n    document.removeEventListener('mousemove', this.handleMouseMoveBind);\r\n    document.removeEventListener('touchmove', this.handleMouseMoveBind);\r\n    document.removeEventListener('pointermove', this.handleMouseMoveBind);\r\n\r\n    document.removeEventListener('mouseup', this.handleMouseUpBind);\r\n    document.removeEventListener('touchup', this.handleMouseUpBind);\r\n    document.removeEventListener('pointerup', this.handleMouseUpBind);\r\n  }\r\n\r\n  updateData(data: any) {\r\n    this.updateEventData.emit(data);\r\n  }\r\n\r\n  showEventInfo(showInfo) {\r\n    if (this.isHighlightEventType() || this.bookingEvent.hideBubble) {\r\n      return null;\r\n    }\r\n\r\n    if (showInfo) {\r\n      // Calculate which side we need to show the bubble, top side or bottom.\r\n      let bodyContainer = document.querySelector('.calendarScrollContainer');\r\n      let bodyContainerRect: { [key: string]: any } = bodyContainer.getBoundingClientRect();\r\n      let elementRect: { [key: string]: any } = this.element.getBoundingClientRect();\r\n      let midPoint = bodyContainerRect.height / 2 + bodyContainerRect.top;\r\n      // let topDifference = elementRect.top - bodyContainerRect.top;\r\n      // let bottomDifference = bodyContainerRect.bottom - elementRect.bottom;\r\n\r\n      if (elementRect.top < midPoint) {\r\n        this.bubbleInfoTopSide = false;\r\n      } else {\r\n        this.bubbleInfoTopSide = true;\r\n      }\r\n    }\r\n\r\n    // showInfo = true;\r\n    if (showInfo) {\r\n      this.hideBubbleInfo.emit({\r\n        key: 'hidePopup',\r\n        currentInfoBubbleId: this.getBookingId(),\r\n      });\r\n    }\r\n    this.showInfoPopup = showInfo;\r\n    this.renderAgain();\r\n  }\r\n\r\n  render() {\r\n    // onMouseLeave={()=>this.showEventInfo(false)}\r\n    let legend = this.getEventLegend();\r\n    let noteNode = this.getNoteNode();\r\n    let balanceNode = this.getBalanceNode();\r\n\r\n    return (\r\n      <Host\r\n        class={`bookingEvent ${this.isNewEvent() || this.isHighlightEventType() ? 'newEvent' : ''} ${legend.clsName}`}\r\n        style={this.getPosition()}\r\n        id={'event_' + this.getBookingId()}\r\n      >\r\n        {/* onMouseOver={() =>this.showEventInfo(true)}  */}\r\n        <div\r\n          class={`bookingEventBase  ${this.isSplitBooking() ? 'splitBooking' : ''}`}\r\n          style={{ backgroundColor: legend.color }}\r\n          onTouchStart={event => this.startDragging(event, 'move')}\r\n          onMouseDown={event => this.startDragging(event, 'move')}\r\n        ></div>\r\n        {noteNode ? <div class=\"legend_circle noteIcon\" style={{ backgroundColor: noteNode.color }}></div> : null}\r\n        {balanceNode ? <div class=\"legend_circle balanceIcon\" style={{ backgroundColor: balanceNode.color }}></div> : null}\r\n        {/* onMouseOver={() => this.showEventInfo(true)}  */}\r\n        <div class=\"bookingEventTitle\" onTouchStart={event => this.startDragging(event, 'move')} onMouseDown={event => this.startDragging(event, 'move')}>\r\n          {this.getBookedBy()}\r\n        </div>\r\n        <div\r\n          class=\"bookingEventDragHandle leftSide\"\r\n          onTouchStart={event => this.startDragging(event, 'leftSide')}\r\n          onMouseDown={event => this.startDragging(event, 'leftSide')}\r\n        ></div>\r\n        <div\r\n          class=\"bookingEventDragHandle rightSide\"\r\n          onTouchStart={event => this.startDragging(event, 'rightSide')}\r\n          onMouseDown={event => this.startDragging(event, 'rightSide')}\r\n        ></div>\r\n        {this.showInfoPopup ? (\r\n          <igl-booking-event-hover\r\n            countryNodeList={this.countryNodeList}\r\n            currency={this.currency}\r\n            class=\"top\"\r\n            bookingEvent={this.bookingEvent}\r\n            bubbleInfoTop={this.bubbleInfoTopSide}\r\n          ></igl-booking-event-hover>\r\n        ) : null}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: relative;\r\n  z-index: 100;\r\n}\r\n\r\n.btn {\r\n  padding-left: 4px !important;\r\n  padding-right: 4px !important;\r\n}\r\n\r\n.pointerContainer {\r\n  position: absolute;\r\n  left: 50%;\r\n  height: 10px;\r\n  width: 350px;\r\n  transform: translate(-50%, 0);\r\n}\r\n\r\n.pointerContainerTop {\r\n  top: -26px;\r\n}\r\n\r\n.iglPopOver {\r\n  max-width: 350px;\r\n  background-color: #fff;\r\n  padding: 10px;\r\n  border: 1px solid #656ee7;\r\n  border-radius: 6px;\r\n  position: absolute;\r\n  transform: translate(-50%, 10px);\r\n  left: 50%;\r\n  box-shadow: 1px 0px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.iglPopOver.infoBubble {\r\n  width: 350px;\r\n}\r\n\r\n.iglPopOver.blockedView {\r\n  max-width: 400px;\r\n  width: 400px;\r\n}\r\n\r\n.iglPopOver.newBookingOptions {\r\n  width: 230px;\r\n}\r\n\r\n.bubblePointer {\r\n  position: absolute;\r\n  width: 0;\r\n  height: 0;\r\n  left: 50%;\r\n  border-left: 10px solid transparent;\r\n  border-right: 10px solid transparent;\r\n  transform: translate(-50%, 0px);\r\n}\r\n\r\n.bubblePointTop {\r\n  border-top: 10px solid #656ee7;\r\n}\r\n\r\n.bubblePointBottom {\r\n  border-bottom: 10px solid #656ee7;\r\n}\r\n\r\n.bubbleInfoAbove {\r\n  bottom: 35px;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  State,\r\n} from \"@stencil/core\";\r\nimport { findCountry, getCurrencySymbol } from \"../../../utils/utils\";\r\nimport { ICountry } from \"../../../models/IBooking\";\r\nimport { EventsService } from \"../../../services/events.service\";\r\n\r\n@Component({\r\n  tag: \"igl-booking-event-hover\",\r\n  styleUrl: \"igl-booking-event-hover.css\",\r\n  scoped: true,\r\n})\r\nexport class IglBookingEventHover {\r\n  @Prop({ mutable: true }) bookingEvent: { [key: string]: any };\r\n  @Prop() bubbleInfoTop: boolean = false;\r\n  @Prop() currency;\r\n  @Prop() countryNodeList: ICountry[];\r\n  @State() isLoading: string;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) hideBubbleInfo: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) deleteButton: EventEmitter<string>;\r\n\r\n  private fromTimeStamp: number;\r\n  private toTimeStamp: number;\r\n  private todayTimeStamp: number = new Date().setHours(0, 0, 0, 0);\r\n  private eventService = new EventsService();\r\n\r\n  getBookingId() {\r\n    return this.bookingEvent.ID;\r\n  }\r\n\r\n  getTotalOccupants() {\r\n    return this.bookingEvent.ADULTS_COUNT;\r\n  }\r\n\r\n  getPhoneNumber() {\r\n    return this.bookingEvent.PHONE;\r\n  }\r\n\r\n  getCountry() {\r\n    return findCountry(this.bookingEvent.COUNTRY, this.countryNodeList).name;\r\n  }\r\n  getPhoneCode() {\r\n    return findCountry(this.bookingEvent.COUNTRY, this.countryNodeList)\r\n      .phone_prefix;\r\n  }\r\n  renderPhone() {\r\n    return this.bookingEvent.COUNTRY\r\n      ? `${this.getPhoneCode()}-${this.getPhoneNumber()} - ${this.getCountry()}`\r\n      : this.getPhoneNumber();\r\n  }\r\n\r\n  getGuestNote() {\r\n    return this.bookingEvent.NOTES;\r\n  }\r\n\r\n  getInternalNote() {\r\n    return this.bookingEvent.INTERNAL_NOTE;\r\n  }\r\n\r\n  getTotalPrice() {\r\n    return this.bookingEvent.TOTAL_PRICE;\r\n  }\r\n\r\n  getCheckInDate() {\r\n    return this.bookingEvent.FROM_DATE_STR;\r\n  }\r\n\r\n  getCheckOutDate() {\r\n    return this.bookingEvent.TO_DATE_STR;\r\n  }\r\n\r\n  getArrivalTime() {\r\n    return this.bookingEvent.ARRIVAL_TIME;\r\n  }\r\n\r\n  getRatePlan() {\r\n    return this.bookingEvent.RATE_PLAN;\r\n  }\r\n\r\n  getEntryDate() {\r\n    return this.bookingEvent.ENTRY_DATE;\r\n  }\r\n\r\n  getReleaseAfterHours() {\r\n    return this.bookingEvent.RELEASE_AFTER_HOURS;\r\n  }\r\n\r\n  isNewBooking() {\r\n    return this.getBookingId() === \"NEW_TEMP_EVENT\";\r\n  }\r\n\r\n  isCheckedIn() {\r\n    return this.bookingEvent.STATUS === \"CHECKED-IN\";\r\n  }\r\n\r\n  isCheckedOut() {\r\n    return this.bookingEvent.STATUS === \"CHECKED-OUT\";\r\n  }\r\n\r\n  isBlockedDateEvent() {\r\n    return (\r\n      this.bookingEvent.STATUS === \"BLOCKED\" ||\r\n      this.bookingEvent.STATUS === \"BLOCKED-WITH-DATES\"\r\n    );\r\n  }\r\n\r\n  getRoomId() {\r\n    return this.bookingEvent.PR_ID;\r\n  }\r\n\r\n  getCategoryByRoomId(roomId) {\r\n    // console.log(\"room id \",roomId)\r\n    // console.log(\"booking event\",this.bookingEvent)\r\n    return this.bookingEvent.roomsInfo.find((roomCategory) =>\r\n      roomCategory.physicalrooms.find((room) => room.id === roomId)\r\n    );\r\n  }\r\n\r\n  hasSplitBooking() {\r\n    return (\r\n      this.bookingEvent.hasOwnProperty(\"splitBookingEvents\") &&\r\n      this.bookingEvent.splitBookingEvents.length\r\n    );\r\n  }\r\n\r\n  canCheckIn() {\r\n    if (!this.fromTimeStamp) {\r\n      let dt = new Date(this.getCheckInDate());\r\n      dt.setHours(0, 0, 0, 0);\r\n      this.fromTimeStamp = dt.getTime();\r\n    }\r\n    if (!this.toTimeStamp) {\r\n      let dt = new Date(this.getCheckOutDate());\r\n      dt.setHours(0, 0, 0, 0);\r\n      this.toTimeStamp = dt.getTime();\r\n    }\r\n    if (this.isCheckedIn() || this.isCheckedOut()) {\r\n      return false;\r\n    }\r\n    if (\r\n      this.fromTimeStamp <= this.todayTimeStamp &&\r\n      this.todayTimeStamp <= this.toTimeStamp\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  canCheckOut() {\r\n    if (this.isCheckedIn() && this.todayTimeStamp <= this.toTimeStamp) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  handleBlockDateUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.bookingEvent = { ...this.bookingEvent, ...opt.data };\r\n    //console.log(\"blocked date booking event\", this.bookingEvent);\r\n  }\r\n\r\n  handleEditBooking() {\r\n    // console.log(\"Edit booking\");\r\n    this.bookingEvent.TITLE = \"Edit Room\";\r\n    this.handleBookingOption(\"EDIT_BOOKING\");\r\n  }\r\n\r\n  getStringDateFormat(dt) {\r\n    return (\r\n      dt.getFullYear() +\r\n      \"-\" +\r\n      (dt.getMonth() < 9 ? \"0\" : \"\") +\r\n      (dt.getMonth() + 1) +\r\n      \"-\" +\r\n      (dt.getDate() <= 9 ? \"0\" : \"\") +\r\n      dt.getDate()\r\n    );\r\n  }\r\n\r\n  handleAddRoom() {\r\n    let fromDate = new Date();\r\n    fromDate.setHours(0, 0, 0, 0);\r\n    let from_date_str = this.getStringDateFormat(fromDate);\r\n\r\n    let toDate = new Date();\r\n    toDate.setDate(toDate.getDate() + 1);\r\n    toDate.setHours(0, 0, 0, 0);\r\n    let to_date_str = this.getStringDateFormat(toDate);\r\n\r\n    let eventData = {\r\n      ID: \"\",\r\n      NAME: \"\",\r\n      FROM_DATE: from_date_str, // \"2023-07-09\",\r\n      TO_DATE: to_date_str, // \"2023-07-11\",\r\n      roomsInfo: this.bookingEvent.roomsInfo,\r\n      ADD_ROOM_TO_BOOKING: this.bookingEvent.ID,\r\n      TITLE:\r\n        \"Add Room to #\" + this.bookingEvent.ID + \" - \" + this.bookingEvent.NAME,\r\n      event_type: \"ADD_ROOM\",\r\n      defaultDateRange: {\r\n        fromDate: fromDate, //new Date(\"2023-09-10\"),\r\n        fromDateStr: \"\", //\"10 Sep 2023\",\r\n        toDate: toDate, //new Date(\"2023-09-15\"),\r\n        toDateStr: \"\", // \"15 Sep 2023\",\r\n        dateDifference: 0,\r\n        editabled: true,\r\n        message: \"Including 5.00% City Tax - Excluding 11.00% VAT\",\r\n      },\r\n    };\r\n\r\n    this.handleBookingOption(\"ADD_ROOM\", eventData);\r\n  }\r\n\r\n  handleCustomerCheckIn() {\r\n    console.log(\"Handle Customer Check In\");\r\n  }\r\n\r\n  handleCustomerCheckOut() {\r\n    console.log(\"Handle Customer Check Out\");\r\n  }\r\n  handleDeleteEvent() {\r\n    this.deleteButton.emit(this.bookingEvent.POOL);\r\n    console.log(\"Delete Event\");\r\n  }\r\n\r\n  async handleUpdateBlockedDates() {\r\n    try {\r\n      this.isLoading = \"update\";\r\n      await this.eventService.updateBlockedEvent(this.bookingEvent);\r\n      this.hideBubbleInfo.emit({\r\n        key: \"hidebubble\",\r\n        currentInfoBubbleId: this.getBookingId(),\r\n      });\r\n      this.isLoading = \"\";\r\n      console.log(\"Updated blocked dates\");\r\n    } catch (error) {\r\n      //   toastr.error(error);\r\n    }\r\n  }\r\n\r\n  handleConvertBlockedDateToBooking() {\r\n    this.handleBookingOption(\"BAR_BOOKING\");\r\n  }\r\n\r\n  getRoomInfo() {\r\n    const roomIdToFind = +this.bookingEvent.PR_ID;\r\n    let selectedRoom: any = {};\r\n\r\n    for (const room of this.bookingEvent.roomsInfo) {\r\n      for (const physicalRoom of room.physicalrooms) {\r\n        if (roomIdToFind === physicalRoom.id) {\r\n          selectedRoom.CATEGORY = room.name;\r\n          selectedRoom.ROOM_NAME = physicalRoom.name;\r\n          selectedRoom.ROOMS_INFO = room;\r\n          return selectedRoom;\r\n        }\r\n      }\r\n    }\r\n\r\n    return selectedRoom;\r\n  }\r\n  handleBookingOption(eventType, roomData = null) {\r\n    const roomInfo = this.getRoomInfo();\r\n    let data = roomData ? roomData : this.bookingEvent;\r\n    data.event_type = eventType;\r\n    if ([\"003\", \"002\", \"004\"].includes(this.bookingEvent.STATUS_CODE)) {\r\n      data.roomsInfo = [roomInfo.ROOMS_INFO];\r\n    }\r\n    this.showBookingPopup.emit({\r\n      key: \"add\",\r\n      data: {\r\n        ...data,\r\n        TITLE: `New Booking for ${roomInfo.CATEGORY} ${roomInfo.ROOM_NAME}`,\r\n        //roomsInfo: [roomInfo.ROOMS_INFO],\r\n      },\r\n    });\r\n    this.hideBubbleInfo.emit({\r\n      key: \"hidebubble\",\r\n      currentInfoBubbleId: this.getBookingId(),\r\n    });\r\n  }\r\n\r\n  getInfoElement() {\r\n    return (\r\n      <div\r\n        class={`iglPopOver infoBubble ${\r\n          this.bubbleInfoTop ? \"bubbleInfoAbove\" : \"\"\r\n        } text-left`}\r\n      >\r\n        <div class=\"row p-0 m-0 pb-1\">\r\n          <div class=\"pl-0 col-8 font-weight-bold font-medium-1\">\r\n            {this.getBookingId()}\r\n          </div>\r\n          <div class=\"pr-0 col-4 text-right\">\r\n            {getCurrencySymbol(this.currency.code)}\r\n            {this.getTotalPrice()}\r\n          </div>\r\n        </div>\r\n        <div class=\"row p-0 m-0\">\r\n          <div class=\"pl-0 pr-0 col-12\">\r\n            <span class=\"font-weight-bold\">In: </span>\r\n            {this.getCheckInDate()} -{\" \"}\r\n            <span class=\"font-weight-bold\">Out: </span>\r\n            {this.getCheckOutDate()}\r\n          </div>\r\n        </div>\r\n        {this.getArrivalTime() && (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"pl-0 pr-0 col-12\">\r\n              <span class=\"font-weight-bold\">Arrival time: </span>\r\n              {this.getArrivalTime()}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {this.getTotalOccupants() && (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"pl-0 pr-0 col-12\">\r\n              <span class=\"font-weight-bold\">Occupancy: </span>\r\n              {this.getTotalOccupants()}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {this.getPhoneNumber() && (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"pl-0 pr-0 col-12 text-wrap\">\r\n              <span class=\"font-weight-bold\">Phone: </span>\r\n              {this.renderPhone()}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {this.getRatePlan() && (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"pl-0 pr-0 col-12\">\r\n              <span class=\"font-weight-bold\">Rate plan: </span>\r\n              {this.getRatePlan()}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {this.getGuestNote() ? (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"col-12 pl-0 pr-0 text-wrap\">\r\n              <sapn class=\"font-weight-bold\">Note: </sapn>\r\n              {this.getGuestNote()}\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n        {this.getInternalNote() ? (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"col-12 pl-0 pr-0 text-wrap\">\r\n              <span class=\"font-weight-bold\">Internal remark: </span>\r\n              {this.getInternalNote()}\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n\r\n        <div class=\"row p-0 m-0 mt-2\">\r\n          <div\r\n            class=\"full-width btn-group btn-group-sm font-small-3\"\r\n            role=\"group\"\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary mr-1\"\r\n              onClick={(_) => {\r\n                this.handleEditBooking();\r\n              }}\r\n              disabled={!this.bookingEvent.IS_EDITABLE}\r\n            >\r\n              <i class=\"ft ft-edit font-small-3\"></i> Edit\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary mr-1\"\r\n              onClick={(_) => {\r\n                this.handleAddRoom();\r\n              }}\r\n              disabled={!this.bookingEvent.IS_EDITABLE}\r\n            >\r\n              <i class=\"ft ft-plus-circle font-small-3\"></i> Add room\r\n            </button>\r\n            {this.canCheckIn() ? (\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-primary p-0 mr-1\"\r\n                onClick={(_) => {\r\n                  this.handleCustomerCheckIn();\r\n                }}\r\n                disabled={!this.bookingEvent.IS_EDITABLE}\r\n              >\r\n                <i class=\"ft ft-edit font-small-3\"></i> Check-in\r\n              </button>\r\n            ) : null}\r\n            {this.canCheckOut() ? (\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-primary p-0 mr-1\"\r\n                onClick={(_) => {\r\n                  this.handleCustomerCheckOut();\r\n                }}\r\n                disabled={!this.bookingEvent.IS_EDITABLE}\r\n              >\r\n                <i class=\"ft ft-log-out font-small-3\"></i> Check-out\r\n              </button>\r\n            ) : null}\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-danger p-0\"\r\n              onClick={(_) => {\r\n                this.handleDeleteEvent();\r\n              }}\r\n              disabled={!this.bookingEvent.IS_EDITABLE}\r\n            >\r\n              <i class=\"ft ft-trash-2 font-small-3\"></i> Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getNewBookingOptions() {\r\n    return (\r\n      <div\r\n        class={`iglPopOver newBookingOptions ${\r\n          this.bubbleInfoTop ? \"bubbleInfoAbove\" : \"\"\r\n        } text-left`}\r\n      >\r\n        <button\r\n          type=\"button\"\r\n          class=\"d-block full-width btn btn-sm btn-primary mb-1 font-small-3 square\"\r\n          onClick={(_) => {\r\n            this.handleBookingOption(\"BAR_BOOKING\");\r\n          }}\r\n        >\r\n          Create new booking\r\n        </button>\r\n        {this.hasSplitBooking() ? (\r\n          <button\r\n            type=\"button\"\r\n            class=\"d-block full-width btn btn-sm btn-primary mb-1 font-small-3 square\"\r\n            onClick={(_) => {\r\n              this.handleBookingOption(\"SPLIT_BOOKING\");\r\n            }}\r\n          >\r\n            Assign unit to existing booking\r\n          </button>\r\n        ) : null}\r\n        <button\r\n          type=\"button\"\r\n          class=\"d-block full-width btn btn-sm btn-primary font-small-3 square\"\r\n          onClick={(_) => {\r\n            this.handleBookingOption(\"BLOCK_DATES\");\r\n          }}\r\n        >\r\n          Block dates\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getBlockedView() {\r\n    // let defaultData = {RELEASE_AFTER_HOURS: 0, OPTIONAL_REASON: \"\", OUT_OF_SERVICE: false};\r\n    return (\r\n      <div\r\n        class={`iglPopOver blockedView ${\r\n          this.bubbleInfoTop ? \"bubbleInfoAbove\" : \"\"\r\n        } text-left`}\r\n      >\r\n        <igl-block-dates-view\r\n          entryHour={this.bookingEvent.ENTRY_HOUR}\r\n          entryMinute={this.bookingEvent.ENTRY_MINUTE}\r\n          defaultData={this.bookingEvent}\r\n          fromDate={this.getCheckInDate()}\r\n          toDate={this.getCheckOutDate()}\r\n          entryDate={this.getEntryDate()}\r\n          onDataUpdateEvent={(event) => this.handleBlockDateUpdate(event)}\r\n        ></igl-block-dates-view>\r\n        <div class=\"row p-0 m-0 mt-2\">\r\n          <div\r\n            class=\"full-width btn-group btn-group-sm font-small-3\"\r\n            role=\"group\"\r\n          >\r\n            <button\r\n              disabled={this.isLoading === \"update\"}\r\n              type=\"button\"\r\n              class=\"btn btn-primary mr-1\"\r\n              onClick={(_) => {\r\n                this.handleUpdateBlockedDates();\r\n              }}\r\n            >\r\n              {this.isLoading === \"update\" ? (\r\n                <i class=\"la la-circle-o-notch spinner mx-1\"></i>\r\n              ) : (\r\n                <i class=\"ft ft-edit font-small-3\"></i>\r\n              )}\r\n              Update\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary p-0\"\r\n              onClick={(_) => {\r\n                this.handleConvertBlockedDateToBooking();\r\n              }}\r\n            >\r\n              Convert to booking\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-danger ml-1 p-0\"\r\n              onClick={(_) => {\r\n                this.handleDeleteEvent();\r\n              }}\r\n            >\r\n              <i class=\"ft ft-trash-2 font-small-3\"></i> Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div\r\n          class={`pointerContainer ${\r\n            this.bubbleInfoTop ? \"pointerContainerTop\" : \"\"\r\n          }`}\r\n        >\r\n          <div\r\n            class={`bubblePointer ${\r\n              this.bubbleInfoTop ? \"bubblePointTop\" : \"bubblePointBottom\"\r\n            }`}\r\n          ></div>\r\n        </div>\r\n        {this.isBlockedDateEvent() ? this.getBlockedView() : null}\r\n        {this.isNewBooking() ? this.getNewBookingOptions() : null}\r\n        {!this.isBlockedDateEvent() && !this.isNewBooking()\r\n          ? this.getInfoElement()\r\n          : null}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  Prop,\r\n  h,\r\n  State,\r\n  Event,\r\n  EventEmitter,\r\n  Watch,\r\n} from \"@stencil/core\";\r\nimport { v4 } from \"uuid\";\r\nimport { getCurrencySymbol } from \"../../../utils/utils\";\r\n@Component({\r\n  tag: \"igl-booking-room-rate-plan\",\r\n  styleUrl: \"igl-booking-room-rate-plan.css\",\r\n  scoped: true,\r\n})\r\nexport class IglBookingRoomRatePlan {\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop({ mutable: true }) ratePlanData: { [key: string]: any };\r\n  @Prop() totalAvailableRooms: number;\r\n  @Prop() ratePricingMode = [];\r\n  @Prop() currency: any;\r\n  @Prop({ reflect: true }) dateDifference: number;\r\n  @Prop() bookingType: string = \"PLUS_BOOKING\";\r\n  @State() sourceOption: number;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() gotoSplitPageTwoEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() selectedData: { [key: string]: any };\r\n  @State() plan: { [key: string]: any };\r\n  componentWillLoad() {\r\n    this.selectedData = {\r\n      ratePlanId: this.ratePlanData.id,\r\n      adult_child_offering:\r\n        this.ratePlanData.variations[0].adult_child_offering,\r\n      rateType: 1,\r\n      totalRooms: 0,\r\n      rate: this.ratePlanData.variations[0].amount,\r\n      ratePlanName: this.ratePlanData.name,\r\n      adultCount: this.ratePlanData.variations[0].adult_nbr,\r\n      childrenCount: this.ratePlanData.variations[0].child_nbr,\r\n      cancelation: this.ratePlanData.cancelation,\r\n      guarantee: this.ratePlanData.guarantee,\r\n      isRateModified: false,\r\n      defaultSelectedRate: 0,\r\n    };\r\n    if (this.defaultData) {\r\n      for (const [key, value] of Object.entries(this.defaultData)) {\r\n        this.selectedData[key] = value;\r\n      }\r\n    }\r\n  }\r\n\r\n  getSelectedOffering(value: any) {\r\n    return this.ratePlanData.variations.find(\r\n      (variation) => variation.adult_child_offering === value\r\n    );\r\n  }\r\n  @Watch(\"ratePlanData\")\r\n  async ratePlanDataChanged() {\r\n    this.selectedData = {\r\n      ...this.selectedData,\r\n      rate: this.handleRateDaysUpdate(),\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: \"roomRatePlanUpdate\",\r\n      changedKey: \"rate\",\r\n      data: this.selectedData,\r\n    });\r\n  }\r\n\r\n  handleRateDaysUpdate() {\r\n    let rate = this.selectedData.defaultSelectedRate;\r\n    if (this.selectedData.isRateModified) {\r\n      return this.selectedData.rateType === 1\r\n        ? rate * this.dateDifference\r\n        : rate;\r\n    }\r\n    return this.getSelectedOffering(this.selectedData.adult_child_offering)\r\n      .amount;\r\n  }\r\n\r\n  handleInput(event: InputEvent) {\r\n    this.selectedData.isRateModified = true;\r\n    const inputElement = event.target as HTMLInputElement;\r\n    let inputValue = inputElement.value;\r\n    const numericRegex = /^[0-9]+$/;\r\n    if (!numericRegex.test(inputValue)) {\r\n      inputValue = inputValue.replace(/[^0-9]/g, \"\");\r\n      inputElement.value = inputValue;\r\n    }\r\n    if (inputValue === inputElement.value) {\r\n      this.handleDataChange(\"rate\", event);\r\n    }\r\n  }\r\n\r\n  handleDataChange(key, evt) {\r\n    if (key === \"adult_child_offering\") {\r\n      const offering = this.getSelectedOffering(evt.target.value);\r\n      this.selectedData = {\r\n        ...this.selectedData,\r\n        [key]: evt.target.value,\r\n        adultCount: offering.adult_nbr,\r\n        childrenCount: offering.child_nbr,\r\n        rate: offering.amount,\r\n      };\r\n    } else {\r\n      this.selectedData = {\r\n        ...this.selectedData,\r\n        [key]: evt.target.value === \"\" ? 0 : parseInt(evt.target.value),\r\n      };\r\n    }\r\n    if (key === \"rate\" && evt.target.value === \"\") {\r\n      this.selectedData = {\r\n        ...this.selectedData,\r\n        totalRooms: 0,\r\n      };\r\n    }\r\n    if (key === \"rate\") {\r\n      this.selectedData.defaultSelectedRate =\r\n        this.selectedData.rateType === 1\r\n          ? parseInt(evt.target.value) / this.dateDifference\r\n          : parseInt(evt.target.value);\r\n    }\r\n    this.dataUpdateEvent.emit({\r\n      key: \"roomRatePlanUpdate\",\r\n      changedKey: key,\r\n      data: this.selectedData,\r\n    });\r\n  }\r\n\r\n  bookProperty() {\r\n    this.dataUpdateEvent.emit({ key: \"clearData\", data: this.selectedData });\r\n    this.handleDataChange(\"totalRooms\", { target: { value: \"1\" } });\r\n    this.gotoSplitPageTwoEvent.emit({ key: \"gotoSplitPage\", data: \"\" });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"row m-0 p-0\">\r\n          <div class=\"col-md-6 col-sm-12 p-0 align-self-center\">\r\n            <span>{this.ratePlanData.name}</span>\r\n            <ir-tooltip\r\n              message={\r\n                this.ratePlanData.cancelation + this.ratePlanData.guarantee\r\n              }\r\n            ></ir-tooltip>\r\n          </div>\r\n          <div class=\"col-md-6 col-sm-12 row pr-0\">\r\n            <div class=\"col-4\">\r\n              <fieldset class=\"position-relative\">\r\n                <select\r\n                  class=\"form-control input-sm\"\r\n                  id={v4()}\r\n                  onChange={(evt) =>\r\n                    this.handleDataChange(\"adult_child_offering\", evt)\r\n                  }\r\n                >\r\n                  {this.ratePlanData.variations.map((variation) => (\r\n                    <option\r\n                      value={variation.adult_child_offering}\r\n                      selected={\r\n                        this.selectedData.adultCount ===\r\n                        variation.adult_child_offering\r\n                      }\r\n                    >\r\n                      {variation.adult_child_offering}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </fieldset>\r\n            </div>\r\n            <div class=\"row col-6 m-0 p-0\">\r\n              <fieldset class=\"position-relative has-icon-left col-6 m-0 p-0\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control input-sm\"\r\n                  value={\r\n                    this.selectedData.rateType === 1\r\n                      ? this.selectedData.rate\r\n                      : this.selectedData.rate / this.dateDifference\r\n                  }\r\n                  id={v4()}\r\n                  placeholder=\"Rate\"\r\n                  onInput={(event: InputEvent) => this.handleInput(event)}\r\n                />\r\n                <span class=\"form-control-position\">\r\n                  {getCurrencySymbol(this.currency.code)}\r\n                </span>\r\n              </fieldset>\r\n              <fieldset class=\"position-relative m-0 p-0\">\r\n                <select\r\n                  class=\"form-control input-sm\"\r\n                  id={v4()}\r\n                  onChange={(evt) => this.handleDataChange(\"rateType\", evt)}\r\n                >\r\n                  {this.ratePricingMode.map((data) => (\r\n                    <option\r\n                      value={data.CODE_NAME}\r\n                      selected={this.selectedData.rateType === +data.CODE_NAME}\r\n                    >\r\n                      {data.CODE_VALUE_EN}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </fieldset>\r\n            </div>\r\n\r\n            {this.bookingType === \"PLUS_BOOKING\" ||\r\n            this.bookingType === \"ADD_ROOM\" ? (\r\n              <div class=\"col-2 m-0 p-0\">\r\n                <fieldset class=\"position-relative\">\r\n                  <select\r\n                    disabled={this.selectedData.rate === 0}\r\n                    class=\"form-control input-sm\"\r\n                    id={v4()}\r\n                    onChange={(evt) => this.handleDataChange(\"totalRooms\", evt)}\r\n                  >\r\n                    {Array.from(\r\n                      { length: this.totalAvailableRooms + 1 },\r\n                      (_, i) => i\r\n                    ).map((i) => (\r\n                      <option\r\n                        value={i}\r\n                        selected={this.selectedData.totalRooms === i}\r\n                      >\r\n                        {i}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </fieldset>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.bookingType === \"EDIT_BOOKING\" ? (\r\n              <div class=\"col-2 m-0 p-0 align-self-center\">\r\n                <fieldset class=\"position-relative\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"ratePlanGroup\"\r\n                    value=\"1\"\r\n                    onChange={(evt) => this.handleDataChange(\"totalRooms\", evt)}\r\n                    checked={this.selectedData.totalRooms === 1}\r\n                  />\r\n                </fieldset>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.bookingType === \"BAR_BOOKING\" ||\r\n            this.bookingType === \"SPLIT_BOOKING\" ? (\r\n              <button\r\n                disabled={this.selectedData.rate === 0}\r\n                type=\"button\"\r\n                class=\"btn mb-1 btn-primary btn-sm\"\r\n                onClick={() => this.bookProperty()}\r\n              >\r\n                Book\r\n              </button>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  State,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-booking-rooms\",\r\n  styleUrl: \"igl-booking-rooms.css\",\r\n  scoped: true,\r\n})\r\nexport class IglBookingRooms {\r\n  @Prop({ reflect: true, mutable: true }) roomTypeData: { [key: string]: any };\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop() bookingType: string = \"PLUS_BOOKING\";\r\n  @Prop({ reflect: true }) dateDifference: number;\r\n  @Prop() ratePricingMode = [];\r\n  @Prop() currency;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() selectedRooms: number[] = [];\r\n  @State() roomsDistributions: number[] = [];\r\n  private validBookingTypes = [\"PLUS_BOOKING\", \"ADD_ROOM\", \"EDIT_BOOKING\"];\r\n  private totalRooms: number;\r\n  componentWillLoad() {\r\n    this.totalRooms = this.roomTypeData.physicalrooms.length;\r\n    this.selectedRooms = new Array(this.totalRooms).fill(0);\r\n    this.roomsDistributions = new Array(this.totalRooms).fill(this.totalRooms);\r\n  }\r\n\r\n  onRoomDataUpdate(event: CustomEvent<{ [key: string]: any }>, index: number) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    let data = { ...opt.data };\r\n    if (opt.changedKey === \"totalRooms\") {\r\n      let newValue = data.totalRooms;\r\n      this.selectedRooms[index] = newValue;\r\n      this.updateRatePlanTotalRooms(index);\r\n    }\r\n    data.roomCategoryId = this.roomTypeData.id;\r\n    data.roomCategoryName = this.roomTypeData.name;\r\n    data.inventory = this.roomTypeData.inventory;\r\n    this.dataUpdateEvent.emit({\r\n      key: opt.key,\r\n      data: data,\r\n      changedKey: opt.changedKey,\r\n    });\r\n  }\r\n  updateRatePlanTotalRooms(ratePlanIndex: number) {\r\n    const calculateTotalSelectedRoomsExcludingIndex = (excludedIndex) => {\r\n      return this.selectedRooms.reduce(\r\n        (acc, rooms, idx) => (idx !== excludedIndex ? acc + rooms : acc),\r\n        0\r\n      );\r\n    };\r\n    this.roomsDistributions = this.roomsDistributions.map((ratePlan, index) => {\r\n      if (index === ratePlanIndex) {\r\n        return ratePlan;\r\n      }\r\n      const totalSelectedRoomsExcludingCurrent =\r\n        calculateTotalSelectedRoomsExcludingIndex(index);\r\n      const availableRooms =\r\n        this.totalRooms - totalSelectedRoomsExcludingCurrent;\r\n\r\n      return availableRooms > 0 ? availableRooms : 0;\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {this.validBookingTypes.includes(this.bookingType) && (\r\n          <div class=\"font-weight-bold font-medium-1\">\r\n            {this.roomTypeData.name}\r\n          </div>\r\n        )}\r\n        {this.roomTypeData.rateplans.map((ratePlan, index) => {\r\n          if (ratePlan.variations !== null) {\r\n            return (\r\n              <igl-booking-room-rate-plan\r\n                ratePricingMode={this.ratePricingMode}\r\n                class={\r\n                  this.validBookingTypes.includes(this.bookingType)\r\n                    ? \"ml-1\"\r\n                    : \"\"\r\n                }\r\n                currency={this.currency}\r\n                dateDifference={this.dateDifference}\r\n                ratePlanData={ratePlan}\r\n                totalAvailableRooms={this.roomsDistributions[index]}\r\n                bookingType={this.bookingType}\r\n                defaultData={\r\n                  (this.defaultData && this.defaultData[\"p_\" + ratePlan.id]) ||\r\n                  null\r\n                }\r\n                onDataUpdateEvent={(evt) => this.onRoomDataUpdate(evt, index)}\r\n              ></igl-booking-room-rate-plan>\r\n            );\r\n          } else {\r\n            return null;\r\n          }\r\n        })}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.bodyContainer {\r\n  position: relative;\r\n}\r\n\r\n.roomRow {\r\n  width: max-content;\r\n}\r\n\r\n.roomRow:first-child {\r\n  margin-top: 80px;\r\n}\r\n\r\n.cellData {\r\n  width: 70px;\r\n  height: 30px;\r\n  display: inline-grid;\r\n  border-top: 1px solid #e0e0e0;\r\n  border-left: 1px solid #e0e0e0;\r\n  vertical-align: top;\r\n  padding-left: 15px;\r\n}\r\n\r\n.cellData:nth-child(2) {\r\n  border-left: 0px;\r\n}\r\n\r\n.cellData:last-child {\r\n  border-right: 1px solid #e0e0e0;\r\n}\r\n\r\n.roomHeaderCell {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  left: 0;\r\n  background: #fff;\r\n  border-right: 1px solid #ccc;\r\n  width: 170px;\r\n  z-index: 1;\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dragOverHighlight {\r\n  background-color: #f5f5dc !important;\r\n}\r\n\r\n.selectedDay {\r\n  background-color: #f9f9c9 !important;\r\n}\r\n\r\n.categoryTitle {\r\n  grid-template-columns: 1fr 20px;\r\n  padding-left: 10px;\r\n  cursor: pointer;\r\n  height: 40px;\r\n  font-size: 0.9em;\r\n}\r\n.categoryTitle > :nth-child(1) {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.roomTitle {\r\n  padding-left: 20px;\r\n  font-size: 0.9em;\r\n}\r\n\r\n.roomTitle > :nth-child(1) {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.roomTitle.pl10 {\r\n  padding-left: 10px;\r\n}\r\n\r\n.categoryPriceColumn {\r\n  font-size: 0.75em;\r\n  align-items: center;\r\n  height: 40px;\r\n}\r\n\r\n/* BOOKING EVENT */\r\n.bookingEventsContainer {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  Listen,\r\n  Prop,\r\n  State,\r\n  h,\r\n  Event,\r\n  EventEmitter,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-cal-body\",\r\n  styleUrl: \"igl-cal-body.css\",\r\n  scoped: true,\r\n})\r\nexport class IglCalBody {\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) scrollPageToRoom: EventEmitter;\r\n  @Prop() isScrollViewDragging: boolean;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @Prop() currency;\r\n  @Prop() countryNodeList;\r\n  @State() dragOverElement: string = \"\";\r\n  @State() renderAgain: boolean = false;\r\n\r\n  private selectedRooms: { [key: string]: any } = {};\r\n  private fromRoomId: number = -1;\r\n  private newEvent: { [key: string]: any };\r\n  private currentDate = new Date();\r\n\r\n  componentWillLoad() {\r\n    this.currentDate.setHours(0, 0, 0, 0);\r\n  }\r\n\r\n  @Listen(\"dragOverHighlightElement\", { target: \"window\" })\r\n  dragOverHighlightElementHandler(event: CustomEvent) {\r\n    this.dragOverElement = event.detail.dragOverElement;\r\n  }\r\n\r\n  @Listen(\"gotoRoomEvent\", { target: \"window\" })\r\n  gotoRoom(event: CustomEvent) {\r\n    let roomId = event.detail.roomId;\r\n    let category = this.getRoomCategoryByRoomId(roomId);\r\n    if (!category.expanded) {\r\n      this.toggleCategory(category);\r\n      setTimeout(() => {\r\n        this.scrollToRoom(roomId);\r\n      }, 10);\r\n    } else {\r\n      this.scrollToRoom(roomId);\r\n    }\r\n  }\r\n\r\n  @Listen(\"addToBeAssignedEvent\", { target: \"window\" })\r\n  addToBeAssignedEvents(event: CustomEvent) {\r\n    // let roomId = event.detail.roomId;\r\n    this.addBookingDatas(event.detail.data);\r\n    this.renderElement();\r\n  }\r\n\r\n  scrollToRoom(roomId) {\r\n    this.scrollPageToRoom.emit({\r\n      key: \"scrollPageToRoom\",\r\n      id: roomId,\r\n      refClass: \"room_\" + roomId,\r\n    });\r\n  }\r\n\r\n  getRoomCategoryByRoomId(roomId) {\r\n    return this.calendarData.roomsInfo.find((roomCategory) => {\r\n      return this.getCategoryRooms(roomCategory).find(\r\n        (room) => this.getRoomId(room) === roomId\r\n      );\r\n    });\r\n  }\r\n\r\n  getCategoryName(roomCategory) {\r\n    return roomCategory.name;\r\n  }\r\n\r\n  getCategoryId(roomCategory) {\r\n    return roomCategory.id;\r\n  }\r\n\r\n  getTotalPhysicalRooms(roomCategory) {\r\n    return this.getCategoryRooms(roomCategory).length;\r\n  }\r\n\r\n  getCategoryRooms(roomCategory) {\r\n    return (roomCategory && roomCategory.physicalrooms) || [];\r\n  }\r\n\r\n  getRoomName(roomInfo) {\r\n    return roomInfo.name;\r\n  }\r\n\r\n  getRoomId(roomInfo) {\r\n    return roomInfo.id;\r\n  }\r\n\r\n  getRoomById(physicalRooms, roomId) {\r\n    return physicalRooms.find(\r\n      (physical_room) => this.getRoomId(physical_room) === roomId\r\n    );\r\n  }\r\n\r\n  getBookingData() {\r\n    return this.calendarData.bookingEvents;\r\n  }\r\n\r\n  addBookingDatas(aData) {\r\n    this.calendarData.bookingEvents = this.calendarData.bookingEvents.filter(\r\n      (bookingEvent) => bookingEvent.ID !== \"NEW_TEMP_EVENT\"\r\n    );\r\n    this.calendarData.bookingEvents =\r\n      this.calendarData.bookingEvents.concat(aData);\r\n  }\r\n\r\n  getSelectedCellRefName(roomId, selectedDay) {\r\n    return \"room_\" + roomId + \"_\" + selectedDay.currentDate;\r\n  }\r\n\r\n  getSplitBookingEvents(newEvent) {\r\n    return this.getBookingData().filter(\r\n      (bookingEvent) => newEvent.FROM_DATE === bookingEvent.TO_DATE\r\n    );\r\n  }\r\n\r\n  @Listen(\"closeBookingWindow\", { target: \"window\" })\r\n  closeWindow() {\r\n    let ind = this.getBookingData().findIndex(\r\n      (ev) => ev.ID === \"NEW_TEMP_EVENT\"\r\n    );\r\n    if (ind !== -1) {\r\n      this.getBookingData().splice(ind, 1);\r\n      console.log(\"removed item..\");\r\n      this.renderElement();\r\n    }\r\n  }\r\n\r\n  addNewEvent(roomCategory) {\r\n    let keys = Object.keys(this.selectedRooms);\r\n    let startDate, endDate;\r\n\r\n    if (\r\n      this.selectedRooms[keys[0]].currentDate <\r\n      this.selectedRooms[keys[1]].currentDate\r\n    ) {\r\n      startDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n    } else {\r\n      startDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n    }\r\n\r\n    this.newEvent = {\r\n      ID: \"NEW_TEMP_EVENT\",\r\n      NAME: <span>&nbsp;</span>,\r\n      EMAIL: \"\",\r\n      PHONE: \"\",\r\n      convertBooking: false,\r\n      REFERENCE_TYPE: \"PHONE\",\r\n      FROM_DATE:\r\n        startDate.getFullYear() +\r\n        \"-\" +\r\n        this.getTwoDigitNumStr(startDate.getMonth() + 1) +\r\n        \"-\" +\r\n        this.getTwoDigitNumStr(startDate.getDate()),\r\n      TO_DATE:\r\n        endDate.getFullYear() +\r\n        \"-\" +\r\n        this.getTwoDigitNumStr(endDate.getMonth() + 1) +\r\n        \"-\" +\r\n        this.getTwoDigitNumStr(endDate.getDate()),\r\n      BALANCE: \"\",\r\n      NOTES: \"\",\r\n      RELEASE_AFTER_HOURS: 0,\r\n      PR_ID: this.selectedRooms[keys[0]].roomId,\r\n      ENTRY_DATE: \"\",\r\n      NO_OF_DAYS: (endDate - startDate) / 86400000,\r\n      ADULTS_COUNT: 1,\r\n      COUNTRY: \"\",\r\n      INTERNAL_NOTE: \"\",\r\n      RATE: \"\",\r\n      TOTAL_PRICE: \"\",\r\n      RATE_PLAN: \"\",\r\n      ARRIVAL_TIME: \"\",\r\n      TITLE: \"New Booking for \",\r\n      roomsInfo: [roomCategory],\r\n      CATEGORY: roomCategory.name,\r\n      event_type: \"BAR_BOOKING\",\r\n      STATUS: \"PENDING-CONFIRMATION\",\r\n      defaultDateRange: {\r\n        fromDate: null,\r\n        fromDateStr: \"\",\r\n        toDate: null,\r\n        toDateStr: \"\",\r\n        dateDifference: (endDate - startDate) / 86400000,\r\n        editable: false,\r\n        message: \"Including 5.00% City Tax - Excluding 11.00% VAT\",\r\n      },\r\n    };\r\n\r\n    let popupTitle =\r\n      roomCategory.name +\r\n      \" \" +\r\n      this.getRoomName(\r\n        this.getRoomById(\r\n          this.getCategoryRooms(roomCategory),\r\n          this.selectedRooms[keys[0]].roomId\r\n        )\r\n      );\r\n    this.newEvent.BLOCK_DATES_TITLE = \"Block Dates for \" + popupTitle;\r\n    this.newEvent.TITLE += popupTitle;\r\n    this.newEvent.defaultDateRange.toDate = new Date(\r\n      this.newEvent.TO_DATE + \"T00:00:00\"\r\n    );\r\n    this.newEvent.defaultDateRange.fromDate = new Date(\r\n      this.newEvent.FROM_DATE + \"T00:00:00\"\r\n    );\r\n    this.newEvent.defaultDateRange.fromDateStr = this.getDateStr(\r\n      this.newEvent.defaultDateRange.fromDate\r\n    );\r\n    this.newEvent.defaultDateRange.toDateStr = this.getDateStr(\r\n      this.newEvent.defaultDateRange.toDate\r\n    );\r\n    this.newEvent.ENTRY_DATE = new Date().toISOString();\r\n    this.newEvent.legendData = this.calendarData.formattedLegendData;\r\n\r\n    let splitBookingEvents = this.getSplitBookingEvents(this.newEvent);\r\n    if (splitBookingEvents.length) {\r\n      this.newEvent.splitBookingEvents = splitBookingEvents;\r\n    }\r\n\r\n    this.getBookingData().push(this.newEvent);\r\n    return this.newEvent;\r\n  }\r\n\r\n  getTwoDigitNumStr(num) {\r\n    return num <= 9 ? \"0\" + num : num;\r\n  }\r\n\r\n  getDateStr(date, locale = \"default\") {\r\n    return (\r\n      date.getDate() +\r\n      \" \" +\r\n      date.toLocaleString(locale, { month: \"short\" }) +\r\n      \" \" +\r\n      date.getFullYear()\r\n    );\r\n  }\r\n\r\n  removeNewEvent() {\r\n    this.calendarData.bookingEvents = this.calendarData.bookingEvents.filter(\r\n      (events) => events.ID !== \"NEW_TEMP_EVENT\"\r\n    );\r\n    this.newEvent = null;\r\n  }\r\n\r\n  clickCell(roomId, selectedDay, roomCategory) {\r\n    if (\r\n      !this.isScrollViewDragging &&\r\n      selectedDay.currentDate >= this.currentDate.getTime()\r\n    ) {\r\n      let refKey = this.getSelectedCellRefName(roomId, selectedDay);\r\n      if (this.selectedRooms.hasOwnProperty(refKey)) {\r\n        this.removeNewEvent();\r\n        delete this.selectedRooms[refKey];\r\n        this.renderElement();\r\n        return;\r\n      } else if (\r\n        Object.keys(this.selectedRooms).length != 1 ||\r\n        this.fromRoomId != roomId\r\n      ) {\r\n        this.removeNewEvent();\r\n        this.selectedRooms = {};\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.fromRoomId = roomId;\r\n        this.renderElement();\r\n      } else {\r\n        // create bar;\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.addNewEvent(roomCategory);\r\n        this.selectedRooms = {};\r\n        this.renderElement();\r\n        this.showNewBookingPopup(this.newEvent);\r\n      }\r\n    }\r\n  }\r\n\r\n  showNewBookingPopup(data) {\r\n    console.log(data);\r\n    // this.showBookingPopup.emit({key: \"add\", data});\r\n  }\r\n\r\n  renderElement() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  getGeneralCategoryDayColumns(\r\n    addClass: string,\r\n    isCategory: boolean = false,\r\n    index: number\r\n  ) {\r\n    return this.calendarData.days.map((dayInfo) => (\r\n      <div\r\n        class={`cellData pl-0 categoryPriceColumn ${\r\n          addClass + \"_\" + dayInfo.day\r\n        } ${dayInfo.day === this.today ? \"currentDay\" : \"\"}`}\r\n      >\r\n        {isCategory ? (\r\n          <span>\r\n            {dayInfo.rate[index].inventory}\r\n            <br />\r\n            <u>$ {dayInfo.rate[index].rate}</u>\r\n          </span>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  getGeneralRoomDayColumns(roomId: string, roomCategory) {\r\n    // onDragOver={event => this.handleDragOver(event)} onDrop={event => this.handleDrop(event, addClass+\"_\"+dayInfo.day)}\r\n    return this.calendarData.days.map((dayInfo) => (\r\n      <div\r\n        class={`cellData pl-0 ${\"room_\" + roomId + \"_\" + dayInfo.day} ${\r\n          dayInfo.day === this.today ? \"currentDay\" : \"\"\r\n        } ${\r\n          this.dragOverElement === roomId + \"_\" + dayInfo.day\r\n            ? \"dragOverHighlight\"\r\n            : \"\"\r\n        } ${\r\n          this.selectedRooms.hasOwnProperty(\r\n            this.getSelectedCellRefName(roomId, dayInfo)\r\n          )\r\n            ? \"selectedDay\"\r\n            : \"\"\r\n        }`}\r\n        onClick={() => this.clickCell(roomId, dayInfo, roomCategory)}\r\n      ></div>\r\n    ));\r\n  }\r\n\r\n  toggleCategory(roomCategory) {\r\n    roomCategory.expanded = !roomCategory.expanded;\r\n    this.renderElement();\r\n  }\r\n\r\n  getRoomCategoryRow(roomCategory, index) {\r\n    if (this.getTotalPhysicalRooms(roomCategory) <= 1) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div class=\"roomRow\">\r\n        <div\r\n          class={`cellData text-left align-items-center roomHeaderCell categoryTitle ${\r\n            \"category_\" + this.getCategoryId(roomCategory)\r\n          }`}\r\n          onClick={() => this.toggleCategory(roomCategory)}\r\n        >\r\n          <div>{this.getCategoryName(roomCategory)}</div>{\" \"}\r\n          <i\r\n            class={`la la-angle-${roomCategory.expanded ? \"down\" : \"right\"}`}\r\n          ></i>\r\n        </div>\r\n        {this.getGeneralCategoryDayColumns(\r\n          \"category_\" + this.getCategoryId(roomCategory),\r\n          true,\r\n          index\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getRoomsByCategory(roomCategory) {\r\n    // Check accordion is expanded.\r\n    if (!roomCategory.expanded) {\r\n      return [];\r\n    }\r\n\r\n    return this.getCategoryRooms(roomCategory)?.map((room) => (\r\n      <div class=\"roomRow\">\r\n        <div\r\n          class={`cellData text-left align-items-center roomHeaderCell roomTitle ${\r\n            this.getTotalPhysicalRooms(roomCategory) <= 1 ? \"pl10\" : \"\"\r\n          } ${\"room_\" + this.getRoomId(room)}`}\r\n          data-room={this.getRoomId(room)}\r\n        >\r\n          <div>\r\n            {this.getTotalPhysicalRooms(roomCategory) <= 1\r\n              ? this.getCategoryName(roomCategory)\r\n              : this.getRoomName(room)}\r\n          </div>\r\n        </div>\r\n        {this.getGeneralRoomDayColumns(this.getRoomId(room), roomCategory)}\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  getRoomRows() {\r\n    return this.calendarData.roomsInfo.map((roomCategory, index) => [\r\n      this.getRoomCategoryRow(roomCategory, index),\r\n      this.getRoomsByCategory(roomCategory),\r\n    ]);\r\n  }\r\n\r\n  render() {\r\n    // onDragStart={event => this.handleDragStart(event)} draggable={true}\r\n    return (\r\n      <Host>\r\n        <div class=\"bodyContainer\">\r\n          {this.getRoomRows()}\r\n          <div class=\"bookingEventsContainer preventPageScroll\">\r\n            {this.getBookingData()?.map((bookingEvent) => (\r\n              <igl-booking-event\r\n                countryNodeList={this.countryNodeList}\r\n                currency={this.currency}\r\n                data-component-id={bookingEvent.ID}\r\n                bookingEvent={bookingEvent}\r\n                allBookingEvents={this.getBookingData()}\r\n              ></igl-booking-event>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: max-content;\r\n  z-index: 3;\r\n}\r\n\r\n.footerCell {\r\n  display: -moz-inline-grid;\r\n  display: -ms-inline-grid;\r\n  display: inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: 70px;\r\n  height: 40px;\r\n  /* color: #b8b6b7; */\r\n  background: #fff;\r\n  vertical-align: top;\r\n  border-top: 1px solid #e0e0e0;\r\n}\r\n\r\n.bottomLeftCell {\r\n  left: -1px;\r\n  z-index: 2;\r\n  width: 170px;\r\n  text-align: left;\r\n  padding-left: 15px;\r\n  color: #000000;\r\n}\r\n\r\n.footerCell i {\r\n  margin-right: 5px;\r\n}\r\n\r\n.legendBtn {\r\n  color: #41bff3;\r\n  cursor: pointer;\r\n}\r\n\r\n.isOnline i {\r\n  color: #2f9c3f;\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline i {\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline {\r\n  color: #a40000;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  display: grid;\r\n\r\n  /* height: 100%;\r\n  \r\n  align-items: center;\r\n  text-align: center;\r\n  width: 100%; */\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n  /* color: #262b31; */\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n}\r\n\r\n.badge-pill {\r\n  padding-left: 1em;\r\n  padding-right: 1em;\r\n  font-size: 0.7em;\r\n  margin-bottom: 2px;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h } from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-cal-footer\",\r\n  styleUrl: \"igl-cal-footer.css\",\r\n  scoped: true,\r\n})\r\nexport class IglCalFooter {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  // private isOnline:boolean = false;\r\n\r\n  handleOptionEvent(key, data = \"\") {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"footerContainer\">\r\n        <div class=\"footerCell bottomLeftCell align-items-center preventPageScroll\">\r\n          <div\r\n            class=\"legendBtn\"\r\n            onClick={() => this.handleOptionEvent(\"showLegend\")}\r\n          >\r\n            <i class=\"la la-square\"></i>\r\n            <u>Legend</u>\r\n          </div>\r\n          {/* <div class={`${this.isOnline ? 'isOnline' : 'isOffline'}`}>\r\n            <i class=\"la la-share-alt isOffline\"></i><span>{this.isOnline ? \"Connected\": \"Offline\"}</span>\r\n          </div> */}\r\n        </div>\r\n        {this.calendarData.days.map((dayInfo) => (\r\n          <div class=\"footerCell align-items-center\">\r\n            <div\r\n              class={`dayTitle full-height align-items-center ${\r\n                dayInfo.day === this.today ? \"currentDay\" : \"\"\r\n              }`}\r\n            >\r\n              {dayInfo.dayDisplayName}\r\n            </div>\r\n\r\n            {/* <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\r\n              <div class=\"dayCapacityPercent\">28.57%</div>\r\n              <div class=\"preventPageScroll\">\r\n                <span class=\"badge badge-primary badge-pill\">\r\n                  {index}\r\n                </span>\r\n              </div> */}\r\n          </div>\r\n        ))}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  height: 100%;\r\n}\r\n\r\n.btn {\r\n  pointer-events: auto;\r\n}\r\n\r\n.stickyCell {\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0px;\r\n  height: 82px;\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  z-index: 2;\r\n}\r\n\r\n.headersContainer {\r\n  background-color: #ffffff;\r\n}\r\n\r\n.headerCell {\r\n  display: inline-grid;\r\n  width: 70px;\r\n  height: 60px;\r\n  vertical-align: top;\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.datePickerHidden {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  opacity: 0;\r\n}\r\n\r\n.monthsContainer {\r\n  height: 20px;\r\n  background-color: #ffffff;\r\n  margin-bottom: 0.2em;\r\n}\r\n\r\n.monthCell {\r\n  display: inline-grid;\r\n  height: 20px;\r\n  background-color: #ececec;\r\n  border-right: 1px solid #c7c7c7;\r\n  vertical-align: top;\r\n}\r\n\r\n.monthCell:nth-child(odd) {\r\n  background-color: #dddddd;\r\n}\r\n\r\n.monthTitle {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 0.9em;\r\n  text-transform: uppercase;\r\n  font-weight: bold;\r\n}\r\n\r\n.topLeftCell {\r\n  left: 0px;\r\n  z-index: 3;\r\n  width: 170px;\r\n  background-color: #ffffff;\r\n  display: inline-grid;\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n}\r\n\r\n.caledarBtns {\r\n  position: relative;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.caledarBtns .la {\r\n  font-size: 1.1em;\r\n}\r\n\r\n.caledarBtns:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n}\r\n\r\n.badge-pill {\r\n  padding: 3px 1em;\r\n  font-size: 0.8em;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.searchContiner {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.searchListContainer {\r\n  background: #fff;\r\n  border: 1px solid #ccc;\r\n  border-bottom: none;\r\n}\r\n\r\n.searchListItem {\r\n  background: white;\r\n  border-bottom: 1px solid #ccc;\r\n  padding-left: 8px;\r\n}\r\n\r\n.badge-light {\r\n  background-color: #e0e0e0;\r\n}\r\n","import {\r\n  Component,\r\n  Event,\r\n  EventEmitter,\r\n  Element,\r\n  Host,\r\n  Prop,\r\n  h,\r\n  State,\r\n  Listen,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-cal-header\",\r\n  styleUrl: \"igl-cal-header.css\",\r\n  scoped: true,\r\n})\r\nexport class IglCalHeader {\r\n  @Element() private element: HTMLElement;\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true }) gotoRoomEvent: EventEmitter<{\r\n    [key: string]: any;\r\n  }>;\r\n  @Event({ bubbles: true, composed: true }) gotoToBeAssignedDate: EventEmitter<{\r\n    [key: string]: any;\r\n  }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @State() renderAgain: boolean = false;\r\n\r\n  private searchValue: string = \"\";\r\n  private searchList: { [key: string]: any }[] = [];\r\n  private roomsList: { [key: string]: any }[] = [];\r\n  componentWillLoad() {\r\n    this.roomsList = [];\r\n    this.calendarData.roomsInfo.forEach((category) => {\r\n      this.roomsList = this.roomsList.concat(...category.physicalrooms);\r\n    });\r\n  }\r\n\r\n  @Listen(\"reduceAvailableUnitEvent\", { target: \"window\" })\r\n  handleReduceAvailableUnitEvent(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const data = opt.data;\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    // return {day, dayDisplayName, currentDate, tobeAssignedCount: dates[currentDate]};\r\n    if (opt.key === \"reduceAvailableDays\") {\r\n      this.calendarData.days.find((day) => {\r\n        if (day.currentDate === parseInt(data.selectedDate)) {\r\n          day.tobeAssignedCount--;\r\n          return true;\r\n        }\r\n      });\r\n      this.renderView();\r\n    }\r\n  }\r\n\r\n  showToBeAssigned(dayInfo) {\r\n    if (dayInfo.tobeAssignedCount || 0) {\r\n      this.handleOptionEvent(\"showAssigned\");\r\n      setTimeout(() => {\r\n        this.gotoToBeAssignedDate.emit({\r\n          key: \"gotoToBeAssignedDate\",\r\n          data: dayInfo.currentDate,\r\n        });\r\n      }, 100);\r\n    } else {\r\n      // do nothing as the value is 0;\r\n    }\r\n  }\r\n\r\n  handleOptionEvent(key, data: any = \"\") {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  handleDateSelect(event: Event) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    let selectedDate = inputElement.value;\r\n\r\n    // // Manually close the date picker - for Safari\r\n    const picker = this.element.querySelector(\r\n      \".datePickerHidden\"\r\n    ) as HTMLInputElement;\r\n    picker.blur();\r\n    if (selectedDate) {\r\n      this.handleOptionEvent(\"calendar\", selectedDate);\r\n    }\r\n  }\r\n\r\n  handleClearSearch() {\r\n    this.searchValue = \"\";\r\n    this.searchList = [];\r\n    this.renderView();\r\n  }\r\n\r\n  handleFilterRooms(event: Event) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    let value = inputElement.value.trim();\r\n    this.searchValue = value;\r\n    value = value.toLowerCase();\r\n    if (value === \"\") {\r\n      this.handleClearSearch();\r\n    } else {\r\n      this.searchList = this.roomsList.filter(\r\n        (room) => room.name.toLocaleLowerCase().indexOf(value) != -1\r\n      );\r\n    }\r\n    this.renderView();\r\n  }\r\n\r\n  handleScrollToRoom(roomId) {\r\n    this.handleClearSearch();\r\n    this.gotoRoomEvent.emit({ key: \"gotoRoom\", roomId });\r\n  }\r\n\r\n  getStringDateFormat(dt) {\r\n    return (\r\n      dt.getFullYear() +\r\n      \"-\" +\r\n      (dt.getMonth() < 9 ? \"0\" : \"\") +\r\n      (dt.getMonth() + 1) +\r\n      \"-\" +\r\n      (dt.getDate() <= 9 ? \"0\" : \"\") +\r\n      dt.getDate()\r\n    );\r\n  }\r\n\r\n  getNewBookingModel() {\r\n    let today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    let from_date = this.getStringDateFormat(today);\r\n    today.setDate(today.getDate() + 1);\r\n    today.setHours(0, 0, 0, 0);\r\n    let to_date = this.getStringDateFormat(today);\r\n    return {\r\n      ID: \"\",\r\n      NAME: \"\",\r\n      EMAIL: \"\",\r\n      PHONE: \"\",\r\n      REFERENCE_TYPE: \"PHONE\",\r\n      FROM_DATE: from_date, // \"2023-07-09\",\r\n      TO_DATE: to_date, // \"2023-07-11\",\r\n      roomsInfo: this.calendarData.roomsInfo,\r\n      TITLE: \"New Booking\",\r\n      event_type: \"PLUS_BOOKING\",\r\n      legendData: this.calendarData.formattedLegendData,\r\n      defaultDateRange: {\r\n        fromDate: new Date(from_date), //new Date(\"2023-09-10\"),\r\n        fromDateStr: \"\", //\"10 Sep 2023\",\r\n        toDate: new Date(to_date), //new Date(\"2023-09-15\"),\r\n        toDateStr: \"\", // \"15 Sep 2023\",\r\n        dateDifference: 0,\r\n        editabled: true,\r\n        message: \"\",\r\n      },\r\n    };\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"stickyCell align-items-center topLeftCell preventPageScroll\">\r\n          <div class=\"row justify-content-around no-gutters\">\r\n            <div\r\n              class=\"caledarBtns\"\r\n              onClick={() => this.handleOptionEvent(\"showAssigned\")}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-original-title=\"Assignments\"\r\n            >\r\n              <i class=\"la la-tasks\"></i>\r\n            </div>\r\n            <div\r\n              class=\"caledarBtns\"\r\n              onClick={() => this.handleOptionEvent(\"calendar\")}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-original-title=\"Navigate\"\r\n            >\r\n              <i class=\"la la-calendar-o\"></i>\r\n              <input\r\n                class=\"datePickerHidden\"\r\n                type=\"date\"\r\n                onChange={this.handleDateSelect.bind(this)}\r\n              />\r\n            </div>\r\n            <div\r\n              class=\"caledarBtns\"\r\n              onClick={() => this.handleOptionEvent(\"gotoToday\")}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-original-title=\"Today\"\r\n            >\r\n              <i class=\"la la-clock-o\"></i>\r\n            </div>\r\n            <div\r\n              class=\"caledarBtns\"\r\n              onClick={() =>\r\n                this.handleOptionEvent(\"add\", this.getNewBookingModel())\r\n              }\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-original-title=\"Create new booking\"\r\n            >\r\n              <i class=\"la la-plus\"></i>\r\n            </div>\r\n          </div>\r\n          <div class=\"row justify-content-around no-gutters searchContiner\">\r\n            <fieldset\r\n              class={`form-group position-relative ${\r\n                this.searchValue != \"\" ? \"show\" : \"\"\r\n              }`}\r\n            >\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control form-control-sm input-sm\"\r\n                id=\"iconLeft7\"\r\n                value={this.searchValue}\r\n                placeholder=\"Find unit\"\r\n                onInput={(event) => this.handleFilterRooms(event)}\r\n              />\r\n              {this.searchValue !== \"\" ? (\r\n                <div\r\n                  class=\"form-control-position pointer\"\r\n                  onClick={() => this.handleClearSearch()}\r\n                  data-toggle=\"tooltip\"\r\n                  data-placement=\"top\"\r\n                  data-original-title=\"Clear Selection\"\r\n                >\r\n                  <i class=\"la la-close font-small-4\"></i>\r\n                </div>\r\n              ) : null}\r\n\r\n              {this.searchList.length ? (\r\n                <div class=\"position-absolute1 searchListContainer1 full-width dropdown-menu dropdown-menu-right full-width\">\r\n                  {this.searchList.map((room) => (\r\n                    <div\r\n                      class=\"searchListItem1 dropdown-item p-1 text-left pointer\"\r\n                      onClick={() => this.handleScrollToRoom(room.id)}\r\n                    >\r\n                      {room.name}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : null}\r\n            </fieldset>\r\n          </div>\r\n        </div>\r\n        <div class=\"stickyCell headersContainer\">\r\n          <div class=\"monthsContainer\">\r\n            {this.calendarData.monthsInfo.map((monthInfo) => (\r\n              <div\r\n                class=\"monthCell\"\r\n                style={{ width: monthInfo.daysCount * 70 + \"px\" }}\r\n              >\r\n                <div class=\"monthTitle\">{monthInfo.monthName}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {this.calendarData.days.map((dayInfo) => (\r\n            <div\r\n              class={`headerCell align-items-center ${\"day-\" + dayInfo.day} ${\r\n                dayInfo.day === this.today ? \"currentDay\" : \"\"\r\n              }`}\r\n              data-day={dayInfo.day}\r\n            >\r\n              <div class=\"preventPageScroll\">\r\n                <span\r\n                  class={`badge badge-${\r\n                    dayInfo.unassigned_units_nbr !== 0\r\n                      ? \"info pointer\"\r\n                      : \"light\"\r\n                  } badge-pill`}\r\n                  onClick={() => this.showToBeAssigned(dayInfo)}\r\n                >\r\n                  {dayInfo.unassigned_units_nbr}\r\n                </span>\r\n              </div>\r\n              <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\r\n              <div class=\"dayCapacityPercent\">{dayInfo.occupancy}%</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: flex;\r\n  text-align: left;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n.date-range-input {\r\n  border: 0;\r\n  outline: 0;\r\n  margin: 0;\r\n  flex: 1;\r\n}\r\n.date-range-input:focus {\r\n  border: 0;\r\n  outline: 0;\r\n}\r\n.iglRangePicker {\r\n  margin: 0;\r\n  border: 1px solid #379ff2;\r\n  border-radius: 6px;\r\n  min-width: 300px;\r\n  max-width: 320px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n  text-align: center;\r\n  margin-right: 5px;\r\n  padding: 5px 2rem;\r\n}\r\n.calendarPickerContainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  /*align-items: center;*/\r\n}\r\n\r\n.dateRangeLabel {\r\n  margin-right: 5px;\r\n}\r\n\r\n.taxMessage {\r\n  padding: 5px;\r\n  display: inline-block;\r\n}\r\n@media only screen and (min-width: 600px) {\r\n  :host {\r\n    flex-direction: row;\r\n  }\r\n  .calendarPickerContainer {\r\n    flex-direction: row;\r\n    align-items: center;\r\n  }\r\n}","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  State,\r\n  Event,\r\n  EventEmitter,\r\n  Prop,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-date-range\",\r\n  styleUrl: \"igl-date-range.css\",\r\n  scoped: true,\r\n})\r\nexport class IglDateRange {\r\n  @Prop({ reflect: true }) message: string = \"\";\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Event() dateSelectEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() renderAgain: boolean = false;\r\n\r\n  private totalNights: number = 0;\r\n  private fromDate: Date;\r\n  private toDate: Date;\r\n  private fromDateStr: string = \"from\";\r\n  private toDateStr: string = \"to\";\r\n  dateRangeInput: HTMLElement;\r\n\r\n  getStringDateFormat(dt) {\r\n    return (\r\n      dt.getFullYear() +\r\n      \"-\" +\r\n      (dt.getMonth() < 9 ? \"0\" : \"\") +\r\n      (dt.getMonth() + 1) +\r\n      \"-\" +\r\n      (dt.getDate() <= 9 ? \"0\" : \"\") +\r\n      dt.getDate()\r\n    );\r\n  }\r\n\r\n  componentWillLoad() {\r\n    let dt = new Date();\r\n    dt.setHours(0, 0, 0, 0);\r\n    dt.setDate(dt.getDate() + 1);\r\n    if (this.defaultData) {\r\n      if (this.defaultData.fromDate) {\r\n        this.fromDate = new Date(this.defaultData.fromDate);\r\n        this.fromDate.setHours(0, 0, 0, 0);\r\n        this.fromDateStr = this.getFormattedDateString(this.fromDate);\r\n      }\r\n      if (this.defaultData.toDate) {\r\n        this.toDate = new Date(this.defaultData.toDate);\r\n        this.toDate.setHours(0, 0, 0, 0);\r\n        this.toDateStr = this.getFormattedDateString(this.toDate);\r\n      }\r\n    }\r\n    if (this.fromDate && this.toDate) {\r\n      this.calculateTotalNights();\r\n      this.handleDateSelectEvent(\"selectedDateRange\", {\r\n        fromDate: this.fromDate.getTime(),\r\n        toDate: this.toDate.getTime(),\r\n        fromDateStr: this.fromDateStr,\r\n        toDateStr: this.toDateStr,\r\n        dateDifference: this.totalNights,\r\n      });\r\n    }\r\n  }\r\n\r\n  calculateTotalNights() {\r\n    this.totalNights = Math.floor(\r\n      (this.toDate.getTime() - this.fromDate.getTime()) / 86400000\r\n    );\r\n  }\r\n  getFormattedDateString(dt) {\r\n    return (\r\n      dt.getDate() +\r\n      \" \" +\r\n      dt.toLocaleString(\"default\", { month: \"short\" }).toLowerCase() +\r\n      \" \" +\r\n      dt.getFullYear()\r\n    );\r\n  }\r\n\r\n  handleDateSelectEvent(key, data: any = \"\") {\r\n    this.dateSelectEvent.emit({ key, data });\r\n  }\r\n  handleDateChange(evt) {\r\n    const { start, end } = evt.detail;\r\n    this.fromDate = start.toDate();\r\n    this.toDate = end.toDate();\r\n    this.calculateTotalNights();\r\n    this.handleDateSelectEvent(\"selectedDateRange\", {\r\n      fromDate: this.fromDate.getTime(),\r\n      toDate: this.toDate.getTime(),\r\n      fromDateStr: start.format(\"DD MMM YYYY\"),\r\n      toDateStr: end.format(\"DD MMM YYYY\"),\r\n      dateDifference: this.totalNights,\r\n    });\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"calendarPickerContainer ml-0\">\r\n          <h5 class=\"dateRangeLabel\">Dates</h5>\r\n          <div class=\"iglRangePicker\">\r\n            <ir-date-picker\r\n              fromDate={this.fromDate}\r\n              toDate={this.toDate}\r\n              autoApply\r\n              onDateChanged={(evt) => {\r\n                this.handleDateChange(evt);\r\n              }}\r\n            ></ir-date-picker>\r\n\r\n            {this.totalNights ? (\r\n              <span class=\"iglRangeNights\">\r\n                {this.totalNights +\r\n                  (this.totalNights > 1 ? \" nights\" : \" night\")}\r\n              </span>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div class=\"taxMessage display-inline\">{this.message}</div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n/* Legend */\r\n\r\n.legendHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.legendCloseBtn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.legendCloseBtn:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n\r\n.legendRow {\r\n  position: relative;\r\n  vertical-align: middle;\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\n.legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n.legend_skew,\r\n.legend_skewsplit {\r\n  transform: skew(-30deg);\r\n  width: 15px;\r\n  height: 16px;\r\n}\r\n\r\n.legend_circle {\r\n  border-radius: 100%;\r\n  width: 10px;\r\n  height: 10px;\r\n  margin: 3px 3px 3px 2px;\r\n}\r\n\r\n.legend_skewsplit {\r\n  border-right: 2px solid #000000;\r\n}\r\n\r\n.blueColor {\r\n  background-color: #31bef1;\r\n}\r\n.greenColor {\r\n  background-color: #45b16d;\r\n}\r\n.yellowColor {\r\n  background-color: #f4d552;\r\n}\r\n.greyColor {\r\n  background-color: #a0a0a0;\r\n}\r\n.redColor {\r\n  background-color: #f34752;\r\n}\r\n.pinkColor {\r\n  background-color: #f9b4b7;\r\n}\r\n\r\n/* Legend Calendar */\r\n\r\n.legendCalendar .legendRow {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.legendCalendar .legendRow:first-child .legendCal {\r\n  background-color: #ececec;\r\n}\r\n\r\n.legendCalendar .legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n.legendCalendar .legendCal {\r\n  width: 80px;\r\n  height: 25px;\r\n  text-align: center;\r\n  display: inline-grid !important;\r\n  align-content: center;\r\n  font-size: 0.9em;\r\n}\r\n\r\n.legendCalendar .legendCal .badge {\r\n  margin-top: 0.2rem;\r\n}\r\n\r\n.legendCalendar .legendCal.legendCal-h2 {\r\n  height: 40px;\r\n}\r\n\r\n.br-t {\r\n  border-top: 1px solid #a0a0a0;\r\n}\r\n.br-s {\r\n  border-left: 1px solid #a0a0a0;\r\n  border-right: 1px solid #a0a0a0;\r\n}\r\n.br-bt {\r\n  border-bottom: 1px solid #a0a0a0;\r\n}\r\n\r\n.highphenLegend {\r\n  font-size: 0.9em;\r\n}\r\n\r\n.highphenLegend::before {\r\n  width: 12px;\r\n  height: 0.5px;\r\n  content: \" \";\r\n  background-color: #000000;\r\n  vertical-align: middle;\r\n  display: inline-block;\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-legends',\r\n  styleUrl: 'igl-legends.css',\r\n  scoped: true,\r\n})\r\nexport class IglLegends {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() legendData: { [key: string]: any };\r\n\r\n  handleOptionEvent(key, data=\"\"){\r\n    this.optionEvent.emit({key, data});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"legendContainer pr-1 text-left\">\r\n        <div>\r\n          <div>\r\n            <div class=\"stickyHeader\">\r\n              <div class=\"legendHeader pt-1\">Legend</div>\r\n              <div class=\"legendCloseBtn pt-1\" onClick={() => this.handleOptionEvent(\"closeSideMenu\")}><i class=\"ft-chevrons-left\"></i></div>\r\n              <hr/>\r\n            </div>\r\n            <div class=\"mt-2 pl-1\">\r\n              {\r\n                this.legendData.map((legendInfo) => (\r\n                  <div class=\"legendRow \"><div class={`legend_${legendInfo.design} mr-1`} style={{backgroundColor: (legendInfo.color)}}></div><span class=\"font-small-3\">{legendInfo.name}</span></div>\r\n                ))\r\n              }\r\n            </div>\r\n            <hr/>\r\n            <div class=\"mt-2\">\r\n                <div class=\"legendCalendar\">\r\n                  <div class=\"legendRow align-items-center\"><div class=\"legendCal br-t br-s br-bt\"><strong>MAR 2022</strong></div><div class=\"highphenLegend\">Month and Year</div></div>\r\n                  <div class=\"legendRow\"><div class=\"legendCal pl-2 pr-2 br-s\"><span class=\"badge badge-primary badge-pill\">3</span></div><div class=\"highphenLegend\"><div>Unassigned Units (Click to Assign)</div></div></div>\r\n                  <div class=\"legendRow\"><div class=\"legendCal br-s\">FRI 18</div><div class=\"highphenLegend\">Date</div></div>\r\n                  <div class=\"legendRow\"><div class=\"legendCal br-s br-bt font-small-3\">15%</div><div class=\"highphenLegend\">Occupancy</div></div>\r\n                  <div class=\"legendRow\"><div class=\"legendCal br-s font-small-3\">20</div><div class=\"highphenLegend\">Inventory</div></div>\r\n                  <div class=\"legendRow align-items-center\"><div class=\"legendCal br-s br-bt font-small-2\"><u>R$100,00</u></div><div class=\"highphenLegend\"><div>Rate (Click to Change)</div></div></div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 10000;\r\n  /* min-width: 450px; */\r\n}\r\n\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n\r\n.background-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.formContainer {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n}\r\n\r\n.sideWindow {\r\n  /* display: grid; */\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  background-color: #ffffff;\r\n}\r\n\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n\r\nbutton:not(:disabled),\r\n[type=\"button\"]:not(:disabled) {\r\n  cursor: pointer;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n","import {\r\n  Component,\r\n  Prop,\r\n  h,\r\n  Event,\r\n  EventEmitter,\r\n  Host,\r\n  State,\r\n} from \"@stencil/core\";\r\nimport {\r\n  IPageTwoDataUpdateProps,\r\n  PageTwoButtonsTypes,\r\n} from \"../../../models/models\";\r\n@Component({\r\n  tag: \"igl-pagetwo\",\r\n  styleUrl: \"igl-pagetwo.css\",\r\n  scoped: true,\r\n})\r\nexport class IglPagetwo {\r\n  @Prop({ reflect: true }) isEditOrAddRoomEvent: boolean;\r\n  @Prop() dateRangeData: { [key: string]: any };\r\n  @Prop() bookingData: { [key: string]: any };\r\n  @Prop() showSplitBookingOption: boolean;\r\n  @Prop() language: string;\r\n  @Prop() bookedByInfoData: { [key: string]: any };\r\n  @Prop() bedPreferenceType: any;\r\n  @Prop() selectedRooms: any;\r\n  @Prop({ reflect: true }) isLoading: string;\r\n  @Prop() countryNodeList;\r\n  @Event() dataUpdateEvent: EventEmitter<IPageTwoDataUpdateProps>;\r\n  @Event() buttonClicked: EventEmitter<{\r\n    key: PageTwoButtonsTypes;\r\n    data?: CustomEvent;\r\n  }>;\r\n  @State() guestData: any;\r\n  @State() selectedUnits: { [key: string]: any } = {};\r\n\r\n  componentWillLoad() {\r\n    this.initializeGuestData();\r\n  }\r\n  initializeGuestData() {\r\n    let total = 0;\r\n    const newSelectedUnits = { ...this.selectedUnits };\r\n\r\n    for (const key in this.selectedRooms) {\r\n      for (const prop in this.selectedRooms[key]) {\r\n        const totalRooms = this.selectedRooms[key][prop].totalRooms;\r\n        newSelectedUnits[key] = Array(totalRooms).fill(-1);\r\n      }\r\n    }\r\n\r\n    this.selectedUnits = newSelectedUnits;\r\n    this.guestData = [];\r\n\r\n    for (const key of Object.keys(this.selectedRooms)) {\r\n      for (const prop of Object.keys(this.selectedRooms[key])) {\r\n        for (let i = 1; i <= this.selectedRooms[key][prop].totalRooms; i++) {\r\n          this.guestData.push({\r\n            guestName: \"\",\r\n            roomId: \"\",\r\n            preference: \"\",\r\n            ...this.selectedRooms[key][prop],\r\n          });\r\n        }\r\n        total +=\r\n          this.selectedRooms[key][prop].totalRooms *\r\n          this.selectedRooms[key][prop].rate;\r\n      }\r\n    }\r\n    this.bookingData.TOTAL_PRICE = total;\r\n  }\r\n  getRoomsListFromCategoryId(categoryId) {\r\n    let category = this.bookingData.roomsInfo?.find(\r\n      (category) => category.id === categoryId\r\n    );\r\n    return (category && category.physicalrooms) || [];\r\n  }\r\n  handleOnApplicationInfoDataUpdateEvent(event: CustomEvent, index: number) {\r\n    const opt = event.detail;\r\n    const categoryIdKey = `c_${opt.data.roomCategoryId}`;\r\n    const updatedUnits = [...(this.selectedUnits[categoryIdKey] || [])];\r\n    updatedUnits[index] = opt.data.roomId;\r\n    this.selectedUnits = {\r\n      ...this.selectedUnits,\r\n      [categoryIdKey]: updatedUnits,\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: \"applicationInfoUpdateEvent\",\r\n      value: event.detail,\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Host class=\"scrollContent\">\r\n        <div class=\"row\">\r\n          <div class=\"col-6 text-left p-0\">\r\n            <span class=\"mr-1 font-weight-bold font-medium-1\">\r\n              {this.dateRangeData.fromDateStr} - {this.dateRangeData.toDateStr}\r\n            </span>\r\n            {this.dateRangeData.dateDifference} nights\r\n          </div>\r\n          <div class=\"col-6 text-right\">\r\n            Total price{\" \"}\r\n            <span class=\"font-weight-bold font-medium-1\">\r\n              {\"$\" + this.bookingData.TOTAL_PRICE || \"$0.00\"}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {this.guestData.map((roomInfo, index) => (\r\n          <igl-application-info\r\n            bedPreferenceType={this.bedPreferenceType}\r\n            index={index}\r\n            selectedUnits={this.selectedUnits[`c_${roomInfo.roomCategoryId}`]}\r\n            guestInfo={roomInfo}\r\n            guestRefKey={index}\r\n            bookingType={this.bookingData.event_type}\r\n            roomsList={this.getRoomsListFromCategoryId(roomInfo.roomCategoryId)}\r\n            onDataUpdateEvent={(event) =>\r\n              this.handleOnApplicationInfoDataUpdateEvent(event, index)\r\n            }\r\n          ></igl-application-info>\r\n        ))}\r\n\r\n        {this.isEditOrAddRoomEvent || this.showSplitBookingOption ? null : (\r\n          <igl-property-booked-by\r\n            countryNodeList={this.countryNodeList}\r\n            language={this.language}\r\n            defaultData={this.bookedByInfoData}\r\n            onDataUpdateEvent={(event) =>\r\n              this.dataUpdateEvent.emit({\r\n                key: \"propertyBookedBy\",\r\n                value: event.detail,\r\n              })\r\n            }\r\n          ></igl-property-booked-by>\r\n        )}\r\n\r\n        {this.isEditOrAddRoomEvent ? (\r\n          <div class=\"row p-0 mb-1 mt-2\">\r\n            <div class=\"col-6\">\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-secondary full-width\"\r\n                onClick={() => this.buttonClicked.emit({ key: \"cancel\" })}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <button\r\n                disabled={this.isLoading === \"save\"}\r\n                type=\"button\"\r\n                class=\"btn btn-primary full-width\"\r\n                onClick={() => this.buttonClicked.emit({ key: \"save\" })}\r\n              >\r\n                {this.isLoading === \"save\" && (\r\n                  <i class=\"la la-circle-o-notch spinner mx-1\"></i>\r\n                )}\r\n                Save\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div class=\"row p-0 mb-1 mt-2\">\r\n            <div class=\"col-4\">\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-secondary full-width\"\r\n                onClick={() => this.buttonClicked.emit({ key: \"back\" })}\r\n              >\r\n                &lt;&lt; Back\r\n              </button>\r\n            </div>\r\n            <div class=\"col-4\">\r\n              <button\r\n                disabled={this.isLoading === \"book\"}\r\n                type=\"button\"\r\n                class=\"btn btn-primary full-width\"\r\n                onClick={() => this.buttonClicked.emit({ key: \"book\" })}\r\n              >\r\n                {this.isLoading === \"book\" && (\r\n                  <i class=\"la la-circle-o-notch spinner mx-1\"></i>\r\n                )}\r\n                Book\r\n              </button>\r\n            </div>\r\n            <div class=\"col-4\">\r\n              <button\r\n                disabled={this.isLoading === \"bookAndCheckIn\"}\r\n                type=\"button\"\r\n                class=\"btn btn-primary full-width\"\r\n                onClick={() =>\r\n                  this.buttonClicked.emit({ key: \"bookAndCheckIn\" })\r\n                }\r\n              >\r\n                {this.isLoading === \"bookAndCheckIn\" && (\r\n                  <i class=\"la la-circle-o-notch spinner mx-1\"></i>\r\n                )}\r\n                Book & check in\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n\r\n.bookedByEmailContainer {\r\n  flex: auto;\r\n  max-width: 250px;\r\n}\r\n\r\n.bookedDetailsForm label {\r\n  min-width: 125px;\r\n  max-width: 125px;\r\n}\r\n\r\n.bookedDetailsForm .controlContainer {\r\n  width: calc(100% - 127px);\r\n}\r\n\r\n.bookedDetailsForm .form-group {\r\n  margin-bottom: 10px !important;\r\n}\r\n\r\n.bookedDetailsForm .checkBoxContainer input {\r\n  height: 1.2rem !important;\r\n  width: 30px;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  State,\r\n} from \"@stencil/core\";\r\nimport { BookingService } from \"../../../services/booking.service\";\r\nimport { IEntries, ICountry } from \"../../../models/IBooking\";\r\nimport { v4 } from \"uuid\";\r\n\r\n@Component({\r\n  tag: \"igl-property-booked-by\",\r\n  styleUrl: \"igl-property-booked-by.css\",\r\n  scoped: true,\r\n})\r\nexport class IglPropertyBookedBy {\r\n  @Prop() language: string;\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  private bookingService: BookingService = new BookingService();\r\n  private arrivalTimeList: IEntries[] = [];\r\n  @Prop() countryNodeList: ICountry[] = [];\r\n  private expiryMonths: string[] = [\r\n    \"01\",\r\n    \"02\",\r\n    \"03\",\r\n    \"04\",\r\n    \"05\",\r\n    \"06\",\r\n    \"07\",\r\n    \"08\",\r\n    \"09\",\r\n    \"10\",\r\n    \"11\",\r\n    \"12\",\r\n  ];\r\n  private expiryYears: string[] = [];\r\n  private currentMonth: string = \"01\";\r\n  @State() bookedByData: { [key: string]: any } = {\r\n    id: undefined,\r\n    email: \"\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    countryId: \"\",\r\n    isdCode: \"\",\r\n    contactNumber: \"\",\r\n    selectedArrivalTime: {\r\n      code: \"\",\r\n      description: \"\",\r\n    },\r\n    emailGuest: false,\r\n    message: \"\",\r\n    cardNumber: \"\",\r\n    cardHolderName: \"\",\r\n    expiryMonth: \"\",\r\n    expiryYear: \"\",\r\n  };\r\n\r\n  async componentWillLoad() {\r\n    this.initializeExpiryYears();\r\n    this.initializeDateData();\r\n    this.populateBookedByData();\r\n  }\r\n\r\n  private initializeExpiryYears() {\r\n    const currentYear = new Date().getFullYear();\r\n    this.expiryYears = Array.from({ length: 4 }, (_, index) =>\r\n      (currentYear + index).toString()\r\n    );\r\n  }\r\n\r\n  private initializeDateData() {\r\n    const dt = new Date();\r\n    const month = dt.getMonth() + 1;\r\n    this.currentMonth = month < 10 ? `0${month}` : month.toString();\r\n  }\r\n\r\n  private populateBookedByData() {\r\n    this.bookedByData = this.defaultData ? { ...this.defaultData } : {};\r\n    this.arrivalTimeList = this.defaultData?.arrivalTime || [];\r\n\r\n    if (!this.bookedByData.expiryMonth) {\r\n      this.bookedByData.expiryMonth = this.currentMonth;\r\n    }\r\n    if (!this.bookedByData.expiryYear) {\r\n      this.bookedByData.expiryYear = new Date().getFullYear();\r\n    }\r\n  }\r\n\r\n  handleDataChange(key, event) {\r\n    const foundTime = this.arrivalTimeList.find(\r\n      (time) => time.CODE_NAME === event.target.value\r\n    );\r\n\r\n    this.bookedByData[key] =\r\n      key === \"emailGuest\"\r\n        ? event.target.checked\r\n        : key === \"arrivalTime\"\r\n        ? {\r\n            code: event.target.value,\r\n            description: (foundTime && foundTime.CODE_VALUE_EN) || \"\",\r\n          }\r\n        : event.target.value;\r\n    this.dataUpdateEvent.emit({\r\n      key: \"bookedByInfoUpdated\",\r\n      data: { ...this.bookedByData },\r\n    });\r\n    if (key === \"countryId\") {\r\n      this.bookedByData = {\r\n        ...this.bookedByData,\r\n        isdCode: event.target.value,\r\n      };\r\n    }\r\n  }\r\n\r\n  handleNumberInput(key, event: InputEvent) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    const inputValue = inputElement.value;\r\n\r\n    // Regular expression to match only numeric characters (0-9)\r\n    const numericRegex = /^[0-9]+$/;\r\n\r\n    if (!numericRegex.test(inputValue)) {\r\n      // If the input is not numeric, prevent it from being entered\r\n      inputElement.value = inputValue.replace(/[^0-9]/g, \"\");\r\n    }\r\n    if (inputValue === inputElement.value) {\r\n      this.handleDataChange(key, event);\r\n    }\r\n  }\r\n\r\n  async handleEmailInput(key, event: InputEvent) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    const inputValue = inputElement.value;\r\n    if (this.isValidEmail(inputValue)) {\r\n      this.handleDataChange(key, event);\r\n    }\r\n  }\r\n  async checkUser() {\r\n    try {\r\n      const email = this.bookedByData.email;\r\n      if (this.isValidEmail(email)) {\r\n        const res = await this.bookingService.getUserInfo(email);\r\n        if (res !== null) {\r\n          this.bookedByData = {\r\n            ...this.bookedByData,\r\n            id: res.id,\r\n            firstName: res.first_name,\r\n            lastName: res.last_name,\r\n            contactNumber: res.mobile,\r\n            countryId: res.country_id,\r\n            isdCode: res.country_id.toString(),\r\n          };\r\n        } else {\r\n          this.bookedByData = {\r\n            ...this.bookedByData,\r\n            id: undefined,\r\n            firstName: \"\",\r\n            lastName: \"\",\r\n            contactNumber: \"\",\r\n            countryId: \"\",\r\n            isdCode: \"\",\r\n          };\r\n        }\r\n        this.dataUpdateEvent.emit({\r\n          key: \"bookedByInfoUpdated\",\r\n          data: { ...this.bookedByData },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      //   toastr.error(error);\r\n    }\r\n  }\r\n  isValidEmail(emailId) {\r\n    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\r\n    return emailPattern.test(emailId);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"text-left mt-3\">\r\n          <div class=\"form-group row text-left align-items-center\">\r\n            <label class=\"p-0 m-0 label-control mr-1 font-weight-bold\">\r\n              Booked by\r\n            </label>\r\n            <div class=\"bookedByEmailContainer\">\r\n              <input\r\n                id={v4()}\r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                placeholder=\"Email address\"\r\n                name=\"bookeyByEmail\"\r\n                value={this.bookedByData.email}\r\n                onInput={(event) => this.handleEmailInput(\"email\", event)}\r\n                required\r\n                onBlur={() => this.checkUser()}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"bookedDetailsForm text-left mt-2 font-small-3\">\r\n          <div class=\"row\">\r\n            <div class=\"p-0 col-md-6\">\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">First name</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"First name\"\r\n                    id={v4()}\r\n                    value={this.bookedByData.firstName}\r\n                    onInput={(event) =>\r\n                      this.handleDataChange(\"firstName\", event)\r\n                    }\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Last name</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"Last name\"\r\n                    id={v4()}\r\n                    value={this.bookedByData.lastName}\r\n                    onInput={(event) =>\r\n                      this.handleDataChange(\"lastName\", event)\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Country</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <select\r\n                    class=\"form-control input-sm pr-0\"\r\n                    id={v4()}\r\n                    onChange={(event) =>\r\n                      this.handleDataChange(\"countryId\", event)\r\n                    }\r\n                  >\r\n                    <option\r\n                      value=\"\"\r\n                      selected={this.bookedByData.countryId === \"\"}\r\n                    >\r\n                      Select\r\n                    </option>\r\n                    {this.countryNodeList.map((countryNode) => (\r\n                      <option\r\n                        value={countryNode.id}\r\n                        selected={\r\n                          this.bookedByData.countryId === countryNode.id\r\n                        }\r\n                      >\r\n                        {countryNode.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Mobile phone</label>\r\n                <div class=\"p-0 m-0 pr-1 row controlContainer\">\r\n                  <div class=\"col-3 p-0 m-0\">\r\n                    <select\r\n                      class=\"form-control input-sm pr-0\"\r\n                      id={v4()}\r\n                      onChange={(event) =>\r\n                        this.handleDataChange(\"isdCode\", event)\r\n                      }\r\n                    >\r\n                      <option\r\n                        value=\"\"\r\n                        selected={this.bookedByData.isdCode === \"\"}\r\n                      >\r\n                        ISD\r\n                      </option>\r\n                      {this.countryNodeList.map((country) => (\r\n                        <option\r\n                          value={country.id}\r\n                          selected={\r\n                            this.bookedByData.isdCode === country.id.toString()\r\n                          }\r\n                        >\r\n                          {country.phone_prefix}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"col-9 p-0 m-0\">\r\n                    <input\r\n                      class=\"form-control\"\r\n                      type=\"tel\"\r\n                      placeholder=\"Contact Number\"\r\n                      id={v4()}\r\n                      value={this.bookedByData.contactNumber}\r\n                      onInput={(event) =>\r\n                        this.handleNumberInput(\"contactNumber\", event)\r\n                      }\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Your arrival time</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <select\r\n                    class=\"form-control input-sm pr-0\"\r\n                    id={v4()}\r\n                    onChange={(event) =>\r\n                      this.handleDataChange(\"selectedArrivalTime\", event)\r\n                    }\r\n                  >\r\n                    <option\r\n                      value=\"\"\r\n                      selected={this.bookedByData.selectedArrivalTime === \"\"}\r\n                    >\r\n                      -\r\n                    </option>\r\n                    {this.arrivalTimeList.map((time) => (\r\n                      <option\r\n                        value={time.CODE_NAME}\r\n                        selected={\r\n                          this.bookedByData.selectedArrivalTime ===\r\n                          time.CODE_NAME\r\n                        }\r\n                      >\r\n                        {time.CODE_VALUE_EN}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Email the guest</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer checkBoxContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"checkbox\"\r\n                    checked={this.bookedByData.emailGuest}\r\n                    id={v4()}\r\n                    onChange={(event) =>\r\n                      this.handleDataChange(\"emailGuest\", event)\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-6 p-0\">\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Any message for us?</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <textarea\r\n                    id={v4()}\r\n                    rows={4}\r\n                    class=\"form-control\"\r\n                    name=\"message\"\r\n                    value={this.bookedByData.message}\r\n                    onInput={(event) => this.handleDataChange(\"message\", event)}\r\n                  ></textarea>\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Card Number</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"\"\r\n                    pattern=\"0-9 \"\r\n                    id={v4()}\r\n                    value={this.bookedByData.cardNumber}\r\n                    onInput={(event) =>\r\n                      this.handleNumberInput(\"cardNumber\", event)\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Card holder name</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"\"\r\n                    pattern=\"0-9 \"\r\n                    id={v4()}\r\n                    value={this.bookedByData.cardHolderName}\r\n                    onInput={(event) =>\r\n                      this.handleDataChange(\"cardHolderName\", event)\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Expiry Date</label>\r\n                <div class=\"p-0 m-0 row controlContainer\">\r\n                  <div class=\"col-3 p-0 m-0\">\r\n                    <select\r\n                      class=\"form-control input-sm pr-0\"\r\n                      id={v4()}\r\n                      onChange={(event) =>\r\n                        this.handleDataChange(\"expiryMonth\", event)\r\n                      }\r\n                    >\r\n                      {this.expiryMonths.map((month) => (\r\n                        <option\r\n                          value={month}\r\n                          selected={month === this.bookedByData.expiryMonth}\r\n                        >\r\n                          {month}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"col-4 p-0 m-0\">\r\n                    <select\r\n                      class=\"form-control input-sm pr-0\"\r\n                      id={v4()}\r\n                      onChange={(event) =>\r\n                        this.handleDataChange(\"expiryYear\", event)\r\n                      }\r\n                    >\r\n                      {this.expiryYears.map((year, index) => (\r\n                        <option\r\n                          value={year}\r\n                          selected={index === this.bookedByData.expiryYear}\r\n                        >\r\n                          {year}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import axios from \"axios\";\r\nimport {\r\n  IAvailableRoom,\r\n  IRoomCategory,\r\n  IUnassignedDates,\r\n  InnerRecord,\r\n} from \"../models/tobeassigned\";\r\nimport { dateDifference, dateToFormattedString } from \"../utils/utils\";\r\n\r\nexport class ToBeAssignedService {\r\n  public async getUnassignedDates(\r\n    propertyid: number,\r\n    from_date: string,\r\n    to_date: string\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_UnAssigned_Dates?Ticket=${token}`,\r\n          {\r\n            propertyid,\r\n            from_date,\r\n            to_date,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return this.convertUnassignedDates(data.My_Result);\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  public async getUnassignedRooms(\r\n    propertyid: number,\r\n    specific_date: string,\r\n    roomInfo: any,\r\n    formattedLegendData: any\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Aggregated_UnAssigned_Rooms?Ticket=${token}`,\r\n          {\r\n            propertyid,\r\n            specific_date,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return this.transformToAssignable(data, roomInfo, formattedLegendData);\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  public async assignUnit(\r\n    booking_nbr: string,\r\n    identifier: string,\r\n    pr_id: number\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Assign_Exposed_Room?Ticket=${token}`,\r\n          {\r\n            booking_nbr,\r\n            identifier,\r\n            pr_id,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data;\r\n      } else {\r\n        throw new Error(\"Invalid token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  private cleanSpacesAndSpecialChars(str: string) {\r\n    const regex = /[^a-zA-Z0-9]+/g;\r\n    return str.replace(regex, \"\");\r\n  }\r\n\r\n  private transformToAssignable(\r\n    data: any,\r\n    roomInfo,\r\n    formattedLegendData\r\n  ): IRoomCategory[] {\r\n    const result: IRoomCategory[] = [];\r\n    data.My_Result.forEach((customer: any) => {\r\n      customer.unassigned_rooms.forEach((room: any) => {\r\n        let roomCategory: IRoomCategory = {\r\n          roomTypeName: room.room_type_name,\r\n          ID: room.identifier,\r\n          NAME: room.guest_name,\r\n          identifier: room.identifier,\r\n          FROM_DATE: room.unassigned_date,\r\n          TO_DATE: room.unassigned_date,\r\n          BOOKING_NUMBER: room.book_nbr,\r\n          STATUS: \"IN-HOUSE\",\r\n          defaultDateRange: {\r\n            fromDate: undefined,\r\n            toDate: undefined,\r\n            fromDateTimeStamp: 0,\r\n            toDateTimeStamp: 0,\r\n            fromDateStr: \"\",\r\n            toDateStr: \"\",\r\n            dateDifference: 0,\r\n          },\r\n          NO_OF_DAYS: 1,\r\n          roomsInfo: roomInfo,\r\n          legendData: formattedLegendData,\r\n          availableRooms: [],\r\n          RT_ID: this.getRoomTypeId(room.room_type_name, roomInfo),\r\n        };\r\n        this.updateAvailableRooms(\r\n          room,\r\n          roomCategory,\r\n          formattedLegendData,\r\n          roomInfo\r\n        );\r\n        this.addDefaultDateRange(roomCategory);\r\n        result.push(roomCategory);\r\n      });\r\n    });\r\n    return result;\r\n  }\r\n  addDefaultDateRange(roomCategory: IRoomCategory) {\r\n    roomCategory.defaultDateRange.fromDate = new Date(\r\n      roomCategory.FROM_DATE + \"T00:00:00\"\r\n    );\r\n    roomCategory.defaultDateRange.fromDateStr = dateToFormattedString(\r\n      roomCategory.defaultDateRange.fromDate\r\n    );\r\n    roomCategory.defaultDateRange.fromDateTimeStamp =\r\n      roomCategory.defaultDateRange.fromDate.getTime();\r\n\r\n    roomCategory.defaultDateRange.toDate = new Date(\r\n      roomCategory.TO_DATE + \"T00:00:00\"\r\n    );\r\n    roomCategory.defaultDateRange.toDateStr = dateToFormattedString(\r\n      roomCategory.defaultDateRange.toDate\r\n    );\r\n    roomCategory.defaultDateRange.toDateTimeStamp =\r\n      roomCategory.defaultDateRange.toDate.getTime();\r\n\r\n    roomCategory.defaultDateRange.dateDifference = roomCategory.NO_OF_DAYS;\r\n  }\r\n  private getRoomTypeId(roomName: string, roomInfo: any) {\r\n    return (\r\n      roomInfo.find(\r\n        (room) =>\r\n          this.cleanSpacesAndSpecialChars(room.name) ===\r\n          this.cleanSpacesAndSpecialChars(roomName)\r\n      ).id || null\r\n    );\r\n  }\r\n  private updateAvailableRooms(\r\n    room: any,\r\n    roomCategory: IRoomCategory,\r\n    formattedLegendData,\r\n    roomsInfo\r\n  ): void {\r\n    const rooms: IAvailableRoom[] = [];\r\n    room.assignable_units.forEach((unit: any) => {\r\n      if (unit.Is_Fully_Available && !unit.Is_Not_Available) {\r\n        const days = dateDifference(unit.from_date, unit.to_date);\r\n        rooms.push({\r\n          RT_ID: roomCategory.RT_ID,\r\n          STATUS: \"PENDING-CONFIRMATION\",\r\n          FROM_DATE: unit.from_date,\r\n          roomName: unit.name,\r\n          PR_ID: unit.pr_id,\r\n          TO_DATE: unit.to_date,\r\n          NO_OF_DAYS: days,\r\n          ID: \"NEW_TEMP_EVENT\",\r\n          NAME: \"\",\r\n          NOTES: \"\",\r\n          BALANCE: \"\",\r\n          INTERNAL_NOTE: \"\",\r\n          hideBubble: true,\r\n          legendData: formattedLegendData,\r\n          roomsInfo,\r\n        });\r\n        roomCategory.TO_DATE = unit.to_date;\r\n        roomCategory.NO_OF_DAYS = days;\r\n      }\r\n    });\r\n    roomCategory.availableRooms = rooms;\r\n  }\r\n\r\n  private convertUnassignedDates(\r\n    dates: IUnassignedDates[]\r\n  ): Record<number, InnerRecord> {\r\n    let convertedDates: Record<number, InnerRecord> = {};\r\n    dates.forEach((date) => {\r\n      convertedDates[new Date(date.date).getTime()] = {\r\n        categories: {},\r\n        dateStr: date.description,\r\n      };\r\n    });\r\n    return convertedDates;\r\n  }\r\n}\r\n","@import url(\"../../../../assets/feather/style.min.css\");\r\n@import url(\"../../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.guestTitle {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  padding: 2px;\r\n  margin-bottom: 5px;\r\n  margin-top: 5px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  /* margin-bottom: 5px; */\r\n}\r\n\r\n.guestTitle.selectedOrder {\r\n  background-color: #f9f9c9;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\nhr {\r\n  margin-top: 8px;\r\n  margin-bottom: 0px;\r\n}\r\n\r\n.bookingContainer {\r\n  background-color: #ececec;\r\n}\r\n\r\n.actionsContainer {\r\n  padding: 5px !important;\r\n  padding-right: 0px !important;\r\n}\r\n\r\n.selectContainer {\r\n  width: 195px;\r\n  margin-right: 8px;\r\n}\r\n\r\n.buttonsContainer {\r\n  width: 100px;\r\n}\r\n.btn-secondary {\r\n  margin-right: 8px !important;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  Prop,\r\n  h,\r\n  Event,\r\n  EventEmitter,\r\n  Listen,\r\n  State,\r\n} from \"@stencil/core\";\r\nimport { ToBeAssignedService } from \"../../../../services/toBeAssigned.service\";\r\nimport { v4 } from \"uuid\";\r\n// import $ from 'jquery';\r\n\r\n@Component({\r\n  tag: \"igl-tba-booking-view\",\r\n  styleUrl: \"igl-tba-booking-view.css\",\r\n  scoped: true,\r\n})\r\nexport class IglTbaBookingView {\r\n  // @Element() private element: HTMLElement;\r\n  @Event({ bubbles: true, composed: true })\r\n  highlightToBeAssignedBookingEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) addToBeAssignedEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) scrollPageToRoom: EventEmitter;\r\n  @Event() assignRoomEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() selectedDate;\r\n  @Prop() eventData: { [key: string]: any } = {};\r\n  @Prop() categoriesData: { [key: string]: any } = {};\r\n  @Prop() categoryId;\r\n  @Prop() categoryIndex;\r\n  @Prop() eventIndex;\r\n  @State() renderAgain: boolean = false;\r\n\r\n  @State() selectedRoom: number = -1;\r\n  private highlightSection: boolean = false;\r\n  private allRoomsList: { [key: string]: any }[] = [];\r\n  private toBeAssignedService = new ToBeAssignedService();\r\n  onSelectRoom(evt) {\r\n    if (evt.stopImmediatePropagation) {\r\n      evt.stopImmediatePropagation();\r\n      evt.stopPropagation();\r\n    }\r\n    this.selectedRoom = parseInt(evt.target.value);\r\n  }\r\n\r\n  // componentDidLoad(){\r\n  //   this.initializeToolTips();\r\n  // }\r\n\r\n  componentShouldUpdate(\r\n    newValue: string,\r\n    oldValue: string,\r\n    propName: string\r\n  ): boolean {\r\n    // Implement your custom logic here\r\n    // console.log(propName, newValue, oldValue)\r\n    if (propName === \"selectedDate\" && newValue !== oldValue) {\r\n      this.highlightSection = false;\r\n      this.selectedRoom = -1;\r\n      return true; // Prevent update for a specific prop value\r\n    } else if (propName === \"eventData\" && newValue !== oldValue) {\r\n      this.selectedRoom = -1;\r\n      return true;\r\n    }\r\n    // Default behavior, allow update\r\n    return true;\r\n  }\r\n\r\n  componentWillLoad() {\r\n    //console.log(\"eventIndex\", this.eventIndex);\r\n    if (this.categoryIndex === 0 && this.eventIndex === 0) {\r\n      setTimeout(() => {\r\n        this.handleHighlightAvailability();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  // initializeToolTips(){\r\n  // console.log($(this.element));\r\n  // console.log($('[data-toggle=\"tooltip\"]'))\r\n  // console.log($(this.element + ' [data-toggle=\"tooltip\"]'));\r\n\r\n  // $('[data-toggle=\"tooltip\"]').tooltip({\r\n  //   container: 'body'\r\n  // });\r\n  // }\r\n\r\n  async handleAssignUnit(event) {\r\n    try {\r\n      event.stopImmediatePropagation();\r\n      event.stopPropagation();\r\n      if (this.selectedRoom) {\r\n        await this.toBeAssignedService.assignUnit(\r\n          this.eventData.BOOKING_NUMBER,\r\n          this.eventData.ID,\r\n          this.selectedRoom\r\n        );\r\n        let assignEvent = { ...this.eventData, PR_ID: this.selectedRoom };\r\n\r\n        /* Here need to work on saving to db on success run below 2 lines */\r\n        this.calendarData.bookingEvents.push(assignEvent);\r\n        this.addToBeAssignedEvent.emit({\r\n          key: \"tobeAssignedEvents\",\r\n          data: [assignEvent],\r\n        });\r\n        this.assignRoomEvent.emit({ key: \"assignRoom\", data: assignEvent });\r\n      }\r\n    } catch (error) {\r\n      //   toastr.error(error);\r\n    }\r\n  }\r\n\r\n  handleHighlightAvailability() {\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: \"highlightBookingId\",\r\n      data: { bookingId: this.eventData.ID },\r\n    });\r\n    if (!this.selectedDate) {\r\n      return;\r\n    }\r\n    let filteredEvents = [];\r\n    let allRoomsList = [];\r\n    filteredEvents = this.eventData.availableRooms.map((room) => {\r\n      allRoomsList.push({\r\n        calendar_cell: null,\r\n        id: room.PR_ID,\r\n        name: room.roomName,\r\n      });\r\n      return {\r\n        ...room,\r\n        defaultDateRange: this.eventData.defaultDateRange,\r\n        identifier: this.eventData.identifier,\r\n        // roomsInfo: this.eventData.roomsInfo,\r\n        // legendData: this.eventData.legendData,\r\n      };\r\n    });\r\n    this.allRoomsList = allRoomsList;\r\n    this.addToBeAssignedEvent.emit({\r\n      key: \"tobeAssignedEvents\",\r\n      data: filteredEvents,\r\n    });\r\n\r\n    this.scrollPageToRoom.emit({\r\n      key: \"scrollPageToRoom\",\r\n      id: this.categoryId,\r\n      refClass: \"category_\" + this.categoryId,\r\n    });\r\n    // ID: \"NEW_TEMP_EVENT\",\r\n    // STATUS: \"PENDING_CONFIRMATION\"\r\n    this.renderView();\r\n  }\r\n\r\n  handleCloseAssignment(event) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    this.highlightSection = false;\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: \"highlightBookingId\",\r\n      data: { bookingId: \"----\" },\r\n    });\r\n    this.onSelectRoom({ target: { value: \"\" } });\r\n    this.addToBeAssignedEvent.emit({ key: \"tobeAssignedEvents\", data: [] });\r\n    this.renderView();\r\n  }\r\n\r\n  @Listen(\"highlightToBeAssignedBookingEvent\", { target: \"window\" })\r\n  highlightBookingEvent(event: CustomEvent) {\r\n    let data = event.detail.data;\r\n    if (data.bookingId != this.eventData.ID) {\r\n      this.highlightSection = false;\r\n      this.selectedRoom = -1;\r\n      this.renderView();\r\n    } else {\r\n      this.highlightSection = true;\r\n      this.renderView();\r\n    }\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n    // this.initializeToolTips();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div\r\n          class=\"bookingContainer\"\r\n          onClick={() => this.handleHighlightAvailability()}\r\n        >\r\n          <div\r\n            class={`guestTitle ${\r\n              this.highlightSection ? \"selectedOrder\" : \"\"\r\n            } pointer font-small-3`}\r\n            data-toggle=\"tooltip\"\r\n            data-placement=\"top\"\r\n            data-original-title=\"Click to assign unit\"\r\n          >\r\n            {`Book# ${this.eventData.BOOKING_NUMBER} , ${this.eventData.NAME}`}\r\n          </div>\r\n          <div class=\"row m-0 p-0 actionsContainer\">\r\n            <div class=\"d-inline-block p-0 selectContainer\">\r\n              <select\r\n                class=\"form-control input-sm\"\r\n                id={v4()}\r\n                onChange={(evt) => this.onSelectRoom(evt)}\r\n              >\r\n                <option value=\"\" selected={this.selectedRoom == -1}>\r\n                  Assign unit\r\n                </option>\r\n                {this.allRoomsList.map((room) => (\r\n                  <option\r\n                    value={room.id}\r\n                    selected={this.selectedRoom == room.id}\r\n                  >\r\n                    {room.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            {this.highlightSection ? (\r\n              <div class=\"d-inline-block text-right buttonsContainer\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-secondary btn-sm\"\r\n                  onClick={(evt) => this.handleCloseAssignment(evt)}\r\n                >\r\n                  X\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-primary btn-sm\"\r\n                  onClick={(evt) => this.handleAssignUnit(evt)}\r\n                  disabled={this.selectedRoom === -1}\r\n                >\r\n                  Assign\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <hr />\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../../assets/feather/style.min.css\");\r\n@import url(\"../../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  Prop,\r\n  State,\r\n  h,\r\n  Event,\r\n  EventEmitter,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-tba-category-view\",\r\n  styleUrl: \"igl-tba-category-view.css\",\r\n  scoped: true,\r\n})\r\nexport class IglTbaCategoryView {\r\n  @Event() assignUnitEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() selectedDate;\r\n  @Prop() categoriesData: { [key: string]: any } = {};\r\n  @Prop() categoryId;\r\n  @Prop({ mutable: true }) eventDatas;\r\n  @Prop() categoryIndex;\r\n  @State() renderAgain: boolean = false;\r\n\r\n  // private localEventDatas;\r\n\r\n  componentWillLoad() {\r\n    // this.localEventDatas = this.eventDatas;\r\n  }\r\n\r\n  handleAssignRoomEvent(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.eventDatas = this.eventDatas.filter(\r\n      (eventData) => eventData.ID != opt.data.ID\r\n    );\r\n    this.calendarData.bookingEvents.push(opt.data);\r\n    this.assignUnitEvent.emit({\r\n      key: \"assignUnit\",\r\n      data: {\r\n        RT_ID: this.categoryId,\r\n        selectedDate: this.selectedDate,\r\n        assignEvent: opt.data,\r\n        calendarData: this.calendarData,\r\n      },\r\n    });\r\n    // if(this.localEventDatas.length){\r\n    this.renderView();\r\n    // }\r\n  }\r\n\r\n  getEventView(categoryId, eventDatas) {\r\n    return eventDatas.map((eventData, ind) => (\r\n      <igl-tba-booking-view\r\n        calendarData={this.calendarData}\r\n        selectedDate={this.selectedDate}\r\n        eventData={eventData}\r\n        categoriesData={this.categoriesData}\r\n        categoryId={categoryId}\r\n        categoryIndex={this.categoryIndex}\r\n        eventIndex={ind}\r\n        onAssignRoomEvent={(evt) => this.handleAssignRoomEvent(evt)}\r\n      ></igl-tba-booking-view>\r\n    ));\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"sectionContainer\">\r\n          <div class=\"font-weight-bold mt-1 font-small-3\">\r\n            {this.categoriesData[this.categoryId].name}\r\n          </div>\r\n          {this.getEventView(this.categoryId, this.eventDatas)}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.tobeAssignedHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.closeBtn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.closeBtn:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  State,\r\n  Listen,\r\n  Fragment,\r\n} from \"@stencil/core\";\r\nimport { ToBeAssignedService } from \"../../../services/toBeAssigned.service\";\r\nimport { dateToFormattedString } from \"../../../utils/utils\";\r\n\r\n@Component({\r\n  tag: \"igl-to-be-assigned\",\r\n  styleUrl: \"igl-to-be-assigned.css\",\r\n  scoped: true,\r\n})\r\nexport class IglToBeAssigned {\r\n  @Prop() propertyid: number;\r\n  @Prop() from_date: string;\r\n  @Prop() to_date: string;\r\n  @Prop() loadingMessage: string = \"Fetching For Unassigned Rooms\";\r\n  @Prop({ mutable: true }) calendarData: { [key: string]: any };\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true })\r\n  reduceAvailableUnitEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) addToBeAssignedEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true })\r\n  highlightToBeAssignedBookingEvent: EventEmitter;\r\n  @State() showDatesList: boolean = false;\r\n  @State() renderAgain: boolean = false;\r\n  @State() orderedDatesList: any[] = [];\r\n  @State() isLoading: boolean = false;\r\n  private selectedDate = null;\r\n  private data: { [key: string]: any } = {};\r\n  private today = new Date();\r\n  private categoriesData: { [key: string]: any } = {};\r\n  private toBeAssignedService: ToBeAssignedService = new ToBeAssignedService();\r\n  private unassignedDates: any;\r\n  componentWillLoad() {\r\n    this.reArrangeData();\r\n  }\r\n  async updateCategories(key, calendarData) {\r\n    try {\r\n      let categorisedRooms = {};\r\n      const result = await this.toBeAssignedService.getUnassignedRooms(\r\n        this.propertyid,\r\n        dateToFormattedString(new Date(+key)),\r\n        calendarData.roomsInfo,\r\n        calendarData.formattedLegendData\r\n      );\r\n      result.forEach((room) => {\r\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\r\n          categorisedRooms[room.RT_ID] = [room];\r\n        } else {\r\n          categorisedRooms[room.RT_ID].push(room);\r\n        }\r\n      });\r\n      this.unassignedDates[key].categories = categorisedRooms;\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n\r\n  async reArrangeData() {\r\n    try {\r\n      this.isLoading = true;\r\n      this.today.setHours(0, 0, 0, 0);\r\n      this.calendarData.roomsInfo.forEach((category) => {\r\n        this.categoriesData[category.id] = {\r\n          name: category.name,\r\n          roomsList: category.physicalrooms,\r\n          roomIds: category.physicalrooms.map((room) => {\r\n            return room.id;\r\n          }),\r\n        };\r\n      });\r\n\r\n      this.selectedDate = null;\r\n      this.unassignedDates = await this.toBeAssignedService.getUnassignedDates(\r\n        this.propertyid,\r\n        dateToFormattedString(new Date()),\r\n        this.to_date\r\n      );\r\n      const firstKey = Object.keys(this.unassignedDates)[0];\r\n      await this.updateCategories(firstKey, this.calendarData);\r\n\r\n      this.data = this.unassignedDates;\r\n      this.orderedDatesList = Object.keys(this.data).sort(\r\n        (a, b) => parseInt(a) - parseInt(b)\r\n      );\r\n      if (!this.selectedDate && this.orderedDatesList.length) {\r\n        this.selectedDate = this.orderedDatesList[0];\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching unassigned dates:\", error);\r\n      //  toastr.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  @Listen(\"gotoToBeAssignedDate\", { target: \"window\" })\r\n  gotoDate(event: CustomEvent) {\r\n    this.showForDate(event.detail.data);\r\n    this.showDatesList = false;\r\n    this.renderView();\r\n  }\r\n\r\n  async showForDate(dateStamp) {\r\n    try {\r\n      this.isLoading = true;\r\n      this.showUnassignedDate();\r\n      await this.updateCategories(dateStamp, this.calendarData);\r\n      this.addToBeAssignedEvent.emit({ key: \"tobeAssignedEvents\", data: [] });\r\n      this.selectedDate = dateStamp;\r\n      this.showBookingPopup.emit({\r\n        key: \"calendar\",\r\n        data: parseInt(dateStamp) - 86400000,\r\n      });\r\n      this.isLoading = false; // goto 1 days before.. // calendar moves another 1 day\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  getDay(dt) {\r\n    const currentDate = new Date(dt);\r\n    const locale = \"default\"; //'en-US';\r\n    const dayOfWeek = this.getLocalizedDayOfWeek(currentDate, locale);\r\n    // const monthName = currentDate.toLocaleString(\"default\", { month: 'short' })\r\n    return (\r\n      dayOfWeek + \" \" + currentDate.getDate() + \", \" + currentDate.getFullYear()\r\n    );\r\n  }\r\n\r\n  getLocalizedDayOfWeek(date, locale) {\r\n    const options = { weekday: \"short\" };\r\n    return date.toLocaleDateString(locale, options);\r\n  }\r\n\r\n  handleOptionEvent(key, data = \"\") {\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: \"highlightBookingId\",\r\n      data: { bookingId: \"----\" },\r\n    });\r\n    this.addToBeAssignedEvent.emit({ key: \"tobeAssignedEvents\", data: [] });\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  showUnassignedDate() {\r\n    this.showDatesList = !this.showDatesList;\r\n  }\r\n\r\n  getToBeAssignedEntities() {\r\n    // toBeAssignedEvents\r\n  }\r\n\r\n  getCategoryView() {\r\n    if (\r\n      this.orderedDatesList.length &&\r\n      this.selectedDate &&\r\n      this.data[this.selectedDate]\r\n    ) {\r\n      return Object.entries(this.data[this.selectedDate].categories).map(\r\n        ([id, eventDatas], ind) => (\r\n          <igl-tba-category-view\r\n            calendarData={this.calendarData}\r\n            selectedDate={this.selectedDate}\r\n            categoryId={id}\r\n            categoryIndex={ind}\r\n            categoriesData={this.categoriesData}\r\n            eventDatas={eventDatas}\r\n            onAssignUnitEvent={(evt) => this.handleAssignUnit(evt)}\r\n          ></igl-tba-category-view>\r\n        )\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  handleAssignUnit(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const data = opt.data;\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    if (opt.key === \"assignUnit\") {\r\n      this.data[data.selectedDate].categories[data.RT_ID] = this.data[\r\n        data.selectedDate\r\n      ].categories[data.RT_ID].filter(\r\n        (eventData) => eventData.ID != data.assignEvent.ID\r\n      );\r\n      this.calendarData = data.calendarData; // RAJA\r\n      // this.calendarData.bookingEvents.push(data.assignEvent);\r\n\r\n      if (!this.data[data.selectedDate].categories[data.RT_ID].length) {\r\n        delete this.data[data.selectedDate].categories[data.RT_ID];\r\n\r\n        if (!Object.keys(this.data[data.selectedDate].categories).length) {\r\n          delete this.data[data.selectedDate];\r\n          this.orderedDatesList = this.orderedDatesList.filter(\r\n            (dateStamp) => dateStamp != data.selectedDate\r\n          );\r\n          this.selectedDate = this.orderedDatesList.length\r\n            ? this.orderedDatesList[0]\r\n            : null;\r\n        }\r\n      }\r\n\r\n      this.reduceAvailableUnitEvent.emit({\r\n        key: \"reduceAvailableDays\",\r\n        data: { selectedDate: data.selectedDate },\r\n      });\r\n      this.renderView();\r\n    }\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"tobeAssignedContainer pr-1 text-left\">\r\n        <div>\r\n          <div>\r\n            <div class=\"stickyHeader\">\r\n              <div class=\"tobeAssignedHeader pt-1\">Assignments</div>\r\n              <div\r\n                class=\"closeBtn pt-1\"\r\n                onClick={() => this.handleOptionEvent(\"closeSideMenu\")}\r\n              >\r\n                <i class=\"ft-chevrons-left\"></i>\r\n              </div>\r\n              <hr />\r\n              {this.isLoading ? (\r\n                <p>{this.loadingMessage}</p>\r\n              ) : (\r\n                <Fragment>\r\n                  {this.orderedDatesList.length ? (\r\n                    <div\r\n                      class={\r\n                        `text-center ` + (this.showDatesList ? \"show\" : \"\")\r\n                      }\r\n                    >\r\n                      <div onClick={() => this.showUnassignedDate()}>\r\n                        <span class=\"font-weight-bold\">\r\n                          {this.data[this.selectedDate].dateStr}\r\n                        </span>\r\n                        <i class=\"la la-angle-down ml-2\"></i>\r\n                      </div>\r\n                      {this.showDatesList ? (\r\n                        <div class=\"dropdown-menu dropdown-menu-right full-width\">\r\n                          {this.orderedDatesList.map((ordDate) => (\r\n                            <div\r\n                              class=\"pointer dropdown-item pointer\"\r\n                              onClick={() => this.showForDate(ordDate)}\r\n                            >\r\n                              {this.data[ordDate].dateStr}\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      ) : null}\r\n                    </div>\r\n                  ) : (\r\n                    \"All bookings assigned\"\r\n                  )}\r\n                </Fragment>\r\n              )}\r\n            </div>\r\n            {!this.isLoading && (\r\n              <div class=\"scrollabledArea\">\r\n                {this.orderedDatesList.length ? (\r\n                  Object.keys(this.data[this.selectedDate].categories)\r\n                    .length ? (\r\n                    this.getCategoryView()\r\n                  ) : (\r\n                    <div class=\"mt-1\">All assigned for this day.</div>\r\n                  )\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import axios from \"axios\";\r\n\r\nexport class RoomService {\r\n  public async fetchData(\r\n    id: number,\r\n    language: string\r\n  ): Promise<{ [key: string]: any }> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token !== null) {\r\n        const { data } = await axios.post(\r\n          `/Get_Exposed_Property?Ticket=${token}`,\r\n          { id, language }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n}\r\n","@import url(\"../../assets/feather/style.min.css\");\r\n@import url(\"../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: relative;\r\n  background-color: #ffffff;\r\n  height: 100%;\r\n  text-align: center;\r\n}\r\n\r\n.igl-calendar {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  height: 100%;\r\n}\r\n\r\n.calendarScrollContainer div {\r\n  position: relative;\r\n}\r\n\r\n.calendarScrollContainer {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n  position: relative;\r\n  white-space: nowrap;\r\n  border-left: 2px solid grey;\r\n}\r\n\r\n.showToBeAssigned,\r\n.showLegend {\r\n  grid-template-columns: 330px 1fr;\r\n}\r\n\r\n#calendarContainer {\r\n  position: absolute;\r\n}\r\n\r\ndiv {\r\n  position: relative;\r\n}\r\n\r\n.legendContainer,\r\n.tobeAssignedContainer {\r\n  display: none;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  padding-left: 0.5em !important;\r\n  padding-right: 0.5em !important;\r\n}\r\n\r\n.showToBeAssigned .tobeAssignedContainer {\r\n  display: block;\r\n}\r\n\r\n.showLegend .legendContainer {\r\n  display: block;\r\n}\r\n\r\n.tobeBooked {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  text-align: left;\r\n}\r\n","import {\r\n  Component,\r\n  Element,\r\n  Event,\r\n  EventEmitter,\r\n  Host,\r\n  Listen,\r\n  Prop,\r\n  State,\r\n  Watch,\r\n  h,\r\n} from \"@stencil/core\";\r\nimport { RoomService } from \"../../services/room.service\";\r\nimport { BookingService } from \"../../services/booking.service\";\r\nimport {\r\n  computeEndDate,\r\n  convertDMYToISO,\r\n  formatLegendColors,\r\n} from \"../../utils/utils\";\r\n\r\nimport axios from \"axios\";\r\nimport { EventsService } from \"../../services/events.service\";\r\nimport { ICountry } from \"../../models/IBooking\";\r\n\r\n@Component({\r\n  tag: \"igloo-calendar\",\r\n  styleUrl: \"igloo-calendar.css\",\r\n  scoped: true,\r\n})\r\nexport class IglooCalendar {\r\n  @Prop() propertyid: number;\r\n  @Prop() from_date: string;\r\n  @Prop() to_date: string;\r\n  @Prop() language: string;\r\n  @Prop() baseurl: string;\r\n  @Prop() loadingMessage: string;\r\n  @Prop() currencyName: string;\r\n  @Prop({ reflect: true }) ticket: string = \"\";\r\n  @Element() private element: HTMLElement;\r\n  @Event({ bubbles: true, composed: true })\r\n  dragOverHighlightElement: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) moveBookingTo: EventEmitter;\r\n\r\n  @State() calendarData: { [key: string]: any } = new Object();\r\n  @State() days: { [key: string]: any }[] = new Array();\r\n  @State() scrollViewDragging: boolean = false;\r\n\r\n  @State() bookingItem: { [key: string]: any } = null;\r\n  @State() showLegend: boolean = false;\r\n  @State() showToBeAssigned: boolean = false;\r\n  private bookingService: BookingService = new BookingService();\r\n  private countryNodeList: ICountry[] = [];\r\n  private visibleCalendarCells: { x: any[]; y: any[] } = { x: [], y: [] };\r\n  private scrollContainer: HTMLElement;\r\n  private today: String = \"\";\r\n  private roomService: RoomService = new RoomService();\r\n  private eventsService = new EventsService();\r\n  @Watch(\"ticket\")\r\n  async ticketChanged() {\r\n    sessionStorage.setItem(\"token\", JSON.stringify(this.ticket));\r\n    this.initializeApp();\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    if (this.baseurl) {\r\n      axios.defaults.baseURL = this.baseurl;\r\n    }\r\n    if (this.ticket !== \"\") {\r\n      this.initializeApp();\r\n    }\r\n  }\r\n  initializeApp() {\r\n    try {\r\n      this.roomService\r\n        .fetchData(this.propertyid, this.language)\r\n        .then((roomResp) => {\r\n          this.setRoomsData(roomResp);\r\n          this.bookingService\r\n            .getCalendarData(this.propertyid, this.from_date, this.to_date)\r\n            .then(async (bookingResp) => {\r\n              this.countryNodeList = await this.bookingService.getCountries(\r\n                this.language\r\n              );\r\n              this.calendarData.currency = roomResp[\"My_Result\"].currency;\r\n              this.calendarData.legendData = this.getLegendData(roomResp);\r\n              this.calendarData.startingDate = new Date(\r\n                bookingResp.My_Params_Get_Rooming_Data.FROM\r\n              ).getTime();\r\n              this.calendarData.endingDate = new Date(\r\n                bookingResp.My_Params_Get_Rooming_Data.TO\r\n              ).getTime();\r\n              this.calendarData.formattedLegendData = formatLegendColors(\r\n                this.calendarData.legendData\r\n              );\r\n              this.calendarData.bookingEvents = bookingResp.myBookings || [];\r\n              this.calendarData.toBeAssignedEvents = [];\r\n\r\n              this.updateBookingEventsDateRange(\r\n                this.calendarData.bookingEvents\r\n              );\r\n              this.updateBookingEventsDateRange(\r\n                this.calendarData.toBeAssignedEvents\r\n              );\r\n\r\n              let dt = new Date();\r\n              this.today =\r\n                dt.getDate() +\r\n                \"_\" +\r\n                (dt.getMonth() + 1) +\r\n                \"_\" +\r\n                dt.getFullYear();\r\n              let startingDay: Date = new Date(\r\n                this.getStartingDateOfCalendar()\r\n              );\r\n              startingDay.setHours(0, 0, 0, 0);\r\n              this.days = bookingResp.days;\r\n              this.calendarData.days = this.days;\r\n              this.calendarData.monthsInfo = bookingResp.months;\r\n              setTimeout(() => {\r\n                this.scrollToElement(this.today);\r\n              }, 200);\r\n            });\r\n        });\r\n    } catch (error) {}\r\n  }\r\n  componentDidLoad() {\r\n    this.scrollToElement(this.today);\r\n  }\r\n  @Listen(\"deleteButton\")\r\n  async handledeleteEvent(ev: CustomEvent) {\r\n    try {\r\n      ev.stopImmediatePropagation();\r\n      ev.preventDefault();\r\n      const bookingEvent = [...this.calendarData.bookingEvents];\r\n      await this.eventsService.deleteEvent(ev.detail);\r\n\r\n      this.calendarData = {\r\n        ...this.calendarData,\r\n        bookingEvents: bookingEvent.filter((e) => e.POOL !== ev.detail),\r\n      };\r\n    } catch (error) {\r\n      //toastr.error(error);\r\n    }\r\n  }\r\n  updateBookingEventsDateRange(eventData) {\r\n    eventData.forEach((bookingEvent) => {\r\n      bookingEvent.legendData = this.calendarData.formattedLegendData;\r\n      bookingEvent.defaultDateRange = {};\r\n      bookingEvent.defaultDateRange.fromDate = new Date(\r\n        bookingEvent.FROM_DATE + \"T00:00:00\"\r\n      );\r\n      bookingEvent.defaultDateRange.fromDateStr = this.getDateStr(\r\n        bookingEvent.defaultDateRange.fromDate\r\n      );\r\n      bookingEvent.defaultDateRange.fromDateTimeStamp =\r\n        bookingEvent.defaultDateRange.fromDate.getTime();\r\n\r\n      bookingEvent.defaultDateRange.toDate = new Date(\r\n        bookingEvent.TO_DATE + \"T00:00:00\"\r\n      );\r\n      bookingEvent.defaultDateRange.toDateStr = this.getDateStr(\r\n        bookingEvent.defaultDateRange.toDate\r\n      );\r\n      bookingEvent.defaultDateRange.toDateTimeStamp =\r\n        bookingEvent.defaultDateRange.toDate.getTime();\r\n\r\n      bookingEvent.defaultDateRange.dateDifference = bookingEvent.NO_OF_DAYS; // (bookingEvent.defaultDateRange.toDate.getTime() - bookingEvent.defaultDateRange.fromDate.getTime())/(86400000);\r\n      bookingEvent.roomsInfo = [...this.calendarData.roomsInfo];\r\n    });\r\n  }\r\n  setRoomsData(roomServiceResp) {\r\n    let roomsData: { [key: string]: any }[] = new Array();\r\n    if (roomServiceResp.My_Result?.roomtypes?.length) {\r\n      roomsData = roomServiceResp.My_Result.roomtypes;\r\n      roomServiceResp.My_Result.roomtypes.forEach((roomCategory) => {\r\n        roomCategory.expanded = true;\r\n      });\r\n    }\r\n    this.calendarData.roomsInfo = roomsData;\r\n  }\r\n\r\n  getLegendData(aData) {\r\n    return aData[\"My_Result\"].calendar_legends;\r\n  }\r\n\r\n  getStartingDateOfCalendar() {\r\n    return this.calendarData.startingDate;\r\n  }\r\n\r\n  getEndingDateOfCalendar() {\r\n    return this.calendarData.endingDate;\r\n  }\r\n\r\n  getDay(dt) {\r\n    const currentDate = new Date(dt);\r\n    const locale = \"en-US\";\r\n    const dayOfWeek = this.getLocalizedDayOfWeek(currentDate, locale);\r\n    return dayOfWeek + \" \" + currentDate.getDate();\r\n  }\r\n\r\n  getLocalizedDayOfWeek(date, locale) {\r\n    const options = { weekday: \"short\" };\r\n    return date.toLocaleDateString(locale, options);\r\n  }\r\n\r\n  getLocalizedMonth(date, locale = \"default\") {\r\n    return (\r\n      date.toLocaleString(locale, { month: \"short\" }) + \" \" + date.getFullYear()\r\n    );\r\n  }\r\n\r\n  getDateStr(date, locale = \"default\") {\r\n    return (\r\n      date.getDate() +\r\n      \" \" +\r\n      date.toLocaleString(locale, { month: \"short\" }) +\r\n      \" \" +\r\n      date.getFullYear()\r\n    );\r\n  }\r\n\r\n  scrollToElement(goToDate) {\r\n    this.scrollContainer =\r\n      this.scrollContainer ||\r\n      this.element.querySelector(\".calendarScrollContainer\");\r\n    const topLeftCell = this.element.querySelector(\".topLeftCell\");\r\n    const gotoDay = this.element.querySelector(\".day-\" + goToDate);\r\n    if (gotoDay) {\r\n      this.scrollContainer.scrollTo({ left: 0 });\r\n      const gotoRect = gotoDay.getBoundingClientRect();\r\n      const containerRect = this.scrollContainer.getBoundingClientRect();\r\n      const topLeftCellRect = topLeftCell.getBoundingClientRect();\r\n      this.scrollContainer.scrollTo({\r\n        left:\r\n          gotoRect.left -\r\n          containerRect.left -\r\n          topLeftCellRect.width -\r\n          gotoRect.width,\r\n      });\r\n    }\r\n  }\r\n\r\n  @Listen(\"scrollPageToRoom\", { target: \"window\" })\r\n  scrollPageToRoom(event: CustomEvent) {\r\n    let targetScrollClass = event.detail.refClass;\r\n    this.scrollContainer =\r\n      this.scrollContainer ||\r\n      this.element.querySelector(\".calendarScrollContainer\");\r\n    const topLeftCell = this.element.querySelector(\".topLeftCell\");\r\n    const gotoRoom = this.element.querySelector(\".\" + targetScrollClass);\r\n    if (gotoRoom) {\r\n      this.scrollContainer.scrollTo({ top: 0 });\r\n      const gotoRect = gotoRoom.getBoundingClientRect();\r\n      const containerRect = this.scrollContainer.getBoundingClientRect();\r\n      const topLeftCellRect = topLeftCell.getBoundingClientRect();\r\n      this.scrollContainer.scrollTo({\r\n        top:\r\n          gotoRect.top -\r\n          containerRect.top -\r\n          topLeftCellRect.height -\r\n          gotoRect.height,\r\n      });\r\n    }\r\n  }\r\n\r\n  shouldRenderCalendarView() {\r\n    // console.log(\"rendering...\")\r\n    return (\r\n      this.calendarData &&\r\n      this.calendarData.days &&\r\n      this.calendarData.days.length\r\n    );\r\n  }\r\n\r\n  onOptionSelect(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const calendarElement = this.element.querySelector(\"#iglooCalendar\");\r\n    switch (opt.key) {\r\n      case \"showAssigned\":\r\n        calendarElement.classList.remove(\"showLegend\");\r\n        calendarElement.classList.remove(\"showToBeAssigned\");\r\n        calendarElement.classList.toggle(\"showToBeAssigned\");\r\n\r\n        this.showLegend = false;\r\n        this.showToBeAssigned = true;\r\n        break;\r\n      case \"showLegend\":\r\n        calendarElement.classList.remove(\"showToBeAssigned\");\r\n        calendarElement.classList.remove(\"showLegend\");\r\n        calendarElement.classList.toggle(\"showLegend\");\r\n\r\n        this.showLegend = true;\r\n        this.showToBeAssigned = false;\r\n        break;\r\n      case \"calendar\":\r\n        let dt = new Date(opt.data);\r\n        this.scrollToElement(\r\n          dt.getDate() + \"_\" + (dt.getMonth() + 1) + \"_\" + dt.getFullYear()\r\n        );\r\n        break;\r\n      case \"search\":\r\n        break;\r\n      case \"add\":\r\n        this.bookingItem = opt.data;\r\n        break;\r\n      case \"gotoToday\":\r\n        this.scrollToElement(this.today);\r\n        break;\r\n      case \"closeSideMenu\":\r\n        this.closeSideMenu();\r\n        break;\r\n    }\r\n  }\r\n\r\n  closeSideMenu() {\r\n    const calendarElement = this.element.querySelector(\"#iglooCalendar\");\r\n    calendarElement.classList.remove(\"showToBeAssigned\");\r\n    calendarElement.classList.remove(\"showLegend\");\r\n\r\n    this.showLegend = false;\r\n    this.showToBeAssigned = false;\r\n  }\r\n\r\n  scrollViewDragPos = { top: 0, left: 0, x: 0, y: 0 };\r\n  dragScrollContent(event: MouseEvent) {\r\n    this.scrollViewDragging = false;\r\n    let isPreventPageScroll =\r\n      event && event.target\r\n        ? this.hasAncestorWithClass(\r\n            event.target as HTMLElement,\r\n            \"preventPageScroll\"\r\n          )\r\n        : false;\r\n    if (!isPreventPageScroll) {\r\n      this.scrollViewDragPos = {\r\n        // The current scroll\r\n        left: this.scrollContainer.scrollLeft,\r\n        top: this.scrollContainer.scrollTop,\r\n        // Get the current mouse position\r\n        x: event.clientX,\r\n        y: event.clientY,\r\n      };\r\n      document.addEventListener(\"mousemove\", this.onScrollContentMoveHandler);\r\n      document.addEventListener(\"mouseup\", this.onScrollContentMoveEndHandler);\r\n    }\r\n  }\r\n\r\n  onScrollContentMoveHandler: EventListener = (event: MouseEvent) => {\r\n    // How far the mouse has been moved\r\n    const dx = event.clientX - this.scrollViewDragPos.x;\r\n    const dy = event.clientY - this.scrollViewDragPos.y;\r\n\r\n    // Scroll the element\r\n    this.scrollContainer.scrollTop = this.scrollViewDragPos.top - dy;\r\n    this.scrollContainer.scrollLeft = this.scrollViewDragPos.left - dx;\r\n    if (Math.abs(dx) > 5 || Math.abs(dy) > 5) {\r\n      this.scrollViewDragging = true;\r\n    }\r\n  };\r\n\r\n  onScrollContentMoveEndHandler: EventListener = () => {\r\n    document.removeEventListener(\"mousemove\", this.onScrollContentMoveHandler);\r\n    document.removeEventListener(\"mouseup\", this.onScrollContentMoveEndHandler);\r\n  };\r\n\r\n  calendarScrolling() {\r\n    const containerRect = this.scrollContainer.getBoundingClientRect();\r\n    let leftSideMenuSize = 170;\r\n    let maxWidth = containerRect.width - leftSideMenuSize;\r\n    let leftX = containerRect.x + leftSideMenuSize;\r\n    let rightX = containerRect.x + containerRect.width;\r\n\r\n    let cells = Array.from(\r\n      this.element.querySelectorAll(\".monthCell\")\r\n    ) as HTMLElement[];\r\n\r\n    if (cells.length) {\r\n      cells.map((monthContainer: HTMLElement) => {\r\n        let monthRect = monthContainer.getBoundingClientRect();\r\n        if (monthRect.x + monthRect.width < leftX) {\r\n          // item end is scrolled outside view, in -x\r\n        } else if (monthRect.x > rightX) {\r\n          // item is outside scrollview, in +x\r\n        } else {\r\n          let titleElement = monthContainer.querySelector(\r\n            \".monthTitle\"\r\n          ) as HTMLElement;\r\n          let marginLeft = 0;\r\n          let monthWidth = monthRect.width;\r\n          if (monthRect.x < leftX) {\r\n            marginLeft = Math.abs(monthRect.x) - leftX;\r\n            marginLeft =\r\n              monthRect.x < 0\r\n                ? Math.abs(monthRect.x) + leftX\r\n                : Math.abs(marginLeft);\r\n            monthWidth =\r\n              monthRect.x + monthRect.width > rightX\r\n                ? maxWidth\r\n                : monthRect.x + monthRect.width - leftX;\r\n          } else {\r\n            monthWidth =\r\n              maxWidth - monthWidth > monthWidth\r\n                ? monthWidth\r\n                : maxWidth - monthRect.x + leftX;\r\n          }\r\n          titleElement.style.marginLeft = marginLeft + \"px\";\r\n          titleElement.style.width = monthWidth + \"px\";\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  hasAncestorWithClass(element: HTMLElement, className: string): boolean {\r\n    let currentElement = element;\r\n    while (currentElement !== null) {\r\n      if (currentElement.matches(`.${className}`)) {\r\n        return true;\r\n      }\r\n      currentElement = currentElement.parentElement;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  @Listen(\"showBookingPopup\", { target: \"window\" })\r\n  showBookingPopupEventDataHandler(event: CustomEvent) {\r\n    event.preventDefault();\r\n    event.stopImmediatePropagation();\r\n    this.onOptionSelect(event);\r\n    //console.log(\"show booking event\", event);\r\n  }\r\n\r\n  @Listen(\"updateEventData\")\r\n  updateEventDataHandler(event: CustomEvent) {\r\n    let bookedData = this.calendarData.bookingEvents.find(\r\n      (bookedEvent) => bookedEvent.id === event.detail.id\r\n    );\r\n    if (bookedData && event.detail && event.detail.data) {\r\n      Object.entries(event.detail.data).forEach(([key, value]) => {\r\n        bookedData[key] = value;\r\n      });\r\n    }\r\n  }\r\n\r\n  @Listen(\"dragOverEventData\")\r\n  dragOverEventDataHandler(event: CustomEvent) {\r\n    if (event.detail.id === \"CALCULATE_DRAG_OVER_BOUNDS\") {\r\n      let topLeftCell = document.querySelector(\r\n        \"igl-cal-header .topLeftCell\"\r\n      ) as HTMLElement;\r\n      let containerDays = document.querySelectorAll(\r\n        \".headersContainer .headerCell\"\r\n      );\r\n      let containerRooms = document.querySelectorAll(\r\n        \".bodyContainer .roomRow .roomTitle\"\r\n      );\r\n      this.visibleCalendarCells = { x: [], y: [] };\r\n\r\n      containerDays.forEach((element) => {\r\n        const htmlElement = element as HTMLElement;\r\n        this.visibleCalendarCells.x.push({\r\n          left: htmlElement.offsetLeft + topLeftCell.offsetWidth,\r\n          width: htmlElement.offsetWidth,\r\n          id: htmlElement.getAttribute(\"data-day\"),\r\n        });\r\n      });\r\n\r\n      containerRooms.forEach((element) => {\r\n        const htmlElement = element as HTMLElement;\r\n        this.visibleCalendarCells.y.push({\r\n          top: htmlElement.offsetTop,\r\n          height: htmlElement.offsetHeight,\r\n          id: htmlElement.getAttribute(\"data-room\"),\r\n        });\r\n      });\r\n      this.highlightDragOver(true, event.detail.data);\r\n    } else if (event.detail.id === \"DRAG_OVER\") {\r\n      this.highlightDragOver(true, event.detail.data);\r\n    } else if (event.detail.id === \"DRAG_OVER_END\") {\r\n      this.highlightDragOver(false, event.detail.data);\r\n    } else if (event.detail.id === \"STRETCH_OVER_END\") {\r\n      this.highlightDragOver(false, event.detail.data);\r\n    }\r\n  }\r\n\r\n  async highlightDragOver(hightLightElement, currentPosition) {\r\n    let xElement, yElement;\r\n    if (currentPosition) {\r\n      xElement = this.visibleCalendarCells.x.find(\r\n        (pos) =>\r\n          pos.left < currentPosition.x &&\r\n          currentPosition.x <= pos.left + pos.width\r\n      );\r\n      yElement = this.visibleCalendarCells.y.find(\r\n        (pos) =>\r\n          pos.top < currentPosition.y &&\r\n          currentPosition.y <= pos.top + pos.height\r\n      );\r\n    }\r\n    // console.log(hightLightElement+\":::\"+yElement.id+\"_\"+xElement.id);\r\n    if (hightLightElement && xElement && yElement) {\r\n      this.dragOverHighlightElement.emit({\r\n        dragOverElement: yElement.id + \"_\" + xElement.id,\r\n      });\r\n    } else {\r\n      this.dragOverHighlightElement.emit({ dragOverElement: \"\" });\r\n    }\r\n    if (!hightLightElement) {\r\n      this.moveBookingTo.emit({\r\n        bookingId: currentPosition.id,\r\n        fromRoomId: currentPosition.fromRoomId,\r\n        toRoomId: (yElement && yElement.id) || \"revert\",\r\n        moveToDay: (xElement && xElement.id) || \"revert\",\r\n        pool: currentPosition.pool,\r\n        from_date: convertDMYToISO(xElement && xElement.id),\r\n        to_date: computeEndDate(\r\n          xElement && xElement.id,\r\n          currentPosition.nbOfDays\r\n        ),\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-interceptor></ir-interceptor>\r\n        <ir-common></ir-common>\r\n        <div id=\"iglooCalendar\" class=\"igl-calendar\">\r\n          {this.shouldRenderCalendarView()\r\n            ? [\r\n                this.showToBeAssigned ? (\r\n                  <igl-to-be-assigned\r\n                    loadingMessage={this.loadingMessage}\r\n                    to_date={this.to_date}\r\n                    from_date={this.from_date}\r\n                    propertyid={this.propertyid}\r\n                    class=\"tobeAssignedContainer\"\r\n                    calendarData={this.calendarData}\r\n                    onOptionEvent={(evt) => this.onOptionSelect(evt)}\r\n                  ></igl-to-be-assigned>\r\n                ) : null,\r\n                this.showLegend ? (\r\n                  <igl-legends\r\n                    class=\"legendContainer\"\r\n                    legendData={this.calendarData.legendData}\r\n                    onOptionEvent={(evt) => this.onOptionSelect(evt)}\r\n                  ></igl-legends>\r\n                ) : null,\r\n                <div\r\n                  class=\"calendarScrollContainer\"\r\n                  onMouseDown={(event) => this.dragScrollContent(event)}\r\n                  onScroll={() => this.calendarScrolling()}\r\n                >\r\n                  <div id=\"calendarContainer\">\r\n                    <igl-cal-header\r\n                      today={this.today}\r\n                      calendarData={this.calendarData}\r\n                      onOptionEvent={(evt) => this.onOptionSelect(evt)}\r\n                    ></igl-cal-header>\r\n                    <igl-cal-body\r\n                      countryNodeList={this.countryNodeList}\r\n                      currency={this.calendarData.currency}\r\n                      today={this.today}\r\n                      isScrollViewDragging={this.scrollViewDragging}\r\n                      calendarData={this.calendarData}\r\n                    ></igl-cal-body>\r\n                    <igl-cal-footer\r\n                      today={this.today}\r\n                      calendarData={this.calendarData}\r\n                      onOptionEvent={(evt) => this.onOptionSelect(evt)}\r\n                    ></igl-cal-footer>\r\n                  </div>\r\n                </div>,\r\n              ]\r\n            : \"Data not yet loaded\"}\r\n          {this.bookingItem ? (\r\n            <igl-book-property\r\n              countryNodeList={this.countryNodeList}\r\n              currency={this.calendarData.currency}\r\n              language={this.language}\r\n              propertyid={this.propertyid}\r\n              bookingData={this.bookingItem}\r\n              onCloseBookingWindow={(_) => (this.bookingItem = null)}\r\n            ></igl-book-property>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import { IrOnlineResource } from \"./models\";\r\nexport const onlineResources: IrOnlineResource[] = [\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/jquery.min.js\",\r\n  // },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css\",\r\n  },\r\n  { isCSS: true, link: \"https://x.igloorooms.com/app-assets/css/colors.css\" },\r\n  { isCSS: true, link: \"https://x.igloorooms.com/app-assets/css/colors.css\" },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/components.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/pages/login-register.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.css\",\r\n  },\r\n  { isCSS: true, link: \"https://x.igloorooms.com/assets/css/style.css\" },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/bootstrap.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css\",\r\n  },\r\n\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/moment.min.js\",\r\n  // },\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.js\",\r\n  // },\r\n];\r\n","import { Component, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport { IrOnlineResource } from '../../common/models';\r\nimport { onlineResources } from '../../common/ir.common.resources';\r\n\r\n@Component({\r\n  tag: 'ir-common',\r\n})\r\nexport class IrCommon {\r\n  @Prop({ reflect: true }) extraResources: string = '';\r\n  @State() resources: IrOnlineResource[] = onlineResources;\r\n  componentWillLoad() {\r\n    this.parseRefs();\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.initializeStyles();\r\n  }\r\n\r\n  @Watch('extraResources')\r\n  hrefsChanged() {\r\n    this.parseRefs();\r\n    this.initializeStyles();\r\n  }\r\n\r\n  private parseRefs() {\r\n    if (this.extraResources !== '') this.resources.push(JSON.parse(this.extraResources));\r\n  }\r\n\r\n  private appendTag(tagName: string, attributes: any) {\r\n    const tag = document.createElement(tagName);\r\n    const selectorParts = [];\r\n\r\n    Object.keys(attributes).forEach(attr => {\r\n      tag.setAttribute(attr, attributes[attr]);\r\n      selectorParts.push(`[${attr}=\"${attributes[attr]}\"]`);\r\n    });\r\n\r\n    const selector = `${tagName}${selectorParts.join('')}`;\r\n    const existingTag = document.querySelector(selector);\r\n\r\n    if (!existingTag) {\r\n      document.head.appendChild(tag);\r\n    }\r\n  }\r\n\r\n  private initializeStyles() {\r\n    this.resources.forEach(res => {\r\n      if (res.isCSS) {\r\n        this.appendTag('link', {\r\n          href: res.link,\r\n          rel: 'stylesheet',\r\n          type: 'text/css',\r\n        });\r\n      }\r\n      if (res.isJS) {\r\n        this.appendTag('script', {\r\n          src: res.link,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <slot></slot>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","\r\n.date-range-input {\r\n  border: 0;\r\n  outline: 0;\r\n  margin: 0;\r\n  flex: 1;\r\n}\r\n.date-range-input:focus {\r\n  border: 0;\r\n  outline: 0;\r\n}\r\n","import {\r\n  Component,\r\n  h,\r\n  Element,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n} from \"@stencil/core\";\r\nimport moment from \"moment\";\r\n\r\n@Component({\r\n  tag: \"ir-date-picker\",\r\n  styleUrl: \"ir-date-picker.css\",\r\n  scoped: true,\r\n})\r\nexport class IrDatePicker {\r\n  @Element() private element: HTMLElement;\r\n  @Prop({ reflect: true }) fromDate: Date;\r\n  @Prop({ reflect: true }) toDate: Date;\r\n\r\n  @Prop({ reflect: true }) opens: \"left\" | \"right\" | \"center\";\r\n  @Prop({ reflect: true }) autoApply: boolean;\r\n  @Prop({ reflect: true }) firstDay: number = 1;\r\n  @Prop({ reflect: true }) monthNames: string[] = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ];\r\n  @Prop({ reflect: true }) daysOfWeek: string[] = [\r\n    \"Su\",\r\n    \"Mo\",\r\n    \"Tu\",\r\n    \"We\",\r\n    \"Th\",\r\n    \"Fr\",\r\n    \"Sa\",\r\n  ];\r\n  @Prop({ reflect: true }) format: string = \"MMM DD,YYYY\";\r\n  @Prop({ reflect: true }) separator: string = \"-\";\r\n  @Prop({ reflect: true }) applyLabel: string = \"Apply\";\r\n  @Prop({ reflect: true }) cancelLabel: string = \"Cancel\";\r\n  @Prop({ reflect: true }) fromLabel: string = \"Form\";\r\n  @Prop({ reflect: true }) toLabel: string = \"To\";\r\n  @Prop({ reflect: true }) customRangeLabel: string = \"Custom\";\r\n  @Prop({ reflect: true }) weekLabel: string = \"W\";\r\n  @Prop({ reflect: true }) maxSpan: moment.DurationInputArg1 = {\r\n    days: 240,\r\n  };\r\n\r\n  @Event() dateChanged: EventEmitter<{\r\n    start: moment.Moment;\r\n    end: moment.Moment;\r\n  }>;\r\n  dateRangeInput: HTMLElement;\r\n  componentDidLoad() {\r\n    this.dateRangeInput = this.element.querySelector(\".date-range-input\");\r\n    $(this.dateRangeInput).daterangepicker(\r\n      {\r\n        opens: this.opens,\r\n        startDate: moment(this.fromDate),\r\n        endDate: moment(this.toDate),\r\n        maxSpan: this.maxSpan,\r\n        autoApply: this.autoApply,\r\n        locale: {\r\n          format: this.format,\r\n          separator: this.separator,\r\n          applyLabel: this.applyLabel,\r\n          cancelLabel: this.cancelLabel,\r\n          fromLabel: this.fromLabel,\r\n          toLabel: this.toLabel,\r\n          customRangeLabel: this.customRangeLabel,\r\n          weekLabel: this.weekLabel,\r\n          daysOfWeek: this.daysOfWeek,\r\n          monthNames: this.monthNames,\r\n          firstDay: this.firstDay,\r\n        },\r\n      },\r\n      (start, end) => {\r\n        this.dateChanged.emit({ start, end });\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return <input class=\"date-range-input\" type=\"text\" />;\r\n  }\r\n}\r\n",":host {\r\n  --viewport-padding: 25px;\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: var(--viewport-padding);\r\n  gap: 10px;\r\n  max-width: 60vw;\r\n  margin: 0;\r\n  list-style: none;\r\n  z-index: 2147483647;\r\n  outline: none;\r\n  pointer-events: none;\r\n}\r\n\r\n.toast-container {\r\n  background-color: white;\r\n  border-radius: 6px;\r\n  box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px,\r\n    hsl(206 22% 7% / 20%) 0px 10px 20px -15px;\r\n  padding: 15px 30px;\r\n  display: grid;\r\n  grid-template-areas: \"title action\";\r\n  grid-template-columns: auto max-content;\r\n  column-gap: 15px;\r\n  align-items: center;\r\n  overflow: hidden;\r\n}\r\n.toast-container[data-state=\"open\"] {\r\n  animation: slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards;\r\n}\r\n.toast-container[data-state=\"closed\"] {\r\n  pointer-events: none;\r\n  animation: fadeOut 150ms ease-in forwards;\r\n}\r\np {\r\n  margin: 0;\r\n  padding: 0;\r\n  grid-area: title;\r\n  font-weight: 500;\r\n  color: #1c2024;\r\n  font-size: 15px;\r\n}\r\n\r\n.x-mark-container,\r\n.check-mark-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 1.5rem;\r\n  width: 1.5rem;\r\n  border-radius: 50%;\r\n}\r\n.x-mark-container {\r\n  background: red;\r\n}\r\n.check-mark-container {\r\n  background: rgb(9, 153, 9);\r\n}\r\n\r\n.loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@keyframes fadeOut {\r\n  0% {\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n  }\r\n}\r\n@keyframes slideIn {\r\n  0% {\r\n    transform: translateX(calc(100% + var(--viewport-padding)));\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n","import { Component, Fragment, Host, Prop, State, h } from '@stencil/core';\r\nimport axios from 'axios';\r\n\r\n@Component({\r\n  tag: 'ir-interceptor',\r\n  styleUrl: 'ir-interceptor.css',\r\n  scoped: true,\r\n})\r\nexport class IrInterceptor {\r\n  @State() isShown = false;\r\n  @State() isLoading = false;\r\n  @State() isSuccess = false;\r\n\r\n  @Prop({ reflect: true, mutable: true }) defaultMessage = {\r\n    loadingMessage: 'Fetching Data',\r\n    successMessage: 'Success',\r\n    errorMessage: 'Something Went Wrong',\r\n  };\r\n\r\n  @Prop({ reflect: true }) handledEndpoints = ['/Get_Exposed_Booking_Availability', '/Get_Aggregated_UnAssigned_Rooms', '/ReAllocate_Exposed_Room'];\r\n\r\n  componentWillLoad() {\r\n    this.setupAxiosInterceptors();\r\n  }\r\n\r\n  setupAxiosInterceptors() {\r\n    axios.interceptors.request.use(this.handleRequest.bind(this), this.handleError.bind(this));\r\n    axios.interceptors.response.use(this.handleResponse.bind(this), this.handleError.bind(this));\r\n  }\r\n\r\n  extractEndpoint(url: string): string {\r\n    return url.split('?')[0];\r\n  }\r\n\r\n  isHandledEndpoint(url: string): boolean {\r\n    return this.handledEndpoints.includes(this.extractEndpoint(url));\r\n  }\r\n\r\n  handleRequest(config) {\r\n    if (this.isHandledEndpoint(config.url)) {\r\n      this.isLoading = true;\r\n      if (this.extractEndpoint(config.url) === '/ReAllocate_Exposed_Room') {\r\n        this.defaultMessage.loadingMessage = 'Updating Event';\r\n      } else {\r\n        this.defaultMessage.loadingMessage = 'Fetching Data';\r\n      }\r\n      this.showToast();\r\n    }\r\n    return config;\r\n  }\r\n\r\n  handleResponse(response) {\r\n    this.isLoading = false;\r\n\r\n    if (response.data.ExceptionMsg?.trim()) {\r\n      this.handleError(response.data.ExceptionMsg);\r\n      throw new Error(response.data.ExceptionMsg);\r\n    }\r\n\r\n    if (this.isHandledEndpoint(response.config.url)) {\r\n      this.handleCompletion('Success', true);\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  handleError(error) {\r\n    if (!this.isShown) {\r\n      this.showToast();\r\n    }\r\n    this.handleCompletion(error, false);\r\n    return Promise.reject(error);\r\n  }\r\n\r\n  showToast() {\r\n    this.isShown = true;\r\n  }\r\n\r\n  hideToastAfterDelay(isSuccess: boolean) {\r\n    const delay = isSuccess ? 2000 : 5000;\r\n    setTimeout(() => {\r\n      this.isShown = false;\r\n    }, delay);\r\n  }\r\n\r\n  handleCompletion(message: string, success: boolean) {\r\n    this.isSuccess = success;\r\n    this.defaultMessage = {\r\n      ...this.defaultMessage,\r\n      [success ? 'successMessage' : 'errorMessage']: message,\r\n    };\r\n    this.hideToastAfterDelay(success);\r\n  }\r\n\r\n  renderMessage(): string {\r\n    if (this.isLoading) return this.defaultMessage.loadingMessage;\r\n    return this.isSuccess ? this.defaultMessage.successMessage : this.defaultMessage.errorMessage;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"toast-container\" data-state={this.isShown ? 'open' : 'closed'}>\r\n          {this.isShown && (\r\n            <Fragment>\r\n              {this.isLoading ? (\r\n                <span class=\"loader\"></span>\r\n              ) : !this.isSuccess ? (\r\n                <div class=\"x-mark-container\">\r\n                  <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                      d=\"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z\"\r\n                      fill=\"white\"\r\n                      fill-rule=\"evenodd\"\r\n                      clip-rule=\"evenodd\"\r\n                    ></path>\r\n                  </svg>\r\n                </div>\r\n              ) : (\r\n                <div class=\"check-mark-container\">\r\n                  <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                      d=\"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z\"\r\n                      fill=\"white\"\r\n                      fill-rule=\"evenodd\"\r\n                      clip-rule=\"evenodd\"\r\n                    ></path>\r\n                  </svg>\r\n                </div>\r\n              )}\r\n\r\n              <p>{this.renderMessage()}</p>\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../assets/feather/style.min.css\");\r\n@import url(\"../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  position: relative;\r\n}\r\n\r\n/* p {\r\n  position: absolute;\r\n  top: 10px;\r\n  background-color: antiquewhite;\r\n  border-radius: 7px;\r\n  padding: 10px 15px;\r\n  z-index: 1000000;\r\n} */\r\n","import { Component, Host, Prop, State, h } from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"ir-tooltip\",\r\n  styleUrl: \"ir-tooltip.css\",\r\n  scoped: true,\r\n})\r\nexport class IrTooltip {\r\n  @Prop({ reflect: true }) message: string;\r\n  @State() open: boolean;\r\n  tooltipTimeout: any;\r\n  toggleOpen(shouldOpen: boolean) {\r\n    if (this.tooltipTimeout) {\r\n      clearTimeout(this.tooltipTimeout);\r\n    }\r\n\r\n    if (shouldOpen) {\r\n      this.tooltipTimeout = setTimeout(() => {\r\n        this.open = true;\r\n      }, 300);\r\n    } else {\r\n      this.open = false;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <span\r\n          onMouseEnter={() => this.toggleOpen(true)}\r\n          onMouseLeave={() => this.toggleOpen(false)}\r\n        >\r\n          <i\r\n            class=\"ml-1 ft-info\"\r\n            data-toggle=\"tooltip\"\r\n            data-placement=\"top\"\r\n            data-original-title=\"Info popup\"\r\n          ></i>\r\n        </span>\r\n        {this.open && (\r\n          <div class=\"tooltip bottom show position-absolute\" role=\"tooltip\">\r\n            <div class=\"tooltip-arrow\"></div>\r\n            <div class=\"tooltip-inner fit\">\r\n              <i class=\"tooltip-top-demo\"></i>\r\n              <span innerHTML={this.message}></span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"}