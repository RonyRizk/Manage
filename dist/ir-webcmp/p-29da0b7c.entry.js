import{r as t,c as e,h as i,H as s,F as o}from"./p-1da6dd41.js";import{m as n,d as a,j as l}from"./p-8da2cdd0.js";import{l as r}from"./p-cda0b50c.js";import{c as h}from"./p-85d94cdd.js";import{v as d}from"./p-d4c9256e.js";import{B as c}from"./p-adf83cfc.js";import{t as p}from"./p-8f7d4443.js";import{E as f}from"./p-6e63e442.js";import{i as u,a as m}from"./p-8fe10efe.js";import{h as g}from"./p-fe6c3d31.js";import{a as b}from"./p-54928856.js";import"./p-58003fb6.js";const y=".sc-igl-application-info-h{display:block}@media only screen and (min-width: 908px){.aplicationInfoContainer.sc-igl-application-info{max-width:80%}.guest-info-container.sc-igl-application-info{max-width:300px}.preference-select-container.sc-igl-application-info{max-width:250px}}";const k=class{constructor(i){t(this,i);this.dataUpdateEvent=e(this,"dataUpdateEvent",7);this.userRate=0;this.guestInfo=undefined;this.currency=undefined;this.roomsList=[];this.guestRefKey=undefined;this.bedPreferenceType=[];this.selectedUnits=[];this.bookingType="PLUS_BOOKING";this.defaultGuestPreference=undefined;this.index=undefined;this.defaultGuestRoomId=undefined;this.dateDifference=undefined;this.filterdRoomList=[];this.isButtonPressed=false;this.guestData=undefined}componentWillLoad(){console.log(this.guestInfo);if(this.guestInfo.isRateModified&&this.guestInfo.rateType===2){this.userRate=this.guestInfo.rate*this.dateDifference}else{this.userRate=this.guestInfo.rate}this.guestData=this.guestInfo?Object.assign({},this.guestInfo):{};this.guestData.roomId="";if(this.defaultGuestRoomId&&this.roomsList.filter((t=>t.id.toString()===this.defaultGuestRoomId.toString())).length>0){this.guestData.roomId=this.defaultGuestRoomId}this.guestData.preference=+this.defaultGuestPreference||"";this.updateRoomList()}componentDidLoad(){this.timeout=setTimeout((()=>{this.updateData()}),200)}disconnectedCallback(){clearTimeout(this.timeout)}async handleSelctedUnits(){this.updateRoomList()}updateRoomList(){const t=[...this.selectedUnits];t[this.index]=-1;this.filterdRoomList=this.roomsList.filter((e=>!t.includes(e.id)||e.name===""))}updateData(){this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",guestRefKey:this.guestRefKey,data:Object.assign({},this.guestData)})}handleDataChange(t,e){this.guestData[t]=+e;if(e===""){this.guestData["roomName"]=e}if(t==="roomId"&&e!==""){this.guestData["roomName"]=this.filterdRoomList.find((t=>t.id===+e)).name||""}console.log("guest data",this.guestData);this.updateData()}handleGuestNameChange(t){this.guestData.guestName=t.target.value;this.updateData()}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}render(){return i(s,null,i("div",{class:"text-left mt-1 "},i("div",{class:" mb-1 "},this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING"?i("span",{class:"h5 mr-1"},this.guestInfo.roomCategoryName):null,i("span",{class:" font-weight-bold"},this.guestInfo.ratePlanName.replace(this.guestInfo.roomCategoryName+"/",""),i("ir-tooltip",{class:" mr-1",message:this.guestInfo.cancelation+this.guestInfo.guarantee})),i("span",null,this.guestInfo.adult_child_offering)),i("div",{class:"d-flex flex-column flex-md-row m-0 p-0 align-items-md-center aplicationInfoContainer "},i("div",{class:"mr-1 flex-fill guest-info-container"},i("input",{id:d(),type:"email",class:`form-control ${this.isButtonPressed&&this.guestData.guestName===""&&"border-danger"}`,placeholder:r.entries.Lcz_GuestFirstnameAndLastname,name:"guestName",onInput:t=>this.handleGuestNameChange(t),required:true,value:this.guestData.guestName})),i("div",{class:"mt-1 mt-md-0 d-flex align-items-center flex-fill"},h.is_frontdesk_enabled&&(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")?i("div",{class:"mr-1 p-0 flex-fill  preference-select-container"},i("select",{class:`form-control  input-sm pr-0`,id:d(),onChange:t=>this.handleDataChange("roomId",t.target.value)},i("option",{value:"",selected:this.guestData.roomId===""},r.entries.Lcz_Assignunits),this.filterdRoomList.map((t=>i("option",{value:t.id,selected:+this.guestData.roomId===t.id},t.name))))):null,this.guestData.is_bed_configuration_enabled&&i("div",{class:"mr-1 flex-fill"},i("select",{class:`form-control input-sm ${this.isButtonPressed&&(this.guestData.preference===""||this.guestData.preference===0)&&"border-danger"}`,id:d(),onChange:t=>this.handleDataChange("preference",t.target.value)},i("option",{value:"",selected:this.guestData.preference===""},r.entries.Lcz_BedConfiguration),this.bedPreferenceType.map((t=>i("option",{value:+t.CODE_NAME,selected:this.guestData.preference===+t.CODE_NAME},t.CODE_VALUE_EN))))),i("div",{class:""},n(this.currency.code)+Number(this.userRate).toFixed(2),"/",r.entries.Lcz_Stay)))))}static get watchers(){return{selectedUnits:["handleSelctedUnits"]}}};k.style=y;class x{setBookingInfoFromAutoComplete(t,e){t.bookedByInfoData={id:e.guest.id,email:e.guest.email,firstName:e.guest.first_name,lastName:e.guest.last_name,countryId:e.guest.country_id,isdCode:e.guest.country_id.toString(),contactNumber:e.guest.mobile,selectedArrivalTime:e.arrival,emailGuest:e.guest.subscribe_to_news_letter,message:e.remark,cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:"",bookingNumber:e.booking_nbr,rooms:e.rooms,from_date:e.from_date,to_date:e.to_date}}resetRoomsInfoAndMessage(t){t.defaultData.roomsInfo=[];t.message=""}onDataRoomUpdate(t,e,i,s,o){let n=e;const{data:a,key:l,changedKey:r}=t.detail;const h=`c_${a.roomCategoryId}`;const d=`p_${a.ratePlanId}`;if(this.shouldClearData(l)){n=new Map}this.initializeRoomCategoryIfNeeded(h,n);if(s){if(r==="rate"){if(n.has(h)&&n.get(h).has(d)){this.applyBookingEditToSelectedRoom(h,d,a,n,o,i)}}else{if(r!=="rateType"){if(r==="adult_child_offering"){if(n.has(h)&&e.get(h).has(d)){this.applyBookingEditToSelectedRoom(h,d,a,n,o,i)}}else{this.applyBookingEditToSelectedRoom(h,d,a,n,o,i)}}}}else{this.setSelectedRoomData(h,d,a,n)}this.cleanupEmptyData(h,n);return n}shouldClearData(t){return t==="clearData"||t==="EDIT_BOOKING"}initializeRoomCategoryIfNeeded(t,e){if(!e.has(t)){e.set(t,new Map)}}setSelectedRoomData(t,e,i,s){let o=s.get(t);if(i.totalRooms===0||i.inventory===0){o.delete(e)}else{s.set(t,o.set(e,Object.assign(Object.assign({},i),{selectedUnits:Array(i.totalRooms).fill(-1)})))}}cleanupEmptyData(t,e){if(e.has(t)){let i=e.get(t);if(i.size===0){e.delete(t)}}}applyBookingEditToSelectedRoom(t,e,i,s,o,n){s.clear();let a={};if(n){a=Object.assign(Object.assign({},i),{guestName:o||"",roomId:""})}else{a=Object.assign({},i)}s.set(t,(new Map).set(e,a))}async prepareBookUserServiceParams(t,e,i){try{const s=t.isEventType("EDIT_BOOKING")?t.getArrivalTimeForBooking():t.isEventType("ADD_ROOM")?t.bookingData.ARRIVAL.code:t.isEventType("SPLIT_BOOKING")?t.bookedByInfoData.selectedArrivalTime.code:"";const o=t.isEventType("BAR_BOOKING")?t.bookingData.PR_ID:undefined;const n=t.isEventType("EDIT_BOOKING")||t.isEventType("ADD_ROOM")?t.bookingData.BOOKING_NUMBER:t.isEventType("SPLIT_BOOKING")?t.bookedByInfoData.bookingNumber:undefined;let a=[];if(t.isEventType("ADD_ROOM")){a=t.bookingData.ROOMS}else if(t.isEventType("SPLIT_BOOKING")){a=t.bookedByInfoData.rooms}else if(t.isEventType("EDIT_BOOKING")){a=t.defaultData.ROOMS.filter((e=>e.identifier!==t.bookingData.IDENTIFIER))}console.log("rooms",a);return[t.bookedByInfoData,e,new Date(t.dateRangeData.fromDate),new Date(t.dateRangeData.toDate),t.guestData,t.dateRangeData.dateDifference,i,t.propertyid,a,t.currency,n,t.bookingData.GUEST,s,o,t.bookingData.IDENTIFIER]}catch(t){console.log(t)}}getBookingPreferenceRoomId(t){return t.hasOwnProperty("PR_ID")&&t.PR_ID||null}getRoomCategoryByRoomId(t){var e;return(e=t.roomsInfo)===null||e===void 0?void 0:e.find((e=>e.id===t.RATE_TYPE))}setEditingRoomInfo(t,e){console.log(t,t.roomsInfo);console.log(this.getBookingPreferenceRoomId(t));const i=this.getRoomCategoryByRoomId(t);const s=!i?"":`c_${i===null||i===void 0?void 0:i.id}`;const o=`p_${t.RATE_PLAN_ID}`;const n={adultCount:t.ADULTS_COUNT,rate:t.RATE,rateType:t.RATE_TYPE,ratePlanId:t.RATE_PLAN_ID,roomCategoryId:i?i.id:"",roomCategoryName:i?i.name:"",totalRooms:1,ratePlanName:t.RATE_PLAN,roomId:t.PR_ID,guestName:t.NAME,cancelation:t.cancelation,guarantee:t.guarantee,adult_child_offering:t.adult_child_offering};e.set(s,(new Map).set(o,n))}}const v=".sc-igl-book-property-h{position:fixed;top:0;right:0;width:100vw;height:100vh;z-index:99}.card-title.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%}.scrollContent.sc-igl-book-property{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-book-property{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-book-property{height:calc(100% - 79px);overflow:auto}.gap-30.sc-igl-book-property{gap:30px}.block-date.sc-igl-book-property{width:100%}.sideWindow.sc-igl-book-property{position:absolute;top:0;right:0;height:100%;background-color:#ffffff;width:100vw;overflow-y:auto;padding-bottom:85px !important}.card.sc-igl-book-property{top:0;z-index:1000}.close.sc-igl-book-property{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-book-property{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-book-property:not(:disabled),[type='button'].sc-igl-book-property:not(:disabled){cursor:pointer}.row.sc-igl-book-property{padding:0 0 0 15px;margin:0}@media only screen and (min-width: 1200px){.sideWindow.sc-igl-book-property{max-width:70%}}@media only screen and (min-width: 2000px){.sideWindow.sc-igl-book-property{max-width:40%}}@media only screen and (min-width: 768px) and (max-width: 1200px){.sideWindow.sc-igl-book-property{max-width:90%}}@media only screen and (min-width: 600px) and (max-width: 768px){.sideWindow.sc-igl-book-property{max-width:75%}}@media only screen and (min-width: 641px){.block-date.sc-igl-book-property{max-width:450px;padding-bottom:0 !important}}";const O=class{constructor(i){t(this,i);this.closeBookingWindow=e(this,"closeBookingWindow",7);this.bookingCreated=e(this,"bookingCreated",7);this.blockedCreated=e(this,"blockedCreated",7);this.resetBookingData=e(this,"resetBookingData",7);this.animateIrButton=e(this,"animateIrButton",7);this.animateIrSelect=e(this,"animateIrSelect",7);this.toast=e(this,"toast",7);this.initialRoomIds=null;this.showSplitBookingOption=false;this.sourceOptions=[];this.guestData=[];this.bookedByInfoData={};this.blockDatesData={};this.ratePricingMode=[];this.selectedUnits=new Map;this.bedPreferenceType=[];this.bookingService=new c;this.bookPropertyService=new x;this.eventsService=new f;this.propertyid=undefined;this.allowedBookingSources=undefined;this.language=undefined;this.countryNodeList=undefined;this.showPaymentDetails=false;this.currency=undefined;this.bookingData=undefined;this.adultChildConstraints=undefined;this.adultChildCount={adult:0,child:0};this.renderAgain=false;this.dateRangeData=undefined;this.defaultData=undefined;this.isLoading=undefined;this.buttonName=""}handleKeyDown(t){if(t.key==="Escape"){this.closeWindow()}else return}componentDidLoad(){document.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}clearBooking(t){if(this.isEventType("SPLIT_BOOKING")){t.stopImmediatePropagation();t.stopPropagation();this.bookedByInfoData={};this.bookPropertyService.resetRoomsInfoAndMessage(this);this.renderPage()}}async handleSpiltBookingSelected(t){t.stopImmediatePropagation();const{key:e,data:i}=t.detail;if(e==="select"){const t=await this.bookingService.getExposedBooking(i.booking_nbr,this.language);this.bookPropertyService.setBookingInfoFromAutoComplete(this,t);this.sourceOption=t.source;this.renderPage()}else if(e==="blur"&&i!==""){const t=await this.bookingService.getExposedBooking(i,this.language);this.bookPropertyService.setBookingInfoFromAutoComplete(this,t);this.sourceOption=t.source;this.renderPage()}}async componentWillLoad(){this.bookingService.setToken(h.token);this.eventsService.setToken(h.token);this.defaultDateRange={from_date:this.bookingData.FROM_DATE,to_date:this.bookingData.TO_DATE};this.handleKeyDown=this.handleKeyDown.bind(this);if(!this.bookingData.defaultDateRange){return}this.defaultData=this.bookingData;this.dateRangeData=Object.assign({},this.defaultData.defaultDateRange);try{const t=await this.fetchSetupEntries();console.log(t);this.setSourceOptions(this.allowedBookingSources);this.setOtherProperties(t);if(this.isEventType("EDIT_BOOKING")){this.adultChildCount={adult:this.defaultData.ADULTS_COUNT,child:this.defaultData.CHILDREN_COUNT};this.initialRoomIds={roomName:this.defaultData.roomName,ratePlanId:this.defaultData.RATE_PLAN_ID,roomId:this.defaultData.PR_ID,roomTypeId:this.defaultData.RATE_TYPE};this.bookPropertyService.setEditingRoomInfo(this.defaultData,this.selectedUnits)}if(!this.isEventType("BAR_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}if(this.defaultData.event_type==="SPLIT_BOOKING"){this.showSplitBookingOption=true;this.page="page_one"}else if(this.defaultData.event_type==="BLOCK_DATES"){this.page="page_block_date"}else{this.page="page_one"}}catch(t){console.error("Error fetching setup entries:",t)}}async fetchSetupEntries(){console.log("fetch setup entries");return await this.bookingService.fetchSetupEntries()}isGuestDataIncomplete(){if(this.guestData.length===0){return true}console.log(this.guestData);for(const t of this.guestData){if(t.guestName===""||(t.preference===""||t.preference===0)&&t.is_bed_configuration_enabled){return true}}return false}isButtonDisabled(){const t=(t,e,i)=>{if(!t){return true}if(t===this.guestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return t(this.guestData,"guestName","")||t(this.bookedByInfoData,"firstName","")||t(this.bookedByInfoData,"lastName","")||t(this.bookedByInfoData,"selectedArrivalTime","")}setSourceOptions(t){this.sourceOptions=t.map((t=>({id:t.code,value:t.description,tag:t.tag,type:t.type})));if(this.isEventType("EDIT_BOOKING")){this.sourceOption=Object.assign({},this.defaultData.SOURCE)}else{this.sourceOption={code:t[0].code,description:t[0].description,tag:t[0].tag}}}setOtherProperties(t){this.ratePricingMode=t===null||t===void 0?void 0:t.ratePricingMode;this.bookedByInfoData.arrivalTime=t.arrivalTime;this.bedPreferenceType=t.bedPreferenceType}handleAdultChildChange(t){if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}this.adultChildCount=Object.assign({},t.detail)}async initializeBookingAvailability(t,e){try{const i=this.defaultData.roomsInfo.map((t=>t.id));const s=await this.bookingService.getBookingAvailability(t,e,this.propertyid,this.adultChildCount,this.language,i,this.currency);if(!this.isEventType("EDIT_BOOKING")){this.defaultData.defaultDateRange.fromDate=new Date(this.dateRangeData.fromDate);this.defaultData.defaultDateRange.toDate=new Date(this.dateRangeData.toDate)}this.defaultData=Object.assign(Object.assign({},this.defaultData),{roomsInfo:s.roomtypes})}catch(t){}}getRoomCategoryByRoomId(t){var e;return(e=this.defaultData.roomsInfo)===null||e===void 0?void 0:e.find((e=>e.physicalrooms.find((e=>e.id===+t))))}getSplitBookings(){return this.defaultData.hasOwnProperty("splitBookingEvents")&&this.defaultData.splitBookingEvents||[]}closeWindow(){this.dateRangeData={};this.closeBookingWindow.emit();document.removeEventListener("keydown",this.handleKeyDown)}isEventType(t){return this.defaultData.event_type===t}onDateRangeSelect(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e.key==="selectedDateRange"){this.dateRangeData=e.data;if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.defaultData.roomsInfo=[]}else if(this.adultChildCount.adult!==0){this.initializeBookingAvailability(a(new Date(this.dateRangeData.fromDate)),a(new Date(this.dateRangeData.toDate)))}}}handleBlockDateUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.blockDatesData=e.data}handleGuestInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e.guestRefKey){if(this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING")){this.guestData[e.guestRefKey]=Object.assign(Object.assign({},e.data),{roomId:this.defaultData.PR_ID})}else this.guestData[e.guestRefKey]=e.data}}handleBookedByInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.bookedByInfoData=e.value.data}handleSourceDropDown(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;const i=this.sourceOptions.find((t=>t.id===e.toString()));this.sourceOption={code:e,description:i.value||"",tag:i.tag}}renderPage(){this.renderAgain=!this.renderAgain}gotoSplitPageTwo(){this.gotoPage("page_two")}gotoPage(t){this.page=t;this.renderPage()}showSplitBooking(){this.showSplitBookingOption=true;this.gotoPage("page_one")}getPageBlockDatesView(){return i(o,null,i("igl-block-dates-view",{fromDate:this.dateRangeData.fromDateStr,toDate:this.dateRangeData.toDateStr,entryDate:this.defaultData.ENTRY_DATE,onDataUpdateEvent:t=>this.handleBlockDateUpdate(t)}),i("div",{class:"p-0 mb-1 mt-2 gap-30 d-flex align-items-center justify-content-between"},i("button",{class:"btn btn-secondary flex-fill",onClick:()=>this.closeWindow()},r.entries.Lcz_Cancel),i("button",{class:"btn btn-primary flex-fill",onClick:()=>this.handleBlockDate()},r.entries.Lcz_Blockdates)))}handleButtonClicked(t){var e,i;switch(t.detail.key){case"save":this.bookUser(false);break;case"cancel":t.stopImmediatePropagation();t.stopPropagation();this.closeWindow();break;case"back":t.stopImmediatePropagation();t.stopPropagation();this.gotoPage("page_one");break;case"book":this.bookUser(false);this.buttonName="book";break;case"bookAndCheckIn":this.bookUser(true);this.buttonName="bookAndCheckIn";break;case"next":t.stopImmediatePropagation();t.stopPropagation();if(!((e=this.adultChildCount)===null||e===void 0?void 0:e.adult)){this.animateIrSelect.emit("adult_child_select");break}if(this.selectedUnits.size>0){this.gotoPage("page_two");break}else{if(((i=this.defaultData)===null||i===void 0?void 0:i.roomsInfo.length)===0){this.animateIrButton.emit("check_availability");break}}this.toast.emit({type:"error",description:r.entries.Lcz_SelectRatePlan,title:r.entries.Lcz_SelectRatePlan});break;case"check":this.initializeBookingAvailability(a(new Date(this.dateRangeData.fromDate)),a(new Date(this.dateRangeData.toDate)));break}}handlePageTwoDataUpdateEvent(t){t.stopImmediatePropagation();t.stopPropagation();if(t.detail.key==="propertyBookedBy"){this.handleBookedByInfoUpdate(t)}else{this.handleGuestInfoUpdate(t)}}async handleBlockDate(){const t=l(+this.blockDatesData.RELEASE_AFTER_HOURS);const e=await this.bookingService.blockUnit(Object.assign({from_date:a(this.defaultData.defaultDateRange.fromDate),to_date:a(this.defaultData.defaultDateRange.toDate),NOTES:this.blockDatesData.OPTIONAL_REASON||"",pr_id:this.defaultData.PR_ID.toString(),STAY_STATUS_CODE:this.blockDatesData.OUT_OF_SERVICE?"004":this.blockDatesData.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:this.blockDatesData.RELEASE_AFTER_HOURS||""},t));const i=await p(e);this.blockedCreated.emit(i);this.closeWindow()}async bookUser(t){this.setLoadingState(t);console.log("edit save clicked");if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){if(this.isGuestDataIncomplete()){this.isLoading="";return}}else{if(this.isButtonDisabled()){this.isLoading="";return}}try{console.log("clicked");if(["003","002","004"].includes(this.defaultData.STATUS_CODE)){this.eventsService.deleteEvent(this.defaultData.POOL)}if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.bookedByInfoData.message=this.defaultData.NOTES}const e=await this.bookPropertyService.prepareBookUserServiceParams(this,t,this.sourceOption);await this.bookingService.bookUser(...e);this.resetBookingData.emit(null)}catch(t){}finally{this.resetLoadingState()}}setLoadingState(t){if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.isLoading="save"}else{this.isLoading=t?"bookAndCheckIn":"book"}}getArrivalTimeForBooking(){return this.bookedByInfoData.arrivalTime.find((t=>t.CODE_VALUE_EN===this.defaultData.ARRIVAL_TIME)).CODE_NAME}resetLoadingState(){this.isLoading="";setTimeout((()=>{this.closeWindow()}),100)}onRoomDataUpdate(t){const e=this.bookPropertyService.onDataRoomUpdate(t,this.selectedUnits,this.isEventType("EDIT_BOOKING"),this.isEventType("EDIT_BOOKING")||this.isEventType("SPLIT_BOOKING")||this.isEventType("BAR_BOOKING"),this.defaultData.NAME);this.selectedUnits=new Map(e);this.renderPage()}getCurrentPage(t){return this.page===t}render(){return i(s,null,i("div",{class:"background-overlay",onClick:()=>this.closeWindow()}),i("div",{class:"sideWindow pb-5 pb-md-0 "+(this.getCurrentPage("page_block_date")?"block-date":"")},i("div",{class:"card position-sticky mb-0 shadow-none p-0 "},i("div",{class:"d-flex mt-2 align-items-center justify-content-between  "},i("h3",{class:"card-title text-left pb-1 font-medium-2 px-2 px-md-3"},this.getCurrentPage("page_block_date")?this.defaultData.BLOCK_DATES_TITLE:this.defaultData.TITLE),i("ir-icon",{class:"close close-icon",onIconClickHandler:()=>{this.closeWindow()}},i("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},i("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),i("div",{class:"px-2 px-md-3"},this.getCurrentPage("page_one")&&i("igl-booking-overview-page",{initialRoomIds:this.initialRoomIds,defaultDaterange:this.defaultDateRange,class:"p-0 mb-1",eventType:this.defaultData.event_type,selectedRooms:this.selectedUnits,currency:this.currency,showSplitBookingOption:this.showSplitBookingOption,ratePricingMode:this.ratePricingMode,dateRangeData:this.dateRangeData,bookingData:this.defaultData,adultChildCount:this.adultChildCount,bookedByInfoData:this.bookedByInfoData,adultChildConstraints:this.adultChildConstraints,onRoomsDataUpdate:t=>{this.onRoomDataUpdate(t)},sourceOptions:this.sourceOptions,propertyId:this.propertyid}),this.getCurrentPage("page_two")&&i("igl-pagetwo",{currency:this.currency,propertyId:this.propertyid,showPaymentDetails:this.showPaymentDetails,selectedGuestData:this.guestData,countryNodeList:this.countryNodeList,isLoading:this.isLoading,selectedRooms:this.selectedUnits,bedPreferenceType:this.bedPreferenceType,dateRangeData:this.dateRangeData,bookingData:this.defaultData,showSplitBookingOption:this.showSplitBookingOption,language:this.language,bookedByInfoData:this.bookedByInfoData,defaultGuestData:this.defaultData,isEditOrAddRoomEvent:this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM"),onDataUpdateEvent:t=>this.handlePageTwoDataUpdateEvent(t)}),this.getCurrentPage("page_block_date")?this.getPageBlockDatesView():null)))}};O.style=v;const w=".sc-igl-book-property-footer-h{display:block;margin:0;padding:0}.sc-igl-book-property-footer-h>*.sc-igl-book-property-footer{margin:auto;padding:auto}.gap-30.sc-igl-book-property-footer{gap:30px}";const D=class{constructor(i){t(this,i);this.buttonClicked=e(this,"buttonClicked",7);this.eventType=undefined;this.disabled=true}isEventType(t){return t===this.eventType}editNext(t){if(this.isEventType("EDIT_BOOKING")){if(t==="Cancel"){return"flex-fill"}else{return"d-none d-md-block  flex-fill"}}return"flex-fill"}renderButton(t,e,s=false){return i("div",{class:this.shouldRenderTwoButtons()?` ${this.editNext(e)}`:"flex-fill"},i("button",{class:`btn btn-${t==="cancel"?"secondary":"primary"} full-width`,onClick:()=>this.buttonClicked.emit({key:t}),disabled:s},e))}shouldRenderTwoButtons(){return this.isEventType("PLUS_BOOKING")||this.isEventType("ADD_ROOM")||this.isEventType("EDIT_BOOKING")}render(){return i(s,null,i("div",{class:"d-flex justify-content-between gap-30 align-items-center"},this.isEventType("EDIT_BOOKING")?i(o,null,this.renderButton("cancel",r.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${r.entries.Lcz_Next} >>`,u("/Get_Exposed_Booking_Availability"))):i(o,null,this.renderButton("cancel",r.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${r.entries.Lcz_Next} >>`))))}};D.style=w;const _=".sc-igl-book-property-header-h{display:block}.row.sc-igl-book-property-header{padding:0 0 0 15px;margin:0}.sourceContainer.sc-igl-book-property-header{max-width:350px}.message-label.sc-igl-book-property-header{font-size:80%}";const I=class{constructor(i){t(this,i);this.splitBookingDropDownChange=e(this,"splitBookingDropDownChange",7);this.sourceDropDownChange=e(this,"sourceDropDownChange",7);this.adultChild=e(this,"adultChild",7);this.checkClicked=e(this,"checkClicked",7);this.buttonClicked=e(this,"buttonClicked",7);this.toast=e(this,"toast",7);this.spiltBookingSelected=e(this,"spiltBookingSelected",7);this.animateIrButton=e(this,"animateIrButton",7);this.animateIrSelect=e(this,"animateIrSelect",7);this.sourceOption={code:"",description:"",tag:""};this.splitBookingId="";this.bookingData="";this.minDate=undefined;this.sourceOptions=[];this.message=undefined;this.bookingDataDefaultDateRange=undefined;this.showSplitBookingOption=false;this.adultChildConstraints=undefined;this.splitBookings=undefined;this.adultChildCount=undefined;this.dateRangeData=undefined;this.bookedByInfoData=undefined;this.defaultDaterange=undefined;this.propertyId=undefined}getSplitBookingList(){return i("fieldset",{class:"d-flex flex-column text-left mb-1  flex-lg-row align-items-lg-center"},i("label",{class:"mr-lg-1"},r.entries.Lcz_Tobooking,"# "),i("div",{class:"btn-group mt-1 mt-lg-0 sourceContainer"},i("ir-autocomplete",{value:Object.keys(this.bookedByInfoData).length>1?`${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}`:"",from_date:g(this.bookingDataDefaultDateRange.fromDate).format("YYYY-MM-DD"),to_date:g(this.bookingDataDefaultDateRange.toDate).format("YYYY-MM-DD"),propertyId:this.propertyId,placeholder:r.entries.Lcz_BookingNumber,onComboboxValue:t=>{t.stopImmediatePropagation();this.spiltBookingSelected.emit(t.detail)},isSplitBooking:true})))}getSourceNode(){return i("fieldset",{class:"d-flex text-left  align-items-center"},i("label",{class:"mr-1"},r.entries.Lcz_Source," "),i("div",{class:"btn-group mt-0 flex-fill sourceContainer"},i("select",{class:"form-control input-sm",id:"xSmallSelect",onChange:t=>this.sourceDropDownChange.emit(t.target.value)},this.sourceOptions.map((t=>{if(t.type==="LABEL"){return i("optgroup",{label:t.value})}return i("option",{value:t.id,selected:this.sourceOption.code===t.id},t.value)})))))}handleAdultChildChange(t,e){let i={};if(e===""){i=Object.assign(Object.assign({},this.adultChildCount),{[t]:0})}else{i=Object.assign(Object.assign({},this.adultChildCount),{[t]:e})}this.adultChild.emit(i)}getAdultChildConstraints(){return i("div",{class:"mt-1 mt-lg-0 d-flex flex-column text-left"},i("div",{class:"form-group my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start"},i("fieldset",null,i("div",{class:"btn-group "},i("ir-select",{onSelectChange:t=>this.handleAdultChildChange("adult",t.detail),select_id:"adult_child_select",firstOption:r.entries.Lcz_AdultsCaption,LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.adult_max_nbr),((t,e)=>e+1)).map((t=>({text:t.toString(),value:t.toString()})))}))),this.adultChildConstraints.child_max_nbr>0&&i("fieldset",null,i("div",{class:"btn-group ml-1"},i("ir-select",{onSelectChange:t=>this.handleAdultChildChange("child",t.detail),select_id:"child_select",firstOption:this.renderChildCaption(),LabelAvailable:false,data:Array.from(Array(this.adultChildConstraints.child_max_nbr),((t,e)=>e+1)).map((t=>({text:t.toString(),value:t.toString()})))}))),i("ir-button",{btn_id:"check_availability",isLoading:u("/Get_Exposed_Booking_Availability"),icon:"",size:"sm",class:"ml-2",text:r.entries.Lcz_Check,onClickHanlder:()=>this.handleButtonClicked()})))}renderChildCaption(){const t=this.adultChildConstraints.child_max_age;let e=r.entries.Lcz_Years;if(t===1){e=r.entries.Lcz_Year}return`${r.entries.Lcz_ChildCaption} < ${this.adultChildConstraints.child_max_age} ${e}`}handleButtonClicked(){if(this.isEventType("SPLIT_BOOKING")&&Object.keys(this.bookedByInfoData).length<=1){this.toast.emit({type:"error",title:r.entries.Lcz_ChooseBookingNumber,description:"",position:"top-right"})}else if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){const t=g(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date));const e=g(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date));const i=g(new Date(this.dateRangeData.fromDate));const s=g(new Date(this.dateRangeData.toDate));if(s.isBefore(e)||i.isAfter(t)){this.toast.emit({type:"error",title:`${r.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",g(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",g(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"});return}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:r.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"});this.animateIrSelect.emit("adult_child_select")}else{this.buttonClicked.emit({key:"check"})}}else if(this.minDate&&new Date(this.dateRangeData.fromDate).getTime()>new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date).getTime()){this.toast.emit({type:"error",title:`${r.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",g(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",g(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"})}else if(this.adultChildCount.adult===0){this.animateIrSelect.emit("adult_child_select");this.toast.emit({type:"error",title:r.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}isEventType(t){return this.bookingData.event_type===t}render(){const t=this.showSplitBookingOption?this.getSplitBookingList():this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")?false:true;return i(s,null,this.isEventType("SPLIT_BOOKING")&&this.getSplitBookingList(),t&&this.getSourceNode(),i("div",{class:`d-flex flex-column flex-lg-row align-items-lg-center ${t?"mt-1":""}`},i("fieldset",{class:"mt-lg-0  "},i("igl-date-range",{dateLabel:r.entries.Lcz_Dates,minDate:this.isEventType("PLUS_BOOKING")?g().add(-1,"months").startOf("month").format("YYYY-MM-DD"):this.minDate,disabled:this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING"),defaultData:this.bookingDataDefaultDateRange})),!this.isEventType("EDIT_BOOKING")&&this.getAdultChildConstraints()),i("p",{class:"text-right mt-1 message-label"},h.tax_statement))}};I.style=_;const B=".sc-igl-booking-overview-page-h{display:block}.sc-igl-booking-overview-page-h>*.sc-igl-booking-overview-page{margin:0;padding:auto}.scrollContent.sc-igl-booking-overview-page{height:calc(100% - 79px);overflow:auto;position:relative}.loading-container.sc-igl-booking-overview-page{display:flex;align-items:center;justify-content:center;height:100%;background:white;position:absolute;inset:0;z-index:100}.loader.sc-igl-booking-overview-page{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}";const C=class{constructor(i){t(this,i);this.roomsDataUpdate=e(this,"roomsDataUpdate",7);this.bookingData=undefined;this.propertyId=undefined;this.message=undefined;this.showSplitBookingOption=undefined;this.eventType=undefined;this.currency=undefined;this.adultChildConstraints=undefined;this.ratePricingMode=undefined;this.dateRangeData=undefined;this.defaultDaterange=undefined;this.selectedRooms=undefined;this.adultChildCount=undefined;this.sourceOptions=undefined;this.bookedByInfoData=undefined;this.initialRoomIds=undefined}getSplitBookings(){return this.bookingData.hasOwnProperty("splitBookingEvents")&&this.bookingData.splitBookingEvents||[]}isEventType(t){return t===this.eventType}setMinDate(){if(!this.isEventType("EDIT_BOOKING")){return}const t=g(this.bookingData.FROM_DATE,"YYYY-MM-DD");const e=g();if(t.isAfter(e)){return e.add(-2,"weeks").format("YYYY-MM-DD")}return t.add(-2,"weeks").format("YYYY-MM-DD")}render(){var t,e;return i(s,null,i("igl-book-property-header",{bookedByInfoData:this.bookedByInfoData,defaultDaterange:this.defaultDaterange,dateRangeData:this.dateRangeData,minDate:this.setMinDate(),adultChildCount:this.adultChildCount,splitBookingId:this.showSplitBookingOption,bookingData:this.bookingData,sourceOptions:this.sourceOptions,message:this.message,bookingDataDefaultDateRange:this.bookingData.defaultDateRange,showSplitBookingOption:this.showSplitBookingOption,adultChildConstraints:this.adultChildConstraints,splitBookings:this.getSplitBookings(),propertyId:this.propertyId}),i("div",{class:" text-left"},u("/Get_Exposed_Booking_Availability")&&this.isEventType("EDIT_BOOKING")?i("div",{class:"loading-container"},i("div",{class:"loader"})):i(o,null,(e=(t=this.bookingData)===null||t===void 0?void 0:t.roomsInfo)===null||e===void 0?void 0:e.map((t=>i("igl-booking-rooms",{initialRoomIds:this.initialRoomIds,isBookDisabled:Object.keys(this.bookedByInfoData).length<=1,key:`room-info-${t.id}`,currency:this.currency,ratePricingMode:this.ratePricingMode,dateDifference:this.dateRangeData.dateDifference,bookingType:this.bookingData.event_type,roomTypeData:t,class:"mt-2 mb-1 p-0",roomInfoId:this.selectedRooms.has(`c_${t.id}`)?t.id:null,defaultData:this.selectedRooms.get(`c_${t.id}`),onDataUpdateEvent:t=>this.roomsDataUpdate.emit(t.detail)}))))),i("igl-book-property-footer",{class:"p-0 mb-1 mt-3",eventType:this.bookingData.event_type,disabled:this.selectedRooms.size===0}))}};C.style=B;const N=".sc-igl-booking-room-rate-plan-h{display:block;margin-bottom:0.5rem}.currency.sc-igl-booking-room-rate-plan{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-igl-booking-room-rate-plan{font-size:14px;line-height:0;padding:0;height:0;border-left:0}.rate-input-container.sc-igl-booking-room-rate-plan{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}.new-currency.sc-igl-booking-room-rate-plan{color:#3b4781;border:1px solid #cacfe7;font-size:0.975rem;height:2rem;background:white;border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;transition:border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out}.input-group-prepend.sc-igl-booking-room-rate-plan span[data-state='focus'].sc-igl-booking-room-rate-plan{border-color:var(--blue)}.input-group-prepend.sc-igl-booking-room-rate-plan span[data-disabled].sc-igl-booking-room-rate-plan{background-color:#eceff1;border-color:rgba(118, 118, 118, 0.3)}@media only screen and (min-width: 1200px){.rateplan-name-container.sc-igl-booking-room-rate-plan{width:40%}.rateplan-container.sc-igl-booking-room-rate-plan{width:40%}}@media only screen and (min-width: 991px){.max-w-300.sc-igl-booking-room-rate-plan{max-width:200px}.rate-input-container.sc-igl-booking-room-rate-plan{max-width:100px}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-booking-room-rate-plan{width:35%}}@media only screen and (max-width: 768px){.booking-btn.sc-igl-booking-room-rate-plan{width:100%}}.total-nights-container.sc-igl-booking-room-rate-plan{width:max-content}.nightBorder.sc-igl-booking-room-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}";const R=class{constructor(i){t(this,i);this.dataUpdateEvent=e(this,"dataUpdateEvent",7);this.gotoSplitPageTwoEvent=e(this,"gotoSplitPageTwoEvent",7);this.defaultData=undefined;this.ratePlanData=undefined;this.totalAvailableRooms=undefined;this.index=undefined;this.ratePricingMode=[];this.currency=undefined;this.physicalrooms=undefined;this.shouldBeDisabled=undefined;this.dateDifference=undefined;this.bookingType="PLUS_BOOKING";this.fullyBlocked=undefined;this.isBookDisabled=false;this.defaultRoomId=undefined;this.selectedRoom=undefined;this.is_bed_configuration_enabled=undefined;this.isInputFocused=false;this.selectedData=undefined;this.ratePlanChangedState=false}getAvailableRooms(t){let e=[];t.forEach((t=>{if(t.Is_Fully_Available){e.push({name:t.name,id:t.pr_id})}}));return e}componentWillLoad(){this.updateSelectedRatePlan(this.ratePlanData)}disableForm(){if(this.bookingType==="EDIT_BOOKING"&&this.shouldBeDisabled){return false}else{return this.selectedData.is_closed||this.totalAvailableRooms===0||h.is_frontdesk_enabled&&this.selectedData.physicalRooms.length===0}}setAvailableRooms(t){let e=this.getAvailableRooms(t);if(this.bookingType==="EDIT_BOOKING"&&this.shouldBeDisabled){if(this.selectedRoom){e.push({id:this.selectedRoom.roomId,name:this.selectedRoom.roomName});e.sort(((t,e)=>{if(t.name<e.name){return-1}if(t.name>e.name){return 1}return 0}))}}return e}getSelectedOffering(t){return this.ratePlanData.variations.find((e=>e.adult_child_offering===t))}updateSelectedRatePlan(t){var e;this.selectedData={is_bed_configuration_enabled:this.is_bed_configuration_enabled,ratePlanId:t.id,adult_child_offering:t.variations[t.variations.length-1].adult_child_offering,rateType:1,totalRooms:0,rate:(e=t.variations[t.variations.length-1].amount)!==null&&e!==void 0?e:0,ratePlanName:t.name,adultCount:t.variations[t.variations.length-1].adult_nbr,childrenCount:t.variations[t.variations.length-1].child_nbr,cancelation:t.cancelation,guarantee:t.guarantee,isRateModified:false,defaultSelectedRate:0,index:this.index,is_closed:t.is_closed,physicalRooms:this.setAvailableRooms(this.ratePlanData.assignable_units),dateDifference:this.dateDifference};if(this.defaultData){for(const[t,e]of Object.entries(this.defaultData)){this.selectedData[t]=e}this.selectedData["rateType"]=1}}componentDidLoad(){if(this.defaultData){this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"physicalRooms",data:this.selectedData})}}async ratePlanDataChanged(t){this.selectedData=Object.assign(Object.assign({},this.selectedData),{adult_child_offering:t.variations[t.variations.length-1].adult_child_offering,adultCount:t.variations[t.variations.length-1].adult_nbr,childrenCount:t.variations[t.variations.length-1].child_nbr,rate:this.handleRateDaysUpdate(),physicalRooms:this.setAvailableRooms(t.assignable_units)});this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"rate",data:this.selectedData})}handleRateDaysUpdate(){if(this.selectedData.isRateModified){return this.selectedData.defaultSelectedRate}const t=this.getSelectedOffering(this.selectedData.adult_child_offering);return t?t.amount:0}handleInput(t){const e=t.target;let i=e.value.replace(/[^0-9.]/g,"");const s=/^\d*\.?\d*$/;if(!s.test(i)){i=i.substring(0,i.length-1)}e.value=i;if(i){this.selectedData.isRateModified=true;this.handleDataChange("rate",t)}else{this.selectedData=Object.assign(Object.assign({},this.selectedData),{rate:-1,totalRooms:0});this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"rate",data:this.selectedData})}}handleDataChange(t,e){const i=e.target.value;switch(t){case"adult_child_offering":this.updateOffering(i);break;case"rate":this.updateRate(i);break;default:this.updateGenericData(t,i);break}this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:t,data:this.selectedData})}updateOffering(t){const e=this.getSelectedOffering(t);if(e){this.selectedData=Object.assign(Object.assign({},this.selectedData),{adult_child_offering:t,adultCount:e.adult_nbr,childrenCount:e.child_nbr,rate:e.amount,isRateModified:false})}}updateRate(t){const e=t===""?0:Number(t);this.selectedData=Object.assign(Object.assign({},this.selectedData),{rate:e,totalRooms:t===""?0:this.selectedData.totalRooms,defaultSelectedRate:this.selectedData.rateType===2?e/this.dateDifference:e})}updateGenericData(t,e){this.selectedData=Object.assign(Object.assign({},this.selectedData),{[t]:e===""?0:parseInt(e)})}bookProperty(){this.dataUpdateEvent.emit({key:"clearData",data:this.selectedData});this.handleDataChange("totalRooms",{target:{value:"1"}});this.gotoSplitPageTwoEvent.emit({key:"gotoSplitPage",data:""})}renderRate(){if(this.selectedData.isRateModified){console.log("selectedData.rate",this.selectedData.rate);return this.selectedData.rate===-1?"":this.selectedData.rate}return this.selectedData.rateType===1?Number(this.selectedData.rate).toFixed(2):Number(this.selectedData.rate/this.dateDifference).toFixed(2)}render(){return i(s,null,i("div",{class:"d-flex flex-column m-0 p-0 flex-lg-row align-items-lg-center justify-content-lg-between "},i("div",{class:"rateplan-name-container"},this.bookingType==="BAR_BOOKING"?i(o,null,i("span",{class:"font-weight-bold\t"},this.ratePlanData.name.split("/")[0]),i("span",null,"/",this.ratePlanData.name.split("/")[1])):i("span",null,this.ratePlanData.short_name),i("ir-tooltip",{message:this.ratePlanData.cancelation+this.ratePlanData.guarantee})),i("div",{class:"d-md-flex justify-content-md-end  align-items-md-center flex-fill rateplan-container"},i("div",{class:"mt-1 mt-md-0 flex-fill max-w-300"},i("fieldset",{class:"position-relative"},i("select",{disabled:this.disableForm(),class:"form-control  input-sm",id:d(),onChange:t=>this.handleDataChange("adult_child_offering",t)},this.ratePlanData.variations.map((t=>i("option",{value:t.adult_child_offering,selected:this.selectedData.adult_child_offering===t.adult_child_offering},t.adult_child_offering)))))),i("div",{class:"m-0 p-0 mt-1 mt-md-0 d-flex justify-content-between align-items-md-center ml-md-1 "},i("div",{class:" d-flex  m-0 p-0 rate-total-night-view  mt-0"},i("fieldset",{class:"position-relative has-icon-left m-0 p-0 rate-input-container  "},i("div",{class:"input-group-prepend"},i("span",{"data-disabled":this.disableForm(),"data-state":this.isInputFocused?"focus":"",class:"input-group-text new-currency",id:"basic-addon1"},n(this.currency.code))),i("input",{onFocus:()=>this.isInputFocused=true,onBlur:()=>this.isInputFocused=false,disabled:this.disableForm(),type:"text",class:"form-control pl-0 input-sm rate-input py-0 m-0 rounded-0 rateInputBorder",value:this.renderRate(),id:d(),placeholder:r.entries.Lcz_Rate||"Rate",onInput:t=>this.handleInput(t)})),i("fieldset",{class:"position-relative m-0 total-nights-container p-0 "},i("select",{disabled:this.disableForm(),class:"form-control input-sm m-0 nightBorder rounded-0 m-0  py-0",id:d(),onChange:t=>this.handleDataChange("rateType",t)},this.ratePricingMode.map((t=>i("option",{value:t.CODE_NAME,selected:this.selectedData.rateType===+t.CODE_NAME},t.CODE_VALUE_EN)))))),this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"?i("div",{class:"flex-fill  mt-lg-0 ml-1 m-0 mt-md-0 p-0"},i("fieldset",{class:"position-relative"},i("select",{disabled:this.selectedData.rate===0||this.disableForm(),class:"form-control input-sm",id:d(),onChange:t=>this.handleDataChange("totalRooms",t)},Array.from({length:this.totalAvailableRooms+1},((t,e)=>e)).map((t=>i("option",{value:t,selected:this.selectedData.totalRooms===t},t)))))):null),this.bookingType==="EDIT_BOOKING"?i(o,null,i("div",{class:" m-0 p-0  mt-lg-0  ml-md-1 mt-md-1 d-none d-md-block"},i("fieldset",{class:"position-relative"},i("input",{disabled:this.disableForm(),type:"radio",name:"ratePlanGroup",value:"1",onChange:t=>this.handleDataChange("totalRooms",t),checked:this.selectedData.totalRooms===1}))),i("button",{disabled:this.selectedData.rate===-1||this.disableForm(),type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1  mt-1 d-md-none ",onClick:()=>this.bookProperty()},this.selectedData.totalRooms===1?r.entries.Lcz_Current:r.entries.Lcz_Select)):null,this.bookingType==="BAR_BOOKING"||this.bookingType==="SPLIT_BOOKING"?i("button",{disabled:this.selectedData.rate===-1||this.disableForm()||this.bookingType==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1  mt-1 ",onClick:()=>this.bookProperty()},r.entries.Lcz_Book):null)))}static get watchers(){return{ratePlanData:["ratePlanDataChanged"]}}};R.style=N;const T=".sc-igl-booking-rooms-h{display:block}.margin-bottom-8.sc-igl-booking-rooms{margin-bottom:8px !important}";const j=class{constructor(i){t(this,i);this.dataUpdateEvent=e(this,"dataUpdateEvent",7);this.validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"];this.roomTypeData=undefined;this.defaultData=undefined;this.bookingType="PLUS_BOOKING";this.dateDifference=undefined;this.ratePricingMode=[];this.roomInfoId=null;this.currency=undefined;this.selectedRooms=[];this.totalRooms=undefined;this.isBookDisabled=undefined;this.initialRoomIds=undefined;this.roomsDistributions=[]}componentWillLoad(){this.initializeRoomData()}initializeRoomData(){const{inventory:t,rateplans:e}=this.roomTypeData;this.totalRooms=t||0;this.selectedRooms=new Array(e.length).fill(0);this.roomsDistributions=this.calculateInitialDistributions(e,t)}handleRoomTypeData(){this.initializeRoomData()}calculateInitialDistributions(t,e){let i=new Array(t.length).fill(e);if(this.defaultData&&this.bookingType!=="EDIT_BOOKING"&&e>0){let t=[];let e=0;this.defaultData.forEach((s=>{this.selectedRooms[s.index]=s.totalRooms;i[s.index]=s.totalRooms;e+=s.totalRooms;t.push(s.index)}));if(t.length<i.length){i.forEach(((s,o)=>{if(!t.includes(o)){if(e===this.totalRooms){i[o]=0}else{i[o]=i[o]-e}}else{if(e<this.totalRooms){i[o]=this.totalRooms-e+i[o]}}}))}}else{i.fill(e)}return i}onRoomDataUpdate(t,e){t.stopImmediatePropagation();const{detail:{data:i,changedKey:s}}=t;let o=Object.assign({},i);if(s==="totalRooms"){this.handleTotalRoomsUpdate(e,o.totalRooms)}o=Object.assign(Object.assign({},o),{roomCategoryId:this.roomTypeData.id,roomCategoryName:this.roomTypeData.name,inventory:this.roomTypeData.inventory});this.dataUpdateEvent.emit({key:i.key,data:o,changedKey:s})}handleTotalRoomsUpdate(t,e){if(this.selectedRooms[t]!==e){this.selectedRooms[t]=e;this.updateRatePlanTotalRooms(t)}}updateRatePlanTotalRooms(t){const e=t=>this.selectedRooms.reduce(((e,i,s)=>s!==t?e+i:e),0);const i=this.selectedRooms.map(((i,s)=>{if(s===t){return this.roomsDistributions[s]}const o=e(s);const n=this.totalRooms-o;return n>0?n:0}));if(JSON.stringify(this.roomsDistributions)!==JSON.stringify(i)){this.roomsDistributions=[...i]}}render(){const t=this.validBookingTypes.includes(this.bookingType);return i(s,null,t&&this.roomTypeData.rateplans.length>0&&i("div",{class:"font-weight-bold font-medium-1 margin-bottom-8 "},this.roomTypeData.name),this.roomTypeData.rateplans.map(((e,s)=>{if(e.variations!==null){let o=this.roomInfoId&&this.roomInfoId===this.roomTypeData.id;let n=-1;if(o&&this.initialRoomIds){n=this.initialRoomIds.roomId}return i("igl-booking-room-rate-plan",{is_bed_configuration_enabled:this.roomTypeData.is_bed_configuration_enabled,index:s,isBookDisabled:this.isBookDisabled,key:`rate-plan-${e.id}`,ratePricingMode:this.ratePricingMode,class:t?"":"",currency:this.currency,dateDifference:this.dateDifference,ratePlanData:e,totalAvailableRooms:this.roomsDistributions[s],bookingType:this.bookingType,defaultData:this.defaultData&&this.defaultData.get(`p_${e.id}`)||null,shouldBeDisabled:o,onDataUpdateEvent:t=>this.onRoomDataUpdate(t,s),physicalrooms:this.roomTypeData.physicalrooms,defaultRoomId:n,selectedRoom:this.initialRoomIds})}else{return null}})))}static get watchers(){return{roomTypeData:["handleRoomTypeData"]}}};j.style=T;const G=".sc-igl-pagetwo-h{display:block}.card-title.sc-igl-pagetwo{border-bottom:1px solid #e4e5ec}.scrollContent.sc-igl-pagetwo{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-pagetwo{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-pagetwo{height:calc(100% - 79px);overflow:auto}.sideWindow.sc-igl-pagetwo{position:absolute;top:0;right:0;height:100%;background-color:#ffffff}.close.sc-igl-pagetwo{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-pagetwo{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-pagetwo:not(:disabled),[type='button'].sc-igl-pagetwo:not(:disabled){cursor:pointer}.row.sc-igl-pagetwo{padding:0 0 0 15px;margin:0}";const E=class{constructor(i){t(this,i);this.dataUpdateEvent=e(this,"dataUpdateEvent",7);this.buttonClicked=e(this,"buttonClicked",7);this.showPaymentDetails=undefined;this.currency=undefined;this.isEditOrAddRoomEvent=undefined;this.dateRangeData=undefined;this.bookingData=undefined;this.showSplitBookingOption=undefined;this.language=undefined;this.bookedByInfoData=undefined;this.propertyId=undefined;this.bedPreferenceType=undefined;this.selectedRooms=undefined;this.isLoading=undefined;this.countryNodeList=undefined;this.selectedGuestData=undefined;this.defaultGuestData=undefined;this.selectedBookedByData=undefined;this.guestData=undefined;this.selectedUnits={}}componentWillLoad(){this.initializeGuestData();this.selectedBookedByData=this.bookedByInfoData}initializeGuestData(){let t=0;const e=Object.assign({},this.selectedUnits);const i=(t,e,i,s)=>{if(i&&s===2){return t*e}return t};this.selectedUnits=e;this.guestData=[];this.selectedRooms.forEach(((s,o)=>{s.forEach((s=>{e[o]=s.selectedUnits;t+=s.totalRooms*i(s.rate,this.dateRangeData.dateDifference,s.isRateModified,s.rateType);for(let t=1;t<=s.totalRooms;t++){this.guestData.push(Object.assign({guestName:"",roomId:"",preference:""},s))}}))}));this.bookingData.TOTAL_PRICE=t}handleOnApplicationInfoDataUpdateEvent(t,e){const i=t.detail;const s=`c_${i.data.roomCategoryId}`;const o=[...this.selectedUnits[s]||[]];o[e]=i.data.roomId;this.selectedUnits=Object.assign(Object.assign({},this.selectedUnits),{[s]:o});this.dataUpdateEvent.emit({key:"applicationInfoUpdateEvent",value:t.detail})}handleEventData(t,e,i){if(e==="application-info"){this.handleOnApplicationInfoDataUpdateEvent(t,i)}else{this.selectedBookedByData=t.detail.data;this.dataUpdateEvent.emit({key:"propertyBookedBy",value:t.detail})}}isGuestDataIncomplete(){if(this.selectedGuestData.length!==this.guestData.length){return true}for(const t of this.selectedGuestData){if(t.guestName===""||t.preference===""||t.roomId===""){return true}}return false}isButtonDisabled(t){const e=(t,e,i)=>{if(!t){return true}if(t===this.selectedGuestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return this.isLoading===t||e(this.selectedGuestData,"guestName","")||e(this.selectedBookedByData,"isdCode","")||e(this.selectedBookedByData,"contactNumber","")||e(this.selectedBookedByData,"firstName","")||e(this.selectedBookedByData,"lastName","")||e(this.selectedBookedByData,"countryId",-1)||e(this.selectedBookedByData,"selectedArrivalTime","")||e(this.selectedBookedByData,"email","")}render(){return i(s,null,i("div",{class:"d-flex flex-wrap"},i("ir-date-view",{class:"mr-1 flex-fill font-weight-bold font-medium-1",from_date:this.dateRangeData.fromDateStr,to_date:this.dateRangeData.toDateStr,dateOption:"DD MMM YYYY"}),this.guestData.length>1&&i("div",{class:"mt-1 mt-md-0 text-right"},r.entries.Lcz_TotalPrice," ",i("span",{class:"font-weight-bold font-medium-1"},n(this.currency.code)+this.bookingData.TOTAL_PRICE||"$0.00"))),this.guestData.map(((t,e)=>i("igl-application-info",{dateDifference:this.dateRangeData.dateDifference,defaultGuestPreference:this.defaultGuestData.bed_preference,defaultGuestRoomId:this.defaultGuestData.PR_ID,currency:this.currency,bedPreferenceType:this.bedPreferenceType,index:e,selectedUnits:this.selectedUnits[`c_${t.roomCategoryId}`],guestInfo:t,guestRefKey:e,bookingType:this.bookingData.event_type,roomsList:t.physicalRooms,onDataUpdateEvent:t=>this.handleEventData(t,"application-info",e)}))),this.isEditOrAddRoomEvent||this.showSplitBookingOption?null:i("igl-property-booked-by",{propertyId:this.propertyId,countryNodeList:this.countryNodeList,language:this.language,showPaymentDetails:this.showPaymentDetails,defaultData:this.bookedByInfoData,onDataUpdateEvent:t=>this.handleEventData(t,"propertyBookedBy",0)}),this.isEditOrAddRoomEvent?i("div",{class:"d-flex p-0 mb-1 mt-2"},i("div",{class:"flex-fill mr-2"},i("ir-button",{icon:"",text:r.entries.Lcz_Back,class:"full-width",btn_color:"secondary",btn_styles:"justify-content-center",onClickHanlder:()=>this.buttonClicked.emit({key:"back"})})),i("div",{class:"flex-fill"},i("ir-button",{isLoading:this.isLoading==="save",onClickHanlder:()=>this.buttonClicked.emit({key:"save"}),btn_styles:"full-width align-items-center justify-content-center",text:r.entries.Lcz_Save}))):i("div",{class:"d-flex flex-column flex-md-row p-0 mb-1 mt-2 justify-content-md-between align-items-md-center"},i("div",{class:"flex-fill mr-md-1"},i("button",{type:"button",class:"btn btn-secondary full-width",onClick:()=>this.buttonClicked.emit({key:"back"})},i("span",{class:"d-none d-md-inline-flex"}," <<")," ",r.entries.Lcz_Back)),i("div",{class:"mt-1 mt-md-0 flex-fill"},i("ir-button",{isLoading:this.isLoading==="book",btn_styles:"full-width align-items-center justify-content-center",onClickHanlder:()=>this.buttonClicked.emit({key:"book"}),text:r.entries.Lcz_Book}))))}};E.style=G;const A=".sc-igl-property-booked-by-h{display:block}.row.sc-igl-property-booked-by{padding:0 0 0 15px;margin:0}.bookedByEmailContainer.sc-igl-property-booked-by{flex:auto;max-width:350px}.bookedDetailsForm.sc-igl-property-booked-by label.sc-igl-property-booked-by{min-width:125px;max-width:125px}.bookedDetailsForm.sc-igl-property-booked-by .form-group.sc-igl-property-booked-by{margin-bottom:10px !important}.bookedDetailsForm.sc-igl-property-booked-by .checkBoxContainer.sc-igl-property-booked-by input.sc-igl-property-booked-by{height:1.2rem !important;width:30px}.controlContainer.sc-igl-property-booked-by textarea.sc-igl-property-booked-by{height:60px !important}.margin3.sc-igl-property-booked-by{margin-bottom:5px !important}@media (min-width: 768px){.bookedByEmailContainer.sc-igl-property-booked-by{margin-left:37px}}";const S=class{constructor(i){t(this,i);this.dataUpdateEvent=e(this,"dataUpdateEvent",7);this.bookingService=new c;this.arrivalTimeList=[];this.expiryMonths=["01","02","03","04","05","06","07","08","09","10","11","12"];this.expiryYears=[];this.currentMonth="01";this.language=undefined;this.showPaymentDetails=false;this.defaultData=undefined;this.countryNodeList=[];this.propertyId=undefined;this.isButtonPressed=false;this.bookedByData={id:undefined,email:"",firstName:"",lastName:"",countryId:"",isdCode:"",contactNumber:"",selectedArrivalTime:"",emailGuest:false,message:"",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:""}}async componentWillLoad(){this.bookingService.setToken(h.token);this.assignCountryCode();this.initializeExpiryYears();this.initializeDateData();this.populateBookedByData()}initializeExpiryYears(){const t=(new Date).getFullYear();this.expiryYears=Array.from({length:4},((e,i)=>(t+i).toString()))}async assignCountryCode(){const t=await this.bookingService.getUserDefaultCountry();const e=t["COUNTRY_ID"];this.country=e;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.toString(),countryId:e})}initializeDateData(){const t=new Date;const e=t.getMonth()+1;this.currentMonth=e<10?`0${e}`:e.toString()}populateBookedByData(){var t;this.bookedByData=this.defaultData?Object.assign(Object.assign({},this.bookedByData),this.defaultData):{};this.arrivalTimeList=((t=this.defaultData)===null||t===void 0?void 0:t.arrivalTime)||[];this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{selectedArrivalTime:this.arrivalTimeList[0].CODE_NAME});if(!this.bookedByData.expiryMonth){this.bookedByData.expiryMonth=this.currentMonth}if(!this.bookedByData.expiryYear){this.bookedByData.expiryYear=(new Date).getFullYear()}console.log("initial bookedby data",this.bookedByData)}handleDataChange(t,e){this.bookedByData[t]=t==="emailGuest"?e.target.checked:e.target.value;this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)});if(t==="countryId"){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.target.value})}console.log(this.bookedByData)}handleNumberInput(t,e){const i=e.target;const s=i.value;const o=/^[0-9]+$/;if(!o.test(s)){i.value=s.replace(/[^0-9]/g,"")}if(s===i.value){this.handleDataChange(t,e)}}async handleEmailInput(t,e){const i=e.target;const s=i.value;if(this.isValidEmail(s)){this.handleDataChange(t,e)}}async checkUser(){try{const t=this.bookedByData.email;if(this.isValidEmail(t)){const e=await this.bookingService.getUserInfo(t);if(e!==null){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:e.id,firstName:e.first_name,lastName:e.last_name,contactNumber:e.mobile,countryId:e.country_id,isdCode:e.country_id.toString()})}else{this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:undefined,firstName:"",lastName:"",contactNumber:"",countryId:"",isdCode:""})}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}}catch(t){}}isValidEmail(t){const e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return e.test(t)}handleComboboxChange(t){t.stopImmediatePropagation();t.stopPropagation();const{key:e,data:i}=t.detail;switch(e){case"blur":if(i!==""){this.bookedByData.email=i;this.checkUser()}break;case"select":this.bookedByData.email=i.email;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:i.id,firstName:i.first_name,lastName:i.last_name,contactNumber:i.mobile,countryId:i.country_id,isdCode:i.country_id.toString()});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData});break}}clearEvent(){this.bookedByData.email="";this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:"",firstName:"",lastName:"",contactNumber:"",isdCode:this.country.toString(),countryId:this.country});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":this.isButtonPressed=true;break}}render(){return i(s,null,i("div",{class:"text-left mt-3"},i("div",{class:"form-group d-flex flex-column flex-md-row align-items-md-center text-left "},i("label",{class:"p-0 m-0 label-control mr-1 font-weight-bold"},r.entries.Lcz_BookedBy),i("div",{class:"bookedByEmailContainer mt-1 mt-md-0 d-flex align-items-center"},i("ir-autocomplete",{onComboboxValue:this.handleComboboxChange.bind(this),propertyId:this.propertyId,type:"email",value:this.bookedByData.email,required:true,class:"flex-fill",placeholder:r.entries.Lcz_FindEmailAddress,onInputCleared:()=>this.clearEvent()}),i("ir-tooltip",{class:"ml-1",message:"Leave empty if email is unavailable"})))),i("div",{class:"bookedDetailsForm text-left mt-2 font-small-3 "},i("div",{class:"d-flex flex-column flex-md-row  justify-content-md-between "},i("div",{class:"p-0 flex-fill "},i("div",{class:"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill "},i("label",{class:"p-0 m-0 margin3"},r.entries.Lcz_FirstName),i("div",{class:"p-0 m-0  controlContainer flex-fill  "},i("input",{class:`form-control flex-fill ${this.isButtonPressed&&this.bookedByData.firstName===""&&"border-danger"}`,type:"text",placeholder:r.entries.Lcz_FirstName,id:d(),value:this.bookedByData.firstName,onInput:t=>this.handleDataChange("firstName",t),required:true}))),i("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{class:"p-0 m-0 margin3"},r.entries.Lcz_LastName),i("div",{class:"p-0 m-0  controlContainer flex-fill"},i("input",{class:`form-control ${this.isButtonPressed&&this.bookedByData.lastName===""&&"border-danger"}`,type:"text",placeholder:r.entries.Lcz_LastName,id:d(),value:this.bookedByData.lastName,onInput:t=>this.handleDataChange("lastName",t)}))),i("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{class:"p-0 m-0 margin3"},r.entries.Lcz_Country),i("div",{class:"p-0 m-0  controlContainer flex-fill"},i("select",{class:`form-control input-sm pr-0`,id:d(),onChange:t=>this.handleDataChange("countryId",t)},i("option",{value:"",selected:this.bookedByData.countryId===""},r.entries.Lcz_Select),this.countryNodeList.map((t=>i("option",{value:t.id,selected:this.bookedByData.countryId===t.id},t.name)))))),i("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{class:"p-0 m-0 margin3"},r.entries.Lcz_MobilePhone),i("div",{class:"p-0 m-0  d-flex  controlContainer flex-fill"},i("div",{class:" p-0 m-0"},i("select",{class:`form-control input-sm pr-0`,id:d(),onChange:t=>this.handleDataChange("isdCode",t)},i("option",{value:"",selected:this.bookedByData.isdCode===""},r.entries.Lcz_Isd),this.countryNodeList.map((t=>i("option",{value:t.id,selected:this.bookedByData.isdCode===t.id.toString()},t.phone_prefix))))),i("div",{class:"flex-fill p-0 m-0"},i("input",{class:`form-control\n                     \n                      `,type:"tel",placeholder:r.entries.Lcz_ContactNumber,id:d(),value:this.bookedByData.contactNumber,onInput:t=>this.handleNumberInput("contactNumber",t)})))),i("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{class:"p-0 m-0 margin3"},r.entries.Lcz_YourArrivalTime),i("div",{class:"p-0 m-0  controlContainer flex-fill"},i("select",{class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.selectedArrivalTime.code===""&&"border-danger"}`,id:d(),onChange:t=>this.handleDataChange("selectedArrivalTime",t)},this.arrivalTimeList.map((t=>i("option",{value:t.CODE_NAME,selected:this.bookedByData.selectedArrivalTime.code===t.CODE_NAME},t.CODE_VALUE_EN))))))),i("div",{class:"p-0 flex-fill  ml-md-3"},i("div",{class:"  p-0 d-flex flex-column flex-md-row align-items-md-center "},i("label",{class:"p-0 m-0 margin3"},r.entries.Lcz_AnyMessageForUs),i("div",{class:"p-0 m-0  controlContainer flex-fill "},i("textarea",{id:d(),rows:4,class:"form-control ",name:"message",value:this.bookedByData.message,onInput:t=>this.handleDataChange("message",t)}))),this.showPaymentDetails&&i(o,null,i("div",{class:"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{class:"p-0 m-0 margin3"},r.entries.Lcz_CardNumber),i("div",{class:"p-0 m-0  controlContainer flex-fill"},i("input",{class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:d(),value:this.bookedByData.cardNumber,onInput:t=>this.handleNumberInput("cardNumber",t)}))),i("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{class:"p-0 m-0 margin3"},r.entries.Lcz_CardHolderName),i("div",{class:"p-0 m-0  controlContainer flex-fill"},i("input",{class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:d(),value:this.bookedByData.cardHolderName,onInput:t=>this.handleDataChange("cardHolderName",t)}))),i("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},i("label",{class:"p-0 m-0 margin3"},r.entries.Lcz_ExpiryDate),i("div",{class:"p-0 m-0 row  controlContainer flex-fill"},i("div",{class:"p-0 m-0"},i("select",{class:"form-control input-sm pr-0",id:d(),onChange:t=>this.handleDataChange("expiryMonth",t)},this.expiryMonths.map((t=>i("option",{value:t,selected:t===this.bookedByData.expiryMonth},t))))),i("div",{class:"p-0 m-0 ml-1"},i("select",{class:"form-control input-sm pr-0",id:d(),onChange:t=>this.handleDataChange("expiryYear",t)},this.expiryYears.map(((t,e)=>i("option",{value:t,selected:e===this.bookedByData.expiryYear},t)))))))),i("div",{class:"form-group mt-1 p-0 d-flex flex-row align-items-center"},i("label",{class:"p-0 m-0",htmlFor:"emailTheGuestId"},r.entries.Lcz_EmailTheGuest),i("div",{class:"p-0 m-0  controlContainer flex-fill checkBoxContainer"},i("input",{class:"form-control",type:"checkbox",checked:this.bookedByData.emailGuest,id:"emailTheGuestId",onChange:t=>this.handleDataChange("emailGuest",t)})))))))}};S.style=A;const K=".loader.sc-ir-interceptor{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.loaderContainer.sc-ir-interceptor{padding:20px;display:flex;align-items:center;justify-content:center;border-radius:5px;background:white}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all;display:flex;align-items:center;justify-content:center}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const P=class{constructor(i){t(this,i);this.toast=e(this,"toast",7);this.isShown=false;this.isLoading=false;this.isUnassignedUnit=false;this.endpointsCount=0;this.handledEndpoints=["/Get_Exposed_Calendar","/ReAllocate_Exposed_Room","/Do_Payment","/Get_Exposed_Bookings"]}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){b.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));b.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(t){return t.split("?")[0]}isHandledEndpoint(t){return this.handledEndpoints.includes(t)}handleRequest(t){const e=this.extractEndpoint(t.url);m[e]="pending";if(this.isHandledEndpoint(e)&&this.endpointsCount>0){this.isLoading=true}if(e==="/Get_Exposed_Calendar"){this.endpointsCount=this.endpointsCount+1}return t}handleResponse(t){var e;const i=this.extractEndpoint(t.config.url);if(this.isHandledEndpoint(i)){this.isLoading=false}m[i]="done";if((e=t.data.ExceptionMsg)===null||e===void 0?void 0:e.trim()){this.handleError(t.data.ExceptionMsg);throw new Error(t.data.ExceptionMsg)}return t}handleError(t){this.toast.emit({type:"error",title:t,description:"",position:"top-right"});return Promise.reject(t)}render(){return i(s,null,this.isLoading&&i("div",{class:"loadingScreenContainer"},i("div",{class:"loaderContainer"},i("span",{class:"loader"}))))}};P.style=K;export{k as igl_application_info,O as igl_book_property,D as igl_book_property_footer,I as igl_book_property_header,C as igl_booking_overview_page,R as igl_booking_room_rate_plan,j as igl_booking_rooms,E as igl_pagetwo,S as igl_property_booked_by,P as ir_interceptor};
//# sourceMappingURL=p-29da0b7c.entry.js.map