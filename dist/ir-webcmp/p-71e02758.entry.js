import{r as t,c as i,h as s,H as e}from"./p-1da6dd41.js";import{B as l}from"./p-f2fdd834.js";import{l as a}from"./p-cda0b50c.js";import{c as n}from"./p-a7b295ee.js";import{v as o}from"./p-d4c9256e.js";import"./p-54928856.js";import"./p-8da2cdd0.js";import"./p-fe6c3d31.js";import"./p-e6bb1bcd.js";import"./p-58003fb6.js";const d=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const h=class{constructor(s){t(this,s);this.dataUpdateEvent=i(this,"dataUpdateEvent",7);this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new l;this.defaultData=undefined;this.fromDate=undefined;this.toDate=undefined;this.entryDate=undefined;this.entryHour=undefined;this.isEventHover=false;this.entryMinute=undefined;this.renderAgain=false}async componentWillLoad(){try{this.bookingService.setToken(n.token);this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(t){}}handleOptionalReason(t){this.blockDatesData.OPTIONAL_REASON=t.target.value;this.emitData()}handleReleaseAfterChange(t){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(t.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let t=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){t.setHours(this.entryHour,this.entryMinute,0,0)}else{t.setHours(t.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,t.getMinutes(),0,0)}return t.toLocaleString("default",{month:"short"})+" "+t.getDate()+", "+this.formatNumber(t.getHours())+":"+this.formatNumber(t.getMinutes())}formatNumber(t){return t<10?`0${t}`:t}handleOutOfService(t){this.blockDatesData.OUT_OF_SERVICE=t.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){console.log(this.fromDate);return s(e,null,s("div",{class:`m-0 p-0 mb-1`},s("div",{class:"text-left p-0"},s("ir-date-view",{from_date:this.fromDate,dateOption:"DD MMM YYYY",showDateDifference:false,to_date:this.toDate}))),s("div",{class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},s("div",{class:"mb-1 "},s("label",{class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},a.entries.Lcz_Reason,":"),s("div",{class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},s("input",{class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:t=>this.handleOutOfService(t)})),s("span",{class:"align-middle out-of-service-label"},a.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?s("div",null,s("div",{class:"mb-1 d-flex  align-items-center"},s("span",{class:"align-middle"},a.entries.Lcz_Or," "),s("div",{class:"d-inline-flex col pr-0 align-middle"},s("input",{class:"form-control",type:"text",placeholder:a.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:t=>this.handleOptionalReason(t)}))),s("div",{class:"mb-1 w-100 pr-0 "},s("span",{class:"text-bold-700 font-medium-1"},a.entries.Lcz_AutomaticReleaseIn,": "),s("div",{class:"d-inline-block"},s("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:t=>this.handleReleaseAfterChange(t)},this.releaseList.map((t=>s("option",{value:+t.CODE_NAME,selected:this.blockDatesData.RELEASE_AFTER_HOURS==+t.CODE_NAME},t.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?s("div",{class:"d-inline-block releaseTime"},s("em",null,a.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};h.style=d;const r="*.sc-ota-label{margin:0;padding:0}.sc-ota-label-h{display:flex;margin-bottom:5px;gap:5px;width:100%}strong.sc-ota-label{margin:0;padding:0}ul.sc-ota-label{margin:0 3px;padding:0;list-style:none;overflow:hidden;width:100%;word-wrap:break-word !important;overflow-wrap:break-word !important}li.sc-ota-label{width:100%;line-height:1.5;margin:0;padding:0;word-wrap:break-word !important;overflow-wrap:break-word !important}button.sc-ota-label{background:white;color:var(--blue);padding:0;margin:0;margin-left:3px;font-size:12px;border:0}button.sc-ota-label:hover{color:#355270}";const c=class{constructor(i){t(this,i);this.toggleShowAll=()=>{this.showAll=!this.showAll};this.label=undefined;this.remarks=undefined;this.maxVisibleItems=3;this.showAll=false}render(){if(!this.remarks){return null}const t=this.showAll?this.remarks:this.remarks.slice(0,this.maxVisibleItems);return s(e,null,s("strong",null,this.label),s("ul",null,t.map(((i,e)=>s("li",{key:o()},"- ",i.statement," ",this.remarks.length>this.maxVisibleItems&&e===t.length-1&&s("button",{onClick:this.toggleShowAll},this.showAll?a.entries.Lcz_ShowLess:a.entries.Lcz_ShowMore))))))}};c.style=r;export{h as igl_block_dates_view,c as ota_label};
//# sourceMappingURL=p-71e02758.entry.js.map