import{r as s,h as t,H as e,c as a,g as i}from"./p-05195efb.js";import{c as n,s as r,a as c}from"./p-2361995a.js";import{c as o}from"./p-16fbf1a7.js";import"./p-7cd9c724.js";const l=".sc-ir-channel-general-h{display:block}";const h=class{constructor(t){s(this,t)}render(){var s;return t(e,null,t("p",null,"Channel"),t("ir-combobox",{value:(s=n.selectedChannel)===null||s===void 0?void 0:s.name,onComboboxValueChange:s=>{r(s.detail.data.toString())},placeholder:"Choose channel from list",data:n.channels.map((s=>({id:s.id,name:s.name})))}))}};h.style=l;const p=".sc-ir-channel-header-h{display:block;position:relative;padding:0;margin:0;border-bottom:1px solid #e4e5ec}ul.sc-ir-channel-header{display:flex;align-items:center;gap:2rem;padding:0}.tab.sc-ir-channel-header{font-size:0.95rem;font-weight:600;cursor:pointer;position:relative;margin:0;padding:0;transition:color 0.3s ease;user-select:none}.tab[data-disabled].sc-ir-channel-header{cursor:auto}.tab.sc-ir-channel-header:hover{opacity:80%}.tab[data-state='selected'].sc-ir-channel-header,.tab[data-state='selected'].sc-ir-channel-header:hover{color:var(--blue);opacity:100%}.active-indicator.sc-ir-channel-header{padding:0;bottom:0px;position:absolute;height:3px;border-radius:4px;transition:transform 0.3s ease, width 0.3s ease;background:var(--blue)}";const d=class{constructor(t){s(this,t);this.tabChanged=a(this,"tabChanged",7);this.headerTitles=[];this.selectedIndex=0}componentDidLoad(){this.updateActiveIndicator()}disconnectedCallback(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}handleTabSelection(s){this.selectedIndex=s;this.updateActiveIndicator();this.tabChanged.emit(this.headerTitles[this.selectedIndex].id)}updateActiveIndicator(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}requestAnimationFrame((()=>{const s=this.el.querySelector(`li.tab[data-state="selected"]`);if(s){const{left:t,width:e}=s.getBoundingClientRect();const a=this.el.getBoundingClientRect().left;const i=t-a;this.activeIndicator.style.width=`${e}px`;this.activeIndicator.style.transform=`translateX(${i}px)`}}))}render(){return t(e,null,t("ul",null,this.headerTitles.map(((s,e)=>t("li",{class:`tab ${s.disabled?"text-light":""}`,key:s.id,onClick:()=>{if(!s.disabled)this.handleTabSelection(e)},"data-disabled":s.disabled,"data-state":this.selectedIndex===e?"selected":""},s.name)))),t("span",{class:"active-indicator",ref:s=>this.activeIndicator=s}))}get el(){return i(this)}};d.style=p;class m{checkMappingExists(s){return n.mappedChannel.find((t=>t.channel_id===s))}getAppropriateRooms(s,t){if(s){const s=o.roomsInfo.filter((s=>n.mappedChannel.find((t=>t.ir_id.toString()===s.id.toString()))===undefined&&s.is_active));return s.map((s=>({id:s.id.toString(),name:s.name})))}if(!t){throw new Error("Missing roomType id")}const e=o.roomsInfo.filter((s=>n.mappedChannel.find((s=>s.channel_id.toString()===t))&&s.is_active));console.log(e)}}const g=".sc-ir-channel-mapping-h{display:block;box-sizing:border-box}.map-row.sc-ir-channel-mapping{display:flex;align-items:center;justify-content:space-between}.map-row.sc-ir-channel-mapping span.sc-ir-channel-mapping{width:49%}.submap-text.sc-ir-channel-mapping{padding-left:10px}.text-blue.sc-ir-channel-mapping{color:var(--blue)}.text-red.sc-ir-channel-mapping{color:var(--red)}";const u=class{constructor(t){s(this,t);this.mappingService=new m;this.activeMapField="";this.availableRooms=[]}setActiveField(s,t,e){const a=this.mappingService.getAppropriateRooms(t,e);if(a){this.availableRooms=a}this.activeMapField=s}renderMappingStatus(s,e,a){const i=this.mappingService.checkMappingExists(s);if(i){return t("span",{class:"px-2"},i.ir_id)}return t("span",{class:"px-2"},this.activeMapField===s?t("ir-combobox",{autoFocus:true,placeholder:"Not mapped",data:this.availableRooms,onComboboxValueChange:s=>{c(s.detail.data,this.activeMapField);this.activeMapField=""}}):t("span",{class:"cursor-pointer text-red",onClick:()=>this.setActiveField(s,e,a)},"Not mapped"))}render(){return t(e,null,t("ul",{class:"m-0 p-0"},t("li",{class:"map-row my-2"},t("span",{class:"font-weight-bold"},n.selectedChannel.name),t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})),t("span",{class:"font-weight-bold px-2"},"Channel manager")),n.selectedChannel.property.room_types.map((s=>t("li",{key:s.id,class:"mb-1"},t("div",{class:"map-row"},t("span",null,s.name),t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})),this.renderMappingStatus(s.id,true)),t("ul",{class:"m-0 p-0"},s.rate_plans.map((e=>t("li",{class:"map-row",key:e.id},t("span",{class:"submap-text"},e.name),t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},t("path",{fill:"currentColor",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})),this.renderMappingStatus(e.id,false,s.id))))))))))}};u.style=g;export{h as ir_channel_general,d as ir_channel_header,u as ir_channel_mapping};
//# sourceMappingURL=p-8c2d29c7.entry.js.map