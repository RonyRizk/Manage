import{r as t,h as e,H as s,g as o}from"./p-05195efb.js";import{c as n}from"./p-ed91ab97.js";import{l as i}from"./p-dda5a727.js";import{a as r}from"./p-539b691e.js";import"./p-7cd9c724.js";class a{async fetchData(t,e){try{const s=JSON.parse(sessionStorage.getItem("token"));if(s!==null){const{data:o}=await r.post(`/Get_Exposed_Property?Ticket=${s}`,{id:t,language:e});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}const i=o.My_Result;n.adultChildConstraints=i.adult_child_constraints;n.allowedBookingSources=i.allowed_booking_sources;n.allowed_payment_methods=i.allowed_booking_methods;n.currency=i.currency;n.is_vacation_rental=i.is_vacation_rental;n.pickup_service=i.pickup_service;n.max_nights=i.max_nights;n.channels=i.channels;n.is_frontdesk_enabled=i.is_frontdesk_enabled;return o}}catch(t){console.log(t);throw new Error(t)}}async fetchLanguage(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e!==null){const{data:s}=await r.post(`/Get_Exposed_Language?Ticket=${e}`,{code:t});if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}let o=this.transformArrayToObject(s.My_Result.entries);i.entries=o;i.direction=s.My_Result.direction;return{entries:o,direction:s.My_Result.direction}}}catch(t){console.log(t);throw new Error(t)}}transformArrayToObject(t){let e={};for(const s of t){e[s.code]=s.description}return e}}const c=".sc-ir-channel-h{display:block}";const l=class{constructor(e){t(this,e);this.roomService=new a;this.ticket=undefined;this.propertyid=undefined;this.language=undefined;this.baseurl=undefined;this.channel_status=null}componentDidLoad(){if(this.baseurl){r.defaults.baseURL=this.baseurl}if(this.ticket!==""){this.initializeApp()}}async initializeApp(){try{const[t,e]=await Promise.all([this.roomService.fetchData(this.propertyid,this.language),this.roomService.fetchLanguage(this.language)]);if(!i.entries){i.entries=e.entries;i.direction=e.direction}}catch(t){console.error(t)}}async ticketChanged(){sessionStorage.setItem("token",JSON.stringify(this.ticket));this.initializeApp()}render(){var t;return e(s,null,e("section",{class:"p-2"},e("div",{class:"d-flex w-100 justify-content-end mb-2"},e("ir-button",{text:"Create",size:"sm",onClickHanlder:()=>this.channel_status="create"})),e("div",null,e("table",{class:"table"},e("thead",{class:""},e("tr",null,e("th",{scope:"col",class:"text-left"},"Title"),e("th",{scope:"col"},"Channel"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Actions"))),e("tbody",null,(t=n.channels)===null||t===void 0?void 0:t.map((t=>e("tr",{key:t.id},e("th",{scope:"row",class:"text-left"},t.title),e("th",{scope:"row"},t.name),e("td",null,e("input",{"data-switchery":"true",type:"checkbox",class:"",checked:t.is_active})),e("th",null,e("div",{class:"dropdown"},e("button",{class:"btn dropdown-toggle text-primary",type:"button","data-toggle":"dropdown","aria-expanded":"false"},"Actions"),e("div",{class:"dropdown-menu dropdown-menu-right"},e("a",{class:"dropdown-item",href:"#"},"Action"),e("a",{class:"dropdown-item",href:"#"},"Another action"),e("a",{class:"dropdown-item",href:"#"},"Something else here"))))))))))),e("ir-sidebar",{showCloseButton:false,onIrSidebarToggle:t=>{t.stopImmediatePropagation();t.stopPropagation();this.channel_status=null},open:this.channel_status!==null},this.channel_status&&e("ir-channel-editor",{onCloseSideBar:()=>this.channel_status=null})))}get el(){return o(this)}static get watchers(){return{ticket:["ticketChanged"]}}};l.style=c;export{l as ir_channel};
//# sourceMappingURL=p-911a42cb.entry.js.map