import{r as t,h as s,H as i}from"./p-1da6dd41.js";import{T as e,a as n}from"./p-d0086f2b.js";import{R as r}from"./p-d49e89bc.js";import{c as o}from"./p-383186e3.js";import"./p-ac2141fd.js";class a extends e{async getExposedHKSetup(t){const s=this.getToken();if(!s){throw new Error("Missing token")}const{data:i}=await n.post(`/Get_Exposed_HK_Setup?Ticket=${s}`,{property_id:t});return i["My_Result"]}async setExposedInspectionMode(t,s){const i=this.getToken();if(!i){throw new Error("Missing token")}const{data:e}=await n.post(`/Set_Exposed_Inspection_Mode?Ticket=${i}`,{property_id:t,mode:s});return e["My_Result"]}}const c={token:""};const{state:l}=o(c);const h=".sc-ir-housekeeping-h{display:block}.circle.sc-ir-housekeeping{display:inline-flex;border-radius:50%}.green.sc-ir-housekeeping{background:#629a4c}.red.sc-ir-housekeeping{background:#ff4961}.orange.sc-ir-housekeeping{background:#ff9149}.black.sc-ir-housekeeping{background:#000}.smallcircle.sc-ir-housekeeping{height:7px;width:7px}.bigcircle.sc-ir-housekeeping{height:7px;width:7px}.status-container.sc-ir-housekeeping,.action-container.sc-ir-housekeeping{display:flex;align-items:center;gap:8px}.status-container.sc-ir-housekeeping p.sc-ir-housekeeping{margin:0}";const d=class{constructor(s){t(this,s);this.roomService=new r;this.houseKeepingService=new a;this.language="";this.ticket="";this.baseurl="";this.propertyid=undefined;this.isLoading=false;this.exposedHouseKeepingStatuses=undefined}componentWillLoad(){if(this.baseurl){n.defaults.baseURL=this.baseurl}if(this.ticket!==""){this.roomService.setToken(this.ticket);this.houseKeepingService.setToken(this.ticket);l.token=this.ticket;this.initializeApp()}}async ticketChanged(t,s){if(t!==s){this.roomService.setToken(this.ticket);this.houseKeepingService.setToken(this.ticket);l.token=this.ticket;this.initializeApp()}}async initializeApp(){try{this.isLoading=true;const[t]=await Promise.all([this.houseKeepingService.getExposedHKSetup(this.propertyid)]);this.exposedHouseKeepingStatuses=t.statuses}catch(t){console.error(t)}finally{this.isLoading=false}}render(){var t;if(this.isLoading){return s("ir-loading-screen",null)}return s(i,null,s("ir-interceptor",null),s("ir-toast",null),s("section",{class:"p-1"},s("div",{class:"card p-1"},s("h4",null,"Room or Unit Status"),s("table",null,s("thead",null,s("tr",null,s("th",null,"Status"),s("th",null,"Code"),s("th",null,"Action"))),s("tbody",null,(t=this.exposedHouseKeepingStatuses)===null||t===void 0?void 0:t.map((t=>{var i;return s("tr",{key:t.code},s("td",null,s("div",{class:"status-container"},s("span",{class:`circle ${t.style.shape} ${t.style.color}`}),s("p",null,t.description))),s("td",null,t.code),s("td",null,s("div",{class:"action-container"},s("p",{class:"m-0"},t.action),((i=t.inspection_mode)===null||i===void 0?void 0:i.is_active)&&s("div",null,s("ir-select",{LabelAvailable:false,firstOption:"No",data:Array.from(Array(t.inspection_mode.window+1),((t,s)=>s)).map((t=>{const s=t===0?"Yes on the same day.":t.toString()+" day prior.";return{text:s,value:t.toString()}}))})))))})))))))}static get watchers(){return{ticket:["ticketChanged"]}}};d.style=h;export{d as ir_housekeeping};
//# sourceMappingURL=p-8f66116d.entry.js.map