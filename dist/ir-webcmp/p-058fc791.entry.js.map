{"version":3,"names":["iglApplicationInfoCss","IglApplicationInfo","componentWillLoad","this","guestData","guestInfo","Object","assign","updateRoomList","handleSelctedUnits","units","selectedUnits","index","filterdRoomList","roomsList","filter","e","includes","id","updateData","dataUpdateEvent","emit","key","guestRefKey","data","handleDataChange","value","find","room","name","handleGuestNameChange","event","guestName","target","render","h","Host","class","bookingType","roomCategoryName","ratePlanName","replace","message","cancelation","guarantee","adult_child_offering","v4","type","placeholder","onInput","required","onChange","selected","roomId","map","preference","bedPreferenceType","CODE_NAME","CODE_VALUE_EN","rate","bind","fn","thisArg","wrap","apply","arguments","toString","prototype","getPrototypeOf","kindOf","cache","thing","str","call","slice","toLowerCase","create","kindOfTest","typeOfTest","isArray","Array","isUndefined","isBuffer","val","constructor","isFunction","isArrayBuffer","isArrayBufferView","result","ArrayBuffer","isView","buffer","isString","isNumber","isObject","isBoolean","isPlainObject","Symbol","toStringTag","iterator","isDate","isFile","isBlob","isFileList","isStream","pipe","isFormData","kind","FormData","append","isURLSearchParams","trim","forEach","obj","allOwnKeys","i","l","length","keys","getOwnPropertyNames","len","findKey","_key","_global","globalThis","self","window","global","isContextDefined","context","merge","caseless","assignValue","targetKey","extend","a","b","stripBOM","content","charCodeAt","inherits","superConstructor","props","descriptors","defineProperty","toFlatObject","sourceObj","destObj","propFilter","prop","merged","endsWith","searchString","position","String","undefined","lastIndex","indexOf","toArray","arr","isTypedArray","TypedArray","Uint8Array","forEachEntry","generator","next","done","pair","matchAll","regExp","matches","exec","push","isHTMLForm","toCamelCase","replacer","m","p1","p2","toUpperCase","hasOwnProperty","isRegExp","reduceDescriptors","reducer","getOwnPropertyDescriptors","reducedDescriptors","descriptor","ret","defineProperties","freezeMethods","enumerable","writable","set","Error","toObjectSet","arrayOrString","delimiter","define","split","noop","toFiniteNumber","defaultValue","Number","isFinite","ALPHA","DIGIT","ALPHABET","ALPHA_DIGIT","generateString","size","alphabet","Math","random","isSpecCompliantForm","toJSONObject","stack","visit","source","reducedValue","isAsyncFn","isThenable","then","catch","utils","hasOwnProp","AxiosError","code","config","request","response","captureStackTrace","toJSON","description","number","fileName","lineNumber","columnNumber","status","from","error","customProps","axiosError","cause","httpAdapter","isVisitable","removeBrackets","renderKey","path","dots","concat","each","token","join","isFlatArray","some","predicates","test","toFormData","formData","options","TypeError","metaTokens","indexes","defined","option","visitor","defaultVisitor","_Blob","Blob","useBlob","convertValue","toISOString","Buffer","JSON","stringify","el","exposedHelpers","build","pop","encode","charMap","encodeURIComponent","match","AxiosURLSearchParams","params","_pairs","encoder","_encode","buildURL","url","serializeFn","serialize","serializedParams","hashmarkIndex","InterceptorManager","handlers","use","fulfilled","rejected","synchronous","runWhen","eject","clear","forEachHandler","transitionalDefaults","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","URLSearchParams$1","URLSearchParams","FormData$1","Blob$1","isStandardBrowserEnv","product","navigator","document","isStandardBrowserWebWorkerEnv","WorkerGlobalScope","importScripts","platform","isBrowser","classes","protocols","toURLEncodedForm","helpers","parsePropPath","arrayToObject","formDataToJSON","buildPath","isNumericKey","isLast","entries","stringifySafely","rawValue","parser","parse","defaults","transitional","adapter","transformRequest","headers","contentType","getContentType","hasJSONContentType","isObjectPayload","setContentType","formSerializer","_FormData","env","transformResponse","JSONRequested","responseType","strictJSONParsing","ERR_BAD_RESPONSE","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","common","Accept","method","ignoreDuplicateOf","parseHeaders","rawHeaders","parsed","line","substring","$internals","normalizeHeader","header","normalizeValue","parseTokens","tokens","tokensRE","isValidHeaderName","matchHeaderValue","isHeaderNameFilter","formatHeader","w","char","buildAccessors","accessorName","methodName","arg1","arg2","arg3","configurable","AxiosHeaders","valueOrRewrite","rewrite","setHeader","_value","_header","_rewrite","lHeader","setHeaders","get","has","matcher","deleted","deleteHeader","normalize","format","normalized","targets","asStrings","first","computed","accessor","internals","accessors","defineAccessor","mapped","headerValue","transformData","fns","transform","isCancel","__CANCEL__","CanceledError","ERR_CANCELED","settle","resolve","reject","ERR_BAD_REQUEST","floor","cookies","standardBrowserEnv","write","expires","domain","secure","cookie","Date","toGMTString","read","RegExp","decodeURIComponent","remove","now","nonStandardBrowserEnv","isAbsoluteURL","combineURLs","baseURL","relativeURL","buildFullPath","requestedURL","isURLSameOrigin","msie","userAgent","urlParsingNode","createElement","originURL","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","location","requestURL","parseProtocol","speedometer","samplesCount","min","bytes","timestamps","head","tail","firstSampleTS","chunkLength","startedAt","bytesCount","passed","round","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","loaded","total","lengthComputable","progressBytes","inRange","progress","estimated","isXHRAdapterSupported","XMLHttpRequest","xhrAdapter","Promise","dispatchXhrRequest","requestData","requestHeaders","onCanceled","cancelToken","unsubscribe","signal","removeEventListener","auth","username","password","unescape","btoa","fullPath","open","paramsSerializer","onloadend","responseHeaders","getAllResponseHeaders","responseData","responseText","statusText","_resolve","_reject","err","onreadystatechange","handleLoad","readyState","responseURL","setTimeout","onabort","handleAbort","ECONNABORTED","onerror","handleError","ERR_NETWORK","ontimeout","handleTimeout","timeoutErrorMessage","ETIMEDOUT","xsrfValue","setRequestHeader","withCredentials","onDownloadProgress","addEventListener","onUploadProgress","upload","cancel","abort","subscribe","aborted","send","knownAdapters","http","xhr","renderReason","reason","isResolvedHandle","adapters","getAdapter","nameOrAdapter","rejectedReasons","reasons","state","s","throwIfCancellationRequested","throwIfRequested","dispatchRequest","onAdapterResolution","onAdapterRejection","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","timeoutMessage","decompress","beforeRedirect","transport","httpAgent","httpsAgent","socketPath","responseEncoding","computeConfigValue","configValue","VERSION","validators","validator","deprecatedWarnings","version","formatMessage","opt","desc","opts","ERR_DEPRECATED","console","warn","assertOptions","schema","allowUnknown","ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","Axios","instanceConfig","interceptors","configOrUrl","boolean","function","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","unshiftRequestInterceptors","interceptor","unshift","responseInterceptorChain","pushResponseInterceptors","promise","chain","newConfig","onFulfilled","onRejected","getUri","forEachMethodNoData","forEachMethodWithData","generateHTTPMethod","isForm","httpMethod","CancelToken","executor","resolvePromise","promiseExecutor","_listeners","onfulfilled","splice","c","spread","callback","isAxiosError","payload","HttpStatusCode","Continue","SwitchingProtocols","Processing","EarlyHints","Ok","Created","Accepted","NonAuthoritativeInformation","NoContent","ResetContent","PartialContent","MultiStatus","AlreadyReported","ImUsed","MultipleChoices","MovedPermanently","Found","SeeOther","NotModified","UseProxy","Unused","TemporaryRedirect","PermanentRedirect","BadRequest","Unauthorized","PaymentRequired","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","ProxyAuthenticationRequired","RequestTimeout","Conflict","Gone","LengthRequired","PreconditionFailed","PayloadTooLarge","UriTooLong","UnsupportedMediaType","RangeNotSatisfiable","ExpectationFailed","ImATeapot","MisdirectedRequest","UnprocessableEntity","Locked","FailedDependency","TooEarly","UpgradeRequired","PreconditionRequired","TooManyRequests","RequestHeaderFieldsTooLarge","UnavailableForLegalReasons","InternalServerError","NotImplemented","BadGateway","ServiceUnavailable","GatewayTimeout","HttpVersionNotSupported","VariantAlsoNegotiates","InsufficientStorage","LoopDetected","NotExtended","NetworkAuthenticationRequired","createInstance","defaultConfig","instance","axios","Cancel","all","promises","formToJSON","default","convertDateToCustomFormat","dayWithWeekday","monthWithYear","months","_","day","month","year","monthIndex","convertDateToTime","getTime","dateDifference","FROM_DATE","TO_DATE","startDate","endDate","ceil","dateToFormattedString","date","getFullYear","getMonth","padStart","getDate","formatLegendColors","legendData","formattedLegendData","statusId","clsName","CONFIRMED","BLOCKED","NOTES","legend","getCurrencySymbol","currencyCode","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","findCountry","countries","country","getReleaseHoursString","releaseDate","dt","releaseAfterHours","setHours","getHours","getMinutes","BLOCKED_TILL_DATE","BLOCKED_TILL_HOUR","BLOCKED_TILL_MINUTE","computeEndDate","numberOfDays","dateObj","moment","add","convertDMYToISO","async","getMyBookings","myBookings","stayStatus","getStayStatus","days","room_types","assignBooking","physicalrooms","physicalRoom","calendar_cell","Is_Available","addOrUpdateBooking","formatName","firstName","lastName","sessionStorage","getItem","post","TBL_NAMES","My_Result","d","log","getDefaultData","cell","STAY_STATUS_CODE","ID","POOL","My_Block_Info","BALANCE","NAME","st","RELEASE_AFTER_HOURS","DESCRIPTION","PR_ID","pr_id","ENTRY_DATE","ENTRY_HOUR","ENTRY_MINUTE","OPTIONAL_REASON","DATE","NO_OF_DAYS","STATUS","STATUS_CODE","OUT_OF_SERVICE","FROM_DATE_STR","from_date","TO_DATE_STR","to_date","IS_EDITABLE","booking","is_editable","guest","first_name","last_name","PHONE","_a","mobile","booked_on","RATE","RATE_PLAN","rateplan","SPLIT_BOOKING","RATE_PLAN_ID","IDENTIFIER","identifier","RATE_TYPE","ADULTS_COUNT","occupancy","adult_nbr","CHILDREN_COUNT","children_nbr","GUEST","rooms","BOOKING_NUMBER","booking_nbr","TOTAL_PRICE","COUNTRY","country_id","selected_variation","updateBookingWithStayData","arrival","ARRIVAL_TIME","findIndex","newData","updatedData","BookingService","getCalendarData","propertyid","ExceptionMsg","customMonths","myBooking","daysCount","monthName","currentDate","dayDisplayName","unassigned_units_nbr","flat","ExceptionCode","My_Params_Get_Rooming_Data","AC_ID","FROM","My_Params_Get_Exposed_Calendar","TO","defaultMonths","getBookingAvailability","language","room_type_ids","child_nbr","currency_ref","getCountries","fetchSetupEntries","res","arrivalTime","TBL_NAME","bookingSource","ratePricingMode","getBlockedInfo","blockUnit","getUserInfo","email","generateDays","amount","setDate","bookUser","bookedByInfoData","check_in","fromDate","toDate","totalNights","bookingNumber","defaultGuest","fromDateStr","toDateStr","countryId","city","contactNumber","address","dob","subscribe_to_news_letter","emailGuest","body","assign_units","remark","property","selectedArrivalTime","roomtype","roomCategoryId","rateplans","availabilities","inventory","ratePlanId","rate_restrictions","variations","unit","adultCount","childrenCount","infant_nbr","notes","iglBlockDatesViewCss","IglBlockDatesView","blockDatesData","releaseList","bookingService","defaultData","parseInt","emitData","handleOptionalReason","handleReleaseAfterChange","evt","entryDate","renderPage","entryHour","entryMinute","toLocaleString","handleOutOfService","checked","renderAgain","releaseItem","EventsService","reallocateEvent","pool","destination_pr_id","deleteEvent","updateBlockedEvent","bookingEvent","releaseData","formatDate","iglBookPropertyCss","IglBookProperty","PAGE_ZERO","PAGE_ONE","PAGE_TWO","PAGE_BLOCK_DATES","showSplitBookingOption","sourceOptions","selectedRooms","eventsService","bookingData","defaultDateRange","dateRangeData","setupEntries","setSourceOptions","setOtherProperties","isEventType","setEditingRoomInfo","page","getDefaultPage","sourceOption","category","getRoomCategoryByRoomId","getBookingPreferenceRoomId","rateType","totalRooms","initializeBookingAvailability","roomsInfo","roomtypes","tax_statement","roomCategory","event_type","getSplitBookings","splitBookingEvents","closeWindow","isConvertedBooking","closeBookingWindow","isEditBooking","onRoomsDataUpdate","changedKey","detail","roomCategoryKey","getRoomCategoryKey","ratePlanKey","getRatePlanKey","shouldClearData","initializeRoomCategoryIfNeeded","applyBookingEditToSelectedRoom","setSelectedRoomData","cleanupEmptyData","isEditBookingEvent","hasSelectedRoomData","onDateRangeSelect","handleBlockDateUpdate","stopImmediatePropagation","stopPropagation","handleSubmit","preventDefault","handleGuestInfoUpdate","handleBookedByInfoUpdate","isActiveSouceOption","srcIndex","handleSourceDropDown","selectedOption","gotoSplitPageTwo","gotoPage","showSplitBooking","getSelectedSplitBookingName","bookingId","splitBooking","isActiveSplitBookingOption","spltIndex","splitBookingId","handleSplitBookingDropDown","isPageZero","isPageOne","isPageTwo","isPageBlockDates","getSplitBookingList","getSourceNode","getRoomsListFromCategoryId","categoryId","getPageZeroView","onClick","getPageOneView","onDateSelectEvent","roomInfo","roomTypeData","onDataUpdateEvent","disabled","getPageBlockDatesView","handleBlockDate","handleButtonClicked","handlePageTwoDataUpdateEvent","reload","setLoadingState","getArrivalTimeForBooking","resetLoadingState","isLoading","BLOCK_DATES_TITLE","TITLE","selectedGuestData","countryNodeList","isEditOrAddRoomEvent","onButtonClicked","iglBookingEventCss","IglBookingEvent","dayWidth","eventSpace","vertSpace","showInfoPopup","bubbleInfoTopSide","resizeSide","isDragging","handleMouseMoveBind","handleMouseMove","handleMouseUpBind","handleMouseUp","handleClickOutsideBind","handleClickOutside","componentDidLoad","isNewEvent","hideBubble","showEventInfo","disconnectedCallback","clickedElement","element","contains","hideBubbleInfoPopup","currentInfoBubbleId","getBookingId","moveBookingToHandler","moveToDay","toRoomId","fromRoomId","isTouchStart","moveDiffereneX","moveDiffereneY","getBookedRoomId","onMoveUpdateBooking","renderElement","getUniqueId","reverse","tempDate","getStayDays","isSplitBooking","isHighlightEventType","getEventType","getBookingStatus","getBookedBy","getEventStartingDate","getEventEndingDate","getEventLegend","orderRide","color","_b","getLegendOfStatus","aStatusId","getNoteNode","INTERNAL_NOTE","getBalanceNode","setStayDays","aStayDays","getPosition","startingDate","startingCellClass","bodyContainer","querySelector","startingCell","pos","top","left","width","height","getBoundingClientRect","bodyContainerRect","boundingRect","getNumber","aData","parseFloat","startDragging","side","initialX","clientX","touches","initialY","clientY","elementRect","offsetX","offsetY","dragInitPos","x","y","dragEndPos","dragOverEventData","initialWidth","offsetWidth","initialLeft","offsetLeft","currentX","distanceX","currentY","distanceY","newWidth","max","newLeft","finalWidth","abs","nbOfDays","initialStayDays","updateEventData","showInfo","midPoint","hideBubbleInfo","noteNode","balanceNode","backgroundColor","onTouchStart","onMouseDown","bubbleInfoTop","iglBookingEventHoverCss","IglBookingEventHover","todayTimeStamp","eventService","getTotalOccupants","getPhoneNumber","getCountry","getPhoneCode","phone_prefix","renderPhone","getGuestNote","getInternalNote","getTotalPrice","getCheckInDate","getCheckOutDate","getArrivalTime","getRatePlan","getEntryDate","getReleaseAfterHours","isNewBooking","isCheckedIn","isCheckedOut","isBlockedDateEvent","getRoomId","getCategoryByRoomId","hasSplitBooking","canCheckIn","fromTimeStamp","toTimeStamp","canCheckOut","handleEditBooking","handleBookingOption","getStringDateFormat","handleAddRoom","from_date_str","to_date_str","eventData","ADD_ROOM_TO_BOOKING","editabled","handleCustomerCheckIn","handleCustomerCheckOut","handleDeleteEvent","deleteButton","handleUpdateBlockedDates","handleConvertBlockedDateToBooking","getRoomInfo","roomIdToFind","selectedRoom","CATEGORY","ROOM_NAME","ROOMS_INFO","eventType","roomData","showBookingPopup","getInfoElement","role","getNewBookingOptions","getBlockedView","iglBookingRoomRatePlanCss","IglBookingRoomRatePlan","selectedData","ratePlanData","isRateModified","defaultSelectedRate","getSelectedOffering","variation","ratePlanDataChanged","handleRateDaysUpdate","handleInput","inputElement","inputValue","numericRegex","offering","bookProperty","gotoSplitPageTwoEvent","totalAvailableRooms","iglBookingRoomsCss","IglBookingRooms","validBookingTypes","fill","roomsDistributions","onRoomDataUpdate","newValue","updateRatePlanTotalRooms","ratePlanIndex","calculateTotalSelectedRoomsExcludingIndex","excludedIndex","reduce","acc","idx","ratePlan","totalSelectedRoomsExcludingCurrent","availableRooms","iglCalBodyCss","IglCalBody","dragOverHighlightElementHandler","dragOverElement","gotoRoom","expanded","toggleCategory","scrollToRoom","addToBeAssignedEvents","addBookingDatas","scrollPageToRoom","refClass","calendarData","getCategoryRooms","getCategoryName","getCategoryId","getTotalPhysicalRooms","getRoomName","getRoomById","physicalRooms","physical_room","getBookingData","bookingEvents","getSelectedCellRefName","selectedDay","getSplitBookingEvents","newEvent","ind","ev","addNewEvent","EMAIL","convertBooking","REFERENCE_TYPE","getTwoDigitNumStr","editable","popupTitle","getDateStr","num","locale","removeNewEvent","events","clickCell","isScrollViewDragging","refKey","showNewBookingPopup","getGeneralCategoryDayColumns","addClass","isCategory","dayInfo","today","getGeneralRoomDayColumns","getRoomCategoryRow","getRoomsByCategory","getRoomRows","allBookingEvents","iglCalFooterCss","IglCalFooter","handleOptionEvent","optionEvent","iglCalHeaderCss","IglCalHeader","searchValue","searchList","handleReduceAvailableUnitEvent","selectedDate","tobeAssignedCount","renderView","showToBeAssigned","gotoToBeAssignedDate","handleDateSelect","picker","blur","handleClearSearch","handleFilterRooms","toLocaleLowerCase","handleScrollToRoom","gotoRoomEvent","getNewBookingModel","monthsInfo","monthInfo","iglDateRangeCss","IglDateRange","getFormattedDateString","calculateTotalNights","handleDateSelectEvent","dateSelectEvent","handleDateChange","start","end","autoApply","onDateChanged","iglLegendsCss","IglLegends","legendInfo","design","iglPagetwoCss","IglPagetwo","initializeGuestData","newSelectedUnits","handleOnApplicationInfoDataUpdateEvent","categoryIdKey","updatedUnits","handleEventData","selectedBookedByData","isGuestDataIncomplete","isButtonDisabled","isValidProperty","comparedBy","buttonClicked","iglPropertyBookedByCss","IglPropertyBookedBy","arrivalTimeList","expiryMonths","expiryYears","currentMonth","isdCode","cardNumber","cardHolderName","expiryMonth","expiryYear","initializeExpiryYears","initializeDateData","populateBookedByData","currentYear","bookedByData","foundTime","time","handleNumberInput","handleEmailInput","isValidEmail","checkUser","emailId","emailPattern","onBlur","countryNode","rows","pattern","ToBeAssignedService","getUnassignedDates","convertUnassignedDates","getUnassignedRooms","specific_date","transformToAssignable","assignUnit","cleanSpacesAndSpecialChars","regex","customer","unassigned_rooms","roomTypeName","room_type_name","guest_name","unassigned_date","book_nbr","fromDateTimeStamp","toDateTimeStamp","RT_ID","getRoomTypeId","updateAvailableRooms","addDefaultDateRange","roomName","assignable_units","Is_Fully_Available","Is_Not_Available","dates","convertedDates","categories","dateStr","iglTbaBookingViewCss","IglTbaBookingView","highlightSection","allRoomsList","toBeAssignedService","onSelectRoom","componentShouldUpdate","oldValue","propName","categoryIndex","eventIndex","handleHighlightAvailability","handleAssignUnit","assignEvent","addToBeAssignedEvent","assignRoomEvent","highlightToBeAssignedBookingEvent","filteredEvents","handleCloseAssignment","highlightBookingEvent","iglTbaCategoryViewCss","IglTbaCategoryView","handleAssignRoomEvent","eventDatas","assignUnitEvent","getEventView","categoriesData","onAssignRoomEvent","iglToBeAssignedCss","IglToBeAssigned","reArrangeData","updateCategories","categorisedRooms","unassignedDates","roomIds","firstKey","orderedDatesList","sort","gotoDate","showForDate","showDatesList","dateStamp","showUnassignedDate","getDay","dayOfWeek","getLocalizedDayOfWeek","weekday","toLocaleDateString","getToBeAssignedEntities","getCategoryView","onAssignUnitEvent","reduceAvailableUnitEvent","loadingMessage","Fragment","ordDate","RoomService","fetchData","iglooCalendarCss","IglooCalendar","visibleCalendarCells","roomService","scrollViewDragPos","onScrollContentMoveHandler","dx","dy","scrollContainer","scrollTop","scrollLeft","scrollViewDragging","onScrollContentMoveEndHandler","ticketChanged","setItem","ticket","initializeApp","baseurl","roomResp","setRoomsData","bookingResp","getLegendData","endingDate","toBeAssignedEvents","updateBookingEventsDateRange","startingDay","getStartingDateOfCalendar","scrollToElement","handledeleteEvent","roomServiceResp","roomsData","calendar_legends","getEndingDateOfCalendar","getLocalizedMonth","goToDate","topLeftCell","gotoDay","scrollTo","gotoRect","containerRect","topLeftCellRect","targetScrollClass","shouldRenderCalendarView","onOptionSelect","calendarElement","classList","toggle","showLegend","bookingItem","closeSideMenu","dragScrollContent","isPreventPageScroll","hasAncestorWithClass","calendarScrolling","leftSideMenuSize","maxWidth","leftX","rightX","cells","querySelectorAll","monthContainer","monthRect","titleElement","marginLeft","monthWidth","className","currentElement","parentElement","showBookingPopupEventDataHandler","updateEventDataHandler","bookedData","bookedEvent","dragOverEventDataHandler","containerDays","containerRooms","htmlElement","getAttribute","offsetTop","offsetHeight","highlightDragOver","hightLightElement","currentPosition","xElement","yElement","dragOverHighlightElement","moveBookingTo","onOptionEvent","onScroll","onCloseBookingWindow","onlineResources","isCSS","link","IrCommon","parseRefs","initializeStyles","hrefsChanged","extraResources","resources","appendTag","tagName","attributes","tag","selectorParts","attr","selector","existingTag","appendChild","rel","isJS","src","irDatePickerCss","IrDatePicker","dateRangeInput","$","daterangepicker","opens","maxSpan","separator","applyLabel","cancelLabel","fromLabel","toLabel","customRangeLabel","weekLabel","daysOfWeek","monthNames","firstDay","dateChanged","irInterceptorCss","IrInterceptor","successMessage","errorMessage","setupAxiosInterceptors","handleRequest","handleResponse","extractEndpoint","isHandledEndpoint","handledEndpoints","defaultMessage","showToast","handleCompletion","isShown","hideToastAfterDelay","isSuccess","delay","success","renderMessage","viewBox","xmlns","irTooltipCss","IrTooltip","toggleOpen","shouldOpen","tooltipTimeout","clearTimeout","onMouseEnter","onMouseLeave","innerHTML"],"sources":["src/components/igloo-calendar/igl-application-info/igl-application-info.css?tag=igl-application-info&encapsulation=scoped","src/components/igloo-calendar/igl-application-info/igl-application-info.tsx","node_modules/axios/lib/helpers/bind.js","node_modules/axios/lib/utils.js","node_modules/axios/lib/core/AxiosError.js","node_modules/axios/lib/helpers/null.js","node_modules/axios/lib/helpers/toFormData.js","node_modules/axios/lib/helpers/AxiosURLSearchParams.js","node_modules/axios/lib/helpers/buildURL.js","node_modules/axios/lib/core/InterceptorManager.js","node_modules/axios/lib/defaults/transitional.js","node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","node_modules/axios/lib/platform/browser/classes/FormData.js","node_modules/axios/lib/platform/browser/classes/Blob.js","node_modules/axios/lib/platform/browser/index.js","node_modules/axios/lib/helpers/toURLEncodedForm.js","node_modules/axios/lib/helpers/formDataToJSON.js","node_modules/axios/lib/defaults/index.js","node_modules/axios/lib/helpers/parseHeaders.js","node_modules/axios/lib/core/AxiosHeaders.js","node_modules/axios/lib/core/transformData.js","node_modules/axios/lib/cancel/isCancel.js","node_modules/axios/lib/cancel/CanceledError.js","node_modules/axios/lib/core/settle.js","node_modules/axios/lib/helpers/cookies.js","node_modules/axios/lib/helpers/isAbsoluteURL.js","node_modules/axios/lib/helpers/combineURLs.js","node_modules/axios/lib/core/buildFullPath.js","node_modules/axios/lib/helpers/isURLSameOrigin.js","node_modules/axios/lib/helpers/parseProtocol.js","node_modules/axios/lib/helpers/speedometer.js","node_modules/axios/lib/adapters/xhr.js","node_modules/axios/lib/adapters/adapters.js","node_modules/axios/lib/core/dispatchRequest.js","node_modules/axios/lib/core/mergeConfig.js","node_modules/axios/lib/env/data.js","node_modules/axios/lib/helpers/validator.js","node_modules/axios/lib/core/Axios.js","node_modules/axios/lib/cancel/CancelToken.js","node_modules/axios/lib/helpers/spread.js","node_modules/axios/lib/helpers/isAxiosError.js","node_modules/axios/lib/helpers/HttpStatusCode.js","node_modules/axios/lib/axios.js","src/utils/utils.ts","src/utils/booking.ts","src/services/booking.service.ts","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.css?tag=igl-block-dates-view&encapsulation=scoped","src/components/igloo-calendar/igl-block-dates-view/igl-block-dates-view.tsx","src/services/events.service.ts","src/components/igloo-calendar/igl-book-property/igl-book-property.css?tag=igl-book-property&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property.tsx","src/components/igloo-calendar/igl-booking-event/igl-booking-event.css?tag=igl-booking-event&encapsulation=scoped","src/components/igloo-calendar/igl-booking-event/igl-booking-event.tsx","src/components/igloo-calendar/igl-booking-event-hover/igl-booking-event-hover.css?tag=igl-booking-event-hover&encapsulation=scoped","src/components/igloo-calendar/igl-booking-event-hover/igl-booking-event-hover.tsx","src/components/igloo-calendar/igl-booking-room-rate-plan/igl-booking-room-rate-plan.css?tag=igl-booking-room-rate-plan&encapsulation=scoped","src/components/igloo-calendar/igl-booking-room-rate-plan/igl-booking-room-rate-plan.tsx","src/components/igloo-calendar/igl-booking-rooms/igl-booking-rooms.css?tag=igl-booking-rooms&encapsulation=scoped","src/components/igloo-calendar/igl-booking-rooms/igl-booking-rooms.tsx","src/components/igloo-calendar/igl-cal-body/igl-cal-body.css?tag=igl-cal-body&encapsulation=scoped","src/components/igloo-calendar/igl-cal-body/igl-cal-body.tsx","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.css?tag=igl-cal-footer&encapsulation=scoped","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.tsx","src/components/igloo-calendar/igl-cal-header/igl-cal-header.css?tag=igl-cal-header&encapsulation=scoped","src/components/igloo-calendar/igl-cal-header/igl-cal-header.tsx","src/components/igloo-calendar/igl-date-range/igl-date-range.css?tag=igl-date-range&encapsulation=scoped","src/components/igloo-calendar/igl-date-range/igl-date-range.tsx","src/components/igloo-calendar/igl-legends/igl-legends.css?tag=igl-legends&encapsulation=scoped","src/components/igloo-calendar/igl-legends/igl-legends.tsx","src/components/igloo-calendar/igl-pagetwo/igl-pagetwo.css?tag=igl-pagetwo&encapsulation=scoped","src/components/igloo-calendar/igl-pagetwo/igl-pagetwo.tsx","src/components/igloo-calendar/igl-property-booked-by/igl-property-booked-by.css?tag=igl-property-booked-by&encapsulation=scoped","src/components/igloo-calendar/igl-property-booked-by/igl-property-booked-by.tsx","src/services/toBeAssigned.service.ts","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-booking-view/igl-tba-booking-view.css?tag=igl-tba-booking-view&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-booking-view/igl-tba-booking-view.tsx","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-category-view/igl-tba-category-view.css?tag=igl-tba-category-view&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-tba-category-view/igl-tba-category-view.tsx","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.css?tag=igl-to-be-assigned&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.tsx","src/services/room.service.ts","src/components/igloo-calendar/igloo-calendar.css?tag=igloo-calendar&encapsulation=scoped","src/components/igloo-calendar/igloo-calendar.tsx","src/common/ir.common.resources.ts","src/components/ir-common/ir-common.tsx","src/components/ir-date-picker/ir-date-picker.css?tag=ir-date-picker&encapsulation=scoped","src/components/ir-date-picker/ir-date-picker.tsx","src/components/ir-interceptor/ir-interceptor.css?tag=ir-interceptor&encapsulation=scoped","src/components/ir-interceptor/ir-interceptor.tsx","src/components/ir-tooltip/ir-tooltip.css?tag=ir-tooltip&encapsulation=scoped","src/components/ir-tooltip/ir-tooltip.tsx"],"sourcesContent":["@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n","import { Component, Host, h, Prop, Event, EventEmitter, Watch, State } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\n\r\n@Component({\r\n  tag: 'igl-application-info',\r\n  styleUrl: 'igl-application-info.css',\r\n  scoped: true,\r\n})\r\nexport class IglApplicationInfo {\r\n  @Prop() guestInfo: { [key: string]: any };\r\n  @Prop({ reflect: true, mutable: true }) roomsList: { [key: string]: any }[] = [];\r\n  @Prop() guestRefKey: string;\r\n  @Prop() bedPreferenceType = [];\r\n  @Prop() selectedUnits: number[] = [];\r\n  @Prop() bookingType: string = 'PLUS_BOOKING';\r\n  @Prop() index: number;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() filterdRoomList = [];\r\n  private guestData: { [key: string]: any };\r\n\r\n  componentWillLoad() {\r\n    this.guestData = this.guestInfo ? { ...this.guestInfo } : {};\r\n    this.updateRoomList();\r\n  }\r\n  @Watch('selectedUnits')\r\n  async handleSelctedUnits() {\r\n    this.updateRoomList();\r\n  }\r\n  updateRoomList() {\r\n    const units = [...this.selectedUnits];\r\n    units[this.index] = -1;\r\n    this.filterdRoomList = this.roomsList.filter(e => !units.includes(e.id));\r\n  }\r\n  updateData() {\r\n    this.dataUpdateEvent.emit({\r\n      key: 'roomRatePlanUpdate',\r\n      guestRefKey: this.guestRefKey,\r\n      data: { ...this.guestData },\r\n    });\r\n  }\r\n\r\n  handleDataChange(key, value) {\r\n    this.guestData[key] = +value;\r\n    if (value === '') {\r\n      this.guestData['roomName'] = value;\r\n    }\r\n    if (key === 'roomId' && value !== '') {\r\n      this.guestData['roomName'] = this.filterdRoomList.find(room => room.id === +value).name || '';\r\n    }\r\n    this.updateData();\r\n  }\r\n\r\n  handleGuestNameChange(event) {\r\n    // console.log(\"On Guest name Change::\", event.target.value);\r\n    this.guestData.guestName = event.target.value;\r\n    this.updateData();\r\n  }\r\n\r\n  render() {\r\n    //console.log(this.guestInfo, this.roomsList);\r\n    return (\r\n      <Host>\r\n        <div class=\"text-left mt-1\">\r\n          <div class=\"ml-1 mb-1\">\r\n            {this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING' ? (\r\n              <span class=\"h5\">{this.guestInfo.roomCategoryName}</span>\r\n            ) : null}\r\n            <span class=\"ml-1 font-weight-bold\">\r\n              {this.guestInfo.ratePlanName.replace(this.guestInfo.roomCategoryName + '/', '')}\r\n              <ir-tooltip class=\"ml-1 mr-1\" message={this.guestInfo.cancelation + this.guestInfo.guarantee}></ir-tooltip>\r\n            </span>\r\n            <span>{this.guestInfo.adult_child_offering}</span>\r\n          </div>\r\n\r\n          <div class=\"row m-0 p-0 align-items-center\">\r\n            <div class=\"col-5\">\r\n              <input\r\n                id={v4()}\r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                placeholder=\"Guest first name & last name\"\r\n                name=\"guestName\"\r\n                onInput={event => this.handleGuestNameChange(event)}\r\n                required\r\n                value={this.guestData.guestName}\r\n              />\r\n            </div>\r\n            {this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' || this.bookingType === 'EDIT_BOOKING' ? (\r\n              <div class=\"col-2 p-0\">\r\n                <select class=\"form-control input-sm pr-0\" id={v4()} onChange={event => this.handleDataChange('roomId', (event.target as HTMLInputElement).value)}>\r\n                  <option value=\"\" selected={this.guestData.roomId === ''}>\r\n                    Assign units\r\n                  </option>\r\n                  {this.filterdRoomList.map(room => (\r\n                    <option value={room.id} selected={+this.guestData.roomId === room.id}>\r\n                      {room.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            ) : null}\r\n\r\n            <div class=\"col-3\">\r\n              <select class=\"form-control input-sm\" id={v4()} onChange={event => this.handleDataChange('preference', (event.target as HTMLInputElement).value)}>\r\n                <option value=\"\" selected={this.guestData.preference === ''}>\r\n                  No preference\r\n                </option>\r\n                {this.bedPreferenceType.map(data => (\r\n                  <option value={data.CODE_NAME} selected={this.guestData.preference === data.CODE_NAME}>\r\n                    {data.CODE_VALUE_EN}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div class=\"col-2\">${this.guestInfo.rate}</div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in val) && !(Symbol.iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[Symbol.iterator];\n\n  const iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  value = +value;\n  return Number.isFinite(value) ? value : defaultValue;\n}\n\nconst ALPHA = 'abcdefghijklmnopqrstuvwxyz'\n\nconst DIGIT = '0123456789';\n\nconst ALPHABET = {\n  DIGIT,\n  ALPHA,\n  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT\n}\n\nconst generateString = (size = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {\n  let str = '';\n  const {length} = alphabet;\n  while (size--) {\n    str += alphabet[Math.random() * length|0]\n  }\n\n  return str;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[Symbol.toStringTag] === 'FormData' && thing[Symbol.iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  ALPHABET,\n  generateString,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  response && (this.response = response);\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.response && this.response.status ? this.response.status : null\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?object} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst isStandardBrowserEnv = (() => {\n  let product;\n  if (typeof navigator !== 'undefined' && (\n    (product = navigator.product) === 'ReactNative' ||\n    product === 'NativeScript' ||\n    product === 'NS')\n  ) {\n    return false;\n  }\n\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n})();\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\n const isStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  isStandardBrowserEnv,\n  isStandardBrowserWebWorkerEnv,\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      if (!hasJSONContentType) {\n        return data;\n      }\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.isStandardBrowserEnv ?\n\n// Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        const cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n// Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })();\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.isStandardBrowserEnv ?\n\n// Standard browser envs have full support of the APIs needed to test\n// whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    const msie = /(msie|trident)/i.test(navigator.userAgent);\n    const urlParsingNode = document.createElement('a');\n    let originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      let href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n          urlParsingNode.pathname :\n          '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      const parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n          parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })();\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","'use strict';\n\nimport utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport cookies from './../helpers/cookies.js';\nimport buildURL from './../helpers/buildURL.js';\nimport buildFullPath from '../core/buildFullPath.js';\nimport isURLSameOrigin from './../helpers/isURLSameOrigin.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport speedometer from '../helpers/speedometer.js';\n\nfunction progressEventReducer(listener, isDownloadStream) {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e\n    };\n\n    data[isDownloadStream ? 'download' : 'upload'] = true;\n\n    listener(data);\n  };\n}\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    let requestData = config.data;\n    const requestHeaders = AxiosHeaders.from(config.headers).normalize();\n    const responseType = config.responseType;\n    let onCanceled;\n    function done() {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(onCanceled);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', onCanceled);\n      }\n    }\n\n    let contentType;\n\n    if (utils.isFormData(requestData)) {\n      if (platform.isStandardBrowserEnv || platform.isStandardBrowserWebWorkerEnv) {\n        requestHeaders.setContentType(false); // Let the browser set it\n      } else if(!requestHeaders.getContentType(/^\\s*multipart\\/form-data/)){\n        requestHeaders.setContentType('multipart/form-data'); // mobile/desktop app frameworks\n      } else if(utils.isString(contentType = requestHeaders.getContentType())){\n        // fix semicolon duplication issue for ReactNative FormData implementation\n        requestHeaders.setContentType(contentType.replace(/^\\s*(multipart\\/form-data);+/, '$1'))\n      }\n    }\n\n    let request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      const username = config.auth.username || '';\n      const password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.set('Authorization', 'Basic ' + btoa(username + ':' + password));\n    }\n\n    const fullPath = buildFullPath(config.baseURL, config.url);\n\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = config.transitional || transitionalDefaults;\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (platform.isStandardBrowserEnv) {\n      // Add xsrf header\n      // regarding CVE-2023-45857 config.withCredentials condition was removed temporarily\n      const xsrfValue = isURLSameOrigin(fullPath) && config.xsrfCookieName && cookies.read(config.xsrfCookieName);\n\n      if (xsrfValue) {\n        requestHeaders.set(config.xsrfHeaderName, xsrfValue);\n      }\n    }\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', progressEventReducer(config.onDownloadProgress, true));\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', progressEventReducer(config.onUploadProgress));\n    }\n\n    if (config.cancelToken || config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      config.cancelToken && config.cancelToken.subscribe(onCanceled);\n      if (config.signal) {\n        config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(fullPath);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? thing.toJSON() : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b) => mergeDeepProperties(headersToObject(a), headersToObject(b), true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","export const VERSION = \"1.6.0\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig;\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","import moment from \"moment\";\r\nimport IBooking, { ICountry, PhysicalRoomType } from \"../models/IBooking\";\r\n\r\nexport function convertDateToCustomFormat(\r\n  dayWithWeekday: string,\r\n  monthWithYear: string\r\n): string {\r\n  const months = [\r\n    \"JAN\",\r\n    \"FEB\",\r\n    \"MAR\",\r\n    \"APR\",\r\n    \"MAY\",\r\n    \"JUN\",\r\n    \"JUL\",\r\n    \"AUG\",\r\n    \"SEP\",\r\n    \"OCT\",\r\n    \"NOV\",\r\n    \"DEC\",\r\n  ];\r\n\r\n  const [_, day] = dayWithWeekday.split(\" \");\r\n  const [month, year] = monthWithYear.split(\" \");\r\n\r\n  const monthIndex = months.indexOf(month);\r\n  if (monthIndex !== -1) {\r\n    return `${day}_${monthIndex + 1}_${year}`;\r\n  } else {\r\n    throw new Error(\"Invalid Month\");\r\n  }\r\n}\r\n\r\nexport function convertDateToTime(\r\n  dayWithWeekday: string,\r\n  monthWithYear: string\r\n): number {\r\n  const months = [\r\n    \"JAN\",\r\n    \"FEB\",\r\n    \"MAR\",\r\n    \"APR\",\r\n    \"MAY\",\r\n    \"JUN\",\r\n    \"JUL\",\r\n    \"AUG\",\r\n    \"SEP\",\r\n    \"OCT\",\r\n    \"NOV\",\r\n    \"DEC\",\r\n  ];\r\n\r\n  const [_, day] = dayWithWeekday.split(\" \");\r\n  const [month, year] = monthWithYear.split(\" \");\r\n\r\n  const monthIndex = months.indexOf(month);\r\n  if (monthIndex !== -1) {\r\n    return new Date(`${year}-${monthIndex + 1}-${day}`).getTime();\r\n  } else {\r\n    throw new Error(\"Invalid Month\");\r\n  }\r\n}\r\nexport function dateDifference(FROM_DATE: string, TO_DATE: string): number {\r\n  const startDate = new Date(FROM_DATE);\r\n  const endDate = new Date(TO_DATE);\r\n  return Math.ceil(\r\n    (endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24)\r\n  );\r\n}\r\nexport const getBrowserLanguage = (): string => {\r\n  const defaultLang = \"en\";\r\n  const lang = navigator.language || defaultLang;\r\n  return lang.toUpperCase().split(\"-\")[0];\r\n};\r\n\r\nexport const transformBooking = (\r\n  physicalRoom: PhysicalRoomType[]\r\n): IBooking[] => {\r\n  const myBookings: IBooking[] = [];\r\n  physicalRoom.forEach((room) => {\r\n    Object.keys(room.calendar_cell).forEach((key) => {\r\n      if (room.calendar_cell[key].Is_Available === false) {\r\n        if (myBookings.find((b) => b.ID === room.id.toString())) {\r\n        } else {\r\n          //myBookings.push({})\r\n        }\r\n      }\r\n    });\r\n  });\r\n  return myBookings;\r\n};\r\n\r\nexport function dateToFormattedString(date: Date): string {\r\n  const year = date.getFullYear();\r\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\"); // +1 because months are 0-based in JS\r\n  const day = date.getDate().toString().padStart(2, \"0\");\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\nexport function formatLegendColors(legendData) {\r\n  let formattedLegendData: any = {};\r\n\r\n  const statusId = {\r\n    \"IN-HOUSE\": { id: 1, clsName: \"IN_HOUSE\" },\r\n    CONFIRMED: { id: 2, clsName: \"CONFIRMED\" },\r\n    \"PENDING-CONFIRMATION\": { id: 3, clsName: \"PENDING_CONFIRMATION\" },\r\n    \"SPLIT-UNIT\": { id: 4, clsName: \"SPLIT_UNIT\" },\r\n    \"CHECKED-IN\": { id: 5, clsName: \"CHECKED_IN\" },\r\n    \"CHECKED-OUT\": { id: 5, clsName: \"CHECKED_OUT\" },\r\n    BLOCKED: { id: 6, clsName: \"BLOCKED\" },\r\n    \"BLOCKED-WITH-DATES\": { id: 7, clsName: \"BLOCKED_WITH_DATES\" },\r\n    NOTES: { id: 8, clsName: \"NOTES\" },\r\n    \"OUTSTANDING-BALANCE\": { id: 9, clsName: \"OUTSTANDING_BALANCE\" },\r\n  };\r\n\r\n  legendData.forEach((legend) => {\r\n    formattedLegendData[legend.id] = legend;\r\n    formattedLegendData.statusId = statusId; // NOTE: This will overwrite the 'statusId' property with every iteration.\r\n  });\r\n\r\n  return formattedLegendData;\r\n}\r\nexport function getCurrencySymbol(currencyCode) {\r\n  const formatter = new Intl.NumberFormat(undefined, {\r\n    style: \"currency\",\r\n    currency: currencyCode,\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n  });\r\n  return formatter.format(0).replace(/[0-9]/g, \"\").trim();\r\n}\r\nexport const findCountry = (id: number, countries: ICountry[]): ICountry =>\r\n  countries.find((country) => country.id === id);\r\n\r\nexport function getReleaseHoursString(releaseDate: number) {\r\n  const dt = new Date();\r\n  const releaseAfterHours = releaseDate;\r\n\r\n  dt.setHours(dt.getHours() + releaseAfterHours, dt.getMinutes(), 0, 0);\r\n\r\n  return {\r\n    BLOCKED_TILL_DATE: dateToFormattedString(dt),\r\n    BLOCKED_TILL_HOUR: dt.getHours().toString(),\r\n    BLOCKED_TILL_MINUTE: dt.getMinutes().toString(),\r\n  };\r\n}\r\n\r\nexport function computeEndDate(\r\n  startDate: string,\r\n  numberOfDays: number\r\n): string {\r\n  const dateObj = moment(startDate, \"D_M_YYYY\");\r\n  dateObj.add(numberOfDays, \"days\");\r\n  return dateObj.format(\"YYYY-MM-DD\");\r\n}\r\n\r\nexport function convertDMYToISO(date: string) {\r\n  const dateObj = moment(date, \"D_M_YYYY\");\r\n  return dateObj.format(\"YYYY-MM-DD\");\r\n}\r\n","import axios from \"axios\";\r\nimport {\r\n  PhysicalRoomType,\r\n  MonthType,\r\n  CellType,\r\n  STATUS,\r\n} from \"../models/IBooking\";\r\nimport { dateDifference } from \"./utils\";\r\n\r\nexport async function getMyBookings(months: MonthType[]): Promise<any[]> {\r\n  const myBookings: any[] = [];\r\n  const stayStatus = await getStayStatus();\r\n  for (const month of months) {\r\n    for (const day of month.days) {\r\n      for (const room of day.room_types) {\r\n        assignBooking(room.physicalrooms, myBookings, stayStatus);\r\n      }\r\n    }\r\n  }\r\n\r\n  return myBookings;\r\n}\r\n\r\nfunction assignBooking(\r\n  physicalRoom: PhysicalRoomType[],\r\n  myBookings: any[],\r\n  stayStatus: { code: string; value: string }[]\r\n): void {\r\n  for (const room of physicalRoom) {\r\n    for (const key in room.calendar_cell) {\r\n      if (room.calendar_cell[key].Is_Available === false) {\r\n        addOrUpdateBooking(room.calendar_cell[key], myBookings, stayStatus);\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction formatName(firstName: string | null, lastName: string | null) {\r\n  if (firstName === null && lastName === null) return \"\";\r\n  if (lastName !== null) {\r\n    return `${firstName ?? \"\"} , ${lastName ?? \"\"}`;\r\n  }\r\n  return firstName;\r\n}\r\nasync function getStayStatus() {\r\n  try {\r\n    const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n    if (token) {\r\n      const { data } = await axios.post(\r\n        `/Get_Setup_Entries_By_TBL_NAME_Multi?Ticket=${token}`,\r\n        {\r\n          TBL_NAMES: [\"_STAY_STATUS\"],\r\n        }\r\n      );\r\n      return data.My_Result.map((d) => ({\r\n        code: d.CODE_NAME,\r\n        value: d.CODE_VALUE_EN,\r\n      }));\r\n    } else {\r\n      throw new Error(\"Invalid Token\");\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nconst status: Record<string, STATUS> = {\r\n  \"004\": \"BLOCKED\",\r\n  \"003\": \"BLOCKED-WITH-DATES\",\r\n  \"002\": \"BLOCKED\",\r\n  \"001\": \"IN-HOUSE\",\r\n};\r\n\r\nfunction getDefaultData(\r\n  cell: CellType,\r\n  stayStatus: { code: string; value: string }[]\r\n): any {\r\n  if ([\"003\", \"002\", \"004\"].includes(cell.STAY_STATUS_CODE)) {\r\n    //console.log(\"blocked cells\", cell);\r\n    return {\r\n      ID: cell.POOL,\r\n      NOTES: cell.My_Block_Info.NOTES,\r\n      BALANCE: \"\",\r\n      NAME:\r\n        stayStatus.find((st) => st.code === cell.STAY_STATUS_CODE).value || \"\",\r\n      RELEASE_AFTER_HOURS: cell.My_Block_Info.DESCRIPTION,\r\n      PR_ID: cell.My_Block_Info.pr_id,\r\n      ENTRY_DATE: cell.My_Block_Info.BLOCKED_TILL_DATE,\r\n      ENTRY_HOUR: cell.My_Block_Info.BLOCKED_TILL_HOUR,\r\n      ENTRY_MINUTE: cell.My_Block_Info.BLOCKED_TILL_MINUTE,\r\n      OPTIONAL_REASON: cell.My_Block_Info.NOTES,\r\n      FROM_DATE: cell.DATE,\r\n      TO_DATE: cell.DATE,\r\n      NO_OF_DAYS: 1,\r\n      STATUS: status[cell.STAY_STATUS_CODE],\r\n      POOL: cell.POOL,\r\n      STATUS_CODE: cell.STAY_STATUS_CODE,\r\n      OUT_OF_SERVICE: cell.STAY_STATUS_CODE === \"004\",\r\n      FROM_DATE_STR: cell.My_Block_Info.format.from_date,\r\n      TO_DATE_STR: cell.My_Block_Info.format.to_date,\r\n    };\r\n  }\r\n  //console.log(\"booked cells\", cell);\r\n  return {\r\n    ID: cell.POOL,\r\n    TO_DATE: cell.DATE,\r\n    FROM_DATE: cell.DATE,\r\n    NO_OF_DAYS: 1,\r\n    IS_EDITABLE: cell.booking.is_editable,\r\n    STATUS: status[cell.STAY_STATUS_CODE],\r\n    NAME: formatName(cell.room.guest.first_name, cell.room.guest.last_name),\r\n    PHONE: cell.booking.guest.mobile ?? \"\",\r\n    ENTRY_DATE: cell.booking.booked_on.date,\r\n    RATE: cell.room.total,\r\n    RATE_PLAN: cell.room.rateplan.name,\r\n    SPLIT_BOOKING: false,\r\n    RATE_PLAN_ID: cell.room.rateplan.id,\r\n    IDENTIFIER: cell.room.identifier,\r\n    RATE_TYPE: 1,\r\n    ADULTS_COUNT: cell.room.occupancy.adult_nbr,\r\n    CHILDREN_COUNT: cell.room.occupancy.children_nbr,\r\n    PR_ID: cell.pr_id,\r\n    POOL: cell.POOL,\r\n    GUEST: cell.booking.guest,\r\n    rooms: cell.booking.rooms,\r\n    BOOKING_NUMBER: cell.booking.booking_nbr,\r\n    cancelation: cell.room.rateplan.cancelation,\r\n    guarantee: cell.room.rateplan.guarantee,\r\n    TOTAL_PRICE: cell.room.total,\r\n    COUNTRY: cell.booking.guest.country_id,\r\n    FROM_DATE_STR: cell.booking.format.from_date,\r\n    TO_DATE_STR: cell.booking.format.to_date,\r\n    adult_child_offering:\r\n      cell.room.rateplan.selected_variation.adult_child_offering,\r\n  };\r\n}\r\n\r\nfunction updateBookingWithStayData(data: any, cell: CellType): any {\r\n  data.NO_OF_DAYS = dateDifference(data.FROM_DATE, cell.DATE);\r\n  data.TO_DATE = cell.DATE;\r\n\r\n  if (cell.booking) {\r\n    const { arrival } = cell.booking;\r\n    Object.assign(data, {\r\n      ARRIVAL_TIME: arrival.description,\r\n    });\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction addOrUpdateBooking(\r\n  cell: CellType,\r\n  myBookings: any[],\r\n  stayStatus: { code: string; value: string }[]\r\n): void {\r\n  const index = myBookings.findIndex((booking) => booking.POOL === cell.POOL);\r\n\r\n  if (index === -1) {\r\n    const newData = getDefaultData(cell, stayStatus);\r\n    myBookings.push(newData);\r\n  } else {\r\n    const updatedData = updateBookingWithStayData(myBookings[index], cell);\r\n    myBookings[index] = updatedData;\r\n  }\r\n}\r\n","import { DayData } from \"../models/DayType\";\r\nimport axios from \"axios\";\r\nimport {\r\n  BookingDetails,\r\n  IBlockUnit,\r\n  ICountry,\r\n  IEntries,\r\n  ISetupEntries,\r\n  MonthType,\r\n} from \"../models/IBooking\";\r\n\r\nimport {\r\n  convertDateToCustomFormat,\r\n  convertDateToTime,\r\n  dateToFormattedString,\r\n} from \"../utils/utils\";\r\nimport { getMyBookings } from \"../utils/booking\";\r\nimport { Day } from \"../models/booking.dto\";\r\n\r\nexport class BookingService {\r\n  public async getCalendarData(\r\n    propertyid: number,\r\n    from_date: string,\r\n    to_date: string\r\n  ): Promise<{ [key: string]: any }> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token !== null) {\r\n        const { data } = await axios.post(\r\n          `/Get_Exposed_Calendar?Ticket=${token}`,\r\n          {\r\n            propertyid,\r\n            from_date,\r\n            to_date,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        const months: MonthType[] = data.My_Result.months;\r\n        const customMonths: { daysCount: number; monthName: string }[] = [];\r\n        const myBooking = await getMyBookings(months);\r\n        const days: DayData[] = months\r\n          .map((month) => {\r\n            customMonths.push({\r\n              daysCount: month.days.length,\r\n              monthName: month.description,\r\n            });\r\n            return month.days.map((day) => ({\r\n              day: convertDateToCustomFormat(\r\n                day.description,\r\n                month.description\r\n              ),\r\n              currentDate: convertDateToTime(\r\n                day.description,\r\n                month.description\r\n              ),\r\n              dayDisplayName: day.description,\r\n              rate: day.room_types,\r\n              unassigned_units_nbr: day.unassigned_units_nbr,\r\n              occupancy: day.occupancy,\r\n            }));\r\n          })\r\n          .flat();\r\n\r\n        return Promise.resolve({\r\n          ExceptionCode: null,\r\n          ExceptionMsg: \"\",\r\n          My_Params_Get_Rooming_Data: {\r\n            AC_ID: propertyid,\r\n            FROM: data.My_Params_Get_Exposed_Calendar.from_date,\r\n            TO: data.My_Params_Get_Exposed_Calendar.to_date,\r\n          },\r\n          days,\r\n          months: customMonths,\r\n          myBookings: myBooking,\r\n          defaultMonths: months,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n  public async getBookingAvailability(\r\n    from_date: string,\r\n    to_date: string,\r\n    propertyid: number,\r\n    language: string,\r\n    room_type_ids: number[],\r\n    currency: { id: number; code: string }\r\n  ): Promise<BookingDetails> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Exposed_Booking_Availability?Ticket=${token}`,\r\n          {\r\n            propertyid,\r\n            from_date,\r\n            to_date,\r\n            adult_nbr: 2,\r\n            child_nbr: 0,\r\n            language,\r\n            currency_ref: currency.code,\r\n            room_type_ids,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data[\"My_Result\"];\r\n      } else {\r\n        throw new Error(\"Token doesn't exist\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async getCountries(language: string): Promise<ICountry[]> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Exposed_Countries?Ticket=${token}`,\r\n          {\r\n            language,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data.My_Result;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async fetchSetupEntries(): Promise<ISetupEntries> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Setup_Entries_By_TBL_NAME_MULTI?Ticket=${token}`,\r\n          {\r\n            TBL_NAMES: [\r\n              \"_ARRIVAL_TIME\",\r\n              \"_BOOKING_SOURCE\",\r\n              \"_RATE_PRICING_MODE\",\r\n              \"_BED_PREFERENCE_TYPE\",\r\n            ],\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        const res: any[] = data.My_Result;\r\n        return {\r\n          arrivalTime: res.filter((e) => e.TBL_NAME === \"_ARRIVAL_TIME\"),\r\n          bookingSource: res.filter((e) => e.TBL_NAME === \"_BOOKING_SOURCE\"),\r\n          ratePricingMode: res.filter(\r\n            (e) => e.TBL_NAME === \"_RATE_PRICING_MODE\"\r\n          ),\r\n          bedPreferenceType: res.filter(\r\n            (e) => e.TBL_NAME === \"_BED_PREFERENCE_TYPE\"\r\n          ),\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  public async getBlockedInfo(): Promise<IEntries[]> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Setup_Entries_By_TBL_NAME_MULTI?Ticket=${token}`,\r\n          { TBL_NAMES: [\"_CALENDAR_BLOCKED_TILL\"] }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data.My_Result;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async blockUnit(params: IBlockUnit) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Block_Exposed_Unit?Ticket=${token}`,\r\n          params\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async getUserInfo(email: string) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/GET_EXPOSED_GUEST?Ticket=${token}`,\r\n          {\r\n            email,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data.My_Result;\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  private generateDays(\r\n    from_date: string,\r\n    to_date: string,\r\n    amount: number\r\n  ): Day[] {\r\n    const startDate = new Date(from_date);\r\n    const endDate = new Date(to_date);\r\n    const days: Day[] = [];\r\n\r\n    while (startDate < endDate) {\r\n      days.push({\r\n        date: startDate.toISOString().split(\"T\")[0],\r\n        amount: amount,\r\n      });\r\n      startDate.setDate(startDate.getDate() + 1);\r\n    }\r\n\r\n    return days;\r\n  }\r\n\r\n  public async bookUser(\r\n    bookedByInfoData,\r\n    check_in: boolean,\r\n    fromDate: Date,\r\n    toDate: Date,\r\n    guestData,\r\n    totalNights: number,\r\n    source: { code: string; description: string },\r\n    propertyid: number,\r\n    currency: { id: number; code: string },\r\n    bookingNumber?: string,\r\n    defaultGuest?: any,\r\n    arrivalTime?: any,\r\n    pr_id?: number\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const fromDateStr = dateToFormattedString(fromDate);\r\n        const toDateStr = dateToFormattedString(toDate);\r\n        let guest: any = {\r\n          email: bookedByInfoData.email || null,\r\n          first_name: bookedByInfoData.firstName,\r\n          last_name: bookedByInfoData.lastName,\r\n          country_id: bookedByInfoData.countryId,\r\n          city: null,\r\n          mobile: bookedByInfoData.contactNumber,\r\n          address: \"\",\r\n          dob: null,\r\n          subscribe_to_news_letter: bookedByInfoData.emailGuest || false,\r\n        };\r\n        if (bookedByInfoData.id) {\r\n          guest = { ...guest, id: bookedByInfoData.id };\r\n        }\r\n        const body = {\r\n          assign_units: true,\r\n          check_in,\r\n          booking: {\r\n            booking_nbr: bookingNumber || \"\",\r\n            from_date: fromDateStr,\r\n            to_date: toDateStr,\r\n            remark: bookedByInfoData.message || null,\r\n            property: {\r\n              id: propertyid,\r\n            },\r\n            source,\r\n            currency,\r\n            arrival: {\r\n              code: arrivalTime || bookedByInfoData.selectedArrivalTime,\r\n            },\r\n            guest: defaultGuest || guest,\r\n            rooms: guestData.map((data) => ({\r\n              roomtype: {\r\n                id: data.roomCategoryId,\r\n                name: data.roomCategoryName,\r\n                physicalrooms: null,\r\n                rateplans: null,\r\n                availabilities: null,\r\n                inventory: data.inventory,\r\n                rate: data.rate / totalNights,\r\n              },\r\n              rateplan: {\r\n                id: data.ratePlanId,\r\n                name: data.ratePlanName,\r\n                rate_restrictions: null,\r\n                variations: null,\r\n                cancelation: data.cancelation,\r\n                guarantee: data.guarantee,\r\n              },\r\n              unit:\r\n                typeof pr_id === \"undefined\" && data.roomId === \"\"\r\n                  ? null\r\n                  : { id: pr_id || data.roomId },\r\n              occupancy: {\r\n                adult_nbr: data.adultCount,\r\n                children_nbr: data.childrenCount,\r\n                infant_nbr: null,\r\n              },\r\n              from_date: fromDateStr,\r\n              to_date: toDateStr,\r\n              notes: null,\r\n              days: this.generateDays(\r\n                fromDateStr,\r\n                toDateStr,\r\n                +data.rate / totalNights\r\n              ),\r\n              guest: {\r\n                email: null,\r\n                first_name: data.guestName,\r\n                last_name: null,\r\n                country_id: null,\r\n                city: null,\r\n                mobile: null,\r\n                address: null,\r\n                dob: null,\r\n                subscribe_to_news_letter: null,\r\n              },\r\n            })),\r\n          },\r\n        };\r\n        console.log(\"body\", body);\r\n\r\n        const { data } = await axios.post(\r\n          `/DoReservation?Ticket=${token}`,\r\n          body\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        console.log(data);\r\n        return data;\r\n      } else {\r\n        throw new Error(\"Invalid token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n:host .controlContainer {\r\n  width: 24px;\r\n}\r\n\r\n:host .checkBoxContainer input {\r\n  height: 1.2rem !important;\r\n  width: 30px;\r\n}\r\n\r\n.releaseTime {\r\n  padding-left: 5px;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  State,\r\n  Event,\r\n  EventEmitter,\r\n} from \"@stencil/core\";\r\nimport { BookingService } from \"../../../services/booking.service\";\r\nimport { IEntries } from \"../../../models/IBooking\";\r\n\r\n@Component({\r\n  tag: \"igl-block-dates-view\",\r\n  styleUrl: \"igl-block-dates-view.css\",\r\n  scoped: true,\r\n})\r\nexport class IglBlockDatesView {\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop() fromDate: string;\r\n  @Prop() toDate: string;\r\n  @Prop({ mutable: true }) entryDate: string;\r\n  @Prop() entryHour: number;\r\n  @Prop() entryMinute: number;\r\n  @State() renderAgain: boolean = false;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n\r\n  private blockDatesData: { [key: string]: any } = {\r\n    RELEASE_AFTER_HOURS: 0,\r\n    OPTIONAL_REASON: \"\",\r\n    OUT_OF_SERVICE: false,\r\n  }; // Change of property name might require updates in booking-event-hover\r\n  private releaseList: IEntries[] = [];\r\n  private bookingService: BookingService = new BookingService();\r\n  async componentWillLoad() {\r\n    try {\r\n      this.releaseList = await this.bookingService.getBlockedInfo();\r\n      if (this.defaultData) {\r\n        this.blockDatesData = { ...this.defaultData };\r\n      } else {\r\n        this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(\r\n          this.releaseList[0].CODE_NAME\r\n        );\r\n        this.emitData();\r\n      }\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  handleOptionalReason(event) {\r\n    this.blockDatesData.OPTIONAL_REASON = event.target.value;\r\n    this.emitData();\r\n  }\r\n\r\n  handleReleaseAfterChange(evt) {\r\n    if (this.entryDate) this.entryDate = undefined;\r\n    this.blockDatesData.RELEASE_AFTER_HOURS = parseInt(evt.target.value);\r\n    this.renderPage();\r\n    this.emitData();\r\n  }\r\n\r\n  emitData() {\r\n    this.dataUpdateEvent.emit({\r\n      key: \"blockDatesData\",\r\n      data: { ...this.blockDatesData },\r\n    });\r\n  }\r\n\r\n  getReleaseHoursString() {\r\n    // console.log(\"entry date\", this.entryDate);\r\n    // console.log(\"blocked date data\", this.blockDatesData);\r\n    let dt = this.entryDate ? new Date(this.entryDate) : new Date();\r\n    if (this.entryDate && this.entryHour && this.entryMinute) {\r\n      dt.setHours(this.entryHour, this.entryMinute, 0, 0);\r\n    } else {\r\n      dt.setHours(\r\n        dt.getHours() + this.blockDatesData.RELEASE_AFTER_HOURS,\r\n        dt.getMinutes(),\r\n        0,\r\n        0\r\n      );\r\n    }\r\n\r\n    return (\r\n      dt.toLocaleString(\"default\", { month: \"short\" }) +\r\n      \" \" +\r\n      dt.getDate() +\r\n      \", \" +\r\n      dt.getHours() +\r\n      \":\" +\r\n      dt.getMinutes()\r\n    );\r\n  }\r\n\r\n  handleOutOfService(evt) {\r\n    this.blockDatesData.OUT_OF_SERVICE = evt.target.checked;\r\n    if (this.blockDatesData.OUT_OF_SERVICE) {\r\n      this.blockDatesData.OPTIONAL_REASON = \"\";\r\n      this.blockDatesData.RELEASE_AFTER_HOURS = 0;\r\n    }\r\n    this.renderPage();\r\n    this.emitData();\r\n  }\r\n\r\n  renderPage() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"row m-0 p-0 ml-1 mb-1\">\r\n          <div class=\"col-12 text-left p-0\">\r\n            <span class=\"pr-1\">\r\n              <span class=\"text-bold-700 font-medium-1\">From: </span>\r\n              {this.fromDate}\r\n            </span>{\" \"}\r\n            <span class=\"text-bold-700 font-medium-1\">To: </span>\r\n            {this.toDate}\r\n          </div>\r\n        </div>\r\n        <div class=\"col mb-1 text-left\">\r\n          <div class=\"mb-1\">\r\n            <label class=\"p-0 text-bold-700 font-medium-1 m-0 align-middle\">\r\n              Reason:\r\n            </label>\r\n            <div class=\"p-0 m-0 pr-1 controlContainer checkBoxContainer d-inline-block align-middle\">\r\n              <input\r\n                class=\"form-control\"\r\n                type=\"checkbox\"\r\n                checked={this.blockDatesData.OUT_OF_SERVICE}\r\n                id=\"userinput6\"\r\n                onChange={(event) => this.handleOutOfService(event)}\r\n              />\r\n            </div>{\" \"}\r\n            <span class=\"align-middle\">Out of service</span>\r\n          </div>\r\n          {!this.blockDatesData.OUT_OF_SERVICE ? (\r\n            <div>\r\n              <div class=\"mb-1 d-flex w-100 align-items-center\">\r\n                <span class=\"align-middle\">or </span>\r\n                <div class=\"d-inline-flex col pr-0 align-middle\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"Optional reason\"\r\n                    id=\"optReason\"\r\n                    value={this.blockDatesData.OPTIONAL_REASON}\r\n                    onInput={(event) => this.handleOptionalReason(event)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"mb-1 w-100 pr-0 \">\r\n                <span class=\"text-bold-700 font-medium-1\">\r\n                  Automatic release in:{\" \"}\r\n                </span>\r\n                <div class=\"d-inline-block\">\r\n                  <select\r\n                    class=\"form-control input-sm\"\r\n                    id=\"zSmallSelect\"\r\n                    onChange={(evt) => this.handleReleaseAfterChange(evt)}\r\n                  >\r\n                    {this.releaseList.map((releaseItem) => (\r\n                      <option\r\n                        value={+releaseItem.CODE_NAME}\r\n                        selected={\r\n                          this.blockDatesData.RELEASE_AFTER_HOURS ==\r\n                          +releaseItem.CODE_NAME\r\n                        }\r\n                      >\r\n                        {releaseItem.CODE_VALUE_EN}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                {this.blockDatesData.RELEASE_AFTER_HOURS ? (\r\n                  <div class=\"d-inline-block releaseTime\">\r\n                    <em>on {this.getReleaseHoursString()}</em>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import axios from \"axios\";\r\nimport { BookingService } from \"./booking.service\";\r\nimport { getReleaseHoursString } from \"../utils/utils\";\r\n\r\nexport class EventsService {\r\n  private readonly bookingService: BookingService = new BookingService();\r\n\r\n  async reallocateEvent(\r\n    pool: string,\r\n    destination_pr_id: number,\r\n    from_date: string,\r\n    to_date: string\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        console.log(pool, destination_pr_id, from_date, to_date);\r\n        const { data } = await axios.post(\r\n          `/ReAllocate_Exposed_Room?Ticket=${token}`,\r\n          { pool, destination_pr_id, from_date, to_date }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        console.log(data);\r\n        return data;\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  public async deleteEvent(POOL: string) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/UnBlock_Exposed_Unit?Ticket=${token}`,\r\n          {\r\n            POOL,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data.My_Result;\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n\r\n  public async updateBlockedEvent(bookingEvent: any) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const releaseData = getReleaseHoursString(\r\n          +bookingEvent.RELEASE_AFTER_HOURS\r\n        );\r\n        await this.deleteEvent(bookingEvent.POOL);\r\n        await this.bookingService.blockUnit({\r\n          from_date: this.formatDate(bookingEvent.FROM_DATE),\r\n          to_date: this.formatDate(bookingEvent.TO_DATE),\r\n          pr_id: bookingEvent.PR_ID,\r\n          STAY_STATUS_CODE: bookingEvent.OUT_OF_SERVICE\r\n            ? \"004\"\r\n            : bookingEvent.RELEASE_AFTER_HOURS === 0\r\n            ? \"002\"\r\n            : \"003\",\r\n          DESCRIPTION: bookingEvent.RELEASE_AFTER_HOURS || \"\",\r\n          NOTES: bookingEvent.OPTIONAL_REASON || \"\",\r\n          ...releaseData,\r\n        });\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  private formatDate(date: string) {\r\n    return date.split(\"/\").join(\"-\");\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 30;\r\n  /* min-width: 450px; */\r\n}\r\n\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n\r\n.background-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.formContainer {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n}\r\n\r\n.sideWindow {\r\n  /* display: grid; */\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  background-color: #ffffff;\r\n}\r\n\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n\r\nbutton:not(:disabled),\r\n[type=\"button\"]:not(:disabled) {\r\n  cursor: pointer;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, State, h, Listen } from '@stencil/core';\r\nimport { BookingService } from '../../../services/booking.service';\r\nimport { dateToFormattedString, getReleaseHoursString } from '../../../utils/utils';\r\nimport { IEntries } from '../../../models/IBooking';\r\nimport { IPageTwoDataUpdateProps, PageTwoButtonsTypes } from '../../../models/models';\r\nimport { EventsService } from '../../../services/events.service';\r\n\r\n@Component({\r\n  tag: 'igl-book-property',\r\n  styleUrls: ['igl-book-property.css'],\r\n  scoped: true,\r\n})\r\nexport class IglBookProperty {\r\n  @Prop() propertyid: number;\r\n  @Prop() language: string;\r\n  @Prop() countryNodeList;\r\n  @Prop() currency: { id: number; code: string };\r\n  @Prop({ reflect: true, mutable: true }) bookingData: { [key: string]: any };\r\n  @Event() closeBookingWindow: EventEmitter<{ [key: string]: any }>;\r\n  @State() sourceOption: { code: string; description: string } = {\r\n    code: '',\r\n    description: '',\r\n  };\r\n  @State() splitBookingId: any = '';\r\n  @State() renderAgain: boolean = false;\r\n  @State() message: string = '';\r\n  @State() isLoading: string;\r\n  @State() isConvertedBooking: boolean;\r\n  @State() dateRangeData: { [key: string]: any };\r\n  @State() selectedUnits: { [key: string]: any } = {};\r\n  private PAGE_ZERO: string = 'page_zero';\r\n  private PAGE_ONE: string = 'page_one';\r\n  private PAGE_TWO: string = 'page_two';\r\n  private PAGE_BLOCK_DATES: string = 'page_block_date';\r\n  private page: string;\r\n  private showSplitBookingOption: boolean = false;\r\n  private sourceOptions: { id: string; value: string }[] = [];\r\n  private selectedRooms: { [key: string]: any } = {};\r\n  private guestData: { [key: string]: any }[] = [];\r\n  private bookedByInfoData: { [key: string]: any } = {};\r\n  private blockDatesData: { [key: string]: any } = {};\r\n  private ratePricingMode: IEntries[] = [];\r\n  private bedPreferenceType: IEntries[] = [];\r\n  private bookingService: BookingService = new BookingService();\r\n  private eventsService = new EventsService();\r\n\r\n  async componentWillLoad() {\r\n    if (!this.bookingData.defaultDateRange) {\r\n      return;\r\n    }\r\n\r\n    this.dateRangeData = { ...this.bookingData.defaultDateRange };\r\n\r\n    try {\r\n      const setupEntries = await this.fetchSetupEntries();\r\n      this.setSourceOptions(setupEntries.bookingSource);\r\n      this.setOtherProperties(setupEntries);\r\n\r\n      if (this.isEventType('EDIT_BOOKING')) {\r\n        this.setEditingRoomInfo();\r\n      }\r\n      //this.bookingData.roomsInfo = [];\r\n      this.page = this.getDefaultPage();\r\n    } catch (error) {\r\n      console.error('Error fetching setup entries:', error);\r\n    }\r\n  }\r\n\r\n  async fetchSetupEntries() {\r\n    return await this.bookingService.fetchSetupEntries();\r\n  }\r\n\r\n  setSourceOptions(bookingSource: any[]) {\r\n    this.sourceOptions = bookingSource.map(source => ({\r\n      id: source.CODE_NAME,\r\n      value: source.CODE_VALUE_EN,\r\n    }));\r\n    this.sourceOption = {\r\n      code: bookingSource[0].CODE_NAME,\r\n      description: bookingSource[0].CODE_VALUE_EN,\r\n    };\r\n  }\r\n\r\n  setOtherProperties(res: any) {\r\n    this.ratePricingMode = res.ratePricingMode;\r\n    this.bookedByInfoData.arrivalTime = res.arrivalTime;\r\n    this.bedPreferenceType = res.bedPreferenceType;\r\n  }\r\n\r\n  setEditingRoomInfo() {\r\n    const category = this.getRoomCategoryByRoomId(this.getBookingPreferenceRoomId());\r\n    const key = `c_${category.id}`;\r\n    this.selectedRooms[key] = {\r\n      [`p_${this.bookingData.RATE_PLAN_ID}`]: {\r\n        adultCount: this.bookingData.ADULTS_COUNT,\r\n        rate: this.bookingData.RATE,\r\n        rateType: this.bookingData.RATE_TYPE,\r\n        ratePlanId: this.bookingData.RATE_PLAN_ID,\r\n        roomCategoryId: category.id,\r\n        roomCategoryName: category.name,\r\n        totalRooms: 1,\r\n        ratePlanName: this.bookingData.RATE_PLAN,\r\n        roomId: this.bookingData.PR_ID,\r\n        guestName: this.bookingData.NAME,\r\n        cancelation: this.bookingData.cancelation,\r\n        guarantee: this.bookingData.guarantee,\r\n        adult_child_offering: this.bookingData.adult_child_offering,\r\n      },\r\n    };\r\n  }\r\n\r\n  async initializeBookingAvailability(from_date: string, to_date: string) {\r\n    try {\r\n      const room_type_ids = this.bookingData.roomsInfo.map(room => room.id);\r\n      const data = await this.bookingService.getBookingAvailability(from_date, to_date, this.propertyid, this.language, room_type_ids, this.currency);\r\n      this.message = '';\r\n      this.bookingData = {\r\n        ...this.bookingData,\r\n        roomsInfo: data.roomtypes,\r\n      };\r\n      this.message = data.tax_statement;\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n  getRoomCategoryByRoomId(roomId) {\r\n    return this.bookingData.roomsInfo?.find(roomCategory => {\r\n      return roomCategory.physicalrooms.find(room => room.id === +roomId);\r\n    });\r\n  }\r\n\r\n  getDefaultPage() {\r\n    if (this.bookingData.event_type === 'BLOCK_DATES') {\r\n      return this.PAGE_BLOCK_DATES;\r\n    } else if (this.bookingData.event_type === 'SPLIT_BOOKING') {\r\n      this.showSplitBookingOption = true;\r\n      return this.PAGE_ONE;\r\n    } else {\r\n      // if( || this.bookingData.event_type === \"NEW_BOOKING\")\r\n      return this.PAGE_ONE;\r\n    }\r\n  }\r\n\r\n  getBookingPreferenceRoomId() {\r\n    //console.log(this.bookingData);\r\n    return (this.bookingData.hasOwnProperty('PR_ID') && this.bookingData.PR_ID) || null;\r\n  }\r\n\r\n  getSplitBookings() {\r\n    return (this.bookingData.hasOwnProperty('splitBookingEvents') && this.bookingData.splitBookingEvents) || [];\r\n  }\r\n  isEventType(key: string) {\r\n    return this.bookingData.event_type === key;\r\n  }\r\n\r\n  closeWindow() {\r\n    this.isConvertedBooking = false;\r\n    this.closeBookingWindow.emit();\r\n  }\r\n  isEditBooking() {\r\n    return this.bookingData.event_type === 'EDIT_BOOKING';\r\n  }\r\n  onRoomsDataUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    const { data, key, changedKey } = event.detail;\r\n    const roomCategoryKey = this.getRoomCategoryKey(data.roomCategoryId);\r\n    const ratePlanKey = this.getRatePlanKey(data.ratePlanId);\r\n\r\n    if (this.shouldClearData(key)) {\r\n      this.selectedRooms = {};\r\n    }\r\n\r\n    this.initializeRoomCategoryIfNeeded(roomCategoryKey);\r\n\r\n    if (this.isEditBooking()) {\r\n      if (changedKey === 'rate') {\r\n        if (this.selectedRooms.hasOwnProperty(roomCategoryKey) && this.selectedRooms[roomCategoryKey].hasOwnProperty(ratePlanKey)) {\r\n          this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data);\r\n        }\r\n      } else {\r\n        if (changedKey !== 'rateType') {\r\n          if (changedKey === 'adult_child_offering') {\r\n            if (this.selectedRooms.hasOwnProperty(roomCategoryKey) && this.selectedRooms[roomCategoryKey].hasOwnProperty(ratePlanKey)) {\r\n              this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data);\r\n            }\r\n          } else {\r\n            this.applyBookingEditToSelectedRoom(roomCategoryKey, ratePlanKey, data);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      this.setSelectedRoomData(roomCategoryKey, ratePlanKey, data);\r\n    }\r\n\r\n    this.cleanupEmptyData(roomCategoryKey, ratePlanKey);\r\n    this.renderPage();\r\n  }\r\n  getRoomCategoryKey(roomCategoryId: string): string {\r\n    return `c_${roomCategoryId}`;\r\n  }\r\n\r\n  getRatePlanKey(ratePlanId: string): string {\r\n    return `p_${ratePlanId}`;\r\n  }\r\n\r\n  shouldClearData(key: string | undefined): boolean {\r\n    return key === 'clearData' || this.isEditBookingEvent(key);\r\n  }\r\n\r\n  isEditBookingEvent(key: string | undefined): boolean {\r\n    return key === 'EDIT_BOOKING';\r\n  }\r\n\r\n  initializeRoomCategoryIfNeeded(roomCategoryKey: string) {\r\n    if (!this.selectedRooms[roomCategoryKey]) {\r\n      this.selectedRooms[roomCategoryKey] = {};\r\n    }\r\n  }\r\n\r\n  setSelectedRoomData(roomCategoryKey: string, ratePlanKey: string, data: any) {\r\n    this.selectedRooms[roomCategoryKey][ratePlanKey] = data;\r\n  }\r\n\r\n  hasSelectedRoomData(roomCategoryKey: string, ratePlanKey: string): boolean {\r\n    return this.selectedRooms[roomCategoryKey] && this.selectedRooms[roomCategoryKey][ratePlanKey];\r\n  }\r\n\r\n  cleanupEmptyData(roomCategoryKey: string, ratePlanKey: string) {\r\n    if (this.selectedRooms[roomCategoryKey][ratePlanKey]?.totalRooms === 0) {\r\n      delete this.selectedRooms[roomCategoryKey][ratePlanKey];\r\n    }\r\n\r\n    if (!Object.keys(this.selectedRooms[roomCategoryKey]).length) {\r\n      delete this.selectedRooms[roomCategoryKey];\r\n    }\r\n  }\r\n\r\n  applyBookingEditToSelectedRoom(roomCategoryKey: string, ratePlanKey: string, data) {\r\n    this.selectedRooms = {\r\n      [roomCategoryKey]: {\r\n        [ratePlanKey]: {\r\n          ...data,\r\n          guestName: this.bookingData.NAME,\r\n          roomId: this.bookingData.PR_ID,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  onDateRangeSelect(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    if (opt.key === 'selectedDateRange') {\r\n      this.dateRangeData = opt.data;\r\n      this.bookingData.defaultDateRange.fromDate = new Date(this.dateRangeData.fromDate);\r\n      this.bookingData.defaultDateRange.toDate = new Date(this.dateRangeData.toDate);\r\n      this.initializeBookingAvailability(dateToFormattedString(this.bookingData.defaultDateRange.fromDate), dateToFormattedString(this.bookingData.defaultDateRange.toDate));\r\n    }\r\n  }\r\n\r\n  handleBlockDateUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.blockDatesData = opt.data;\r\n    //console.log(\"blocked date data\", this.blockDatesData);\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    //console.log(event);\r\n  }\r\n\r\n  handleGuestInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    const opt = event.detail;\r\n    if (opt.guestRefKey) {\r\n      if (this.isEventType('BAR_BOOKING')) {\r\n        this.guestData[opt.guestRefKey] = {\r\n          ...opt.data,\r\n          roomId: this.bookingData.PR_ID,\r\n        };\r\n      } else this.guestData[opt.guestRefKey] = opt.data;\r\n    }\r\n  }\r\n\r\n  handleBookedByInfoUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.bookedByInfoData = opt.value.data;\r\n  }\r\n\r\n  isActiveSouceOption(srcIndex) {\r\n    return this.sourceOption === srcIndex ? 'active' : '';\r\n  }\r\n\r\n  handleSourceDropDown(selectedOption) {\r\n    this.sourceOption = {\r\n      code: selectedOption.target.value,\r\n      description: this.sourceOptions.find(opt => opt.id === selectedOption.target.value.toString()).value || '',\r\n    };\r\n  }\r\n\r\n  renderPage() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  @Listen('gotoSplitPageTwoEvent', { target: 'window' })\r\n  gotoSplitPageTwo() {\r\n    this.gotoPage(this.PAGE_TWO);\r\n  }\r\n\r\n  gotoPage(gotoPage) {\r\n    this.page = gotoPage;\r\n    this.renderPage();\r\n  }\r\n\r\n  showSplitBooking() {\r\n    this.showSplitBookingOption = true;\r\n    this.gotoPage(this.PAGE_ONE);\r\n  }\r\n\r\n  getSelectedSplitBookingName(bookingId) {\r\n    let splitBooking = this.getSplitBookings().find(booking => booking.ID === bookingId);\r\n    return splitBooking.ID + ' ' + splitBooking.NAME;\r\n  }\r\n\r\n  isActiveSplitBookingOption(spltIndex) {\r\n    return this.splitBookingId === spltIndex ? 'active' : '';\r\n  }\r\n\r\n  handleSplitBookingDropDown(evt) {\r\n    this.splitBookingId = evt.target.value;\r\n  }\r\n\r\n  isPageZero() {\r\n    return this.page === this.PAGE_ZERO;\r\n  }\r\n\r\n  isPageOne() {\r\n    return this.page === this.PAGE_ONE;\r\n  }\r\n\r\n  isPageTwo() {\r\n    return this.page === this.PAGE_TWO;\r\n  }\r\n\r\n  isPageBlockDates() {\r\n    return this.page === this.PAGE_BLOCK_DATES;\r\n  }\r\n\r\n  getSplitBookingList() {\r\n    return (\r\n      <fieldset class=\"form-group col-12 text-left\">\r\n        <label class=\"h5\">To booking# </label>\r\n        <div class=\"btn-group ml-1\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.handleSplitBookingDropDown(evt)}>\r\n            <option value=\"\" selected={this.splitBookingId != ''}>\r\n              Select\r\n            </option>\r\n            {this.getSplitBookings().map(option => (\r\n              <option value={option.ID} selected={this.splitBookingId === option.ID}>\r\n                {this.getSelectedSplitBookingName(option.ID)}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {/* <button type=\"button\" class=\"btn btn-primary dropdown-toggle\" name=\"sourceType\" data-toggle=\"dropdown\">\r\n                    {this.splitBookingId!=null ? this.getSelectedSplitBookingName(this.splitBookingId) : \"Select\"}\r\n                </button>\r\n                <div class=\"dropdown-menu\">\r\n                  {this.getSplitBookings().map((option) => <button class={`dropdown-item ${this.isActiveSplitBookingOption(option.ID)}`}  type=\"button\" onClick={() => this.handleSplitBookingDropDown(option.ID)}>{this.getSelectedSplitBookingName(option.ID)}</button>)}\r\n                </div> */}\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n\r\n  getSourceNode() {\r\n    return (\r\n      <fieldset class=\"form-group col-12 text-left\">\r\n        <label class=\"h5\">Source </label>\r\n        <div class=\"btn-group ml-1\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.handleSourceDropDown(evt)}>\r\n            {this.sourceOptions.map(option => (\r\n              <option value={option.id} selected={this.sourceOption.code === option.id}>\r\n                {option.value}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n\r\n  getRoomsListFromCategoryId(categoryId) {\r\n    let category = this.bookingData.roomsInfo?.find(category => category.id === categoryId);\r\n    return (category && category.physicalrooms) || [];\r\n  }\r\n\r\n  getPageZeroView() {\r\n    return (\r\n      <div class=\"scrollContent\">\r\n        <div class=\"row p-0 mb-1\">\r\n          <div class=\"col-md-3 col-sm-12 mb-1\">\r\n            <button class=\"btn btn-primary full-width\" onClick={() => this.gotoPage(this.PAGE_ONE)}>\r\n              Create New Booking\r\n            </button>\r\n          </div>\r\n          {this.getSplitBookings().length ? (\r\n            <div class=\"col-md-3 col-sm-12 mb-1\">\r\n              <button class=\"btn btn-primary full-width\" onClick={() => this.showSplitBooking()}>\r\n                Add Unit to Existing Booking\r\n              </button>\r\n            </div>\r\n          ) : null}\r\n          <div class=\"col-md-3 col-sm-12 mb-1\">\r\n            <button class=\"btn btn-primary full-width\" onClick={() => this.gotoPage(this.PAGE_BLOCK_DATES)}>\r\n              Block Dates\r\n            </button>\r\n          </div>\r\n          <div class=\"col-md-3 col-sm-12 mb-1\">\r\n            <button class=\"btn btn-secondary full-width\" onClick={() => this.closeWindow()}>\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getPageOneView() {\r\n    return (\r\n      <div class=\"scrollContent\">\r\n        {this.showSplitBookingOption ? this.getSplitBookingList() : this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM') ? null : this.getSourceNode()}\r\n\r\n        <fieldset class=\"form-group col-12 row\">\r\n          <igl-date-range message={this.message} defaultData={this.bookingData.defaultDateRange} onDateSelectEvent={evt => this.onDateRangeSelect(evt)}></igl-date-range>\r\n        </fieldset>\r\n\r\n        <div class=\"col text-left\">\r\n          {this.bookingData.roomsInfo?.map(roomInfo => (\r\n            <igl-booking-rooms\r\n              currency={this.currency}\r\n              ratePricingMode={this.ratePricingMode}\r\n              dateDifference={this.dateRangeData.dateDifference}\r\n              bookingType={this.bookingData.event_type}\r\n              roomTypeData={roomInfo}\r\n              class=\"mt-2 mb-1\"\r\n              defaultData={this.selectedRooms['c_' + roomInfo.id]}\r\n              onDataUpdateEvent={evt => this.onRoomsDataUpdate(evt)}\r\n            ></igl-booking-rooms>\r\n          ))}\r\n        </div>\r\n\r\n        {this.isEventType('EDIT_BOOKING') ? (\r\n          <div class=\"row p-0 mb-1 mt-2\">\r\n            <div class=\"col-6\">\r\n              <button class=\"btn btn-secondary full-width\" onClick={() => this.closeWindow()}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <button class=\"btn btn-primary full-width\" onClick={() => this.gotoPage(this.PAGE_TWO)}>\r\n                Next &gt;&gt;\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div class=\"row p-0 mb-1 mt-2\">\r\n            <div class={this.bookingData.event_type === 'PLUS_BOOKING' || this.isEventType('ADD_ROOM') ? 'col-6' : 'col-12'}>\r\n              <button class=\"btn btn-secondary full-width\" onClick={() => this.closeWindow()}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n            {this.bookingData.event_type === 'PLUS_BOOKING' || this.isEventType('ADD_ROOM') ? (\r\n              <div class=\"col-6\">\r\n                <button class=\"btn btn-primary full-width\" disabled={Object.keys(this.selectedRooms).length === 0} onClick={() => this.gotoPage(this.PAGE_TWO)}>\r\n                  Next &gt;&gt;\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getPageBlockDatesView() {\r\n    return (\r\n      <div class=\"scrollContent blockDatesForm\">\r\n        <igl-block-dates-view\r\n          fromDate={this.dateRangeData.fromDateStr}\r\n          toDate={this.dateRangeData.toDateStr}\r\n          entryDate={this.bookingData.ENTRY_DATE}\r\n          onDataUpdateEvent={event => this.handleBlockDateUpdate(event)}\r\n        ></igl-block-dates-view>\r\n        <div class=\"row p-0 mb-1 mt-2\">\r\n          <div class=\"col-6\">\r\n            <button class=\"btn btn-secondary full-width\" onClick={() => this.closeWindow()}>\r\n              Cancel\r\n            </button>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <button class=\"btn btn-primary full-width\" onClick={() => this.handleBlockDate()}>\r\n              Block dates\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleButtonClicked(\r\n    event: CustomEvent<{\r\n      key: PageTwoButtonsTypes;\r\n      data?: CustomEvent;\r\n    }>,\r\n  ) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    switch (event.detail.key) {\r\n      case 'save':\r\n        this.bookUser(false);\r\n        break;\r\n      case 'cancel':\r\n        this.closeWindow();\r\n        break;\r\n      case 'back':\r\n        this.gotoPage(this.PAGE_ONE);\r\n        break;\r\n      case 'book':\r\n        this.bookUser(false);\r\n        break;\r\n      case 'bookAndCheckIn':\r\n        this.bookUser(true);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  handlePageTwoDataUpdateEvent(event: CustomEvent<IPageTwoDataUpdateProps>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    if (event.detail.key === 'propertyBookedBy') {\r\n      this.handleBookedByInfoUpdate(event);\r\n    } else {\r\n      this.handleGuestInfoUpdate(event);\r\n    }\r\n  }\r\n  async handleBlockDate() {\r\n    const releaseData = getReleaseHoursString(+this.blockDatesData.RELEASE_AFTER_HOURS);\r\n    await this.bookingService.blockUnit({\r\n      from_date: dateToFormattedString(this.bookingData.defaultDateRange.fromDate),\r\n      to_date: dateToFormattedString(this.bookingData.defaultDateRange.toDate),\r\n      NOTES: this.blockDatesData.OPTIONAL_REASON || '',\r\n      pr_id: this.bookingData.PR_ID.toString(),\r\n      STAY_STATUS_CODE: this.blockDatesData.OUT_OF_SERVICE ? '004' : this.blockDatesData.RELEASE_AFTER_HOURS === 0 ? '002' : '003',\r\n      DESCRIPTION: this.blockDatesData.RELEASE_AFTER_HOURS || '',\r\n      ...releaseData,\r\n    });\r\n    this.closeWindow();\r\n    window.location.reload();\r\n  }\r\n\r\n  async bookUser(check_in: boolean) {\r\n    this.setLoadingState(check_in);\r\n\r\n    try {\r\n      if (['003', '002', '004'].includes(this.bookingData.STATUS_CODE)) {\r\n        this.eventsService.deleteEvent(this.bookingData.POOL);\r\n      }\r\n\r\n      const arrivalTime = this.isEventType('EDIT_BOOKING') ? this.getArrivalTimeForBooking() : '';\r\n      const pr_id = this.isEventType('BAR_BOOKING') ? this.bookingData.PR_ID : undefined;\r\n      const booking_nbr = this.isEventType('EDIT_BOOKING') ? this.bookingData.BOOKING_NUMBER : undefined;\r\n      await this.bookingService.bookUser(\r\n        this.bookedByInfoData,\r\n        check_in,\r\n        this.bookingData.defaultDateRange.fromDate,\r\n        this.bookingData.defaultDateRange.toDate,\r\n        this.guestData,\r\n        this.dateRangeData.dateDifference,\r\n        this.sourceOption,\r\n        this.propertyid,\r\n        this.currency,\r\n        booking_nbr,\r\n        this.bookingData.GUEST,\r\n        arrivalTime,\r\n        pr_id,\r\n      );\r\n      window.location.reload();\r\n      //console.log(\"booking data \", this.bookingData);\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    } finally {\r\n      this.resetLoadingState();\r\n    }\r\n  }\r\n\r\n  setLoadingState(assign_units: boolean) {\r\n    if (this.isEventType('EDIT_BOOKING')) {\r\n      this.isLoading = 'save';\r\n    } else {\r\n      this.isLoading = assign_units ? 'bookAndCheckIn' : 'book';\r\n    }\r\n  }\r\n\r\n  getArrivalTimeForBooking(): string {\r\n    return this.bookedByInfoData.arrivalTime.find(e => e.CODE_VALUE_EN === this.bookingData.ARRIVAL_TIME).CODE_NAME;\r\n  }\r\n\r\n  resetLoadingState() {\r\n    this.isLoading = '';\r\n    setTimeout(() => {\r\n      this.closeWindow();\r\n    }, 100);\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"background-overlay\" onClick={() => this.closeWindow()}></div>\r\n        <div class={'sideWindow ' + (this.isPageBlockDates() ? 'col-sm-12 col-md-6 col-lg-5 col-xl-4' : 'col-sm-12 col-md-11 col-lg-9 col-xl-8')}>\r\n          <div class=\"card mb-0 shadow-none p-0\">\r\n            <div class=\"card-header\">\r\n              <h3 class=\"card-title text-left pb-1 font-medium-2\">{this.isPageBlockDates() ? this.bookingData.BLOCK_DATES_TITLE : this.bookingData.TITLE}</h3>\r\n              <button type=\"button\" class=\"close close-icon\" onClick={() => this.closeWindow()}>\r\n                <i class=\"ft-x\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {this.isPageZero() && this.getPageZeroView()}\r\n\r\n          {this.isPageOne() && this.getPageOneView()}\r\n\r\n          {this.isPageTwo() && (\r\n            <igl-pagetwo\r\n              selectedGuestData={this.guestData}\r\n              countryNodeList={this.countryNodeList}\r\n              isLoading={this.isLoading}\r\n              selectedRooms={this.selectedRooms}\r\n              bedPreferenceType={this.bedPreferenceType}\r\n              dateRangeData={this.dateRangeData}\r\n              bookingData={this.bookingData}\r\n              showSplitBookingOption={this.showSplitBookingOption}\r\n              language={this.language}\r\n              bookedByInfoData={this.bookedByInfoData}\r\n              isEditOrAddRoomEvent={this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM')}\r\n              onDataUpdateEvent={event => this.handlePageTwoDataUpdateEvent(event)}\r\n              onButtonClicked={event => this.handleButtonClicked(event)}\r\n            ></igl-pagetwo>\r\n          )}\r\n\r\n          {this.isPageBlockDates() ? this.getPageBlockDatesView() : null}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: absolute;\r\n}\r\n\r\n.bookingEventBase {\r\n  position: absolute;\r\n  background-color: rgb(49, 190, 241);\r\n  width: 100%;\r\n  height: 100%;\r\n  transform: skewX(-22deg);\r\n}\r\n\r\n.bookingEventHiddenBase {\r\n  position: absolute;\r\n  top: 0;\r\n  left: -4px;\r\n  width: calc(100% + 8);\r\n}\r\n\r\n.bookingEventDragHandle {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 15px;\r\n  height: 100%;\r\n  opacity: 0.1;\r\n  background-color: rgba(0, 0, 0, 0.15);\r\n  transform: skewX(-22deg);\r\n  /* display: none; */\r\n  cursor: pointer;\r\n}\r\n\r\n.splitBooking {\r\n  border-right: 2px solid #000000;\r\n}\r\n\r\n:host:hover .bookingEventDragHandle {\r\n  display: block;\r\n  opacity: 1;\r\n}\r\n\r\n:host.newEvent:hover .bookingEventDragHandle {\r\n  display: none;\r\n  opacity: 1;\r\n}\r\n\r\n.leftSide {\r\n  left: 0;\r\n}\r\n\r\n.rightSide {\r\n  right: 0;\r\n}\r\n\r\n.bookingEventTitle {\r\n  color: #fff;\r\n  font-size: 0.8em;\r\n  position: relative;\r\n  max-width: calc(100% - 10px);\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  top: 2px;\r\n  left: 5px;\r\n}\r\n\r\n.legend_circle {\r\n  border-radius: 100%;\r\n  width: 10px;\r\n  height: 10px;\r\n  margin: 3px 3px 3px 2px;\r\n  border: 1px solid #fff;\r\n}\r\n\r\n.noteIcon {\r\n  position: absolute;\r\n  bottom: -8px;\r\n  left: 2px;\r\n}\r\n\r\n.balanceIcon {\r\n  position: absolute;\r\n  top: -8px;\r\n  right: 2px;\r\n}\r\n","import {\r\n  Component,\r\n  Element,\r\n  Event,\r\n  EventEmitter,\r\n  Host,\r\n  Listen,\r\n  Prop,\r\n  State,\r\n  h,\r\n} from \"@stencil/core\";\r\nimport { EventsService } from \"../../../services/events.service\";\r\n\r\n@Component({\r\n  tag: \"igl-booking-event\",\r\n  styleUrl: \"igl-booking-event.css\",\r\n  scoped: true,\r\n})\r\nexport class IglBookingEvent {\r\n  @Element() private element: HTMLElement;\r\n  @Prop() currency;\r\n  @Event({ bubbles: true, composed: true }) hideBubbleInfo: EventEmitter;\r\n\r\n  @Event() updateEventData: EventEmitter;\r\n  @Event() dragOverEventData: EventEmitter;\r\n\r\n  @Prop() bookingEvent: { [key: string]: any };\r\n  @Prop() allBookingEvents: { [key: string]: any } = [];\r\n  @Prop() countryNodeList;\r\n\r\n  @State() renderElement: boolean = false;\r\n  @State() position: { [key: string]: any };\r\n\r\n  dayWidth: number = 0;\r\n  eventSpace: number = 8;\r\n  vertSpace: number = 10;\r\n\r\n  /* show bubble */\r\n  private showInfoPopup: boolean = false;\r\n  private bubbleInfoTopSide: boolean = false;\r\n  private eventsService = new EventsService();\r\n  /* Resize props */\r\n  resizeSide: string = \"\";\r\n  isDragging: boolean = false;\r\n  initialX: number;\r\n  initialY: number;\r\n  currentX: number;\r\n  currentY: number;\r\n  initialWidth: number;\r\n  initialLeft: number;\r\n  finalWidth: number;\r\n  dragInitPos: { [key: string]: any };\r\n  dragEndPos: { [key: string]: any };\r\n  elementRect: { [key: string]: any };\r\n  isTouchStart: boolean;\r\n  moveDiffereneX: number;\r\n  moveDiffereneY: number;\r\n\r\n  handleMouseMoveBind = this.handleMouseMove.bind(this);\r\n  handleMouseUpBind = this.handleMouseUp.bind(this);\r\n  handleClickOutsideBind = this.handleClickOutside.bind(this);\r\n\r\n  componentWillLoad() {\r\n    window.addEventListener(\"click\", this.handleClickOutsideBind);\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (this.isNewEvent()) {\r\n      if (!this.bookingEvent.hideBubble) {\r\n        /* auto matically open the popup, calling the method shows bubble either top or bottom based on available space. */\r\n        setTimeout(() => {\r\n          this.showEventInfo(true);\r\n          this.renderAgain();\r\n        }, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    window.removeEventListener(\"click\", this.handleClickOutsideBind);\r\n  }\r\n\r\n  @Listen(\"click\", { target: \"window\" })\r\n  handleClickOutside(event: Event) {\r\n    const clickedElement = event.target as HTMLElement;\r\n    // Check if the clicked element is not within the target div\r\n    if (!this.element.contains(clickedElement)) {\r\n      // The click occurred outside the target div\r\n      this.showEventInfo(false);\r\n    }\r\n  }\r\n\r\n  @Listen(\"hideBubbleInfo\", { target: \"window\" })\r\n  hideBubbleInfoPopup(event: CustomEvent) {\r\n    if (\r\n      event.detail.currentInfoBubbleId != this.getBookingId() ||\r\n      (event.detail.key === \"hidebubble\" &&\r\n        event.detail.currentInfoBubbleId === this.getBookingId())\r\n    ) {\r\n      this.showInfoPopup = false;\r\n      this.renderAgain();\r\n    }\r\n  }\r\n\r\n  @Listen(\"moveBookingTo\", { target: \"window\" })\r\n  async moveBookingToHandler(event: CustomEvent) {\r\n    try {\r\n      if (event.detail.bookingId !== this.getBookingId()) {\r\n        this.showEventInfo(false);\r\n        return;\r\n      }\r\n      // event.detail.fromRoomId === this.getBookedRoomId() && ()\r\n      if (\r\n        event.detail.moveToDay === \"revert\" ||\r\n        event.detail.toRoomId === \"revert\"\r\n      ) {\r\n        event.detail.moveToDay = this.bookingEvent.FROM_DATE;\r\n        event.detail.toRoomId = event.detail.fromRoomId;\r\n        if (\r\n          this.isTouchStart &&\r\n          this.moveDiffereneX <= 5 &&\r\n          this.moveDiffereneY <= 5\r\n        ) {\r\n          this.showEventInfo(true);\r\n        }\r\n      } else {\r\n        if (\r\n          this.isTouchStart &&\r\n          this.moveDiffereneX <= 5 &&\r\n          this.moveDiffereneY <= 5\r\n        ) {\r\n          this.showEventInfo(true);\r\n        } else {\r\n          const { pool, from_date, to_date, toRoomId } = event.detail as any;\r\n          console.log(pool, from_date, to_date, toRoomId);\r\n          const result = await this.eventsService.reallocateEvent(\r\n            pool,\r\n            toRoomId,\r\n            from_date,\r\n            to_date\r\n          );\r\n          this.bookingEvent.POOL = result.My_Result.POOL;\r\n          console.log(event.detail);\r\n          console.log(\"calll update here\");\r\n        }\r\n      }\r\n\r\n      if (event.detail.fromRoomId === this.getBookedRoomId()) {\r\n        // Temporarily set to some other title and revert it.. as refresh issue is happening when there minimum change in top / left.\r\n        // this.onMoveUpdateBooking({ toRoomId: \"X\", moveToDay: \"01_01_2023\" });\r\n        // this.renderAgain();\r\n        // setTimeout(() => {\r\n        // }, 20);\r\n        this.onMoveUpdateBooking(event.detail);\r\n        this.renderAgain();\r\n      }\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n\r\n  renderAgain() {\r\n    this.renderElement = !this.renderElement;\r\n  }\r\n\r\n  getUniqueId() {\r\n    return new Date().getTime();\r\n  }\r\n\r\n  onMoveUpdateBooking(data) {\r\n    this.bookingEvent.PR_ID = data.toRoomId;\r\n    this.bookingEvent.FROM_DATE = data.moveToDay.split(\"_\").reverse().join(\"/\");\r\n    let tempDate = new Date(this.bookingEvent.FROM_DATE);\r\n    tempDate.setDate(tempDate.getDate() + this.getStayDays());\r\n    this.bookingEvent.TO_DATE =\r\n      tempDate.getFullYear() +\r\n      \"/\" +\r\n      (tempDate.getMonth() + 1) +\r\n      \"/\" +\r\n      tempDate.getDate();\r\n  }\r\n  /* End of Resize props */\r\n\r\n  isSplitBooking() {\r\n    return !!this.bookingEvent.SPLIT_BOOKING;\r\n  }\r\n\r\n  isNewEvent() {\r\n    return this.getBookingId() === \"NEW_TEMP_EVENT\";\r\n  }\r\n\r\n  isHighlightEventType() {\r\n    return this.getEventType() === \"HIGH_LIGHT\";\r\n  }\r\n\r\n  getBookingId() {\r\n    return this.bookingEvent.ID;\r\n  }\r\n\r\n  getBookingStatus() {\r\n    return this.bookingEvent.STATUS;\r\n  }\r\n\r\n  getBookedBy() {\r\n    return this.bookingEvent.NAME;\r\n  }\r\n\r\n  getBookedRoomId() {\r\n    return this.bookingEvent.PR_ID;\r\n  }\r\n\r\n  getEventStartingDate() {\r\n    return new Date(this.bookingEvent.FROM_DATE);\r\n  }\r\n\r\n  getEventEndingDate() {\r\n    return new Date(this.bookingEvent.TO_DATE);\r\n  }\r\n\r\n  getEventType() {\r\n    return this.bookingEvent.event_type;\r\n  }\r\n\r\n  getEventLegend() {\r\n    // console.log(this.getBookingStatus());\r\n    let status =\r\n      this.bookingEvent?.legendData.statusId[this.getBookingStatus()];\r\n    let orderRide = this.isNewEvent() ? { color: \"#f9f9c9\" } : {};\r\n    return {\r\n      ...this.bookingEvent?.legendData[status.id],\r\n      ...status,\r\n      ...orderRide,\r\n    };\r\n  }\r\n\r\n  getLegendOfStatus(aStatusId) {\r\n    // console.log(aStatusId);\r\n    let status = this.bookingEvent?.legendData.statusId[aStatusId];\r\n    return { ...this.bookingEvent.legendData[status.id], ...status };\r\n  }\r\n\r\n  getNoteNode() {\r\n    if (this.bookingEvent.NOTES || this.bookingEvent.INTERNAL_NOTE) {\r\n      return this.getLegendOfStatus(\"NOTES\");\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getBalanceNode() {\r\n    if (this.bookingEvent.BALANCE) {\r\n      return this.getLegendOfStatus(\"OUTSTANDING-BALANCE\");\r\n    }\r\n    return null;\r\n  }\r\n\r\n  setStayDays(aStayDays: number) {\r\n    this.bookingEvent.NO_OF_DAYS = aStayDays;\r\n    this.renderAgain();\r\n    // this.updateData({id: this.getBookedRoomId(), data: { NO_OF_DAYS: aStayDays }});\r\n  }\r\n\r\n  getStayDays() {\r\n    return this.bookingEvent.NO_OF_DAYS;\r\n  }\r\n\r\n  getPosition() {\r\n    let startingDate = this.getEventStartingDate();\r\n    let startingCellClass =\r\n      \".room_\" +\r\n      this.getBookedRoomId() +\r\n      \"_\" +\r\n      startingDate.getDate() +\r\n      \"_\" +\r\n      (startingDate.getMonth() + 1) +\r\n      \"_\" +\r\n      startingDate.getFullYear();\r\n    let bodyContainer = document.querySelector(\".bodyContainer\");\r\n    let startingCell = document.querySelector(startingCellClass);\r\n    let pos = { top: \"0\", left: \"0\", width: \"0\", height: \"20px\" };\r\n    if (\r\n      startingCell &&\r\n      bodyContainer &&\r\n      startingCell.getBoundingClientRect() &&\r\n      bodyContainer.getBoundingClientRect()\r\n    ) {\r\n      let bodyContainerRect = bodyContainer.getBoundingClientRect();\r\n      let boundingRect = startingCell.getBoundingClientRect();\r\n      this.dayWidth = this.dayWidth || boundingRect.width;\r\n      pos.top =\r\n        boundingRect.top +\r\n        boundingRect.height / 2 -\r\n        this.vertSpace -\r\n        bodyContainerRect.top +\r\n        \"px\";\r\n      pos.left =\r\n        boundingRect.left +\r\n        this.dayWidth / 2 +\r\n        this.eventSpace / 2 -\r\n        bodyContainerRect.left +\r\n        \"px\";\r\n      pos.width = this.getStayDays() * this.dayWidth - this.eventSpace + \"px\";\r\n    } else {\r\n      console.log(\"Locating event cell failed \", startingCellClass);\r\n    }\r\n    //console.log(pos);\r\n    return pos;\r\n  }\r\n\r\n  getNumber(aData) {\r\n    return aData ? parseFloat(aData) : 0;\r\n  }\r\n\r\n  startDragging(event: any, side: string) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    event.stopImmediatePropagation();\r\n\r\n    if (this.isNewEvent() || this.isHighlightEventType()) {\r\n      return null;\r\n    }\r\n\r\n    this.resizeSide = side;\r\n    this.isDragging = true;\r\n\r\n    this.showEventInfo(false); // Hide bubble;\r\n\r\n    if (side === \"move\") {\r\n      this.initialX = event.clientX || event.touches[0].clientX;\r\n      this.initialY = event.clientY || event.touches[0].clientY;\r\n      this.elementRect = this.element.getBoundingClientRect();\r\n      const offsetX = 0; //this.initialX - this.elementRect.left - 18;\r\n      const offsetY = 0; // this.initialY - this.elementRect.top - (this.elementRect.height/2);\r\n      this.dragInitPos = {\r\n        id: this.getBookingId(),\r\n        fromRoomId: this.getBookedRoomId(),\r\n        top: this.getNumber(this.element.style.top) + offsetY,\r\n        left: this.getNumber(this.element.style.left) + offsetX,\r\n      };\r\n      this.dragInitPos.x = this.dragInitPos.left; // + 18;\r\n      this.dragInitPos.y = this.dragInitPos.top; // + (this.elementRect.height/2);\r\n      this.dragEndPos = { ...this.dragInitPos };\r\n      this.element.style.top = `${this.dragInitPos.top}px`;\r\n      this.element.style.left = `${this.dragInitPos.left}px`;\r\n      this.isTouchStart = true; // !!(event.touches && event.touches.length);\r\n      this.dragOverEventData.emit({\r\n        id: \"CALCULATE_DRAG_OVER_BOUNDS\",\r\n        data: this.dragInitPos,\r\n      });\r\n    } else {\r\n      this.initialWidth = this.element.offsetWidth;\r\n      this.initialLeft = this.element.offsetLeft;\r\n      this.initialX = event.clientX || event.touches[0].clientX;\r\n      this.dragOverEventData.emit({\r\n        id: \"CALCULATE_DRAG_OVER_BOUNDS\",\r\n        data: {\r\n          id: this.getBookingId(),\r\n          fromRoomId: this.getBookedRoomId(),\r\n          top: this.getNumber(this.element.style.top),\r\n          left: this.initialLeft,\r\n          x: this.initialX,\r\n          y: event.clientY || event.touches[0].clientY,\r\n        },\r\n      });\r\n    }\r\n\r\n    document.addEventListener(\"mousemove\", this.handleMouseMoveBind);\r\n    document.addEventListener(\"touchmove\", this.handleMouseMoveBind);\r\n    document.addEventListener(\"pointermove\", this.handleMouseMoveBind);\r\n\r\n    document.addEventListener(\"mouseup\", this.handleMouseUpBind);\r\n    document.addEventListener(\"touchup\", this.handleMouseUpBind);\r\n    document.addEventListener(\"pointerup\", this.handleMouseUpBind);\r\n  }\r\n\r\n  handleMouseMove(event: any) {\r\n    if (this.isDragging) {\r\n      this.currentX = event.clientX || event.touches[0].clientX;\r\n      let distanceX = this.currentX - this.initialX;\r\n      if (this.resizeSide === \"move\") {\r\n        this.currentY = event.clientY || event.touches[0].clientY;\r\n        let distanceY = this.currentY - this.initialY;\r\n        this.element.style.top = `${this.dragInitPos.top + distanceY}px`;\r\n        this.element.style.left = `${this.dragInitPos.left + distanceX}px`;\r\n        this.dragEndPos = {\r\n          id: this.getBookingId(),\r\n          fromRoomId: this.getBookedRoomId(),\r\n          top: this.dragInitPos.top + distanceY,\r\n          left: this.dragInitPos.left + distanceX,\r\n        };\r\n        this.dragEndPos.x = this.dragEndPos.left; // + 18;\r\n        this.dragEndPos.y = this.dragEndPos.top; // + (this.elementRect.height/2);\r\n        this.dragOverEventData.emit({ id: \"DRAG_OVER\", data: this.dragEndPos });\r\n      } else {\r\n        let newWidth = this.initialWidth;\r\n        if (this.resizeSide == \"rightSide\") {\r\n          newWidth = this.initialWidth + distanceX;\r\n          newWidth = Math.min(\r\n            newWidth,\r\n            this.initialX + this.element.offsetWidth\r\n          );\r\n          newWidth = Math.max(this.dayWidth - this.eventSpace, newWidth);\r\n          this.element.style.width = `${newWidth}px`;\r\n        } else if (this.resizeSide == \"leftSide\") {\r\n          newWidth = Math.max(\r\n            this.dayWidth - this.eventSpace,\r\n            this.initialWidth - distanceX\r\n          );\r\n          let newLeft = this.initialLeft + (this.initialWidth - newWidth);\r\n          this.element.style.left = `${newLeft}px`;\r\n          this.element.style.width = `${newWidth}px`;\r\n        }\r\n        this.finalWidth = newWidth;\r\n      }\r\n    } else {\r\n      console.log(\"still mouse move listening...\");\r\n    }\r\n  }\r\n\r\n  handleMouseUp() {\r\n    if (this.isDragging) {\r\n      if (this.resizeSide === \"move\") {\r\n        // console.log(\"Initial X::\"+this.dragInitPos.x);\r\n        // console.log(\"Initial Y::\"+this.dragInitPos.y);\r\n        // console.log(\"End X::\"+this.dragEndPos.x);\r\n        // console.log(\"End Y::\"+this.dragEndPos.y);\r\n        if (this.isTouchStart) {\r\n          this.moveDiffereneX = Math.abs(\r\n            this.dragEndPos.x - this.dragInitPos.x\r\n          );\r\n          this.moveDiffereneY = Math.abs(\r\n            this.dragEndPos.y - this.dragInitPos.y\r\n          );\r\n        }\r\n        this.dragOverEventData.emit({\r\n          id: \"DRAG_OVER_END\",\r\n          data: {\r\n            ...this.dragEndPos,\r\n            pool: this.bookingEvent.POOL,\r\n            nbOfDays: this.bookingEvent.NO_OF_DAYS,\r\n          },\r\n        });\r\n      } else {\r\n        let numberOfDays = Math.round(this.finalWidth / this.dayWidth);\r\n        let initialStayDays = this.getStayDays();\r\n        if (initialStayDays != numberOfDays) {\r\n          this.setStayDays(numberOfDays);\r\n          if (this.resizeSide == \"leftSide\") {\r\n            this.element.style.left = `${\r\n              this.initialLeft +\r\n              (initialStayDays - numberOfDays) * this.dayWidth\r\n            }px`;\r\n            // set FROM_DATE = TO_DATE - numberOfDays\r\n          } else {\r\n            // set TO_DATE = FROM_DATE + numberOfDays\r\n          }\r\n          this.dragOverEventData.emit({\r\n            id: \"STRETCH_OVER_END\",\r\n            data: {\r\n              id: this.getBookingId(),\r\n              fromRoomId: +this.getBookedRoomId(),\r\n              x: +this.element.style.left.replace(\"px\", \"\"),\r\n              y: +this.element.style.top.replace(\"px\", \"\"),\r\n              pool: this.bookingEvent.POOL,\r\n              nbOfDays: this.bookingEvent.NO_OF_DAYS,\r\n            },\r\n          });\r\n          this.element.style.width = `${\r\n            numberOfDays * this.dayWidth - this.eventSpace\r\n          }px`;\r\n        } else {\r\n          this.element.style.left = `${this.initialLeft}px`;\r\n          this.element.style.width = `${\r\n            numberOfDays * this.dayWidth - this.eventSpace\r\n          }px`;\r\n        }\r\n      }\r\n    } else {\r\n      console.log(\"still mouse up listening...\");\r\n    }\r\n    this.isDragging = false;\r\n    document.removeEventListener(\"mousemove\", this.handleMouseMoveBind);\r\n    document.removeEventListener(\"touchmove\", this.handleMouseMoveBind);\r\n    document.removeEventListener(\"pointermove\", this.handleMouseMoveBind);\r\n\r\n    document.removeEventListener(\"mouseup\", this.handleMouseUpBind);\r\n    document.removeEventListener(\"touchup\", this.handleMouseUpBind);\r\n    document.removeEventListener(\"pointerup\", this.handleMouseUpBind);\r\n  }\r\n\r\n  updateData(data: any) {\r\n    this.updateEventData.emit(data);\r\n  }\r\n\r\n  showEventInfo(showInfo) {\r\n    if (this.isHighlightEventType() || this.bookingEvent.hideBubble) {\r\n      return null;\r\n    }\r\n\r\n    if (showInfo) {\r\n      // Calculate which side we need to show the bubble, top side or bottom.\r\n      let bodyContainer = document.querySelector(\".calendarScrollContainer\");\r\n      let bodyContainerRect: { [key: string]: any } =\r\n        bodyContainer.getBoundingClientRect();\r\n      let elementRect: { [key: string]: any } =\r\n        this.element.getBoundingClientRect();\r\n      let midPoint = bodyContainerRect.height / 2 + bodyContainerRect.top;\r\n      // let topDifference = elementRect.top - bodyContainerRect.top;\r\n      // let bottomDifference = bodyContainerRect.bottom - elementRect.bottom;\r\n\r\n      if (elementRect.top < midPoint) {\r\n        this.bubbleInfoTopSide = false;\r\n      } else {\r\n        this.bubbleInfoTopSide = true;\r\n      }\r\n    }\r\n\r\n    // showInfo = true;\r\n    if (showInfo) {\r\n      this.hideBubbleInfo.emit({\r\n        key: \"hidePopup\",\r\n        currentInfoBubbleId: this.getBookingId(),\r\n      });\r\n    }\r\n    this.showInfoPopup = showInfo;\r\n    this.renderAgain();\r\n  }\r\n\r\n  render() {\r\n    // onMouseLeave={()=>this.showEventInfo(false)}\r\n    let legend = this.getEventLegend();\r\n    let noteNode = this.getNoteNode();\r\n    let balanceNode = this.getBalanceNode();\r\n\r\n    return (\r\n      <Host\r\n        class={`bookingEvent ${\r\n          this.isNewEvent() || this.isHighlightEventType() ? \"newEvent\" : \"\"\r\n        } ${legend.clsName}`}\r\n        style={this.getPosition()}\r\n        id={\"event_\" + this.getBookingId()}\r\n      >\r\n        {/* onMouseOver={() =>this.showEventInfo(true)}  */}\r\n        <div\r\n          class={`bookingEventBase  ${\r\n            this.isSplitBooking() ? \"splitBooking\" : \"\"\r\n          }`}\r\n          style={{ backgroundColor: legend.color }}\r\n          onTouchStart={(event) => this.startDragging(event, \"move\")}\r\n          onMouseDown={(event) => this.startDragging(event, \"move\")}\r\n        ></div>\r\n        {noteNode ? (\r\n          <div\r\n            class=\"legend_circle noteIcon\"\r\n            style={{ backgroundColor: noteNode.color }}\r\n          ></div>\r\n        ) : null}\r\n        {balanceNode ? (\r\n          <div\r\n            class=\"legend_circle balanceIcon\"\r\n            style={{ backgroundColor: balanceNode.color }}\r\n          ></div>\r\n        ) : null}\r\n        {/* onMouseOver={() => this.showEventInfo(true)}  */}\r\n        <div\r\n          class=\"bookingEventTitle\"\r\n          onTouchStart={(event) => this.startDragging(event, \"move\")}\r\n          onMouseDown={(event) => this.startDragging(event, \"move\")}\r\n        >\r\n          {this.getBookedBy()}\r\n        </div>\r\n        <div\r\n          class=\"bookingEventDragHandle leftSide\"\r\n          onTouchStart={(event) => this.startDragging(event, \"leftSide\")}\r\n          onMouseDown={(event) => this.startDragging(event, \"leftSide\")}\r\n        ></div>\r\n        <div\r\n          class=\"bookingEventDragHandle rightSide\"\r\n          onTouchStart={(event) => this.startDragging(event, \"rightSide\")}\r\n          onMouseDown={(event) => this.startDragging(event, \"rightSide\")}\r\n        ></div>\r\n        {this.showInfoPopup ? (\r\n          <igl-booking-event-hover\r\n            countryNodeList={this.countryNodeList}\r\n            currency={this.currency}\r\n            class=\"top\"\r\n            bookingEvent={this.bookingEvent}\r\n            bubbleInfoTop={this.bubbleInfoTopSide}\r\n          ></igl-booking-event-hover>\r\n        ) : null}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: relative;\r\n  z-index: 100;\r\n}\r\n\r\n.btn {\r\n  padding-left: 4px !important;\r\n  padding-right: 4px !important;\r\n}\r\n\r\n.pointerContainer {\r\n  position: absolute;\r\n  left: 50%;\r\n  height: 10px;\r\n  width: 350px;\r\n  transform: translate(-50%, 0);\r\n}\r\n\r\n.pointerContainerTop {\r\n  top: -26px;\r\n}\r\n\r\n.iglPopOver {\r\n  max-width: 350px;\r\n  background-color: #fff;\r\n  padding: 10px;\r\n  border: 1px solid #656ee7;\r\n  border-radius: 6px;\r\n  position: absolute;\r\n  transform: translate(-50%, 10px);\r\n  left: 50%;\r\n  box-shadow: 1px 0px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.iglPopOver.infoBubble {\r\n  width: 350px;\r\n}\r\n\r\n.iglPopOver.blockedView {\r\n  max-width: 400px;\r\n  width: 400px;\r\n}\r\n\r\n.iglPopOver.newBookingOptions {\r\n  width: 230px;\r\n}\r\n\r\n.bubblePointer {\r\n  position: absolute;\r\n  width: 0;\r\n  height: 0;\r\n  left: 50%;\r\n  border-left: 10px solid transparent;\r\n  border-right: 10px solid transparent;\r\n  transform: translate(-50%, 0px);\r\n}\r\n\r\n.bubblePointTop {\r\n  border-top: 10px solid #656ee7;\r\n}\r\n\r\n.bubblePointBottom {\r\n  border-bottom: 10px solid #656ee7;\r\n}\r\n\r\n.bubbleInfoAbove {\r\n  bottom: 35px;\r\n}\r\n","import { Component, Host, h, Prop, Event, EventEmitter, State } from '@stencil/core';\r\nimport { findCountry, getCurrencySymbol } from '../../../utils/utils';\r\nimport { ICountry } from '../../../models/IBooking';\r\nimport { EventsService } from '../../../services/events.service';\r\n\r\n@Component({\r\n  tag: 'igl-booking-event-hover',\r\n  styleUrl: 'igl-booking-event-hover.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookingEventHover {\r\n  @Prop({ mutable: true }) bookingEvent: { [key: string]: any };\r\n  @Prop() bubbleInfoTop: boolean = false;\r\n  @Prop() currency;\r\n  @Prop() countryNodeList: ICountry[];\r\n  @State() isLoading: string;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) hideBubbleInfo: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) deleteButton: EventEmitter<string>;\r\n  private fromTimeStamp: number;\r\n  private toTimeStamp: number;\r\n  private todayTimeStamp: number = new Date().setHours(0, 0, 0, 0);\r\n  private eventService = new EventsService();\r\n  getBookingId() {\r\n    return this.bookingEvent.ID;\r\n  }\r\n\r\n  getTotalOccupants() {\r\n    return this.bookingEvent.ADULTS_COUNT;\r\n  }\r\n\r\n  getPhoneNumber() {\r\n    return this.bookingEvent.PHONE;\r\n  }\r\n\r\n  getCountry() {\r\n    return findCountry(this.bookingEvent.COUNTRY, this.countryNodeList).name;\r\n  }\r\n  getPhoneCode() {\r\n    return findCountry(this.bookingEvent.COUNTRY, this.countryNodeList).phone_prefix;\r\n  }\r\n  renderPhone() {\r\n    return this.bookingEvent.COUNTRY ? `${this.getPhoneCode()}-${this.getPhoneNumber()} - ${this.getCountry()}` : this.getPhoneNumber();\r\n  }\r\n\r\n  getGuestNote() {\r\n    return this.bookingEvent.NOTES;\r\n  }\r\n\r\n  getInternalNote() {\r\n    return this.bookingEvent.INTERNAL_NOTE;\r\n  }\r\n\r\n  getTotalPrice() {\r\n    return this.bookingEvent.TOTAL_PRICE;\r\n  }\r\n\r\n  getCheckInDate() {\r\n    return this.bookingEvent.FROM_DATE_STR;\r\n  }\r\n\r\n  getCheckOutDate() {\r\n    return this.bookingEvent.TO_DATE_STR;\r\n  }\r\n\r\n  getArrivalTime() {\r\n    return this.bookingEvent.ARRIVAL_TIME;\r\n  }\r\n\r\n  getRatePlan() {\r\n    return this.bookingEvent.RATE_PLAN;\r\n  }\r\n\r\n  getEntryDate() {\r\n    return this.bookingEvent.ENTRY_DATE;\r\n  }\r\n\r\n  getReleaseAfterHours() {\r\n    return this.bookingEvent.RELEASE_AFTER_HOURS;\r\n  }\r\n\r\n  isNewBooking() {\r\n    return this.getBookingId() === 'NEW_TEMP_EVENT';\r\n  }\r\n\r\n  isCheckedIn() {\r\n    return this.bookingEvent.STATUS === 'CHECKED-IN';\r\n  }\r\n\r\n  isCheckedOut() {\r\n    return this.bookingEvent.STATUS === 'CHECKED-OUT';\r\n  }\r\n\r\n  isBlockedDateEvent() {\r\n    return this.bookingEvent.STATUS === 'BLOCKED' || this.bookingEvent.STATUS === 'BLOCKED-WITH-DATES';\r\n  }\r\n\r\n  getRoomId() {\r\n    return this.bookingEvent.PR_ID;\r\n  }\r\n\r\n  getCategoryByRoomId(roomId) {\r\n    // console.log(\"room id \",roomId)\r\n    // console.log(\"booking event\",this.bookingEvent)\r\n    return this.bookingEvent.roomsInfo.find(roomCategory => roomCategory.physicalrooms.find(room => room.id === roomId));\r\n  }\r\n\r\n  hasSplitBooking() {\r\n    return this.bookingEvent.hasOwnProperty('splitBookingEvents') && this.bookingEvent.splitBookingEvents.length;\r\n  }\r\n\r\n  canCheckIn() {\r\n    if (!this.fromTimeStamp) {\r\n      let dt = new Date(this.getCheckInDate());\r\n      dt.setHours(0, 0, 0, 0);\r\n      this.fromTimeStamp = dt.getTime();\r\n    }\r\n    if (!this.toTimeStamp) {\r\n      let dt = new Date(this.getCheckOutDate());\r\n      dt.setHours(0, 0, 0, 0);\r\n      this.toTimeStamp = dt.getTime();\r\n    }\r\n    if (this.isCheckedIn() || this.isCheckedOut()) {\r\n      return false;\r\n    }\r\n    if (this.fromTimeStamp <= this.todayTimeStamp && this.todayTimeStamp <= this.toTimeStamp) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  canCheckOut() {\r\n    if (this.isCheckedIn() && this.todayTimeStamp <= this.toTimeStamp) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  handleBlockDateUpdate(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.bookingEvent = { ...this.bookingEvent, ...opt.data };\r\n    //console.log(\"blocked date booking event\", this.bookingEvent);\r\n  }\r\n\r\n  handleEditBooking() {\r\n    // console.log(\"Edit booking\");\r\n    this.bookingEvent.TITLE = 'Edit Room';\r\n    this.handleBookingOption('EDIT_BOOKING');\r\n  }\r\n\r\n  getStringDateFormat(dt) {\r\n    return dt.getFullYear() + '-' + (dt.getMonth() < 9 ? '0' : '') + (dt.getMonth() + 1) + '-' + (dt.getDate() <= 9 ? '0' : '') + dt.getDate();\r\n  }\r\n\r\n  handleAddRoom() {\r\n    let fromDate = new Date();\r\n    fromDate.setHours(0, 0, 0, 0);\r\n    let from_date_str = this.getStringDateFormat(fromDate);\r\n\r\n    let toDate = new Date();\r\n    toDate.setDate(toDate.getDate() + 1);\r\n    toDate.setHours(0, 0, 0, 0);\r\n    let to_date_str = this.getStringDateFormat(toDate);\r\n\r\n    let eventData = {\r\n      ID: '',\r\n      NAME: '',\r\n      FROM_DATE: from_date_str, // \"2023-07-09\",\r\n      TO_DATE: to_date_str, // \"2023-07-11\",\r\n      roomsInfo: this.bookingEvent.roomsInfo,\r\n      ADD_ROOM_TO_BOOKING: this.bookingEvent.ID,\r\n      TITLE: 'Add Room to #' + this.bookingEvent.ID + ' - ' + this.bookingEvent.NAME,\r\n      event_type: 'ADD_ROOM',\r\n      defaultDateRange: {\r\n        fromDate: fromDate, //new Date(\"2023-09-10\"),\r\n        fromDateStr: '', //\"10 Sep 2023\",\r\n        toDate: toDate, //new Date(\"2023-09-15\"),\r\n        toDateStr: '', // \"15 Sep 2023\",\r\n        dateDifference: 0,\r\n        editabled: true,\r\n        message: 'Including 5.00% City Tax - Excluding 11.00% VAT',\r\n      },\r\n    };\r\n\r\n    this.handleBookingOption('ADD_ROOM', eventData);\r\n  }\r\n\r\n  handleCustomerCheckIn() {\r\n    console.log('Handle Customer Check In');\r\n  }\r\n\r\n  handleCustomerCheckOut() {\r\n    console.log('Handle Customer Check Out');\r\n  }\r\n  handleDeleteEvent() {\r\n    this.deleteButton.emit(this.bookingEvent.POOL);\r\n    console.log('Delete Event');\r\n  }\r\n\r\n  async handleUpdateBlockedDates() {\r\n    try {\r\n      this.isLoading = 'update';\r\n      await this.eventService.updateBlockedEvent(this.bookingEvent);\r\n      this.hideBubbleInfo.emit({\r\n        key: 'hidebubble',\r\n        currentInfoBubbleId: this.getBookingId(),\r\n      });\r\n      this.isLoading = '';\r\n      console.log('Updated blocked dates');\r\n    } catch (error) {\r\n      //   toastr.error(error);\r\n    }\r\n  }\r\n\r\n  handleConvertBlockedDateToBooking() {\r\n    this.handleBookingOption('BAR_BOOKING');\r\n  }\r\n\r\n  getRoomInfo() {\r\n    const roomIdToFind = +this.bookingEvent.PR_ID;\r\n    let selectedRoom: any = {};\r\n\r\n    for (const room of this.bookingEvent.roomsInfo) {\r\n      for (const physicalRoom of room.physicalrooms) {\r\n        if (roomIdToFind === physicalRoom.id) {\r\n          selectedRoom.CATEGORY = room.name;\r\n          selectedRoom.ROOM_NAME = physicalRoom.name;\r\n          selectedRoom.ROOMS_INFO = room;\r\n          return selectedRoom;\r\n        }\r\n      }\r\n    }\r\n\r\n    return selectedRoom;\r\n  }\r\n  handleBookingOption(eventType, roomData = null) {\r\n    const roomInfo = this.getRoomInfo();\r\n    let data = roomData ? roomData : this.bookingEvent;\r\n    data.event_type = eventType;\r\n    if (['003', '002', '004'].includes(this.bookingEvent.STATUS_CODE)) {\r\n      data.roomsInfo = [roomInfo.ROOMS_INFO];\r\n    }\r\n    this.showBookingPopup.emit({\r\n      key: 'add',\r\n      data: {\r\n        ...data,\r\n        TITLE: `New Booking for ${roomInfo.CATEGORY} ${roomInfo.ROOM_NAME}`,\r\n        //roomsInfo: [roomInfo.ROOMS_INFO],\r\n      },\r\n    });\r\n    this.hideBubbleInfo.emit({\r\n      key: 'hidebubble',\r\n      currentInfoBubbleId: this.getBookingId(),\r\n    });\r\n  }\r\n\r\n  getInfoElement() {\r\n    return (\r\n      <div class={`iglPopOver infoBubble ${this.bubbleInfoTop ? 'bubbleInfoAbove' : ''} text-left`}>\r\n        <div class=\"row p-0 m-0 pb-1\">\r\n          <div class=\"pl-0 col-8 font-weight-bold font-medium-1\">{this.bookingEvent.BOOKING_NUMBER}</div>\r\n          <div class=\"pr-0 col-4 text-right\">\r\n            {getCurrencySymbol(this.currency.code)}\r\n            {this.getTotalPrice()}\r\n          </div>\r\n        </div>\r\n        <div class=\"row p-0 m-0\">\r\n          <div class=\"pl-0 pr-0 col-12\">\r\n            <span class=\"font-weight-bold\">In: </span>\r\n            {this.getCheckInDate()} - <span class=\"font-weight-bold\">Out: </span>\r\n            {this.getCheckOutDate()}\r\n          </div>\r\n        </div>\r\n        {this.getArrivalTime() && (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"pl-0 pr-0 col-12\">\r\n              <span class=\"font-weight-bold\">Arrival time: </span>\r\n              {this.getArrivalTime()}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {this.getTotalOccupants() && (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"pl-0 pr-0 col-12\">\r\n              <span class=\"font-weight-bold\">Occupancy: </span>\r\n              {this.getTotalOccupants()}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {this.getPhoneNumber() && (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"pl-0 pr-0 col-12 text-wrap\">\r\n              <span class=\"font-weight-bold\">Phone: </span>\r\n              {this.renderPhone()}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {this.getRatePlan() && (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"pl-0 pr-0 col-12\">\r\n              <span class=\"font-weight-bold\">Rate plan: </span>\r\n              {this.getRatePlan()}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {this.getGuestNote() ? (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"col-12 pl-0 pr-0 text-wrap\">\r\n              <sapn class=\"font-weight-bold\">Note: </sapn>\r\n              {this.getGuestNote()}\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n        {this.getInternalNote() ? (\r\n          <div class=\"row p-0 m-0\">\r\n            <div class=\"col-12 pl-0 pr-0 text-wrap\">\r\n              <span class=\"font-weight-bold\">Internal remark: </span>\r\n              {this.getInternalNote()}\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n\r\n        <div class=\"row p-0 m-0 mt-2\">\r\n          <div class=\"full-width btn-group btn-group-sm font-small-3\" role=\"group\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary mr-1\"\r\n              onClick={_ => {\r\n                this.handleEditBooking();\r\n              }}\r\n              disabled={!this.bookingEvent.IS_EDITABLE}\r\n            >\r\n              <i class=\"ft ft-edit font-small-3\"></i> Edit\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary mr-1\"\r\n              onClick={_ => {\r\n                this.handleAddRoom();\r\n              }}\r\n              disabled={!this.bookingEvent.IS_EDITABLE}\r\n            >\r\n              <i class=\"ft ft-plus-circle font-small-3\"></i> Add room\r\n            </button>\r\n            {this.canCheckIn() ? (\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-primary p-0 mr-1\"\r\n                onClick={_ => {\r\n                  this.handleCustomerCheckIn();\r\n                }}\r\n                disabled={!this.bookingEvent.IS_EDITABLE}\r\n              >\r\n                <i class=\"ft ft-edit font-small-3\"></i> Check-in\r\n              </button>\r\n            ) : null}\r\n            {this.canCheckOut() ? (\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-primary p-0 mr-1\"\r\n                onClick={_ => {\r\n                  this.handleCustomerCheckOut();\r\n                }}\r\n                disabled={!this.bookingEvent.IS_EDITABLE}\r\n              >\r\n                <i class=\"ft ft-log-out font-small-3\"></i> Check-out\r\n              </button>\r\n            ) : null}\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-danger p-0\"\r\n              onClick={_ => {\r\n                this.handleDeleteEvent();\r\n              }}\r\n              disabled={!this.bookingEvent.IS_EDITABLE}\r\n            >\r\n              <i class=\"ft ft-trash-2 font-small-3\"></i> Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getNewBookingOptions() {\r\n    return (\r\n      <div class={`iglPopOver newBookingOptions ${this.bubbleInfoTop ? 'bubbleInfoAbove' : ''} text-left`}>\r\n        <button\r\n          type=\"button\"\r\n          class=\"d-block full-width btn btn-sm btn-primary mb-1 font-small-3 square\"\r\n          onClick={_ => {\r\n            this.handleBookingOption('BAR_BOOKING');\r\n          }}\r\n        >\r\n          Create new booking\r\n        </button>\r\n        {this.hasSplitBooking() ? (\r\n          <button\r\n            type=\"button\"\r\n            class=\"d-block full-width btn btn-sm btn-primary mb-1 font-small-3 square\"\r\n            onClick={_ => {\r\n              this.handleBookingOption('SPLIT_BOOKING');\r\n            }}\r\n          >\r\n            Assign unit to existing booking\r\n          </button>\r\n        ) : null}\r\n        <button\r\n          type=\"button\"\r\n          class=\"d-block full-width btn btn-sm btn-primary font-small-3 square\"\r\n          onClick={_ => {\r\n            this.handleBookingOption('BLOCK_DATES');\r\n          }}\r\n        >\r\n          Block dates\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getBlockedView() {\r\n    // let defaultData = {RELEASE_AFTER_HOURS: 0, OPTIONAL_REASON: \"\", OUT_OF_SERVICE: false};\r\n    return (\r\n      <div class={`iglPopOver blockedView ${this.bubbleInfoTop ? 'bubbleInfoAbove' : ''} text-left`}>\r\n        <igl-block-dates-view\r\n          entryHour={this.bookingEvent.ENTRY_HOUR}\r\n          entryMinute={this.bookingEvent.ENTRY_MINUTE}\r\n          defaultData={this.bookingEvent}\r\n          fromDate={this.getCheckInDate()}\r\n          toDate={this.getCheckOutDate()}\r\n          entryDate={this.getEntryDate()}\r\n          onDataUpdateEvent={event => this.handleBlockDateUpdate(event)}\r\n        ></igl-block-dates-view>\r\n        <div class=\"row p-0 m-0 mt-2\">\r\n          <div class=\"full-width btn-group btn-group-sm font-small-3\" role=\"group\">\r\n            <button\r\n              disabled={this.isLoading === 'update'}\r\n              type=\"button\"\r\n              class=\"btn btn-primary mr-1\"\r\n              onClick={_ => {\r\n                this.handleUpdateBlockedDates();\r\n              }}\r\n            >\r\n              {this.isLoading === 'update' ? <i class=\"la la-circle-o-notch spinner mx-1\"></i> : <i class=\"ft ft-edit font-small-3\"></i>}\r\n              Update\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary p-0\"\r\n              onClick={_ => {\r\n                this.handleConvertBlockedDateToBooking();\r\n              }}\r\n            >\r\n              Convert to booking\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-danger ml-1 p-0\"\r\n              onClick={_ => {\r\n                this.handleDeleteEvent();\r\n              }}\r\n            >\r\n              <i class=\"ft ft-trash-2 font-small-3\"></i> Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class={`pointerContainer ${this.bubbleInfoTop ? 'pointerContainerTop' : ''}`}>\r\n          <div class={`bubblePointer ${this.bubbleInfoTop ? 'bubblePointTop' : 'bubblePointBottom'}`}></div>\r\n        </div>\r\n        {this.isBlockedDateEvent() ? this.getBlockedView() : null}\r\n        {this.isNewBooking() ? this.getNewBookingOptions() : null}\r\n        {!this.isBlockedDateEvent() && !this.isNewBooking() ? this.getInfoElement() : null}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n}\r\n","import { Component, Host, Prop, h, State, Event, EventEmitter, Watch } from '@stencil/core';\r\nimport { v4 } from 'uuid';\r\nimport { getCurrencySymbol } from '../../../utils/utils';\r\n@Component({\r\n  tag: 'igl-booking-room-rate-plan',\r\n  styleUrl: 'igl-booking-room-rate-plan.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookingRoomRatePlan {\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop({ mutable: true }) ratePlanData: { [key: string]: any };\r\n  @Prop() totalAvailableRooms: number;\r\n  @Prop() ratePricingMode = [];\r\n  @Prop() currency: any;\r\n  @Prop({ reflect: true }) dateDifference: number;\r\n  @Prop() bookingType: string = 'PLUS_BOOKING';\r\n  @State() sourceOption: number;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() gotoSplitPageTwoEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() selectedData: { [key: string]: any };\r\n  @State() plan: { [key: string]: any };\r\n  componentWillLoad() {\r\n    this.selectedData = {\r\n      ratePlanId: this.ratePlanData.id,\r\n      adult_child_offering: this.ratePlanData.variations[0].adult_child_offering,\r\n      rateType: 1,\r\n      totalRooms: 0,\r\n      rate: this.ratePlanData.variations[0].amount,\r\n      ratePlanName: this.ratePlanData.name,\r\n      adultCount: this.ratePlanData.variations[0].adult_nbr,\r\n      childrenCount: this.ratePlanData.variations[0].child_nbr,\r\n      cancelation: this.ratePlanData.cancelation,\r\n      guarantee: this.ratePlanData.guarantee,\r\n      isRateModified: false,\r\n      defaultSelectedRate: 0,\r\n    };\r\n    if (this.defaultData) {\r\n      for (const [key, value] of Object.entries(this.defaultData)) {\r\n        this.selectedData[key] = value;\r\n      }\r\n    }\r\n  }\r\n\r\n  getSelectedOffering(value: any) {\r\n    return this.ratePlanData.variations.find(variation => variation.adult_child_offering === value);\r\n  }\r\n  @Watch('ratePlanData')\r\n  async ratePlanDataChanged() {\r\n    this.selectedData = {\r\n      ...this.selectedData,\r\n      rate: this.handleRateDaysUpdate(),\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: 'roomRatePlanUpdate',\r\n      changedKey: 'rate',\r\n      data: this.selectedData,\r\n    });\r\n  }\r\n\r\n  handleRateDaysUpdate() {\r\n    let rate = this.selectedData.defaultSelectedRate;\r\n    if (this.selectedData.isRateModified) {\r\n      return this.selectedData.rateType === 1 ? rate * this.dateDifference : rate;\r\n    }\r\n    return this.getSelectedOffering(this.selectedData.adult_child_offering).amount;\r\n  }\r\n\r\n  handleInput(event: InputEvent) {\r\n    this.selectedData.isRateModified = true;\r\n    const inputElement = event.target as HTMLInputElement;\r\n    let inputValue = inputElement.value;\r\n    const numericRegex = /^[0-9]+$/;\r\n    if (!numericRegex.test(inputValue)) {\r\n      inputValue = inputValue.replace(/[^0-9]/g, '');\r\n      inputElement.value = inputValue;\r\n    }\r\n    if (inputValue === inputElement.value) {\r\n      this.handleDataChange('rate', event);\r\n    }\r\n  }\r\n\r\n  handleDataChange(key, evt) {\r\n    if (key === 'adult_child_offering') {\r\n      const offering = this.getSelectedOffering(evt.target.value);\r\n      this.selectedData = {\r\n        ...this.selectedData,\r\n        [key]: evt.target.value,\r\n        adultCount: offering.adult_nbr,\r\n        childrenCount: offering.child_nbr,\r\n        rate: offering.amount,\r\n      };\r\n    } else {\r\n      this.selectedData = {\r\n        ...this.selectedData,\r\n        [key]: evt.target.value === '' ? 0 : parseInt(evt.target.value),\r\n      };\r\n    }\r\n    if (key === 'rate' && evt.target.value === '') {\r\n      this.selectedData = {\r\n        ...this.selectedData,\r\n        totalRooms: 0,\r\n      };\r\n    }\r\n    if (key === 'rate') {\r\n      this.selectedData.defaultSelectedRate = this.selectedData.rateType === 1 ? parseInt(evt.target.value) / this.dateDifference : parseInt(evt.target.value);\r\n    }\r\n    this.dataUpdateEvent.emit({\r\n      key: 'roomRatePlanUpdate',\r\n      changedKey: key,\r\n      data: this.selectedData,\r\n    });\r\n  }\r\n\r\n  bookProperty() {\r\n    this.dataUpdateEvent.emit({ key: 'clearData', data: this.selectedData });\r\n    this.handleDataChange('totalRooms', { target: { value: '1' } });\r\n    this.gotoSplitPageTwoEvent.emit({ key: 'gotoSplitPage', data: '' });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"row m-0 p-0\">\r\n          <div class=\"col-md-6 col-sm-12 p-0 align-self-center\">\r\n            <span>{this.ratePlanData.name}</span>\r\n            <ir-tooltip message={this.ratePlanData.cancelation + this.ratePlanData.guarantee}></ir-tooltip>\r\n          </div>\r\n          <div class=\"col-md-6 col-sm-12 row pr-0\">\r\n            <div class=\"col-4\">\r\n              <fieldset class=\"position-relative\">\r\n                <select class=\"form-control input-sm\" id={v4()} onChange={evt => this.handleDataChange('adult_child_offering', evt)}>\r\n                  {this.ratePlanData.variations.map(variation => (\r\n                    <option value={variation.adult_child_offering} selected={this.selectedData.adult_child_offering === variation.adult_child_offering}>\r\n                      {variation.adult_child_offering}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </fieldset>\r\n            </div>\r\n            <div class=\"row col-6 m-0 p-0\">\r\n              <fieldset class=\"position-relative has-icon-left col-6 m-0 p-0\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control input-sm\"\r\n                  value={this.selectedData.rateType === 1 ? this.selectedData.rate : this.selectedData.rate / this.dateDifference}\r\n                  id={v4()}\r\n                  placeholder=\"Rate\"\r\n                  onInput={(event: InputEvent) => this.handleInput(event)}\r\n                />\r\n                <span class=\"form-control-position\">{getCurrencySymbol(this.currency.code)}</span>\r\n              </fieldset>\r\n              <fieldset class=\"position-relative m-0 p-0\">\r\n                <select class=\"form-control input-sm\" id={v4()} onChange={evt => this.handleDataChange('rateType', evt)}>\r\n                  {this.ratePricingMode.map(data => (\r\n                    <option value={data.CODE_NAME} selected={this.selectedData.rateType === +data.CODE_NAME}>\r\n                      {data.CODE_VALUE_EN}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </fieldset>\r\n            </div>\r\n\r\n            {this.bookingType === 'PLUS_BOOKING' || this.bookingType === 'ADD_ROOM' ? (\r\n              <div class=\"col-2 m-0 p-0\">\r\n                <fieldset class=\"position-relative\">\r\n                  <select disabled={this.selectedData.rate === 0} class=\"form-control input-sm\" id={v4()} onChange={evt => this.handleDataChange('totalRooms', evt)}>\r\n                    {Array.from({ length: this.totalAvailableRooms + 1 }, (_, i) => i).map(i => (\r\n                      <option value={i} selected={this.selectedData.totalRooms === i}>\r\n                        {i}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </fieldset>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.bookingType === 'EDIT_BOOKING' ? (\r\n              <div class=\"col-2 m-0 p-0 align-self-center\">\r\n                <fieldset class=\"position-relative\">\r\n                  <input type=\"radio\" name=\"ratePlanGroup\" value=\"1\" onChange={evt => this.handleDataChange('totalRooms', evt)} checked={this.selectedData.totalRooms === 1} />\r\n                </fieldset>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.bookingType === 'BAR_BOOKING' || this.bookingType === 'SPLIT_BOOKING' ? (\r\n              <button disabled={this.selectedData.rate === 0} type=\"button\" class=\"btn mb-1 btn-primary btn-sm\" onClick={() => this.bookProperty()}>\r\n                Book\r\n              </button>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  State,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-booking-rooms\",\r\n  styleUrl: \"igl-booking-rooms.css\",\r\n  scoped: true,\r\n})\r\nexport class IglBookingRooms {\r\n  @Prop({ reflect: true, mutable: true }) roomTypeData: { [key: string]: any };\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop() bookingType: string = \"PLUS_BOOKING\";\r\n  @Prop({ reflect: true }) dateDifference: number;\r\n  @Prop() ratePricingMode = [];\r\n  @Prop() currency;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() selectedRooms: number[] = [];\r\n  @State() roomsDistributions: number[] = [];\r\n  private validBookingTypes = [\"PLUS_BOOKING\", \"ADD_ROOM\", \"EDIT_BOOKING\"];\r\n  private totalRooms: number;\r\n  componentWillLoad() {\r\n    this.totalRooms = this.roomTypeData.physicalrooms.length;\r\n    this.selectedRooms = new Array(this.totalRooms).fill(0);\r\n    this.roomsDistributions = new Array(this.totalRooms).fill(this.totalRooms);\r\n  }\r\n\r\n  onRoomDataUpdate(event: CustomEvent<{ [key: string]: any }>, index: number) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const opt: { [key: string]: any } = event.detail;\r\n    let data = { ...opt.data };\r\n    if (opt.changedKey === \"totalRooms\") {\r\n      let newValue = data.totalRooms;\r\n      this.selectedRooms[index] = newValue;\r\n      this.updateRatePlanTotalRooms(index);\r\n    }\r\n    data.roomCategoryId = this.roomTypeData.id;\r\n    data.roomCategoryName = this.roomTypeData.name;\r\n    data.inventory = this.roomTypeData.inventory;\r\n    this.dataUpdateEvent.emit({\r\n      key: opt.key,\r\n      data: data,\r\n      changedKey: opt.changedKey,\r\n    });\r\n  }\r\n  updateRatePlanTotalRooms(ratePlanIndex: number) {\r\n    const calculateTotalSelectedRoomsExcludingIndex = (excludedIndex) => {\r\n      return this.selectedRooms.reduce(\r\n        (acc, rooms, idx) => (idx !== excludedIndex ? acc + rooms : acc),\r\n        0\r\n      );\r\n    };\r\n    this.roomsDistributions = this.roomsDistributions.map((ratePlan, index) => {\r\n      if (index === ratePlanIndex) {\r\n        return ratePlan;\r\n      }\r\n      const totalSelectedRoomsExcludingCurrent =\r\n        calculateTotalSelectedRoomsExcludingIndex(index);\r\n      const availableRooms =\r\n        this.totalRooms - totalSelectedRoomsExcludingCurrent;\r\n\r\n      return availableRooms > 0 ? availableRooms : 0;\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {this.validBookingTypes.includes(this.bookingType) && (\r\n          <div class=\"font-weight-bold font-medium-1\">\r\n            {this.roomTypeData.name}\r\n          </div>\r\n        )}\r\n        {this.roomTypeData.rateplans.map((ratePlan, index) => {\r\n          if (ratePlan.variations !== null) {\r\n            return (\r\n              <igl-booking-room-rate-plan\r\n                ratePricingMode={this.ratePricingMode}\r\n                class={\r\n                  this.validBookingTypes.includes(this.bookingType)\r\n                    ? \"ml-1\"\r\n                    : \"\"\r\n                }\r\n                currency={this.currency}\r\n                dateDifference={this.dateDifference}\r\n                ratePlanData={ratePlan}\r\n                totalAvailableRooms={this.roomsDistributions[index]}\r\n                bookingType={this.bookingType}\r\n                defaultData={\r\n                  (this.defaultData && this.defaultData[\"p_\" + ratePlan.id]) ||\r\n                  null\r\n                }\r\n                onDataUpdateEvent={(evt) => this.onRoomDataUpdate(evt, index)}\r\n              ></igl-booking-room-rate-plan>\r\n            );\r\n          } else {\r\n            return null;\r\n          }\r\n        })}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.bodyContainer {\r\n  position: relative;\r\n}\r\n\r\n.roomRow {\r\n  width: max-content;\r\n}\r\n\r\n.roomRow:first-child {\r\n  margin-top: 80px;\r\n}\r\n\r\n.cellData {\r\n  width: 70px;\r\n  height: 30px;\r\n  display: inline-grid;\r\n  border-top: 1px solid #e0e0e0;\r\n  border-left: 1px solid #e0e0e0;\r\n  vertical-align: top;\r\n  padding-left: 15px;\r\n}\r\n\r\n.cellData:nth-child(2) {\r\n  border-left: 0px;\r\n}\r\n\r\n.cellData:last-child {\r\n  border-right: 1px solid #e0e0e0;\r\n}\r\n\r\n.roomHeaderCell {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  left: 0;\r\n  background: #fff;\r\n  border-right: 1px solid #ccc;\r\n  width: 170px;\r\n  z-index: 1;\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dragOverHighlight {\r\n  background-color: #f5f5dc !important;\r\n}\r\n\r\n.selectedDay {\r\n  background-color: #f9f9c9 !important;\r\n}\r\n\r\n.categoryTitle {\r\n  grid-template-columns: 1fr 20px;\r\n  padding-left: 10px;\r\n  cursor: pointer;\r\n  height: 40px;\r\n  font-size: 0.9em;\r\n}\r\n.categoryTitle > :nth-child(1) {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.roomTitle {\r\n  padding-left: 20px;\r\n  font-size: 0.9em;\r\n}\r\n\r\n.roomTitle > :nth-child(1) {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.roomTitle.pl10 {\r\n  padding-left: 10px;\r\n}\r\n\r\n.categoryPriceColumn {\r\n  font-size: 0.75em;\r\n  align-items: center;\r\n  height: 40px;\r\n}\r\n\r\n/* BOOKING EVENT */\r\n.bookingEventsContainer {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  Listen,\r\n  Prop,\r\n  State,\r\n  h,\r\n  Event,\r\n  EventEmitter,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-cal-body\",\r\n  styleUrl: \"igl-cal-body.css\",\r\n  scoped: true,\r\n})\r\nexport class IglCalBody {\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) scrollPageToRoom: EventEmitter;\r\n  @Prop() isScrollViewDragging: boolean;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @Prop() currency;\r\n  @Prop() countryNodeList;\r\n  @State() dragOverElement: string = \"\";\r\n  @State() renderAgain: boolean = false;\r\n\r\n  private selectedRooms: { [key: string]: any } = {};\r\n  private fromRoomId: number = -1;\r\n  private newEvent: { [key: string]: any };\r\n  private currentDate = new Date();\r\n\r\n  componentWillLoad() {\r\n    this.currentDate.setHours(0, 0, 0, 0);\r\n  }\r\n\r\n  @Listen(\"dragOverHighlightElement\", { target: \"window\" })\r\n  dragOverHighlightElementHandler(event: CustomEvent) {\r\n    this.dragOverElement = event.detail.dragOverElement;\r\n  }\r\n\r\n  @Listen(\"gotoRoomEvent\", { target: \"window\" })\r\n  gotoRoom(event: CustomEvent) {\r\n    let roomId = event.detail.roomId;\r\n    let category = this.getRoomCategoryByRoomId(roomId);\r\n    if (!category.expanded) {\r\n      this.toggleCategory(category);\r\n      setTimeout(() => {\r\n        this.scrollToRoom(roomId);\r\n      }, 10);\r\n    } else {\r\n      this.scrollToRoom(roomId);\r\n    }\r\n  }\r\n\r\n  @Listen(\"addToBeAssignedEvent\", { target: \"window\" })\r\n  addToBeAssignedEvents(event: CustomEvent) {\r\n    // let roomId = event.detail.roomId;\r\n    this.addBookingDatas(event.detail.data);\r\n    this.renderElement();\r\n  }\r\n\r\n  scrollToRoom(roomId) {\r\n    this.scrollPageToRoom.emit({\r\n      key: \"scrollPageToRoom\",\r\n      id: roomId,\r\n      refClass: \"room_\" + roomId,\r\n    });\r\n  }\r\n\r\n  getRoomCategoryByRoomId(roomId) {\r\n    return this.calendarData.roomsInfo.find((roomCategory) => {\r\n      return this.getCategoryRooms(roomCategory).find(\r\n        (room) => this.getRoomId(room) === roomId\r\n      );\r\n    });\r\n  }\r\n\r\n  getCategoryName(roomCategory) {\r\n    return roomCategory.name;\r\n  }\r\n\r\n  getCategoryId(roomCategory) {\r\n    return roomCategory.id;\r\n  }\r\n\r\n  getTotalPhysicalRooms(roomCategory) {\r\n    return this.getCategoryRooms(roomCategory).length;\r\n  }\r\n\r\n  getCategoryRooms(roomCategory) {\r\n    return (roomCategory && roomCategory.physicalrooms) || [];\r\n  }\r\n\r\n  getRoomName(roomInfo) {\r\n    return roomInfo.name;\r\n  }\r\n\r\n  getRoomId(roomInfo) {\r\n    return roomInfo.id;\r\n  }\r\n\r\n  getRoomById(physicalRooms, roomId) {\r\n    return physicalRooms.find(\r\n      (physical_room) => this.getRoomId(physical_room) === roomId\r\n    );\r\n  }\r\n\r\n  getBookingData() {\r\n    return this.calendarData.bookingEvents;\r\n  }\r\n\r\n  addBookingDatas(aData) {\r\n    this.calendarData.bookingEvents = this.calendarData.bookingEvents.filter(\r\n      (bookingEvent) => bookingEvent.ID !== \"NEW_TEMP_EVENT\"\r\n    );\r\n    this.calendarData.bookingEvents =\r\n      this.calendarData.bookingEvents.concat(aData);\r\n  }\r\n\r\n  getSelectedCellRefName(roomId, selectedDay) {\r\n    return \"room_\" + roomId + \"_\" + selectedDay.currentDate;\r\n  }\r\n\r\n  getSplitBookingEvents(newEvent) {\r\n    return this.getBookingData().filter(\r\n      (bookingEvent) => newEvent.FROM_DATE === bookingEvent.TO_DATE\r\n    );\r\n  }\r\n\r\n  @Listen(\"closeBookingWindow\", { target: \"window\" })\r\n  closeWindow() {\r\n    let ind = this.getBookingData().findIndex(\r\n      (ev) => ev.ID === \"NEW_TEMP_EVENT\"\r\n    );\r\n    if (ind !== -1) {\r\n      this.getBookingData().splice(ind, 1);\r\n      console.log(\"removed item..\");\r\n      this.renderElement();\r\n    }\r\n  }\r\n\r\n  addNewEvent(roomCategory) {\r\n    let keys = Object.keys(this.selectedRooms);\r\n    let startDate, endDate;\r\n\r\n    if (\r\n      this.selectedRooms[keys[0]].currentDate <\r\n      this.selectedRooms[keys[1]].currentDate\r\n    ) {\r\n      startDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n    } else {\r\n      startDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n    }\r\n\r\n    this.newEvent = {\r\n      ID: \"NEW_TEMP_EVENT\",\r\n      NAME: <span>&nbsp;</span>,\r\n      EMAIL: \"\",\r\n      PHONE: \"\",\r\n      convertBooking: false,\r\n      REFERENCE_TYPE: \"PHONE\",\r\n      FROM_DATE:\r\n        startDate.getFullYear() +\r\n        \"-\" +\r\n        this.getTwoDigitNumStr(startDate.getMonth() + 1) +\r\n        \"-\" +\r\n        this.getTwoDigitNumStr(startDate.getDate()),\r\n      TO_DATE:\r\n        endDate.getFullYear() +\r\n        \"-\" +\r\n        this.getTwoDigitNumStr(endDate.getMonth() + 1) +\r\n        \"-\" +\r\n        this.getTwoDigitNumStr(endDate.getDate()),\r\n      BALANCE: \"\",\r\n      NOTES: \"\",\r\n      RELEASE_AFTER_HOURS: 0,\r\n      PR_ID: this.selectedRooms[keys[0]].roomId,\r\n      ENTRY_DATE: \"\",\r\n      NO_OF_DAYS: (endDate - startDate) / 86400000,\r\n      ADULTS_COUNT: 1,\r\n      COUNTRY: \"\",\r\n      INTERNAL_NOTE: \"\",\r\n      RATE: \"\",\r\n      TOTAL_PRICE: \"\",\r\n      RATE_PLAN: \"\",\r\n      ARRIVAL_TIME: \"\",\r\n      TITLE: \"New Booking for \",\r\n      roomsInfo: [roomCategory],\r\n      CATEGORY: roomCategory.name,\r\n      event_type: \"BAR_BOOKING\",\r\n      STATUS: \"PENDING-CONFIRMATION\",\r\n      defaultDateRange: {\r\n        fromDate: null,\r\n        fromDateStr: \"\",\r\n        toDate: null,\r\n        toDateStr: \"\",\r\n        dateDifference: (endDate - startDate) / 86400000,\r\n        editable: false,\r\n        message: \"Including 5.00% City Tax - Excluding 11.00% VAT\",\r\n      },\r\n    };\r\n\r\n    let popupTitle =\r\n      roomCategory.name +\r\n      \" \" +\r\n      this.getRoomName(\r\n        this.getRoomById(\r\n          this.getCategoryRooms(roomCategory),\r\n          this.selectedRooms[keys[0]].roomId\r\n        )\r\n      );\r\n    this.newEvent.BLOCK_DATES_TITLE = \"Block Dates for \" + popupTitle;\r\n    this.newEvent.TITLE += popupTitle;\r\n    this.newEvent.defaultDateRange.toDate = new Date(\r\n      this.newEvent.TO_DATE + \"T00:00:00\"\r\n    );\r\n    this.newEvent.defaultDateRange.fromDate = new Date(\r\n      this.newEvent.FROM_DATE + \"T00:00:00\"\r\n    );\r\n    this.newEvent.defaultDateRange.fromDateStr = this.getDateStr(\r\n      this.newEvent.defaultDateRange.fromDate\r\n    );\r\n    this.newEvent.defaultDateRange.toDateStr = this.getDateStr(\r\n      this.newEvent.defaultDateRange.toDate\r\n    );\r\n    this.newEvent.ENTRY_DATE = new Date().toISOString();\r\n    this.newEvent.legendData = this.calendarData.formattedLegendData;\r\n\r\n    let splitBookingEvents = this.getSplitBookingEvents(this.newEvent);\r\n    if (splitBookingEvents.length) {\r\n      this.newEvent.splitBookingEvents = splitBookingEvents;\r\n    }\r\n\r\n    this.getBookingData().push(this.newEvent);\r\n    return this.newEvent;\r\n  }\r\n\r\n  getTwoDigitNumStr(num) {\r\n    return num <= 9 ? \"0\" + num : num;\r\n  }\r\n\r\n  getDateStr(date, locale = \"default\") {\r\n    return (\r\n      date.getDate() +\r\n      \" \" +\r\n      date.toLocaleString(locale, { month: \"short\" }) +\r\n      \" \" +\r\n      date.getFullYear()\r\n    );\r\n  }\r\n\r\n  removeNewEvent() {\r\n    this.calendarData.bookingEvents = this.calendarData.bookingEvents.filter(\r\n      (events) => events.ID !== \"NEW_TEMP_EVENT\"\r\n    );\r\n    this.newEvent = null;\r\n  }\r\n\r\n  clickCell(roomId, selectedDay, roomCategory) {\r\n    if (\r\n      !this.isScrollViewDragging &&\r\n      selectedDay.currentDate >= this.currentDate.getTime()\r\n    ) {\r\n      let refKey = this.getSelectedCellRefName(roomId, selectedDay);\r\n      if (this.selectedRooms.hasOwnProperty(refKey)) {\r\n        this.removeNewEvent();\r\n        delete this.selectedRooms[refKey];\r\n        this.renderElement();\r\n        return;\r\n      } else if (\r\n        Object.keys(this.selectedRooms).length != 1 ||\r\n        this.fromRoomId != roomId\r\n      ) {\r\n        this.removeNewEvent();\r\n        this.selectedRooms = {};\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.fromRoomId = roomId;\r\n        this.renderElement();\r\n      } else {\r\n        // create bar;\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.addNewEvent(roomCategory);\r\n        this.selectedRooms = {};\r\n        this.renderElement();\r\n        this.showNewBookingPopup(this.newEvent);\r\n      }\r\n    }\r\n  }\r\n\r\n  showNewBookingPopup(data) {\r\n    console.log(data);\r\n    // this.showBookingPopup.emit({key: \"add\", data});\r\n  }\r\n\r\n  renderElement() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  getGeneralCategoryDayColumns(\r\n    addClass: string,\r\n    isCategory: boolean = false,\r\n    index: number\r\n  ) {\r\n    return this.calendarData.days.map((dayInfo) => (\r\n      <div\r\n        class={`cellData pl-0 categoryPriceColumn ${\r\n          addClass + \"_\" + dayInfo.day\r\n        } ${dayInfo.day === this.today ? \"currentDay\" : \"\"}`}\r\n      >\r\n        {isCategory ? (\r\n          <span>\r\n            {dayInfo.rate[index].inventory}\r\n            <br />\r\n            <u>$ {dayInfo.rate[index].rate}</u>\r\n          </span>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  getGeneralRoomDayColumns(roomId: string, roomCategory) {\r\n    // onDragOver={event => this.handleDragOver(event)} onDrop={event => this.handleDrop(event, addClass+\"_\"+dayInfo.day)}\r\n    return this.calendarData.days.map((dayInfo) => (\r\n      <div\r\n        class={`cellData pl-0 ${\"room_\" + roomId + \"_\" + dayInfo.day} ${\r\n          dayInfo.day === this.today ? \"currentDay\" : \"\"\r\n        } ${\r\n          this.dragOverElement === roomId + \"_\" + dayInfo.day\r\n            ? \"dragOverHighlight\"\r\n            : \"\"\r\n        } ${\r\n          this.selectedRooms.hasOwnProperty(\r\n            this.getSelectedCellRefName(roomId, dayInfo)\r\n          )\r\n            ? \"selectedDay\"\r\n            : \"\"\r\n        }`}\r\n        onClick={() => this.clickCell(roomId, dayInfo, roomCategory)}\r\n      ></div>\r\n    ));\r\n  }\r\n\r\n  toggleCategory(roomCategory) {\r\n    roomCategory.expanded = !roomCategory.expanded;\r\n    this.renderElement();\r\n  }\r\n\r\n  getRoomCategoryRow(roomCategory, index) {\r\n    if (this.getTotalPhysicalRooms(roomCategory) <= 1) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div class=\"roomRow\">\r\n        <div\r\n          class={`cellData text-left align-items-center roomHeaderCell categoryTitle ${\r\n            \"category_\" + this.getCategoryId(roomCategory)\r\n          }`}\r\n          onClick={() => this.toggleCategory(roomCategory)}\r\n        >\r\n          <div>{this.getCategoryName(roomCategory)}</div>{\" \"}\r\n          <i\r\n            class={`la la-angle-${roomCategory.expanded ? \"down\" : \"right\"}`}\r\n          ></i>\r\n        </div>\r\n        {this.getGeneralCategoryDayColumns(\r\n          \"category_\" + this.getCategoryId(roomCategory),\r\n          true,\r\n          index\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getRoomsByCategory(roomCategory) {\r\n    // Check accordion is expanded.\r\n    if (!roomCategory.expanded) {\r\n      return [];\r\n    }\r\n\r\n    return this.getCategoryRooms(roomCategory)?.map((room) => (\r\n      <div class=\"roomRow\">\r\n        <div\r\n          class={`cellData text-left align-items-center roomHeaderCell roomTitle ${\r\n            this.getTotalPhysicalRooms(roomCategory) <= 1 ? \"pl10\" : \"\"\r\n          } ${\"room_\" + this.getRoomId(room)}`}\r\n          data-room={this.getRoomId(room)}\r\n        >\r\n          <div>\r\n            {this.getTotalPhysicalRooms(roomCategory) <= 1\r\n              ? this.getCategoryName(roomCategory)\r\n              : this.getRoomName(room)}\r\n          </div>\r\n        </div>\r\n        {this.getGeneralRoomDayColumns(this.getRoomId(room), roomCategory)}\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  getRoomRows() {\r\n    return this.calendarData.roomsInfo.map((roomCategory, index) => [\r\n      this.getRoomCategoryRow(roomCategory, index),\r\n      this.getRoomsByCategory(roomCategory),\r\n    ]);\r\n  }\r\n\r\n  render() {\r\n    // onDragStart={event => this.handleDragStart(event)} draggable={true}\r\n    return (\r\n      <Host>\r\n        <div class=\"bodyContainer\">\r\n          {this.getRoomRows()}\r\n          <div class=\"bookingEventsContainer preventPageScroll\">\r\n            {this.getBookingData()?.map((bookingEvent) => (\r\n              <igl-booking-event\r\n                countryNodeList={this.countryNodeList}\r\n                currency={this.currency}\r\n                data-component-id={bookingEvent.ID}\r\n                bookingEvent={bookingEvent}\r\n                allBookingEvents={this.getBookingData()}\r\n              ></igl-booking-event>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: max-content;\r\n  z-index: 3;\r\n}\r\n\r\n.footerCell {\r\n  display: -moz-inline-grid;\r\n  display: -ms-inline-grid;\r\n  display: inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: 70px;\r\n  height: 40px;\r\n  /* color: #b8b6b7; */\r\n  background: #fff;\r\n  vertical-align: top;\r\n  border-top: 1px solid #e0e0e0;\r\n}\r\n\r\n.bottomLeftCell {\r\n  left: -1px;\r\n  z-index: 2;\r\n  width: 170px;\r\n  text-align: left;\r\n  padding-left: 15px;\r\n  color: #000000;\r\n}\r\n\r\n.footerCell i {\r\n  margin-right: 5px;\r\n}\r\n\r\n.legendBtn {\r\n  color: #41bff3;\r\n  cursor: pointer;\r\n}\r\n\r\n.isOnline i {\r\n  color: #2f9c3f;\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline i {\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline {\r\n  color: #a40000;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  display: grid;\r\n\r\n  /* height: 100%;\r\n  \r\n  align-items: center;\r\n  text-align: center;\r\n  width: 100%; */\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n  /* color: #262b31; */\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n}\r\n\r\n.badge-pill {\r\n  padding-left: 1em;\r\n  padding-right: 1em;\r\n  font-size: 0.7em;\r\n  margin-bottom: 2px;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h } from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-cal-footer\",\r\n  styleUrl: \"igl-cal-footer.css\",\r\n  scoped: true,\r\n})\r\nexport class IglCalFooter {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  // private isOnline:boolean = false;\r\n\r\n  handleOptionEvent(key, data = \"\") {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"footerContainer\">\r\n        <div class=\"footerCell bottomLeftCell align-items-center preventPageScroll\">\r\n          <div\r\n            class=\"legendBtn\"\r\n            onClick={() => this.handleOptionEvent(\"showLegend\")}\r\n          >\r\n            <i class=\"la la-square\"></i>\r\n            <u>Legend</u>\r\n          </div>\r\n          {/* <div class={`${this.isOnline ? 'isOnline' : 'isOffline'}`}>\r\n            <i class=\"la la-share-alt isOffline\"></i><span>{this.isOnline ? \"Connected\": \"Offline\"}</span>\r\n          </div> */}\r\n        </div>\r\n        {this.calendarData.days.map((dayInfo) => (\r\n          <div class=\"footerCell align-items-center\">\r\n            <div\r\n              class={`dayTitle full-height align-items-center ${\r\n                dayInfo.day === this.today ? \"currentDay\" : \"\"\r\n              }`}\r\n            >\r\n              {dayInfo.dayDisplayName}\r\n            </div>\r\n\r\n            {/* <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\r\n              <div class=\"dayCapacityPercent\">28.57%</div>\r\n              <div class=\"preventPageScroll\">\r\n                <span class=\"badge badge-primary badge-pill\">\r\n                  {index}\r\n                </span>\r\n              </div> */}\r\n          </div>\r\n        ))}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  height: 100%;\r\n}\r\n\r\n.btn {\r\n  pointer-events: auto;\r\n}\r\n\r\n.stickyCell {\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0px;\r\n  height: 82px;\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  z-index: 2;\r\n}\r\n\r\n.headersContainer {\r\n  background-color: #ffffff;\r\n}\r\n\r\n.headerCell {\r\n  display: inline-grid;\r\n  width: 70px;\r\n  height: 60px;\r\n  vertical-align: top;\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.datePickerHidden {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  opacity: 0;\r\n}\r\n\r\n.monthsContainer {\r\n  height: 20px;\r\n  background-color: #ffffff;\r\n  margin-bottom: 0.2em;\r\n}\r\n\r\n.monthCell {\r\n  display: inline-grid;\r\n  height: 20px;\r\n  background-color: #ececec;\r\n  border-right: 1px solid #c7c7c7;\r\n  vertical-align: top;\r\n}\r\n\r\n.monthCell:nth-child(odd) {\r\n  background-color: #dddddd;\r\n}\r\n\r\n.monthTitle {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 0.9em;\r\n  text-transform: uppercase;\r\n  font-weight: bold;\r\n}\r\n\r\n.topLeftCell {\r\n  left: 0px;\r\n  z-index: 3;\r\n  width: 170px;\r\n  background-color: #ffffff;\r\n  display: inline-grid;\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n}\r\n\r\n.caledarBtns {\r\n  position: relative;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.caledarBtns .la {\r\n  font-size: 1.1em;\r\n}\r\n\r\n.caledarBtns:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n}\r\n\r\n.badge-pill {\r\n  padding: 3px 1em;\r\n  font-size: 0.8em;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.searchContiner {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.searchListContainer {\r\n  background: #fff;\r\n  border: 1px solid #ccc;\r\n  border-bottom: none;\r\n}\r\n\r\n.searchListItem {\r\n  background: white;\r\n  border-bottom: 1px solid #ccc;\r\n  padding-left: 8px;\r\n}\r\n\r\n.badge-light {\r\n  background-color: #e0e0e0;\r\n}\r\n","import {\r\n  Component,\r\n  Event,\r\n  EventEmitter,\r\n  Element,\r\n  Host,\r\n  Prop,\r\n  h,\r\n  State,\r\n  Listen,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-cal-header\",\r\n  styleUrl: \"igl-cal-header.css\",\r\n  scoped: true,\r\n})\r\nexport class IglCalHeader {\r\n  @Element() private element: HTMLElement;\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true }) gotoRoomEvent: EventEmitter<{\r\n    [key: string]: any;\r\n  }>;\r\n  @Event({ bubbles: true, composed: true }) gotoToBeAssignedDate: EventEmitter<{\r\n    [key: string]: any;\r\n  }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @State() renderAgain: boolean = false;\r\n\r\n  private searchValue: string = \"\";\r\n  private searchList: { [key: string]: any }[] = [];\r\n  private roomsList: { [key: string]: any }[] = [];\r\n  componentWillLoad() {\r\n    this.roomsList = [];\r\n    this.calendarData.roomsInfo.forEach((category) => {\r\n      this.roomsList = this.roomsList.concat(...category.physicalrooms);\r\n    });\r\n  }\r\n\r\n  @Listen(\"reduceAvailableUnitEvent\", { target: \"window\" })\r\n  handleReduceAvailableUnitEvent(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const data = opt.data;\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    // return {day, dayDisplayName, currentDate, tobeAssignedCount: dates[currentDate]};\r\n    if (opt.key === \"reduceAvailableDays\") {\r\n      this.calendarData.days.find((day) => {\r\n        if (day.currentDate === parseInt(data.selectedDate)) {\r\n          day.tobeAssignedCount--;\r\n          return true;\r\n        }\r\n      });\r\n      this.renderView();\r\n    }\r\n  }\r\n\r\n  showToBeAssigned(dayInfo) {\r\n    if (dayInfo.tobeAssignedCount || 0) {\r\n      this.handleOptionEvent(\"showAssigned\");\r\n      setTimeout(() => {\r\n        this.gotoToBeAssignedDate.emit({\r\n          key: \"gotoToBeAssignedDate\",\r\n          data: dayInfo.currentDate,\r\n        });\r\n      }, 100);\r\n    } else {\r\n      // do nothing as the value is 0;\r\n    }\r\n  }\r\n\r\n  handleOptionEvent(key, data: any = \"\") {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  handleDateSelect(event: Event) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    let selectedDate = inputElement.value;\r\n\r\n    // // Manually close the date picker - for Safari\r\n    const picker = this.element.querySelector(\r\n      \".datePickerHidden\"\r\n    ) as HTMLInputElement;\r\n    picker.blur();\r\n    if (selectedDate) {\r\n      this.handleOptionEvent(\"calendar\", selectedDate);\r\n    }\r\n  }\r\n\r\n  handleClearSearch() {\r\n    this.searchValue = \"\";\r\n    this.searchList = [];\r\n    this.renderView();\r\n  }\r\n\r\n  handleFilterRooms(event: Event) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    let value = inputElement.value.trim();\r\n    this.searchValue = value;\r\n    value = value.toLowerCase();\r\n    if (value === \"\") {\r\n      this.handleClearSearch();\r\n    } else {\r\n      this.searchList = this.roomsList.filter(\r\n        (room) => room.name.toLocaleLowerCase().indexOf(value) != -1\r\n      );\r\n    }\r\n    this.renderView();\r\n  }\r\n\r\n  handleScrollToRoom(roomId) {\r\n    this.handleClearSearch();\r\n    this.gotoRoomEvent.emit({ key: \"gotoRoom\", roomId });\r\n  }\r\n\r\n  getStringDateFormat(dt) {\r\n    return (\r\n      dt.getFullYear() +\r\n      \"-\" +\r\n      (dt.getMonth() < 9 ? \"0\" : \"\") +\r\n      (dt.getMonth() + 1) +\r\n      \"-\" +\r\n      (dt.getDate() <= 9 ? \"0\" : \"\") +\r\n      dt.getDate()\r\n    );\r\n  }\r\n\r\n  getNewBookingModel() {\r\n    let today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    let from_date = this.getStringDateFormat(today);\r\n    today.setDate(today.getDate() + 1);\r\n    today.setHours(0, 0, 0, 0);\r\n    let to_date = this.getStringDateFormat(today);\r\n    return {\r\n      ID: \"\",\r\n      NAME: \"\",\r\n      EMAIL: \"\",\r\n      PHONE: \"\",\r\n      REFERENCE_TYPE: \"PHONE\",\r\n      FROM_DATE: from_date, // \"2023-07-09\",\r\n      TO_DATE: to_date, // \"2023-07-11\",\r\n      roomsInfo: this.calendarData.roomsInfo,\r\n      TITLE: \"New Booking\",\r\n      event_type: \"PLUS_BOOKING\",\r\n      legendData: this.calendarData.formattedLegendData,\r\n      defaultDateRange: {\r\n        fromDate: new Date(from_date), //new Date(\"2023-09-10\"),\r\n        fromDateStr: \"\", //\"10 Sep 2023\",\r\n        toDate: new Date(to_date), //new Date(\"2023-09-15\"),\r\n        toDateStr: \"\", // \"15 Sep 2023\",\r\n        dateDifference: 0,\r\n        editabled: true,\r\n        message: \"\",\r\n      },\r\n    };\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"stickyCell align-items-center topLeftCell preventPageScroll\">\r\n          <div class=\"row justify-content-around no-gutters\">\r\n            <div\r\n              class=\"caledarBtns\"\r\n              onClick={() => this.handleOptionEvent(\"showAssigned\")}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-original-title=\"Assignments\"\r\n            >\r\n              <i class=\"la la-tasks\"></i>\r\n            </div>\r\n            <div\r\n              class=\"caledarBtns\"\r\n              onClick={() => this.handleOptionEvent(\"calendar\")}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-original-title=\"Navigate\"\r\n            >\r\n              <i class=\"la la-calendar-o\"></i>\r\n              <input\r\n                class=\"datePickerHidden\"\r\n                type=\"date\"\r\n                onChange={this.handleDateSelect.bind(this)}\r\n              />\r\n            </div>\r\n            <div\r\n              class=\"caledarBtns\"\r\n              onClick={() => this.handleOptionEvent(\"gotoToday\")}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-original-title=\"Today\"\r\n            >\r\n              <i class=\"la la-clock-o\"></i>\r\n            </div>\r\n            <div\r\n              class=\"caledarBtns\"\r\n              onClick={() =>\r\n                this.handleOptionEvent(\"add\", this.getNewBookingModel())\r\n              }\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-original-title=\"Create new booking\"\r\n            >\r\n              <i class=\"la la-plus\"></i>\r\n            </div>\r\n          </div>\r\n          <div class=\"row justify-content-around no-gutters searchContiner\">\r\n            <fieldset\r\n              class={`form-group position-relative ${\r\n                this.searchValue != \"\" ? \"show\" : \"\"\r\n              }`}\r\n            >\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control form-control-sm input-sm\"\r\n                id=\"iconLeft7\"\r\n                value={this.searchValue}\r\n                placeholder=\"Find unit\"\r\n                onInput={(event) => this.handleFilterRooms(event)}\r\n              />\r\n              {this.searchValue !== \"\" ? (\r\n                <div\r\n                  class=\"form-control-position pointer\"\r\n                  onClick={() => this.handleClearSearch()}\r\n                  data-toggle=\"tooltip\"\r\n                  data-placement=\"top\"\r\n                  data-original-title=\"Clear Selection\"\r\n                >\r\n                  <i class=\"la la-close font-small-4\"></i>\r\n                </div>\r\n              ) : null}\r\n\r\n              {this.searchList.length ? (\r\n                <div class=\"position-absolute1 searchListContainer1 full-width dropdown-menu dropdown-menu-right full-width\">\r\n                  {this.searchList.map((room) => (\r\n                    <div\r\n                      class=\"searchListItem1 dropdown-item p-1 text-left pointer\"\r\n                      onClick={() => this.handleScrollToRoom(room.id)}\r\n                    >\r\n                      {room.name}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : null}\r\n            </fieldset>\r\n          </div>\r\n        </div>\r\n        <div class=\"stickyCell headersContainer\">\r\n          <div class=\"monthsContainer\">\r\n            {this.calendarData.monthsInfo.map((monthInfo) => (\r\n              <div\r\n                class=\"monthCell\"\r\n                style={{ width: monthInfo.daysCount * 70 + \"px\" }}\r\n              >\r\n                <div class=\"monthTitle\">{monthInfo.monthName}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {this.calendarData.days.map((dayInfo) => (\r\n            <div\r\n              class={`headerCell align-items-center ${\"day-\" + dayInfo.day} ${\r\n                dayInfo.day === this.today ? \"currentDay\" : \"\"\r\n              }`}\r\n              data-day={dayInfo.day}\r\n            >\r\n              <div class=\"preventPageScroll\">\r\n                <span\r\n                  class={`badge badge-${\r\n                    dayInfo.unassigned_units_nbr !== 0\r\n                      ? \"info pointer\"\r\n                      : \"light\"\r\n                  } badge-pill`}\r\n                  onClick={() => this.showToBeAssigned(dayInfo)}\r\n                >\r\n                  {dayInfo.unassigned_units_nbr}\r\n                </span>\r\n              </div>\r\n              <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\r\n              <div class=\"dayCapacityPercent\">{dayInfo.occupancy}%</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: flex;\r\n  text-align: left;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n.date-range-input {\r\n  border: 0;\r\n  outline: 0;\r\n  margin: 0;\r\n  flex: 1;\r\n}\r\n.date-range-input:focus {\r\n  border: 0;\r\n  outline: 0;\r\n}\r\n.iglRangePicker {\r\n  margin: 0;\r\n  border: 1px solid #379ff2;\r\n  border-radius: 6px;\r\n  min-width: 300px;\r\n  max-width: 320px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n  text-align: center;\r\n  margin-right: 5px;\r\n  padding: 5px 2rem;\r\n}\r\n.calendarPickerContainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  /*align-items: center;*/\r\n}\r\n\r\n.dateRangeLabel {\r\n  margin-right: 5px;\r\n}\r\n\r\n.taxMessage {\r\n  padding: 5px;\r\n  display: inline-block;\r\n}\r\n@media only screen and (min-width: 600px) {\r\n  :host {\r\n    flex-direction: row;\r\n  }\r\n  .calendarPickerContainer {\r\n    flex-direction: row;\r\n    align-items: center;\r\n  }\r\n}","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  State,\r\n  Event,\r\n  EventEmitter,\r\n  Prop,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-date-range\",\r\n  styleUrl: \"igl-date-range.css\",\r\n  scoped: true,\r\n})\r\nexport class IglDateRange {\r\n  @Prop({ reflect: true }) message: string = \"\";\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Event() dateSelectEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() renderAgain: boolean = false;\r\n\r\n  private totalNights: number = 0;\r\n  private fromDate: Date;\r\n  private toDate: Date;\r\n  private fromDateStr: string = \"from\";\r\n  private toDateStr: string = \"to\";\r\n  dateRangeInput: HTMLElement;\r\n\r\n  getStringDateFormat(dt) {\r\n    return (\r\n      dt.getFullYear() +\r\n      \"-\" +\r\n      (dt.getMonth() < 9 ? \"0\" : \"\") +\r\n      (dt.getMonth() + 1) +\r\n      \"-\" +\r\n      (dt.getDate() <= 9 ? \"0\" : \"\") +\r\n      dt.getDate()\r\n    );\r\n  }\r\n\r\n  componentWillLoad() {\r\n    let dt = new Date();\r\n    dt.setHours(0, 0, 0, 0);\r\n    dt.setDate(dt.getDate() + 1);\r\n    if (this.defaultData) {\r\n      if (this.defaultData.fromDate) {\r\n        this.fromDate = new Date(this.defaultData.fromDate);\r\n        this.fromDate.setHours(0, 0, 0, 0);\r\n        this.fromDateStr = this.getFormattedDateString(this.fromDate);\r\n      }\r\n      if (this.defaultData.toDate) {\r\n        this.toDate = new Date(this.defaultData.toDate);\r\n        this.toDate.setHours(0, 0, 0, 0);\r\n        this.toDateStr = this.getFormattedDateString(this.toDate);\r\n      }\r\n    }\r\n    if (this.fromDate && this.toDate) {\r\n      this.calculateTotalNights();\r\n      this.handleDateSelectEvent(\"selectedDateRange\", {\r\n        fromDate: this.fromDate.getTime(),\r\n        toDate: this.toDate.getTime(),\r\n        fromDateStr: this.fromDateStr,\r\n        toDateStr: this.toDateStr,\r\n        dateDifference: this.totalNights,\r\n      });\r\n    }\r\n  }\r\n\r\n  calculateTotalNights() {\r\n    this.totalNights = Math.floor(\r\n      (this.toDate.getTime() - this.fromDate.getTime()) / 86400000\r\n    );\r\n  }\r\n  getFormattedDateString(dt) {\r\n    return (\r\n      dt.getDate() +\r\n      \" \" +\r\n      dt.toLocaleString(\"default\", { month: \"short\" }).toLowerCase() +\r\n      \" \" +\r\n      dt.getFullYear()\r\n    );\r\n  }\r\n\r\n  handleDateSelectEvent(key, data: any = \"\") {\r\n    this.dateSelectEvent.emit({ key, data });\r\n  }\r\n  handleDateChange(evt) {\r\n    const { start, end } = evt.detail;\r\n    this.fromDate = start.toDate();\r\n    this.toDate = end.toDate();\r\n    this.calculateTotalNights();\r\n    this.handleDateSelectEvent(\"selectedDateRange\", {\r\n      fromDate: this.fromDate.getTime(),\r\n      toDate: this.toDate.getTime(),\r\n      fromDateStr: start.format(\"DD MMM YYYY\"),\r\n      toDateStr: end.format(\"DD MMM YYYY\"),\r\n      dateDifference: this.totalNights,\r\n    });\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"calendarPickerContainer ml-0\">\r\n          <h5 class=\"dateRangeLabel\">Dates</h5>\r\n          <div class=\"iglRangePicker\">\r\n            <ir-date-picker\r\n              fromDate={this.fromDate}\r\n              toDate={this.toDate}\r\n              autoApply\r\n              onDateChanged={(evt) => {\r\n                this.handleDateChange(evt);\r\n              }}\r\n            ></ir-date-picker>\r\n\r\n            {this.totalNights ? (\r\n              <span class=\"iglRangeNights\">\r\n                {this.totalNights +\r\n                  (this.totalNights > 1 ? \" nights\" : \" night\")}\r\n              </span>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div class=\"taxMessage display-inline\">{this.message}</div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n/* Legend */\r\n\r\n.legendHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.legendCloseBtn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.legendCloseBtn:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n\r\n.legendRow {\r\n  position: relative;\r\n  vertical-align: middle;\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\n.legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n.legend_skew,\r\n.legend_skewsplit {\r\n  transform: skew(-30deg);\r\n  width: 15px;\r\n  height: 16px;\r\n}\r\n\r\n.legend_circle {\r\n  border-radius: 100%;\r\n  width: 10px;\r\n  height: 10px;\r\n  margin: 3px 3px 3px 2px;\r\n}\r\n\r\n.legend_skewsplit {\r\n  border-right: 2px solid #000000;\r\n}\r\n\r\n.blueColor {\r\n  background-color: #31bef1;\r\n}\r\n.greenColor {\r\n  background-color: #45b16d;\r\n}\r\n.yellowColor {\r\n  background-color: #f4d552;\r\n}\r\n.greyColor {\r\n  background-color: #a0a0a0;\r\n}\r\n.redColor {\r\n  background-color: #f34752;\r\n}\r\n.pinkColor {\r\n  background-color: #f9b4b7;\r\n}\r\n\r\n/* Legend Calendar */\r\n\r\n.legendCalendar .legendRow {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.legendCalendar .legendRow:first-child .legendCal {\r\n  background-color: #ececec;\r\n}\r\n\r\n.legendCalendar .legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n.legendCalendar .legendCal {\r\n  width: 80px;\r\n  height: 25px;\r\n  text-align: center;\r\n  display: inline-grid !important;\r\n  align-content: center;\r\n  font-size: 0.9em;\r\n}\r\n\r\n.legendCalendar .legendCal .badge {\r\n  margin-top: 0.2rem;\r\n}\r\n\r\n.legendCalendar .legendCal.legendCal-h2 {\r\n  height: 40px;\r\n}\r\n\r\n.br-t {\r\n  border-top: 1px solid #a0a0a0;\r\n}\r\n.br-s {\r\n  border-left: 1px solid #a0a0a0;\r\n  border-right: 1px solid #a0a0a0;\r\n}\r\n.br-bt {\r\n  border-bottom: 1px solid #a0a0a0;\r\n}\r\n\r\n.highphenLegend {\r\n  font-size: 0.9em;\r\n}\r\n\r\n.highphenLegend::before {\r\n  width: 12px;\r\n  height: 0.5px;\r\n  content: \" \";\r\n  background-color: #000000;\r\n  vertical-align: middle;\r\n  display: inline-block;\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-legends',\r\n  styleUrl: 'igl-legends.css',\r\n  scoped: true,\r\n})\r\nexport class IglLegends {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() legendData: { [key: string]: any };\r\n\r\n  handleOptionEvent(key, data=\"\"){\r\n    this.optionEvent.emit({key, data});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"legendContainer pr-1 text-left\">\r\n        <div>\r\n          <div>\r\n            <div class=\"stickyHeader\">\r\n              <div class=\"legendHeader pt-1\">Legend</div>\r\n              <div class=\"legendCloseBtn pt-1\" onClick={() => this.handleOptionEvent(\"closeSideMenu\")}><i class=\"ft-chevrons-left\"></i></div>\r\n              <hr/>\r\n            </div>\r\n            <div class=\"mt-2 pl-1\">\r\n              {\r\n                this.legendData.map((legendInfo) => (\r\n                  <div class=\"legendRow \"><div class={`legend_${legendInfo.design} mr-1`} style={{backgroundColor: (legendInfo.color)}}></div><span class=\"font-small-3\">{legendInfo.name}</span></div>\r\n                ))\r\n              }\r\n            </div>\r\n            <hr/>\r\n            <div class=\"mt-2\">\r\n                <div class=\"legendCalendar\">\r\n                  <div class=\"legendRow align-items-center\"><div class=\"legendCal br-t br-s br-bt\"><strong>MAR 2022</strong></div><div class=\"highphenLegend\">Month and Year</div></div>\r\n                  <div class=\"legendRow\"><div class=\"legendCal pl-2 pr-2 br-s\"><span class=\"badge badge-primary badge-pill\">3</span></div><div class=\"highphenLegend\"><div>Unassigned Units (Click to Assign)</div></div></div>\r\n                  <div class=\"legendRow\"><div class=\"legendCal br-s\">FRI 18</div><div class=\"highphenLegend\">Date</div></div>\r\n                  <div class=\"legendRow\"><div class=\"legendCal br-s br-bt font-small-3\">15%</div><div class=\"highphenLegend\">Occupancy</div></div>\r\n                  <div class=\"legendRow\"><div class=\"legendCal br-s font-small-3\">20</div><div class=\"highphenLegend\">Inventory</div></div>\r\n                  <div class=\"legendRow align-items-center\"><div class=\"legendCal br-s br-bt font-small-2\"><u>R$100,00</u></div><div class=\"highphenLegend\"><div>Rate (Click to Change)</div></div></div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 10000;\r\n  /* min-width: 450px; */\r\n}\r\n\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\n\r\n.scrollContent {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n\r\n.background-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.formContainer {\r\n  height: calc(100% - 79px);\r\n  overflow: auto;\r\n}\r\n\r\n.sideWindow {\r\n  /* display: grid; */\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  background-color: #ffffff;\r\n}\r\n\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n\r\nbutton:not(:disabled),\r\n[type=\"button\"]:not(:disabled) {\r\n  cursor: pointer;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n","import { Component, Prop, h, Event, EventEmitter, Host, State } from '@stencil/core';\r\nimport { IPageTwoDataUpdateProps, PageTwoButtonsTypes } from '../../../models/models';\r\n@Component({\r\n  tag: 'igl-pagetwo',\r\n  styleUrl: 'igl-pagetwo.css',\r\n  scoped: true,\r\n})\r\nexport class IglPagetwo {\r\n  @Prop({ reflect: true }) isEditOrAddRoomEvent: boolean;\r\n  @Prop() dateRangeData: { [key: string]: any };\r\n  @Prop() bookingData: { [key: string]: any };\r\n  @Prop() showSplitBookingOption: boolean;\r\n  @Prop() language: string;\r\n  @Prop() bookedByInfoData: { [key: string]: any };\r\n  @Prop() bedPreferenceType: any;\r\n  @Prop() selectedRooms: any;\r\n  @Prop({ reflect: true }) isLoading: string;\r\n  @Prop() countryNodeList;\r\n  @Prop() selectedGuestData;\r\n  @Event() dataUpdateEvent: EventEmitter<IPageTwoDataUpdateProps>;\r\n  @Event() buttonClicked: EventEmitter<{\r\n    key: PageTwoButtonsTypes;\r\n    data?: CustomEvent;\r\n  }>;\r\n  @State() selectedBookedByData;\r\n  @State() guestData: any;\r\n\r\n  @State() selectedUnits: { [key: string]: any } = {};\r\n\r\n  componentWillLoad() {\r\n    this.initializeGuestData();\r\n  }\r\n  initializeGuestData() {\r\n    let total = 0;\r\n    const newSelectedUnits = { ...this.selectedUnits };\r\n\r\n    for (const key in this.selectedRooms) {\r\n      for (const prop in this.selectedRooms[key]) {\r\n        const totalRooms = this.selectedRooms[key][prop].totalRooms;\r\n        newSelectedUnits[key] = Array(totalRooms).fill(-1);\r\n      }\r\n    }\r\n\r\n    this.selectedUnits = newSelectedUnits;\r\n    this.guestData = [];\r\n    for (const key of Object.keys(this.selectedRooms)) {\r\n      for (const prop of Object.keys(this.selectedRooms[key])) {\r\n        for (let i = 1; i <= this.selectedRooms[key][prop].totalRooms; i++) {\r\n          this.guestData.push({\r\n            guestName: '',\r\n            roomId: '',\r\n            preference: '',\r\n            ...this.selectedRooms[key][prop],\r\n          });\r\n        }\r\n        total += this.selectedRooms[key][prop].totalRooms * this.selectedRooms[key][prop].rate;\r\n      }\r\n    }\r\n    this.bookingData.TOTAL_PRICE = total;\r\n  }\r\n\r\n  getRoomsListFromCategoryId(categoryId) {\r\n    let category = this.bookingData.roomsInfo?.find(category => category.id === categoryId);\r\n    return (category && category.physicalrooms) || [];\r\n  }\r\n  handleOnApplicationInfoDataUpdateEvent(event: CustomEvent, index: number) {\r\n    const opt = event.detail;\r\n    const categoryIdKey = `c_${opt.data.roomCategoryId}`;\r\n    const updatedUnits = [...(this.selectedUnits[categoryIdKey] || [])];\r\n    updatedUnits[index] = opt.data.roomId;\r\n    this.selectedUnits = {\r\n      ...this.selectedUnits,\r\n      [categoryIdKey]: updatedUnits,\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: 'applicationInfoUpdateEvent',\r\n      value: event.detail,\r\n    });\r\n  }\r\n\r\n  handleEventData(event: any, key: string, index: number) {\r\n    if (key === 'application-info') {\r\n      this.handleOnApplicationInfoDataUpdateEvent(event, index);\r\n    } else {\r\n      this.selectedBookedByData = event.detail.data;\r\n      this.dataUpdateEvent.emit({\r\n        key: 'propertyBookedBy',\r\n        value: event.detail,\r\n      });\r\n    }\r\n  }\r\n  isGuestDataIncomplete() {\r\n    if (this.selectedGuestData.length !== this.guestData.length) {\r\n      return true;\r\n    }\r\n    for (const data of this.selectedGuestData) {\r\n      if (data.guestName === '' || data.preference === '' || data.roomId === '') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  isButtonDisabled(key: string) {\r\n    const isValidProperty = (property, key, comparedBy) => {\r\n      if (!property) {\r\n        return true;\r\n      }\r\n      if (property === this.selectedGuestData) {\r\n        return this.isGuestDataIncomplete();\r\n      }\r\n      return property[key] === comparedBy || property[key] === undefined;\r\n    };\r\n\r\n    return (\r\n      this.isLoading === key ||\r\n      isValidProperty(this.selectedGuestData, 'guestName', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'isdCode', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'contactNumber', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'firstName', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'lastName', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'countryId', -1) ||\r\n      isValidProperty(this.selectedBookedByData, 'selectedArrivalTime', '') ||\r\n      isValidProperty(this.selectedBookedByData, 'email', '')\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"scrollContent\">\r\n        <div class=\"row\">\r\n          <div class=\"col-6 text-left p-0\">\r\n            <span class=\"mr-1 font-weight-bold font-medium-1\">\r\n              {this.dateRangeData.fromDateStr} - {this.dateRangeData.toDateStr}\r\n            </span>\r\n            {this.dateRangeData.dateDifference} nights\r\n          </div>\r\n          <div class=\"col-6 text-right\">\r\n            Total price <span class=\"font-weight-bold font-medium-1\">{'$' + this.bookingData.TOTAL_PRICE || '$0.00'}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {this.guestData.map((roomInfo, index) => (\r\n          <igl-application-info\r\n            bedPreferenceType={this.bedPreferenceType}\r\n            index={index}\r\n            selectedUnits={this.selectedUnits[`c_${roomInfo.roomCategoryId}`]}\r\n            guestInfo={roomInfo}\r\n            guestRefKey={index}\r\n            bookingType={this.bookingData.event_type}\r\n            roomsList={this.getRoomsListFromCategoryId(roomInfo.roomCategoryId)}\r\n            onDataUpdateEvent={event =>\r\n              //this.handleOnApplicationInfoDataUpdateEvent(event, index)\r\n              this.handleEventData(event, 'application-info', index)\r\n            }\r\n          ></igl-application-info>\r\n        ))}\r\n\r\n        {this.isEditOrAddRoomEvent || this.showSplitBookingOption ? null : (\r\n          <igl-property-booked-by\r\n            countryNodeList={this.countryNodeList}\r\n            language={this.language}\r\n            defaultData={this.bookedByInfoData}\r\n            onDataUpdateEvent={event =>\r\n              // this.dataUpdateEvent.emit({\r\n              //   key: \"propertyBookedBy\",\r\n              //   value: event.detail,\r\n              // })\r\n              this.handleEventData(event, 'propertyBookedBy', 0)\r\n            }\r\n          ></igl-property-booked-by>\r\n        )}\r\n\r\n        {this.isEditOrAddRoomEvent ? (\r\n          <div class=\"row p-0 mb-1 mt-2\">\r\n            <div class=\"col-6\">\r\n              <button type=\"button\" class=\"btn btn-secondary full-width\" onClick={() => this.buttonClicked.emit({ key: 'cancel' })}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <button\r\n                disabled={this.isLoading === 'save' || this.isGuestDataIncomplete()}\r\n                type=\"button\"\r\n                class=\"btn btn-primary full-width\"\r\n                onClick={() => this.buttonClicked.emit({ key: 'save' })}\r\n              >\r\n                {this.isLoading === 'save' && <i class=\"la la-circle-o-notch spinner mx-1\"></i>}\r\n                Save\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div class=\"row p-0 mb-1 mt-2\">\r\n            <div class=\"col-4\">\r\n              <button type=\"button\" class=\"btn btn-secondary full-width\" onClick={() => this.buttonClicked.emit({ key: 'back' })}>\r\n                &lt;&lt; Back\r\n              </button>\r\n            </div>\r\n            <div class=\"col-4\">\r\n              <button disabled={this.isButtonDisabled('book')} type=\"button\" class=\"btn btn-primary full-width\" onClick={() => this.buttonClicked.emit({ key: 'book' })}>\r\n                {this.isLoading === 'book' && <i class=\"la la-circle-o-notch spinner mx-1\"></i>}\r\n                Book\r\n              </button>\r\n            </div>\r\n            <div class=\"col-4\">\r\n              <button\r\n                disabled={this.isButtonDisabled('bookAndCheckIn')}\r\n                type=\"button\"\r\n                class=\"btn btn-primary full-width\"\r\n                onClick={() => this.buttonClicked.emit({ key: 'bookAndCheckIn' })}\r\n              >\r\n                {this.isLoading === 'bookAndCheckIn' && <i class=\"la la-circle-o-notch spinner mx-1\"></i>}\r\n                Book & check in\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n\r\n.bookedByEmailContainer {\r\n  flex: auto;\r\n  max-width: 250px;\r\n}\r\n\r\n.bookedDetailsForm label {\r\n  min-width: 125px;\r\n  max-width: 125px;\r\n}\r\n\r\n.bookedDetailsForm .controlContainer {\r\n  width: calc(100% - 127px);\r\n}\r\n\r\n.bookedDetailsForm .form-group {\r\n  margin-bottom: 10px !important;\r\n}\r\n\r\n.bookedDetailsForm .checkBoxContainer input {\r\n  height: 1.2rem !important;\r\n  width: 30px;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  State,\r\n} from \"@stencil/core\";\r\nimport { BookingService } from \"../../../services/booking.service\";\r\nimport { IEntries, ICountry } from \"../../../models/IBooking\";\r\nimport { v4 } from \"uuid\";\r\n\r\n@Component({\r\n  tag: \"igl-property-booked-by\",\r\n  styleUrl: \"igl-property-booked-by.css\",\r\n  scoped: true,\r\n})\r\nexport class IglPropertyBookedBy {\r\n  @Prop() language: string;\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  private bookingService: BookingService = new BookingService();\r\n  private arrivalTimeList: IEntries[] = [];\r\n  @Prop() countryNodeList: ICountry[] = [];\r\n  private expiryMonths: string[] = [\r\n    \"01\",\r\n    \"02\",\r\n    \"03\",\r\n    \"04\",\r\n    \"05\",\r\n    \"06\",\r\n    \"07\",\r\n    \"08\",\r\n    \"09\",\r\n    \"10\",\r\n    \"11\",\r\n    \"12\",\r\n  ];\r\n  private expiryYears: string[] = [];\r\n  private currentMonth: string = \"01\";\r\n  @State() bookedByData: { [key: string]: any } = {\r\n    id: undefined,\r\n    email: \"\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    countryId: \"\",\r\n    isdCode: \"\",\r\n    contactNumber: \"\",\r\n    selectedArrivalTime: {\r\n      code: \"\",\r\n      description: \"\",\r\n    },\r\n    emailGuest: false,\r\n    message: \"\",\r\n    cardNumber: \"\",\r\n    cardHolderName: \"\",\r\n    expiryMonth: \"\",\r\n    expiryYear: \"\",\r\n  };\r\n\r\n  async componentWillLoad() {\r\n    this.initializeExpiryYears();\r\n    this.initializeDateData();\r\n    this.populateBookedByData();\r\n  }\r\n\r\n  private initializeExpiryYears() {\r\n    const currentYear = new Date().getFullYear();\r\n    this.expiryYears = Array.from({ length: 4 }, (_, index) =>\r\n      (currentYear + index).toString()\r\n    );\r\n  }\r\n\r\n  private initializeDateData() {\r\n    const dt = new Date();\r\n    const month = dt.getMonth() + 1;\r\n    this.currentMonth = month < 10 ? `0${month}` : month.toString();\r\n  }\r\n\r\n  private populateBookedByData() {\r\n    this.bookedByData = this.defaultData ? { ...this.defaultData } : {};\r\n    this.arrivalTimeList = this.defaultData?.arrivalTime || [];\r\n\r\n    if (!this.bookedByData.expiryMonth) {\r\n      this.bookedByData.expiryMonth = this.currentMonth;\r\n    }\r\n    if (!this.bookedByData.expiryYear) {\r\n      this.bookedByData.expiryYear = new Date().getFullYear();\r\n    }\r\n  }\r\n\r\n  handleDataChange(key, event) {\r\n    const foundTime = this.arrivalTimeList.find(\r\n      (time) => time.CODE_NAME === event.target.value\r\n    );\r\n\r\n    this.bookedByData[key] =\r\n      key === \"emailGuest\"\r\n        ? event.target.checked\r\n        : key === \"arrivalTime\"\r\n        ? {\r\n            code: event.target.value,\r\n            description: (foundTime && foundTime.CODE_VALUE_EN) || \"\",\r\n          }\r\n        : event.target.value;\r\n    this.dataUpdateEvent.emit({\r\n      key: \"bookedByInfoUpdated\",\r\n      data: { ...this.bookedByData },\r\n    });\r\n    if (key === \"countryId\") {\r\n      this.bookedByData = {\r\n        ...this.bookedByData,\r\n        isdCode: event.target.value,\r\n      };\r\n    }\r\n  }\r\n\r\n  handleNumberInput(key, event: InputEvent) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    const inputValue = inputElement.value;\r\n\r\n    // Regular expression to match only numeric characters (0-9)\r\n    const numericRegex = /^[0-9]+$/;\r\n\r\n    if (!numericRegex.test(inputValue)) {\r\n      // If the input is not numeric, prevent it from being entered\r\n      inputElement.value = inputValue.replace(/[^0-9]/g, \"\");\r\n    }\r\n    if (inputValue === inputElement.value) {\r\n      this.handleDataChange(key, event);\r\n    }\r\n  }\r\n\r\n  async handleEmailInput(key, event: InputEvent) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    const inputValue = inputElement.value;\r\n    if (this.isValidEmail(inputValue)) {\r\n      this.handleDataChange(key, event);\r\n    }\r\n  }\r\n  async checkUser() {\r\n    try {\r\n      const email = this.bookedByData.email;\r\n      if (this.isValidEmail(email)) {\r\n        const res = await this.bookingService.getUserInfo(email);\r\n        if (res !== null) {\r\n          this.bookedByData = {\r\n            ...this.bookedByData,\r\n            id: res.id,\r\n            firstName: res.first_name,\r\n            lastName: res.last_name,\r\n            contactNumber: res.mobile,\r\n            countryId: res.country_id,\r\n            isdCode: res.country_id.toString(),\r\n          };\r\n        } else {\r\n          this.bookedByData = {\r\n            ...this.bookedByData,\r\n            id: undefined,\r\n            firstName: \"\",\r\n            lastName: \"\",\r\n            contactNumber: \"\",\r\n            countryId: \"\",\r\n            isdCode: \"\",\r\n          };\r\n        }\r\n        this.dataUpdateEvent.emit({\r\n          key: \"bookedByInfoUpdated\",\r\n          data: { ...this.bookedByData },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      //   toastr.error(error);\r\n    }\r\n  }\r\n  isValidEmail(emailId) {\r\n    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\r\n    return emailPattern.test(emailId);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"text-left mt-3\">\r\n          <div class=\"form-group row text-left align-items-center\">\r\n            <label class=\"p-0 m-0 label-control mr-1 font-weight-bold\">\r\n              Booked by\r\n            </label>\r\n            <div class=\"bookedByEmailContainer\">\r\n              <input\r\n                id={v4()}\r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                placeholder=\"Email address\"\r\n                name=\"bookeyByEmail\"\r\n                value={this.bookedByData.email}\r\n                onInput={(event) => this.handleEmailInput(\"email\", event)}\r\n                required\r\n                onBlur={() => this.checkUser()}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"bookedDetailsForm text-left mt-2 font-small-3\">\r\n          <div class=\"row\">\r\n            <div class=\"p-0 col-md-6\">\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">First name</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"First name\"\r\n                    id={v4()}\r\n                    value={this.bookedByData.firstName}\r\n                    onInput={(event) =>\r\n                      this.handleDataChange(\"firstName\", event)\r\n                    }\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Last name</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"Last name\"\r\n                    id={v4()}\r\n                    value={this.bookedByData.lastName}\r\n                    onInput={(event) =>\r\n                      this.handleDataChange(\"lastName\", event)\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Country</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <select\r\n                    class=\"form-control input-sm pr-0\"\r\n                    id={v4()}\r\n                    onChange={(event) =>\r\n                      this.handleDataChange(\"countryId\", event)\r\n                    }\r\n                  >\r\n                    <option\r\n                      value=\"\"\r\n                      selected={this.bookedByData.countryId === \"\"}\r\n                    >\r\n                      Select\r\n                    </option>\r\n                    {this.countryNodeList.map((countryNode) => (\r\n                      <option\r\n                        value={countryNode.id}\r\n                        selected={\r\n                          this.bookedByData.countryId === countryNode.id\r\n                        }\r\n                      >\r\n                        {countryNode.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Mobile phone</label>\r\n                <div class=\"p-0 m-0 pr-1 row controlContainer\">\r\n                  <div class=\"col-3 p-0 m-0\">\r\n                    <select\r\n                      class=\"form-control input-sm pr-0\"\r\n                      id={v4()}\r\n                      onChange={(event) =>\r\n                        this.handleDataChange(\"isdCode\", event)\r\n                      }\r\n                    >\r\n                      <option\r\n                        value=\"\"\r\n                        selected={this.bookedByData.isdCode === \"\"}\r\n                      >\r\n                        ISD\r\n                      </option>\r\n                      {this.countryNodeList.map((country) => (\r\n                        <option\r\n                          value={country.id}\r\n                          selected={\r\n                            this.bookedByData.isdCode === country.id.toString()\r\n                          }\r\n                        >\r\n                          {country.phone_prefix}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"col-9 p-0 m-0\">\r\n                    <input\r\n                      class=\"form-control\"\r\n                      type=\"tel\"\r\n                      placeholder=\"Contact Number\"\r\n                      id={v4()}\r\n                      value={this.bookedByData.contactNumber}\r\n                      onInput={(event) =>\r\n                        this.handleNumberInput(\"contactNumber\", event)\r\n                      }\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Your arrival time</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <select\r\n                    class=\"form-control input-sm pr-0\"\r\n                    id={v4()}\r\n                    onChange={(event) =>\r\n                      this.handleDataChange(\"selectedArrivalTime\", event)\r\n                    }\r\n                  >\r\n                    <option\r\n                      value=\"\"\r\n                      selected={this.bookedByData.selectedArrivalTime === \"\"}\r\n                    >\r\n                      -\r\n                    </option>\r\n                    {this.arrivalTimeList.map((time) => (\r\n                      <option\r\n                        value={time.CODE_NAME}\r\n                        selected={\r\n                          this.bookedByData.selectedArrivalTime ===\r\n                          time.CODE_NAME\r\n                        }\r\n                      >\r\n                        {time.CODE_VALUE_EN}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Email the guest</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer checkBoxContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"checkbox\"\r\n                    checked={this.bookedByData.emailGuest}\r\n                    id={v4()}\r\n                    onChange={(event) =>\r\n                      this.handleDataChange(\"emailGuest\", event)\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-6 p-0\">\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Any message for us?</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <textarea\r\n                    id={v4()}\r\n                    rows={4}\r\n                    class=\"form-control\"\r\n                    name=\"message\"\r\n                    value={this.bookedByData.message}\r\n                    onInput={(event) => this.handleDataChange(\"message\", event)}\r\n                  ></textarea>\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Card Number</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"\"\r\n                    pattern=\"0-9 \"\r\n                    id={v4()}\r\n                    value={this.bookedByData.cardNumber}\r\n                    onInput={(event) =>\r\n                      this.handleNumberInput(\"cardNumber\", event)\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Card holder name</label>\r\n                <div class=\"p-0 m-0 pr-1 controlContainer\">\r\n                  <input\r\n                    class=\"form-control\"\r\n                    type=\"text\"\r\n                    placeholder=\"\"\r\n                    pattern=\"0-9 \"\r\n                    id={v4()}\r\n                    value={this.bookedByData.cardHolderName}\r\n                    onInput={(event) =>\r\n                      this.handleDataChange(\"cardHolderName\", event)\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-group row p-0 align-items-center\">\r\n                <label class=\"p-0 m-0\">Expiry Date</label>\r\n                <div class=\"p-0 m-0 row controlContainer\">\r\n                  <div class=\"col-3 p-0 m-0\">\r\n                    <select\r\n                      class=\"form-control input-sm pr-0\"\r\n                      id={v4()}\r\n                      onChange={(event) =>\r\n                        this.handleDataChange(\"expiryMonth\", event)\r\n                      }\r\n                    >\r\n                      {this.expiryMonths.map((month) => (\r\n                        <option\r\n                          value={month}\r\n                          selected={month === this.bookedByData.expiryMonth}\r\n                        >\r\n                          {month}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"col-4 p-0 m-0\">\r\n                    <select\r\n                      class=\"form-control input-sm pr-0\"\r\n                      id={v4()}\r\n                      onChange={(event) =>\r\n                        this.handleDataChange(\"expiryYear\", event)\r\n                      }\r\n                    >\r\n                      {this.expiryYears.map((year, index) => (\r\n                        <option\r\n                          value={year}\r\n                          selected={index === this.bookedByData.expiryYear}\r\n                        >\r\n                          {year}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import axios from \"axios\";\r\nimport {\r\n  IAvailableRoom,\r\n  IRoomCategory,\r\n  IUnassignedDates,\r\n  InnerRecord,\r\n} from \"../models/tobeassigned\";\r\nimport { dateDifference, dateToFormattedString } from \"../utils/utils\";\r\n\r\nexport class ToBeAssignedService {\r\n  public async getUnassignedDates(\r\n    propertyid: number,\r\n    from_date: string,\r\n    to_date: string\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_UnAssigned_Dates?Ticket=${token}`,\r\n          {\r\n            propertyid,\r\n            from_date,\r\n            to_date,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return this.convertUnassignedDates(data.My_Result);\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  public async getUnassignedRooms(\r\n    propertyid: number,\r\n    specific_date: string,\r\n    roomInfo: any,\r\n    formattedLegendData: any\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Get_Aggregated_UnAssigned_Rooms?Ticket=${token}`,\r\n          {\r\n            propertyid,\r\n            specific_date,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return this.transformToAssignable(data, roomInfo, formattedLegendData);\r\n      } else {\r\n        throw new Error(\"Invalid Token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  public async assignUnit(\r\n    booking_nbr: string,\r\n    identifier: string,\r\n    pr_id: number\r\n  ) {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token) {\r\n        const { data } = await axios.post(\r\n          `/Assign_Exposed_Room?Ticket=${token}`,\r\n          {\r\n            booking_nbr,\r\n            identifier,\r\n            pr_id,\r\n          }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data;\r\n      } else {\r\n        throw new Error(\"Invalid token\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n  private cleanSpacesAndSpecialChars(str: string) {\r\n    const regex = /[^a-zA-Z0-9]+/g;\r\n    return str.replace(regex, \"\");\r\n  }\r\n\r\n  private transformToAssignable(\r\n    data: any,\r\n    roomInfo,\r\n    formattedLegendData\r\n  ): IRoomCategory[] {\r\n    const result: IRoomCategory[] = [];\r\n    data.My_Result.forEach((customer: any) => {\r\n      customer.unassigned_rooms.forEach((room: any) => {\r\n        let roomCategory: IRoomCategory = {\r\n          roomTypeName: room.room_type_name,\r\n          ID: room.identifier,\r\n          NAME: room.guest_name,\r\n          identifier: room.identifier,\r\n          FROM_DATE: room.unassigned_date,\r\n          TO_DATE: room.unassigned_date,\r\n          BOOKING_NUMBER: room.book_nbr,\r\n          STATUS: \"IN-HOUSE\",\r\n          defaultDateRange: {\r\n            fromDate: undefined,\r\n            toDate: undefined,\r\n            fromDateTimeStamp: 0,\r\n            toDateTimeStamp: 0,\r\n            fromDateStr: \"\",\r\n            toDateStr: \"\",\r\n            dateDifference: 0,\r\n          },\r\n          NO_OF_DAYS: 1,\r\n          roomsInfo: roomInfo,\r\n          legendData: formattedLegendData,\r\n          availableRooms: [],\r\n          RT_ID: this.getRoomTypeId(room.room_type_name, roomInfo),\r\n        };\r\n        this.updateAvailableRooms(\r\n          room,\r\n          roomCategory,\r\n          formattedLegendData,\r\n          roomInfo\r\n        );\r\n        this.addDefaultDateRange(roomCategory);\r\n        result.push(roomCategory);\r\n      });\r\n    });\r\n    return result;\r\n  }\r\n  addDefaultDateRange(roomCategory: IRoomCategory) {\r\n    roomCategory.defaultDateRange.fromDate = new Date(\r\n      roomCategory.FROM_DATE + \"T00:00:00\"\r\n    );\r\n    roomCategory.defaultDateRange.fromDateStr = dateToFormattedString(\r\n      roomCategory.defaultDateRange.fromDate\r\n    );\r\n    roomCategory.defaultDateRange.fromDateTimeStamp =\r\n      roomCategory.defaultDateRange.fromDate.getTime();\r\n\r\n    roomCategory.defaultDateRange.toDate = new Date(\r\n      roomCategory.TO_DATE + \"T00:00:00\"\r\n    );\r\n    roomCategory.defaultDateRange.toDateStr = dateToFormattedString(\r\n      roomCategory.defaultDateRange.toDate\r\n    );\r\n    roomCategory.defaultDateRange.toDateTimeStamp =\r\n      roomCategory.defaultDateRange.toDate.getTime();\r\n\r\n    roomCategory.defaultDateRange.dateDifference = roomCategory.NO_OF_DAYS;\r\n  }\r\n  private getRoomTypeId(roomName: string, roomInfo: any) {\r\n    return (\r\n      roomInfo.find(\r\n        (room) =>\r\n          this.cleanSpacesAndSpecialChars(room.name) ===\r\n          this.cleanSpacesAndSpecialChars(roomName)\r\n      ).id || null\r\n    );\r\n  }\r\n  private updateAvailableRooms(\r\n    room: any,\r\n    roomCategory: IRoomCategory,\r\n    formattedLegendData,\r\n    roomsInfo\r\n  ): void {\r\n    const rooms: IAvailableRoom[] = [];\r\n    room.assignable_units.forEach((unit: any) => {\r\n      if (unit.Is_Fully_Available && !unit.Is_Not_Available) {\r\n        const days = dateDifference(unit.from_date, unit.to_date);\r\n        rooms.push({\r\n          RT_ID: roomCategory.RT_ID,\r\n          STATUS: \"PENDING-CONFIRMATION\",\r\n          FROM_DATE: unit.from_date,\r\n          roomName: unit.name,\r\n          PR_ID: unit.pr_id,\r\n          TO_DATE: unit.to_date,\r\n          NO_OF_DAYS: days,\r\n          ID: \"NEW_TEMP_EVENT\",\r\n          NAME: \"\",\r\n          NOTES: \"\",\r\n          BALANCE: \"\",\r\n          INTERNAL_NOTE: \"\",\r\n          hideBubble: true,\r\n          legendData: formattedLegendData,\r\n          roomsInfo,\r\n        });\r\n        roomCategory.TO_DATE = unit.to_date;\r\n        roomCategory.NO_OF_DAYS = days;\r\n      }\r\n    });\r\n    roomCategory.availableRooms = rooms;\r\n  }\r\n\r\n  private convertUnassignedDates(\r\n    dates: IUnassignedDates[]\r\n  ): Record<number, InnerRecord> {\r\n    let convertedDates: Record<number, InnerRecord> = {};\r\n    dates.forEach((date) => {\r\n      convertedDates[new Date(date.date).getTime()] = {\r\n        categories: {},\r\n        dateStr: date.description,\r\n      };\r\n    });\r\n    return convertedDates;\r\n  }\r\n}\r\n","@import url(\"../../../../assets/feather/style.min.css\");\r\n@import url(\"../../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.guestTitle {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  padding: 2px;\r\n  margin-bottom: 5px;\r\n  margin-top: 5px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  /* margin-bottom: 5px; */\r\n}\r\n\r\n.guestTitle.selectedOrder {\r\n  background-color: #f9f9c9;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\nhr {\r\n  margin-top: 8px;\r\n  margin-bottom: 0px;\r\n}\r\n\r\n.bookingContainer {\r\n  background-color: #ececec;\r\n}\r\n\r\n.actionsContainer {\r\n  padding: 5px !important;\r\n  padding-right: 0px !important;\r\n}\r\n\r\n.selectContainer {\r\n  width: 195px;\r\n  margin-right: 8px;\r\n}\r\n\r\n.buttonsContainer {\r\n  width: 100px;\r\n}\r\n.btn-secondary {\r\n  margin-right: 8px !important;\r\n}\r\n","import { Component, Host, Prop, h, Event, EventEmitter, Listen, State } from '@stencil/core';\r\nimport { ToBeAssignedService } from '../../../../services/toBeAssigned.service';\r\nimport { v4 } from 'uuid';\r\n// import $ from 'jquery';\r\n\r\n@Component({\r\n  tag: 'igl-tba-booking-view',\r\n  styleUrl: 'igl-tba-booking-view.css',\r\n  scoped: true,\r\n})\r\nexport class IglTbaBookingView {\r\n  // @Element() private element: HTMLElement;\r\n  @Event({ bubbles: true, composed: true })\r\n  highlightToBeAssignedBookingEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) addToBeAssignedEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) scrollPageToRoom: EventEmitter;\r\n  @Event() assignRoomEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() selectedDate;\r\n  @Prop() eventData: { [key: string]: any } = {};\r\n  @Prop() categoriesData: { [key: string]: any } = {};\r\n  @Prop() categoryId;\r\n  @Prop() categoryIndex;\r\n  @Prop() eventIndex;\r\n  @State() renderAgain: boolean = false;\r\n\r\n  @State() selectedRoom: number = -1;\r\n  private highlightSection: boolean = false;\r\n  private allRoomsList: { [key: string]: any }[] = [];\r\n  private toBeAssignedService = new ToBeAssignedService();\r\n  onSelectRoom(evt) {\r\n    if (evt.stopImmediatePropagation) {\r\n      evt.stopImmediatePropagation();\r\n      evt.stopPropagation();\r\n    }\r\n    this.selectedRoom = parseInt(evt.target.value);\r\n  }\r\n\r\n  // componentDidLoad(){\r\n  //   this.initializeToolTips();\r\n  // }\r\n\r\n  componentShouldUpdate(newValue: string, oldValue: string, propName: string): boolean {\r\n    if (propName === 'selectedDate' && newValue !== oldValue) {\r\n      this.highlightSection = false;\r\n      this.selectedRoom = -1;\r\n      return true; // Prevent update for a specific prop value\r\n    } else if (propName === 'eventData' && newValue !== oldValue) {\r\n      this.selectedRoom = -1;\r\n      return true;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  componentWillLoad() {\r\n    if (this.categoryIndex === 0 && this.eventIndex === 0) {\r\n      setTimeout(() => {\r\n        this.handleHighlightAvailability();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  // initializeToolTips(){\r\n  // console.log($(this.element));\r\n  // console.log($('[data-toggle=\"tooltip\"]'))\r\n  // console.log($(this.element + ' [data-toggle=\"tooltip\"]'));\r\n\r\n  // $('[data-toggle=\"tooltip\"]').tooltip({\r\n  //   container: 'body'\r\n  // });\r\n  // }\r\n  //\r\n  async handleAssignUnit(event) {\r\n    try {\r\n      event.stopImmediatePropagation();\r\n      event.stopPropagation();\r\n      if (this.selectedRoom) {\r\n        await this.toBeAssignedService.assignUnit(this.eventData.BOOKING_NUMBER, this.eventData.ID, this.selectedRoom);\r\n        let assignEvent = { ...this.eventData, PR_ID: this.selectedRoom };\r\n        this.calendarData.bookingEvents.push(assignEvent);\r\n        this.addToBeAssignedEvent.emit({\r\n          key: 'tobeAssignedEvents',\r\n          data: [assignEvent],\r\n        });\r\n        this.assignRoomEvent.emit({ key: 'assignRoom', data: assignEvent });\r\n        window.location.reload();\r\n      }\r\n    } catch (error) {\r\n      //   toastr.error(error);\r\n    }\r\n  }\r\n\r\n  handleHighlightAvailability() {\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: 'highlightBookingId',\r\n      data: { bookingId: this.eventData.ID },\r\n    });\r\n    if (!this.selectedDate) {\r\n      return;\r\n    }\r\n    let filteredEvents = [];\r\n    let allRoomsList = [];\r\n    filteredEvents = this.eventData.availableRooms.map(room => {\r\n      allRoomsList.push({\r\n        calendar_cell: null,\r\n        id: room.PR_ID,\r\n        name: room.roomName,\r\n      });\r\n      return {\r\n        ...room,\r\n        defaultDateRange: this.eventData.defaultDateRange,\r\n        identifier: this.eventData.identifier,\r\n        // roomsInfo: this.eventData.roomsInfo,\r\n        // legendData: this.eventData.legendData,\r\n      };\r\n    });\r\n    this.allRoomsList = allRoomsList;\r\n    this.addToBeAssignedEvent.emit({\r\n      key: 'tobeAssignedEvents',\r\n      data: filteredEvents,\r\n    });\r\n\r\n    this.scrollPageToRoom.emit({\r\n      key: 'scrollPageToRoom',\r\n      id: this.categoryId,\r\n      refClass: 'category_' + this.categoryId,\r\n    });\r\n    // ID: \"NEW_TEMP_EVENT\",\r\n    // STATUS: \"PENDING_CONFIRMATION\"\r\n    this.renderView();\r\n  }\r\n\r\n  handleCloseAssignment(event) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    this.highlightSection = false;\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: 'highlightBookingId',\r\n      data: { bookingId: '----' },\r\n    });\r\n    this.onSelectRoom({ target: { value: '' } });\r\n    this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\r\n    this.renderView();\r\n  }\r\n\r\n  @Listen('highlightToBeAssignedBookingEvent', { target: 'window' })\r\n  highlightBookingEvent(event: CustomEvent) {\r\n    let data = event.detail.data;\r\n    if (data.bookingId != this.eventData.ID) {\r\n      this.highlightSection = false;\r\n      this.selectedRoom = -1;\r\n      this.renderView();\r\n    } else {\r\n      this.highlightSection = true;\r\n      this.renderView();\r\n    }\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n    // this.initializeToolTips();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"bookingContainer\" onClick={() => this.handleHighlightAvailability()}>\r\n          <div\r\n            class={`guestTitle ${this.highlightSection ? 'selectedOrder' : ''} pointer font-small-3`}\r\n            data-toggle=\"tooltip\"\r\n            data-placement=\"top\"\r\n            data-original-title=\"Click to assign unit\"\r\n          >\r\n            {`Book# ${this.eventData.BOOKING_NUMBER} , ${this.eventData.NAME}`}\r\n          </div>\r\n          <div class=\"row m-0 p-0 actionsContainer\">\r\n            <div class=\"d-inline-block p-0 selectContainer\">\r\n              <select class=\"form-control input-sm\" id={v4()} onChange={evt => this.onSelectRoom(evt)}>\r\n                <option value=\"\" selected={this.selectedRoom == -1}>\r\n                  Assign unit\r\n                </option>\r\n                {this.allRoomsList.map(room => (\r\n                  <option value={room.id} selected={this.selectedRoom == room.id}>\r\n                    {room.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            {this.highlightSection ? (\r\n              <div class=\"d-inline-block text-right buttonsContainer\">\r\n                <button type=\"button\" class=\"btn btn-secondary btn-sm\" onClick={evt => this.handleCloseAssignment(evt)}>\r\n                  X\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-primary btn-sm\" onClick={evt => this.handleAssignUnit(evt)} disabled={this.selectedRoom === -1}>\r\n                  Assign\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <hr />\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../../assets/feather/style.min.css\");\r\n@import url(\"../../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  Prop,\r\n  State,\r\n  h,\r\n  Event,\r\n  EventEmitter,\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"igl-tba-category-view\",\r\n  styleUrl: \"igl-tba-category-view.css\",\r\n  scoped: true,\r\n})\r\nexport class IglTbaCategoryView {\r\n  @Event() assignUnitEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() selectedDate;\r\n  @Prop() categoriesData: { [key: string]: any } = {};\r\n  @Prop() categoryId;\r\n  @Prop({ mutable: true }) eventDatas;\r\n  @Prop() categoryIndex;\r\n  @State() renderAgain: boolean = false;\r\n\r\n  // private localEventDatas;\r\n\r\n  componentWillLoad() {\r\n    // this.localEventDatas = this.eventDatas;\r\n  }\r\n\r\n  handleAssignRoomEvent(event: CustomEvent<{ [key: string]: any }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    const opt: { [key: string]: any } = event.detail;\r\n    this.eventDatas = this.eventDatas.filter(\r\n      (eventData) => eventData.ID != opt.data.ID\r\n    );\r\n    this.calendarData.bookingEvents.push(opt.data);\r\n    this.assignUnitEvent.emit({\r\n      key: \"assignUnit\",\r\n      data: {\r\n        RT_ID: this.categoryId,\r\n        selectedDate: this.selectedDate,\r\n        assignEvent: opt.data,\r\n        calendarData: this.calendarData,\r\n      },\r\n    });\r\n    // if(this.localEventDatas.length){\r\n    this.renderView();\r\n    // }\r\n  }\r\n\r\n  getEventView(categoryId, eventDatas) {\r\n    return eventDatas.map((eventData, ind) => (\r\n      <igl-tba-booking-view\r\n        calendarData={this.calendarData}\r\n        selectedDate={this.selectedDate}\r\n        eventData={eventData}\r\n        categoriesData={this.categoriesData}\r\n        categoryId={categoryId}\r\n        categoryIndex={this.categoryIndex}\r\n        eventIndex={ind}\r\n        onAssignRoomEvent={(evt) => this.handleAssignRoomEvent(evt)}\r\n      ></igl-tba-booking-view>\r\n    ));\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"sectionContainer\">\r\n          <div class=\"font-weight-bold mt-1 font-small-3\">\r\n            {this.categoriesData[this.categoryId].name}\r\n          </div>\r\n          {this.getEventView(this.categoryId, this.eventDatas)}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.tobeAssignedHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.closeBtn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.closeBtn:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  State,\r\n  Listen,\r\n  Fragment,\r\n} from \"@stencil/core\";\r\nimport { ToBeAssignedService } from \"../../../services/toBeAssigned.service\";\r\nimport { dateToFormattedString } from \"../../../utils/utils\";\r\n\r\n@Component({\r\n  tag: \"igl-to-be-assigned\",\r\n  styleUrl: \"igl-to-be-assigned.css\",\r\n  scoped: true,\r\n})\r\nexport class IglToBeAssigned {\r\n  @Prop() propertyid: number;\r\n  @Prop() from_date: string;\r\n  @Prop() to_date: string;\r\n  @Prop() loadingMessage: string = \"Fetching For Unassigned Rooms\";\r\n  @Prop({ mutable: true }) calendarData: { [key: string]: any };\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true })\r\n  reduceAvailableUnitEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) addToBeAssignedEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true })\r\n  highlightToBeAssignedBookingEvent: EventEmitter;\r\n  @State() showDatesList: boolean = false;\r\n  @State() renderAgain: boolean = false;\r\n  @State() orderedDatesList: any[] = [];\r\n  @State() isLoading: boolean = false;\r\n  private selectedDate = null;\r\n  private data: { [key: string]: any } = {};\r\n  private today = new Date();\r\n  private categoriesData: { [key: string]: any } = {};\r\n  private toBeAssignedService: ToBeAssignedService = new ToBeAssignedService();\r\n  private unassignedDates: any;\r\n  componentWillLoad() {\r\n    this.reArrangeData();\r\n  }\r\n  async updateCategories(key, calendarData) {\r\n    try {\r\n      let categorisedRooms = {};\r\n      const result = await this.toBeAssignedService.getUnassignedRooms(\r\n        this.propertyid,\r\n        dateToFormattedString(new Date(+key)),\r\n        calendarData.roomsInfo,\r\n        calendarData.formattedLegendData\r\n      );\r\n      result.forEach((room) => {\r\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\r\n          categorisedRooms[room.RT_ID] = [room];\r\n        } else {\r\n          categorisedRooms[room.RT_ID].push(room);\r\n        }\r\n      });\r\n      this.unassignedDates[key].categories = categorisedRooms;\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n\r\n  async reArrangeData() {\r\n    try {\r\n      this.isLoading = true;\r\n      this.today.setHours(0, 0, 0, 0);\r\n      this.calendarData.roomsInfo.forEach((category) => {\r\n        this.categoriesData[category.id] = {\r\n          name: category.name,\r\n          roomsList: category.physicalrooms,\r\n          roomIds: category.physicalrooms.map((room) => {\r\n            return room.id;\r\n          }),\r\n        };\r\n      });\r\n\r\n      this.selectedDate = null;\r\n      this.unassignedDates = await this.toBeAssignedService.getUnassignedDates(\r\n        this.propertyid,\r\n        dateToFormattedString(new Date()),\r\n        this.to_date\r\n      );\r\n      const firstKey = Object.keys(this.unassignedDates)[0];\r\n      await this.updateCategories(firstKey, this.calendarData);\r\n\r\n      this.data = this.unassignedDates;\r\n      this.orderedDatesList = Object.keys(this.data).sort(\r\n        (a, b) => parseInt(a) - parseInt(b)\r\n      );\r\n      if (!this.selectedDate && this.orderedDatesList.length) {\r\n        this.selectedDate = this.orderedDatesList[0];\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching unassigned dates:\", error);\r\n      //  toastr.error(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  @Listen(\"gotoToBeAssignedDate\", { target: \"window\" })\r\n  gotoDate(event: CustomEvent) {\r\n    this.showForDate(event.detail.data);\r\n    this.showDatesList = false;\r\n    this.renderView();\r\n  }\r\n\r\n  async showForDate(dateStamp) {\r\n    try {\r\n      this.isLoading = true;\r\n      this.showUnassignedDate();\r\n      await this.updateCategories(dateStamp, this.calendarData);\r\n      this.addToBeAssignedEvent.emit({ key: \"tobeAssignedEvents\", data: [] });\r\n      this.selectedDate = dateStamp;\r\n      this.showBookingPopup.emit({\r\n        key: \"calendar\",\r\n        data: parseInt(dateStamp) - 86400000,\r\n      });\r\n      this.isLoading = false; // goto 1 days before.. // calendar moves another 1 day\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  getDay(dt) {\r\n    const currentDate = new Date(dt);\r\n    const locale = \"default\"; //'en-US';\r\n    const dayOfWeek = this.getLocalizedDayOfWeek(currentDate, locale);\r\n    // const monthName = currentDate.toLocaleString(\"default\", { month: 'short' })\r\n    return (\r\n      dayOfWeek + \" \" + currentDate.getDate() + \", \" + currentDate.getFullYear()\r\n    );\r\n  }\r\n\r\n  getLocalizedDayOfWeek(date, locale) {\r\n    const options = { weekday: \"short\" };\r\n    return date.toLocaleDateString(locale, options);\r\n  }\r\n\r\n  handleOptionEvent(key, data = \"\") {\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: \"highlightBookingId\",\r\n      data: { bookingId: \"----\" },\r\n    });\r\n    this.addToBeAssignedEvent.emit({ key: \"tobeAssignedEvents\", data: [] });\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  showUnassignedDate() {\r\n    this.showDatesList = !this.showDatesList;\r\n  }\r\n\r\n  getToBeAssignedEntities() {\r\n    // toBeAssignedEvents\r\n  }\r\n\r\n  getCategoryView() {\r\n    if (\r\n      this.orderedDatesList.length &&\r\n      this.selectedDate &&\r\n      this.data[this.selectedDate]\r\n    ) {\r\n      return Object.entries(this.data[this.selectedDate].categories).map(\r\n        ([id, eventDatas], ind) => (\r\n          <igl-tba-category-view\r\n            calendarData={this.calendarData}\r\n            selectedDate={this.selectedDate}\r\n            categoryId={id}\r\n            categoryIndex={ind}\r\n            categoriesData={this.categoriesData}\r\n            eventDatas={eventDatas}\r\n            onAssignUnitEvent={(evt) => this.handleAssignUnit(evt)}\r\n          ></igl-tba-category-view>\r\n        )\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  handleAssignUnit(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const data = opt.data;\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    if (opt.key === \"assignUnit\") {\r\n      this.data[data.selectedDate].categories[data.RT_ID] = this.data[\r\n        data.selectedDate\r\n      ].categories[data.RT_ID].filter(\r\n        (eventData) => eventData.ID != data.assignEvent.ID\r\n      );\r\n      this.calendarData = data.calendarData; // RAJA\r\n      // this.calendarData.bookingEvents.push(data.assignEvent);\r\n\r\n      if (!this.data[data.selectedDate].categories[data.RT_ID].length) {\r\n        delete this.data[data.selectedDate].categories[data.RT_ID];\r\n\r\n        if (!Object.keys(this.data[data.selectedDate].categories).length) {\r\n          delete this.data[data.selectedDate];\r\n          this.orderedDatesList = this.orderedDatesList.filter(\r\n            (dateStamp) => dateStamp != data.selectedDate\r\n          );\r\n          this.selectedDate = this.orderedDatesList.length\r\n            ? this.orderedDatesList[0]\r\n            : null;\r\n        }\r\n      }\r\n\r\n      this.reduceAvailableUnitEvent.emit({\r\n        key: \"reduceAvailableDays\",\r\n        data: { selectedDate: data.selectedDate },\r\n      });\r\n      this.renderView();\r\n    }\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"tobeAssignedContainer pr-1 text-left\">\r\n        <div>\r\n          <div>\r\n            <div class=\"stickyHeader\">\r\n              <div class=\"tobeAssignedHeader pt-1\">Assignments</div>\r\n              <div\r\n                class=\"closeBtn pt-1\"\r\n                onClick={() => this.handleOptionEvent(\"closeSideMenu\")}\r\n              >\r\n                <i class=\"ft-chevrons-left\"></i>\r\n              </div>\r\n              <hr />\r\n              {this.isLoading ? (\r\n                <p>{this.loadingMessage}</p>\r\n              ) : (\r\n                <Fragment>\r\n                  {this.orderedDatesList.length ? (\r\n                    <div\r\n                      class={\r\n                        `text-center ` + (this.showDatesList ? \"show\" : \"\")\r\n                      }\r\n                    >\r\n                      <div onClick={() => this.showUnassignedDate()}>\r\n                        <span class=\"font-weight-bold\">\r\n                          {this.data[this.selectedDate].dateStr}\r\n                        </span>\r\n                        <i class=\"la la-angle-down ml-2\"></i>\r\n                      </div>\r\n                      {this.showDatesList ? (\r\n                        <div class=\"dropdown-menu dropdown-menu-right full-width\">\r\n                          {this.orderedDatesList.map((ordDate) => (\r\n                            <div\r\n                              class=\"pointer dropdown-item pointer\"\r\n                              onClick={() => this.showForDate(ordDate)}\r\n                            >\r\n                              {this.data[ordDate].dateStr}\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      ) : null}\r\n                    </div>\r\n                  ) : (\r\n                    \"All bookings assigned\"\r\n                  )}\r\n                </Fragment>\r\n              )}\r\n            </div>\r\n            {!this.isLoading && (\r\n              <div class=\"scrollabledArea\">\r\n                {this.orderedDatesList.length ? (\r\n                  Object.keys(this.data[this.selectedDate].categories)\r\n                    .length ? (\r\n                    this.getCategoryView()\r\n                  ) : (\r\n                    <div class=\"mt-1\">All assigned for this day.</div>\r\n                  )\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import axios from \"axios\";\r\n\r\nexport class RoomService {\r\n  public async fetchData(\r\n    id: number,\r\n    language: string\r\n  ): Promise<{ [key: string]: any }> {\r\n    try {\r\n      const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n      if (token !== null) {\r\n        const { data } = await axios.post(\r\n          `/Get_Exposed_Property?Ticket=${token}`,\r\n          { id, language }\r\n        );\r\n        if (data.ExceptionMsg !== \"\") {\r\n          throw new Error(data.ExceptionMsg);\r\n        }\r\n        return data;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n}\r\n","@import url(\"../../assets/feather/style.min.css\");\r\n@import url(\"../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  position: relative;\r\n  background-color: #ffffff;\r\n  height: 100%;\r\n  text-align: center;\r\n}\r\n\r\n.igl-calendar {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  height: 100%;\r\n}\r\n\r\n.calendarScrollContainer div {\r\n  position: relative;\r\n}\r\n\r\n.calendarScrollContainer {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n  position: relative;\r\n  white-space: nowrap;\r\n  border-left: 2px solid grey;\r\n}\r\n\r\n.showToBeAssigned,\r\n.showLegend {\r\n  grid-template-columns: 330px 1fr;\r\n}\r\n\r\n#calendarContainer {\r\n  position: absolute;\r\n}\r\n\r\ndiv {\r\n  position: relative;\r\n}\r\n\r\n.legendContainer,\r\n.tobeAssignedContainer {\r\n  display: none;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  padding-left: 0.5em !important;\r\n  padding-right: 0.5em !important;\r\n}\r\n\r\n.showToBeAssigned .tobeAssignedContainer {\r\n  display: block;\r\n}\r\n\r\n.showLegend .legendContainer {\r\n  display: block;\r\n}\r\n\r\n.tobeBooked {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  text-align: left;\r\n}\r\n","import {\r\n  Component,\r\n  Element,\r\n  Event,\r\n  EventEmitter,\r\n  Host,\r\n  Listen,\r\n  Prop,\r\n  State,\r\n  Watch,\r\n  h,\r\n} from \"@stencil/core\";\r\nimport { RoomService } from \"../../services/room.service\";\r\nimport { BookingService } from \"../../services/booking.service\";\r\nimport {\r\n  computeEndDate,\r\n  convertDMYToISO,\r\n  formatLegendColors,\r\n} from \"../../utils/utils\";\r\n\r\nimport axios from \"axios\";\r\nimport { EventsService } from \"../../services/events.service\";\r\nimport { ICountry } from \"../../models/IBooking\";\r\n\r\n@Component({\r\n  tag: \"igloo-calendar\",\r\n  styleUrl: \"igloo-calendar.css\",\r\n  scoped: true,\r\n})\r\nexport class IglooCalendar {\r\n  @Prop() propertyid: number;\r\n  @Prop() from_date: string;\r\n  @Prop() to_date: string;\r\n  @Prop() language: string;\r\n  @Prop() baseurl: string;\r\n  @Prop() loadingMessage: string;\r\n  @Prop() currencyName: string;\r\n  @Prop({ reflect: true }) ticket: string = \"\";\r\n  @Element() private element: HTMLElement;\r\n  @Event({ bubbles: true, composed: true })\r\n  dragOverHighlightElement: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) moveBookingTo: EventEmitter;\r\n\r\n  @State() calendarData: { [key: string]: any } = new Object();\r\n  @State() days: { [key: string]: any }[] = new Array();\r\n  @State() scrollViewDragging: boolean = false;\r\n\r\n  @State() bookingItem: { [key: string]: any } = null;\r\n  @State() showLegend: boolean = false;\r\n  @State() showToBeAssigned: boolean = false;\r\n  private bookingService: BookingService = new BookingService();\r\n  private countryNodeList: ICountry[] = [];\r\n  private visibleCalendarCells: { x: any[]; y: any[] } = { x: [], y: [] };\r\n  private scrollContainer: HTMLElement;\r\n  private today: String = \"\";\r\n  private roomService: RoomService = new RoomService();\r\n  private eventsService = new EventsService();\r\n  @Watch(\"ticket\")\r\n  async ticketChanged() {\r\n    sessionStorage.setItem(\"token\", JSON.stringify(this.ticket));\r\n    this.initializeApp();\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    if (this.baseurl) {\r\n      axios.defaults.baseURL = this.baseurl;\r\n    }\r\n    if (this.ticket !== \"\") {\r\n      this.initializeApp();\r\n    }\r\n  }\r\n  initializeApp() {\r\n    try {\r\n      this.roomService\r\n        .fetchData(this.propertyid, this.language)\r\n        .then((roomResp) => {\r\n          this.setRoomsData(roomResp);\r\n          this.bookingService\r\n            .getCalendarData(this.propertyid, this.from_date, this.to_date)\r\n            .then(async (bookingResp) => {\r\n              this.countryNodeList = await this.bookingService.getCountries(\r\n                this.language\r\n              );\r\n              this.calendarData.currency = roomResp[\"My_Result\"].currency;\r\n              this.calendarData.legendData = this.getLegendData(roomResp);\r\n              this.calendarData.startingDate = new Date(\r\n                bookingResp.My_Params_Get_Rooming_Data.FROM\r\n              ).getTime();\r\n              this.calendarData.endingDate = new Date(\r\n                bookingResp.My_Params_Get_Rooming_Data.TO\r\n              ).getTime();\r\n              this.calendarData.formattedLegendData = formatLegendColors(\r\n                this.calendarData.legendData\r\n              );\r\n              this.calendarData.bookingEvents = bookingResp.myBookings || [];\r\n              this.calendarData.toBeAssignedEvents = [];\r\n\r\n              this.updateBookingEventsDateRange(\r\n                this.calendarData.bookingEvents\r\n              );\r\n              this.updateBookingEventsDateRange(\r\n                this.calendarData.toBeAssignedEvents\r\n              );\r\n\r\n              let dt = new Date();\r\n              this.today =\r\n                dt.getDate() +\r\n                \"_\" +\r\n                (dt.getMonth() + 1) +\r\n                \"_\" +\r\n                dt.getFullYear();\r\n              let startingDay: Date = new Date(\r\n                this.getStartingDateOfCalendar()\r\n              );\r\n              startingDay.setHours(0, 0, 0, 0);\r\n              this.days = bookingResp.days;\r\n              this.calendarData.days = this.days;\r\n              this.calendarData.monthsInfo = bookingResp.months;\r\n              setTimeout(() => {\r\n                this.scrollToElement(this.today);\r\n              }, 200);\r\n            });\r\n        });\r\n    } catch (error) {}\r\n  }\r\n  componentDidLoad() {\r\n    this.scrollToElement(this.today);\r\n  }\r\n  @Listen(\"deleteButton\")\r\n  async handledeleteEvent(ev: CustomEvent) {\r\n    try {\r\n      ev.stopImmediatePropagation();\r\n      ev.preventDefault();\r\n      const bookingEvent = [...this.calendarData.bookingEvents];\r\n      await this.eventsService.deleteEvent(ev.detail);\r\n\r\n      this.calendarData = {\r\n        ...this.calendarData,\r\n        bookingEvents: bookingEvent.filter((e) => e.POOL !== ev.detail),\r\n      };\r\n    } catch (error) {\r\n      //toastr.error(error);\r\n    }\r\n  }\r\n  updateBookingEventsDateRange(eventData) {\r\n    eventData.forEach((bookingEvent) => {\r\n      bookingEvent.legendData = this.calendarData.formattedLegendData;\r\n      bookingEvent.defaultDateRange = {};\r\n      bookingEvent.defaultDateRange.fromDate = new Date(\r\n        bookingEvent.FROM_DATE + \"T00:00:00\"\r\n      );\r\n      bookingEvent.defaultDateRange.fromDateStr = this.getDateStr(\r\n        bookingEvent.defaultDateRange.fromDate\r\n      );\r\n      bookingEvent.defaultDateRange.fromDateTimeStamp =\r\n        bookingEvent.defaultDateRange.fromDate.getTime();\r\n\r\n      bookingEvent.defaultDateRange.toDate = new Date(\r\n        bookingEvent.TO_DATE + \"T00:00:00\"\r\n      );\r\n      bookingEvent.defaultDateRange.toDateStr = this.getDateStr(\r\n        bookingEvent.defaultDateRange.toDate\r\n      );\r\n      bookingEvent.defaultDateRange.toDateTimeStamp =\r\n        bookingEvent.defaultDateRange.toDate.getTime();\r\n\r\n      bookingEvent.defaultDateRange.dateDifference = bookingEvent.NO_OF_DAYS; // (bookingEvent.defaultDateRange.toDate.getTime() - bookingEvent.defaultDateRange.fromDate.getTime())/(86400000);\r\n      bookingEvent.roomsInfo = [...this.calendarData.roomsInfo];\r\n    });\r\n  }\r\n  setRoomsData(roomServiceResp) {\r\n    let roomsData: { [key: string]: any }[] = new Array();\r\n    if (roomServiceResp.My_Result?.roomtypes?.length) {\r\n      roomsData = roomServiceResp.My_Result.roomtypes;\r\n      roomServiceResp.My_Result.roomtypes.forEach((roomCategory) => {\r\n        roomCategory.expanded = true;\r\n      });\r\n    }\r\n    this.calendarData.roomsInfo = roomsData;\r\n  }\r\n\r\n  getLegendData(aData) {\r\n    return aData[\"My_Result\"].calendar_legends;\r\n  }\r\n\r\n  getStartingDateOfCalendar() {\r\n    return this.calendarData.startingDate;\r\n  }\r\n\r\n  getEndingDateOfCalendar() {\r\n    return this.calendarData.endingDate;\r\n  }\r\n\r\n  getDay(dt) {\r\n    const currentDate = new Date(dt);\r\n    const locale = \"en-US\";\r\n    const dayOfWeek = this.getLocalizedDayOfWeek(currentDate, locale);\r\n    return dayOfWeek + \" \" + currentDate.getDate();\r\n  }\r\n\r\n  getLocalizedDayOfWeek(date, locale) {\r\n    const options = { weekday: \"short\" };\r\n    return date.toLocaleDateString(locale, options);\r\n  }\r\n\r\n  getLocalizedMonth(date, locale = \"default\") {\r\n    return (\r\n      date.toLocaleString(locale, { month: \"short\" }) + \" \" + date.getFullYear()\r\n    );\r\n  }\r\n\r\n  getDateStr(date, locale = \"default\") {\r\n    return (\r\n      date.getDate() +\r\n      \" \" +\r\n      date.toLocaleString(locale, { month: \"short\" }) +\r\n      \" \" +\r\n      date.getFullYear()\r\n    );\r\n  }\r\n\r\n  scrollToElement(goToDate) {\r\n    this.scrollContainer =\r\n      this.scrollContainer ||\r\n      this.element.querySelector(\".calendarScrollContainer\");\r\n    const topLeftCell = this.element.querySelector(\".topLeftCell\");\r\n    const gotoDay = this.element.querySelector(\".day-\" + goToDate);\r\n    if (gotoDay) {\r\n      this.scrollContainer.scrollTo({ left: 0 });\r\n      const gotoRect = gotoDay.getBoundingClientRect();\r\n      const containerRect = this.scrollContainer.getBoundingClientRect();\r\n      const topLeftCellRect = topLeftCell.getBoundingClientRect();\r\n      this.scrollContainer.scrollTo({\r\n        left:\r\n          gotoRect.left -\r\n          containerRect.left -\r\n          topLeftCellRect.width -\r\n          gotoRect.width,\r\n      });\r\n    }\r\n  }\r\n\r\n  @Listen(\"scrollPageToRoom\", { target: \"window\" })\r\n  scrollPageToRoom(event: CustomEvent) {\r\n    let targetScrollClass = event.detail.refClass;\r\n    this.scrollContainer =\r\n      this.scrollContainer ||\r\n      this.element.querySelector(\".calendarScrollContainer\");\r\n    const topLeftCell = this.element.querySelector(\".topLeftCell\");\r\n    const gotoRoom = this.element.querySelector(\".\" + targetScrollClass);\r\n    if (gotoRoom) {\r\n      this.scrollContainer.scrollTo({ top: 0 });\r\n      const gotoRect = gotoRoom.getBoundingClientRect();\r\n      const containerRect = this.scrollContainer.getBoundingClientRect();\r\n      const topLeftCellRect = topLeftCell.getBoundingClientRect();\r\n      this.scrollContainer.scrollTo({\r\n        top:\r\n          gotoRect.top -\r\n          containerRect.top -\r\n          topLeftCellRect.height -\r\n          gotoRect.height,\r\n      });\r\n    }\r\n  }\r\n\r\n  shouldRenderCalendarView() {\r\n    // console.log(\"rendering...\")\r\n    return (\r\n      this.calendarData &&\r\n      this.calendarData.days &&\r\n      this.calendarData.days.length\r\n    );\r\n  }\r\n\r\n  onOptionSelect(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const calendarElement = this.element.querySelector(\"#iglooCalendar\");\r\n    switch (opt.key) {\r\n      case \"showAssigned\":\r\n        calendarElement.classList.remove(\"showLegend\");\r\n        calendarElement.classList.remove(\"showToBeAssigned\");\r\n        calendarElement.classList.toggle(\"showToBeAssigned\");\r\n\r\n        this.showLegend = false;\r\n        this.showToBeAssigned = true;\r\n        break;\r\n      case \"showLegend\":\r\n        calendarElement.classList.remove(\"showToBeAssigned\");\r\n        calendarElement.classList.remove(\"showLegend\");\r\n        calendarElement.classList.toggle(\"showLegend\");\r\n\r\n        this.showLegend = true;\r\n        this.showToBeAssigned = false;\r\n        break;\r\n      case \"calendar\":\r\n        let dt = new Date(opt.data);\r\n        this.scrollToElement(\r\n          dt.getDate() + \"_\" + (dt.getMonth() + 1) + \"_\" + dt.getFullYear()\r\n        );\r\n        break;\r\n      case \"search\":\r\n        break;\r\n      case \"add\":\r\n        this.bookingItem = opt.data;\r\n        break;\r\n      case \"gotoToday\":\r\n        this.scrollToElement(this.today);\r\n        break;\r\n      case \"closeSideMenu\":\r\n        this.closeSideMenu();\r\n        break;\r\n    }\r\n  }\r\n\r\n  closeSideMenu() {\r\n    const calendarElement = this.element.querySelector(\"#iglooCalendar\");\r\n    calendarElement.classList.remove(\"showToBeAssigned\");\r\n    calendarElement.classList.remove(\"showLegend\");\r\n\r\n    this.showLegend = false;\r\n    this.showToBeAssigned = false;\r\n  }\r\n\r\n  scrollViewDragPos = { top: 0, left: 0, x: 0, y: 0 };\r\n  dragScrollContent(event: MouseEvent) {\r\n    this.scrollViewDragging = false;\r\n    let isPreventPageScroll =\r\n      event && event.target\r\n        ? this.hasAncestorWithClass(\r\n            event.target as HTMLElement,\r\n            \"preventPageScroll\"\r\n          )\r\n        : false;\r\n    if (!isPreventPageScroll) {\r\n      this.scrollViewDragPos = {\r\n        // The current scroll\r\n        left: this.scrollContainer.scrollLeft,\r\n        top: this.scrollContainer.scrollTop,\r\n        // Get the current mouse position\r\n        x: event.clientX,\r\n        y: event.clientY,\r\n      };\r\n      document.addEventListener(\"mousemove\", this.onScrollContentMoveHandler);\r\n      document.addEventListener(\"mouseup\", this.onScrollContentMoveEndHandler);\r\n    }\r\n  }\r\n\r\n  onScrollContentMoveHandler: EventListener = (event: MouseEvent) => {\r\n    // How far the mouse has been moved\r\n    const dx = event.clientX - this.scrollViewDragPos.x;\r\n    const dy = event.clientY - this.scrollViewDragPos.y;\r\n\r\n    // Scroll the element\r\n    this.scrollContainer.scrollTop = this.scrollViewDragPos.top - dy;\r\n    this.scrollContainer.scrollLeft = this.scrollViewDragPos.left - dx;\r\n    if (Math.abs(dx) > 5 || Math.abs(dy) > 5) {\r\n      this.scrollViewDragging = true;\r\n    }\r\n  };\r\n\r\n  onScrollContentMoveEndHandler: EventListener = () => {\r\n    document.removeEventListener(\"mousemove\", this.onScrollContentMoveHandler);\r\n    document.removeEventListener(\"mouseup\", this.onScrollContentMoveEndHandler);\r\n  };\r\n\r\n  calendarScrolling() {\r\n    const containerRect = this.scrollContainer.getBoundingClientRect();\r\n    let leftSideMenuSize = 170;\r\n    let maxWidth = containerRect.width - leftSideMenuSize;\r\n    let leftX = containerRect.x + leftSideMenuSize;\r\n    let rightX = containerRect.x + containerRect.width;\r\n\r\n    let cells = Array.from(\r\n      this.element.querySelectorAll(\".monthCell\")\r\n    ) as HTMLElement[];\r\n\r\n    if (cells.length) {\r\n      cells.map((monthContainer: HTMLElement) => {\r\n        let monthRect = monthContainer.getBoundingClientRect();\r\n        if (monthRect.x + monthRect.width < leftX) {\r\n          // item end is scrolled outside view, in -x\r\n        } else if (monthRect.x > rightX) {\r\n          // item is outside scrollview, in +x\r\n        } else {\r\n          let titleElement = monthContainer.querySelector(\r\n            \".monthTitle\"\r\n          ) as HTMLElement;\r\n          let marginLeft = 0;\r\n          let monthWidth = monthRect.width;\r\n          if (monthRect.x < leftX) {\r\n            marginLeft = Math.abs(monthRect.x) - leftX;\r\n            marginLeft =\r\n              monthRect.x < 0\r\n                ? Math.abs(monthRect.x) + leftX\r\n                : Math.abs(marginLeft);\r\n            monthWidth =\r\n              monthRect.x + monthRect.width > rightX\r\n                ? maxWidth\r\n                : monthRect.x + monthRect.width - leftX;\r\n          } else {\r\n            monthWidth =\r\n              maxWidth - monthWidth > monthWidth\r\n                ? monthWidth\r\n                : maxWidth - monthRect.x + leftX;\r\n          }\r\n          titleElement.style.marginLeft = marginLeft + \"px\";\r\n          titleElement.style.width = monthWidth + \"px\";\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  hasAncestorWithClass(element: HTMLElement, className: string): boolean {\r\n    let currentElement = element;\r\n    while (currentElement !== null) {\r\n      if (currentElement.matches(`.${className}`)) {\r\n        return true;\r\n      }\r\n      currentElement = currentElement.parentElement;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  @Listen(\"showBookingPopup\", { target: \"window\" })\r\n  showBookingPopupEventDataHandler(event: CustomEvent) {\r\n    event.preventDefault();\r\n    event.stopImmediatePropagation();\r\n    this.onOptionSelect(event);\r\n    //console.log(\"show booking event\", event);\r\n  }\r\n\r\n  @Listen(\"updateEventData\")\r\n  updateEventDataHandler(event: CustomEvent) {\r\n    let bookedData = this.calendarData.bookingEvents.find(\r\n      (bookedEvent) => bookedEvent.id === event.detail.id\r\n    );\r\n    if (bookedData && event.detail && event.detail.data) {\r\n      Object.entries(event.detail.data).forEach(([key, value]) => {\r\n        bookedData[key] = value;\r\n      });\r\n    }\r\n  }\r\n\r\n  @Listen(\"dragOverEventData\")\r\n  dragOverEventDataHandler(event: CustomEvent) {\r\n    if (event.detail.id === \"CALCULATE_DRAG_OVER_BOUNDS\") {\r\n      let topLeftCell = document.querySelector(\r\n        \"igl-cal-header .topLeftCell\"\r\n      ) as HTMLElement;\r\n      let containerDays = document.querySelectorAll(\r\n        \".headersContainer .headerCell\"\r\n      );\r\n      let containerRooms = document.querySelectorAll(\r\n        \".bodyContainer .roomRow .roomTitle\"\r\n      );\r\n      this.visibleCalendarCells = { x: [], y: [] };\r\n\r\n      containerDays.forEach((element) => {\r\n        const htmlElement = element as HTMLElement;\r\n        this.visibleCalendarCells.x.push({\r\n          left: htmlElement.offsetLeft + topLeftCell.offsetWidth,\r\n          width: htmlElement.offsetWidth,\r\n          id: htmlElement.getAttribute(\"data-day\"),\r\n        });\r\n      });\r\n\r\n      containerRooms.forEach((element) => {\r\n        const htmlElement = element as HTMLElement;\r\n        this.visibleCalendarCells.y.push({\r\n          top: htmlElement.offsetTop,\r\n          height: htmlElement.offsetHeight,\r\n          id: htmlElement.getAttribute(\"data-room\"),\r\n        });\r\n      });\r\n      this.highlightDragOver(true, event.detail.data);\r\n    } else if (event.detail.id === \"DRAG_OVER\") {\r\n      this.highlightDragOver(true, event.detail.data);\r\n    } else if (event.detail.id === \"DRAG_OVER_END\") {\r\n      this.highlightDragOver(false, event.detail.data);\r\n    } else if (event.detail.id === \"STRETCH_OVER_END\") {\r\n      this.highlightDragOver(false, event.detail.data);\r\n    }\r\n  }\r\n\r\n  async highlightDragOver(hightLightElement, currentPosition) {\r\n    let xElement, yElement;\r\n    if (currentPosition) {\r\n      xElement = this.visibleCalendarCells.x.find(\r\n        (pos) =>\r\n          pos.left < currentPosition.x &&\r\n          currentPosition.x <= pos.left + pos.width\r\n      );\r\n      yElement = this.visibleCalendarCells.y.find(\r\n        (pos) =>\r\n          pos.top < currentPosition.y &&\r\n          currentPosition.y <= pos.top + pos.height\r\n      );\r\n    }\r\n    // console.log(hightLightElement+\":::\"+yElement.id+\"_\"+xElement.id);\r\n    if (hightLightElement && xElement && yElement) {\r\n      this.dragOverHighlightElement.emit({\r\n        dragOverElement: yElement.id + \"_\" + xElement.id,\r\n      });\r\n    } else {\r\n      this.dragOverHighlightElement.emit({ dragOverElement: \"\" });\r\n    }\r\n    if (!hightLightElement) {\r\n      this.moveBookingTo.emit({\r\n        bookingId: currentPosition.id,\r\n        fromRoomId: currentPosition.fromRoomId,\r\n        toRoomId: (yElement && yElement.id) || \"revert\",\r\n        moveToDay: (xElement && xElement.id) || \"revert\",\r\n        pool: currentPosition.pool,\r\n        from_date: convertDMYToISO(xElement && xElement.id),\r\n        to_date: computeEndDate(\r\n          xElement && xElement.id,\r\n          currentPosition.nbOfDays\r\n        ),\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ir-interceptor></ir-interceptor>\r\n        <ir-common></ir-common>\r\n        <div id=\"iglooCalendar\" class=\"igl-calendar\">\r\n          {this.shouldRenderCalendarView()\r\n            ? [\r\n                this.showToBeAssigned ? (\r\n                  <igl-to-be-assigned\r\n                    loadingMessage={this.loadingMessage}\r\n                    to_date={this.to_date}\r\n                    from_date={this.from_date}\r\n                    propertyid={this.propertyid}\r\n                    class=\"tobeAssignedContainer\"\r\n                    calendarData={this.calendarData}\r\n                    onOptionEvent={(evt) => this.onOptionSelect(evt)}\r\n                  ></igl-to-be-assigned>\r\n                ) : null,\r\n                this.showLegend ? (\r\n                  <igl-legends\r\n                    class=\"legendContainer\"\r\n                    legendData={this.calendarData.legendData}\r\n                    onOptionEvent={(evt) => this.onOptionSelect(evt)}\r\n                  ></igl-legends>\r\n                ) : null,\r\n                <div\r\n                  class=\"calendarScrollContainer\"\r\n                  onMouseDown={(event) => this.dragScrollContent(event)}\r\n                  onScroll={() => this.calendarScrolling()}\r\n                >\r\n                  <div id=\"calendarContainer\">\r\n                    <igl-cal-header\r\n                      today={this.today}\r\n                      calendarData={this.calendarData}\r\n                      onOptionEvent={(evt) => this.onOptionSelect(evt)}\r\n                    ></igl-cal-header>\r\n                    <igl-cal-body\r\n                      countryNodeList={this.countryNodeList}\r\n                      currency={this.calendarData.currency}\r\n                      today={this.today}\r\n                      isScrollViewDragging={this.scrollViewDragging}\r\n                      calendarData={this.calendarData}\r\n                    ></igl-cal-body>\r\n                    <igl-cal-footer\r\n                      today={this.today}\r\n                      calendarData={this.calendarData}\r\n                      onOptionEvent={(evt) => this.onOptionSelect(evt)}\r\n                    ></igl-cal-footer>\r\n                  </div>\r\n                </div>,\r\n              ]\r\n            : \"Data not yet loaded\"}\r\n          {this.bookingItem ? (\r\n            <igl-book-property\r\n              countryNodeList={this.countryNodeList}\r\n              currency={this.calendarData.currency}\r\n              language={this.language}\r\n              propertyid={this.propertyid}\r\n              bookingData={this.bookingItem}\r\n              onCloseBookingWindow={(_) => (this.bookingItem = null)}\r\n            ></igl-book-property>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import { IrOnlineResource } from \"./models\";\r\nexport const onlineResources: IrOnlineResource[] = [\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/jquery.min.js\",\r\n  // },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css\",\r\n  },\r\n  { isCSS: true, link: \"https://x.igloorooms.com/app-assets/css/colors.css\" },\r\n  { isCSS: true, link: \"https://x.igloorooms.com/app-assets/css/colors.css\" },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/components.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/pages/login-register.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.css\",\r\n  },\r\n  { isCSS: true, link: \"https://x.igloorooms.com/assets/css/style.css\" },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/bootstrap.css\",\r\n  },\r\n  {\r\n    isCSS: true,\r\n    link: \"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css\",\r\n  },\r\n\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/moment.min.js\",\r\n  // },\r\n  // {\r\n  //   isJS: true,\r\n  //   link: \"https://x.igloorooms.com/manage/micro/app-assets/required/assets/scripts/daterangepicker/daterangepicker.js\",\r\n  // },\r\n];\r\n","import { Component, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport { IrOnlineResource } from '../../common/models';\r\nimport { onlineResources } from '../../common/ir.common.resources';\r\n\r\n@Component({\r\n  tag: 'ir-common',\r\n})\r\nexport class IrCommon {\r\n  @Prop({ reflect: true }) extraResources: string = '';\r\n  @State() resources: IrOnlineResource[] = onlineResources;\r\n  componentWillLoad() {\r\n    this.parseRefs();\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.initializeStyles();\r\n  }\r\n\r\n  @Watch('extraResources')\r\n  hrefsChanged() {\r\n    this.parseRefs();\r\n    this.initializeStyles();\r\n  }\r\n\r\n  private parseRefs() {\r\n    if (this.extraResources !== '') this.resources.push(JSON.parse(this.extraResources));\r\n  }\r\n\r\n  private appendTag(tagName: string, attributes: any) {\r\n    const tag = document.createElement(tagName);\r\n    const selectorParts = [];\r\n\r\n    Object.keys(attributes).forEach(attr => {\r\n      tag.setAttribute(attr, attributes[attr]);\r\n      selectorParts.push(`[${attr}=\"${attributes[attr]}\"]`);\r\n    });\r\n\r\n    const selector = `${tagName}${selectorParts.join('')}`;\r\n    const existingTag = document.querySelector(selector);\r\n\r\n    if (!existingTag) {\r\n      document.head.appendChild(tag);\r\n    }\r\n  }\r\n\r\n  private initializeStyles() {\r\n    this.resources.forEach(res => {\r\n      if (res.isCSS) {\r\n        this.appendTag('link', {\r\n          href: res.link,\r\n          rel: 'stylesheet',\r\n          type: 'text/css',\r\n        });\r\n      }\r\n      if (res.isJS) {\r\n        this.appendTag('script', {\r\n          src: res.link,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <slot></slot>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","\r\n.date-range-input {\r\n  border: 0;\r\n  outline: 0;\r\n  margin: 0;\r\n  flex: 1;\r\n}\r\n.date-range-input:focus {\r\n  border: 0;\r\n  outline: 0;\r\n}\r\n","import {\r\n  Component,\r\n  h,\r\n  Element,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n} from \"@stencil/core\";\r\nimport moment from \"moment\";\r\n\r\n@Component({\r\n  tag: \"ir-date-picker\",\r\n  styleUrl: \"ir-date-picker.css\",\r\n  scoped: true,\r\n})\r\nexport class IrDatePicker {\r\n  @Element() private element: HTMLElement;\r\n  @Prop({ reflect: true }) fromDate: Date;\r\n  @Prop({ reflect: true }) toDate: Date;\r\n\r\n  @Prop({ reflect: true }) opens: \"left\" | \"right\" | \"center\";\r\n  @Prop({ reflect: true }) autoApply: boolean;\r\n  @Prop({ reflect: true }) firstDay: number = 1;\r\n  @Prop({ reflect: true }) monthNames: string[] = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ];\r\n  @Prop({ reflect: true }) daysOfWeek: string[] = [\r\n    \"Su\",\r\n    \"Mo\",\r\n    \"Tu\",\r\n    \"We\",\r\n    \"Th\",\r\n    \"Fr\",\r\n    \"Sa\",\r\n  ];\r\n  @Prop({ reflect: true }) format: string = \"MMM DD,YYYY\";\r\n  @Prop({ reflect: true }) separator: string = \"-\";\r\n  @Prop({ reflect: true }) applyLabel: string = \"Apply\";\r\n  @Prop({ reflect: true }) cancelLabel: string = \"Cancel\";\r\n  @Prop({ reflect: true }) fromLabel: string = \"Form\";\r\n  @Prop({ reflect: true }) toLabel: string = \"To\";\r\n  @Prop({ reflect: true }) customRangeLabel: string = \"Custom\";\r\n  @Prop({ reflect: true }) weekLabel: string = \"W\";\r\n  @Prop({ reflect: true }) maxSpan: moment.DurationInputArg1 = {\r\n    days: 240,\r\n  };\r\n\r\n  @Event() dateChanged: EventEmitter<{\r\n    start: moment.Moment;\r\n    end: moment.Moment;\r\n  }>;\r\n  dateRangeInput: HTMLElement;\r\n  componentDidLoad() {\r\n    this.dateRangeInput = this.element.querySelector(\".date-range-input\");\r\n    $(this.dateRangeInput).daterangepicker(\r\n      {\r\n        opens: this.opens,\r\n        startDate: moment(this.fromDate),\r\n        endDate: moment(this.toDate),\r\n        maxSpan: this.maxSpan,\r\n        autoApply: this.autoApply,\r\n        locale: {\r\n          format: this.format,\r\n          separator: this.separator,\r\n          applyLabel: this.applyLabel,\r\n          cancelLabel: this.cancelLabel,\r\n          fromLabel: this.fromLabel,\r\n          toLabel: this.toLabel,\r\n          customRangeLabel: this.customRangeLabel,\r\n          weekLabel: this.weekLabel,\r\n          daysOfWeek: this.daysOfWeek,\r\n          monthNames: this.monthNames,\r\n          firstDay: this.firstDay,\r\n        },\r\n      },\r\n      (start, end) => {\r\n        this.dateChanged.emit({ start, end });\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return <input class=\"date-range-input\" type=\"text\" />;\r\n  }\r\n}\r\n",":host {\r\n  --viewport-padding: 25px;\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: var(--viewport-padding);\r\n  gap: 10px;\r\n  max-width: 60vw;\r\n  margin: 0;\r\n  list-style: none;\r\n  z-index: 2147483647;\r\n  outline: none;\r\n  pointer-events: none;\r\n}\r\n\r\n.toast-container {\r\n  background-color: white;\r\n  border-radius: 6px;\r\n  box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px,\r\n    hsl(206 22% 7% / 20%) 0px 10px 20px -15px;\r\n  padding: 15px 30px;\r\n  display: grid;\r\n  grid-template-areas: \"title action\";\r\n  grid-template-columns: auto max-content;\r\n  column-gap: 15px;\r\n  align-items: center;\r\n  overflow: hidden;\r\n}\r\n.toast-container[data-state=\"open\"] {\r\n  animation: slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards;\r\n}\r\n.toast-container[data-state=\"closed\"] {\r\n  pointer-events: none;\r\n  animation: fadeOut 150ms ease-in forwards;\r\n}\r\np {\r\n  margin: 0;\r\n  padding: 0;\r\n  grid-area: title;\r\n  font-weight: 500;\r\n  color: #1c2024;\r\n  font-size: 15px;\r\n}\r\n\r\n.x-mark-container,\r\n.check-mark-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 1.5rem;\r\n  width: 1.5rem;\r\n  border-radius: 50%;\r\n}\r\n.x-mark-container {\r\n  background: red;\r\n}\r\n.check-mark-container {\r\n  background: rgb(9, 153, 9);\r\n}\r\n\r\n.loader {\r\n  width: 1.25rem;\r\n  height: 1.25rem;\r\n  border: 2.5px solid #3f3f3f;\r\n  border-bottom-color: transparent;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@keyframes fadeOut {\r\n  0% {\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n  }\r\n}\r\n@keyframes slideIn {\r\n  0% {\r\n    transform: translateX(calc(100% + var(--viewport-padding)));\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n","import { Component, Fragment, Host, Prop, State, h } from '@stencil/core';\r\nimport axios from 'axios';\r\n\r\n@Component({\r\n  tag: 'ir-interceptor',\r\n  styleUrl: 'ir-interceptor.css',\r\n  scoped: true,\r\n})\r\nexport class IrInterceptor {\r\n  @State() isShown = false;\r\n  @State() isLoading = false;\r\n  @State() isSuccess = false;\r\n\r\n  @Prop({ reflect: true, mutable: true }) defaultMessage = {\r\n    loadingMessage: 'Fetching Data',\r\n    successMessage: 'Success',\r\n    errorMessage: 'Something Went Wrong',\r\n  };\r\n\r\n  @Prop({ reflect: true }) handledEndpoints = ['/Get_Exposed_Booking_Availability', '/Get_Aggregated_UnAssigned_Rooms', '/ReAllocate_Exposed_Room'];\r\n\r\n  componentWillLoad() {\r\n    this.setupAxiosInterceptors();\r\n  }\r\n\r\n  setupAxiosInterceptors() {\r\n    axios.interceptors.request.use(this.handleRequest.bind(this), this.handleError.bind(this));\r\n    axios.interceptors.response.use(this.handleResponse.bind(this), this.handleError.bind(this));\r\n  }\r\n\r\n  extractEndpoint(url: string): string {\r\n    return url.split('?')[0];\r\n  }\r\n\r\n  isHandledEndpoint(url: string): boolean {\r\n    return this.handledEndpoints.includes(this.extractEndpoint(url));\r\n  }\r\n\r\n  handleRequest(config) {\r\n    if (this.isHandledEndpoint(config.url)) {\r\n      this.isLoading = true;\r\n      if (this.extractEndpoint(config.url) === '/ReAllocate_Exposed_Room') {\r\n        this.defaultMessage.loadingMessage = 'Updating Event';\r\n      } else {\r\n        this.defaultMessage.loadingMessage = 'Fetching Data';\r\n      }\r\n      this.showToast();\r\n    }\r\n    return config;\r\n  }\r\n\r\n  handleResponse(response) {\r\n    this.isLoading = false;\r\n\r\n    if (response.data.ExceptionMsg?.trim()) {\r\n      this.handleError(response.data.ExceptionMsg);\r\n      throw new Error(response.data.ExceptionMsg);\r\n    }\r\n\r\n    if (this.isHandledEndpoint(response.config.url)) {\r\n      this.handleCompletion('Success', true);\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  handleError(error) {\r\n    if (!this.isShown) {\r\n      this.showToast();\r\n    }\r\n    this.handleCompletion(error, false);\r\n    return Promise.reject(error);\r\n  }\r\n\r\n  showToast() {\r\n    this.isShown = true;\r\n  }\r\n\r\n  hideToastAfterDelay(isSuccess: boolean) {\r\n    const delay = isSuccess ? 2000 : 5000;\r\n    setTimeout(() => {\r\n      this.isShown = false;\r\n    }, delay);\r\n  }\r\n\r\n  handleCompletion(message: string, success: boolean) {\r\n    this.isSuccess = success;\r\n    this.defaultMessage = {\r\n      ...this.defaultMessage,\r\n      [success ? 'successMessage' : 'errorMessage']: message,\r\n    };\r\n    this.hideToastAfterDelay(success);\r\n  }\r\n\r\n  renderMessage(): string {\r\n    if (this.isLoading) return this.defaultMessage.loadingMessage;\r\n    return this.isSuccess ? this.defaultMessage.successMessage : this.defaultMessage.errorMessage;\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"toast-container\" data-state={this.isShown ? 'open' : 'closed'}>\r\n          {this.isShown && (\r\n            <Fragment>\r\n              {this.isLoading ? (\r\n                <span class=\"loader\"></span>\r\n              ) : !this.isSuccess ? (\r\n                <div class=\"x-mark-container\">\r\n                  <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                      d=\"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z\"\r\n                      fill=\"white\"\r\n                      fill-rule=\"evenodd\"\r\n                      clip-rule=\"evenodd\"\r\n                    ></path>\r\n                  </svg>\r\n                </div>\r\n              ) : (\r\n                <div class=\"check-mark-container\">\r\n                  <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                      d=\"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z\"\r\n                      fill=\"white\"\r\n                      fill-rule=\"evenodd\"\r\n                      clip-rule=\"evenodd\"\r\n                    ></path>\r\n                  </svg>\r\n                </div>\r\n              )}\r\n\r\n              <p>{this.renderMessage()}</p>\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@import url(\"../../assets/feather/style.min.css\");\r\n@import url(\"../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  position: relative;\r\n}\r\n\r\n/* p {\r\n  position: absolute;\r\n  top: 10px;\r\n  background-color: antiquewhite;\r\n  border-radius: 7px;\r\n  padding: 10px 15px;\r\n  z-index: 1000000;\r\n} */\r\n","import { Component, Host, Prop, State, h } from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"ir-tooltip\",\r\n  styleUrl: \"ir-tooltip.css\",\r\n  scoped: true,\r\n})\r\nexport class IrTooltip {\r\n  @Prop({ reflect: true }) message: string;\r\n  @State() open: boolean;\r\n  tooltipTimeout: any;\r\n  toggleOpen(shouldOpen: boolean) {\r\n    if (this.tooltipTimeout) {\r\n      clearTimeout(this.tooltipTimeout);\r\n    }\r\n\r\n    if (shouldOpen) {\r\n      this.tooltipTimeout = setTimeout(() => {\r\n        this.open = true;\r\n      }, 300);\r\n    } else {\r\n      this.open = false;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <span\r\n          onMouseEnter={() => this.toggleOpen(true)}\r\n          onMouseLeave={() => this.toggleOpen(false)}\r\n        >\r\n          <i\r\n            class=\"ml-1 ft-info\"\r\n            data-toggle=\"tooltip\"\r\n            data-placement=\"top\"\r\n            data-original-title=\"Info popup\"\r\n          ></i>\r\n        </span>\r\n        {this.open && (\r\n          <div class=\"tooltip bottom show position-absolute\" role=\"tooltip\">\r\n            <div class=\"tooltip-arrow\"></div>\r\n            <div class=\"tooltip-inner fit\">\r\n              <i class=\"tooltip-top-demo\"></i>\r\n              <span innerHTML={this.message}></span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"}