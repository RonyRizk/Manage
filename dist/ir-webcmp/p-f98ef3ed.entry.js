import{r as t,c as i,h as e,H as s,F as o,g as n}from"./p-05195efb.js";import{g as a,f as l,d as r,a as h,h as d}from"./p-34fcab72.js";import{l as c}from"./p-dda5a727.js";import{c as p}from"./p-ed91ab97.js";import{v as u}from"./p-d4c9256e.js";import{B as m}from"./p-40d4f542.js";import{t as f}from"./p-eaccab4c.js";import{E as g}from"./p-1bfa0595.js";import{B as b}from"./p-40d4f5422.js";import{R as x}from"./p-2f9bae70.js";import{a as y}from"./p-539b691e.js";import{c as k}from"./p-7cd9c724.js";const v=".sc-igl-application-info-h{display:block}@media only screen and (min-width: 908px){.aplicationInfoContainer.sc-igl-application-info{max-width:80%}.guest-info-container.sc-igl-application-info{max-width:300px}.preference-select-container.sc-igl-application-info{max-width:250px}}";const w=class{constructor(e){t(this,e);this.dataUpdateEvent=i(this,"dataUpdateEvent",7);this.userRate=0;this.guestInfo=undefined;this.currency=undefined;this.roomsList=[];this.guestRefKey=undefined;this.bedPreferenceType=[];this.selectedUnits=[];this.bookingType="PLUS_BOOKING";this.defaultGuestPreference=undefined;this.index=undefined;this.defaultGuestRoomId=undefined;this.dateDifference=undefined;this.filterdRoomList=[];this.isButtonPressed=false;this.guestData=undefined}componentWillLoad(){console.log(this.guestInfo);if(this.guestInfo.isRateModified&&this.guestInfo.rateType===2){this.userRate=this.guestInfo.rate*this.dateDifference}else{this.userRate=this.guestInfo.rate}this.guestData=this.guestInfo?Object.assign({},this.guestInfo):{};this.guestData.roomId="";if(this.defaultGuestRoomId&&this.roomsList.filter((t=>t.id.toString()===this.defaultGuestRoomId.toString())).length>0){this.guestData.roomId=this.defaultGuestRoomId}this.guestData.preference=+this.defaultGuestPreference||"";this.updateRoomList()}async handleSelctedUnits(){this.updateRoomList()}updateRoomList(){const t=[...this.selectedUnits];t[this.index]=-1;this.filterdRoomList=this.roomsList.filter((i=>!t.includes(i.id)))}updateData(){this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",guestRefKey:this.guestRefKey,data:Object.assign({},this.guestData)})}handleDataChange(t,i){this.guestData[t]=+i;if(i===""){this.guestData["roomName"]=i}if(t==="roomId"&&i!==""){this.guestData["roomName"]=this.filterdRoomList.find((t=>t.id===+i)).name||""}console.log("guest data",this.guestData);this.updateData()}handleGuestNameChange(t){this.guestData.guestName=t.target.value;this.updateData()}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}render(){return e(s,null,e("div",{class:"text-left mt-1 "},e("div",{class:" mb-1 "},this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING"?e("span",{class:"h5 mr-1"},this.guestInfo.roomCategoryName):null,e("span",{class:" font-weight-bold"},this.guestInfo.ratePlanName.replace(this.guestInfo.roomCategoryName+"/",""),e("ir-tooltip",{class:" mr-1",message:this.guestInfo.cancelation+this.guestInfo.guarantee})),e("span",null,this.guestInfo.adult_child_offering)),e("div",{class:"d-flex flex-column flex-md-row m-0 p-0 align-items-md-center aplicationInfoContainer "},e("div",{class:"mr-1 flex-fill guest-info-container"},e("input",{id:u(),type:"email",class:`form-control ${this.isButtonPressed&&this.guestData.guestName===""&&"border-danger"}`,placeholder:c.entries.Lcz_GuestFirstnameAndLastname,name:"guestName",onInput:t=>this.handleGuestNameChange(t),required:true,value:this.guestData.guestName})),e("div",{class:"mt-1 mt-md-0 d-flex align-items-center flex-fill"},p.is_frontdesk_enabled&&(this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING")?e("div",{class:"mr-1 p-0 flex-fill  preference-select-container"},e("select",{class:`form-control  input-sm pr-0`,id:u(),onChange:t=>this.handleDataChange("roomId",t.target.value)},e("option",{value:"",selected:this.guestData.roomId===""},c.entries.Lcz_Assignunits),this.filterdRoomList.map((t=>e("option",{value:t.id,selected:+this.guestData.roomId===t.id},t.name))))):null,e("div",{class:"mr-1 flex-fill"},e("select",{class:`form-control input-sm ${this.isButtonPressed&&(this.guestData.preference===""||this.guestData.preference===0)&&"border-danger"}`,id:u(),onChange:t=>this.handleDataChange("preference",t.target.value)},e("option",{value:"",selected:this.guestData.preference===""},c.entries.Lcz_BedConfiguration),this.bedPreferenceType.map((t=>e("option",{value:+t.CODE_NAME,selected:this.guestData.preference===+t.CODE_NAME},t.CODE_VALUE_EN))))),e("div",{class:""},a(this.currency.code)+Number(this.userRate).toFixed(2),"/",c.entries.Lcz_Stay)))))}static get watchers(){return{selectedUnits:["handleSelctedUnits"]}}};w.style=v;const D=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const O=class{constructor(e){t(this,e);this.dataUpdateEvent=i(this,"dataUpdateEvent",7);this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new m;this.defaultData=undefined;this.fromDate=undefined;this.toDate=undefined;this.entryDate=undefined;this.entryHour=undefined;this.isEventHover=false;this.entryMinute=undefined;this.renderAgain=false}async componentWillLoad(){try{this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(t){}}handleOptionalReason(t){this.blockDatesData.OPTIONAL_REASON=t.target.value;this.emitData()}handleReleaseAfterChange(t){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(t.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let t=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){t.setHours(this.entryHour,this.entryMinute,0,0)}else{t.setHours(t.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,t.getMinutes(),0,0)}return t.toLocaleString("default",{month:"short"})+" "+t.getDate()+", "+this.formatNumber(t.getHours())+":"+this.formatNumber(t.getMinutes())}formatNumber(t){return t<10?`0${t}`:t}handleOutOfService(t){this.blockDatesData.OUT_OF_SERVICE=t.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){return e(s,null,e("div",{class:`m-0 p-0 mb-1`},e("div",{class:"text-left p-0"},e("span",{class:"pr-1"},e("span",{class:"text-bold-700 font-medium-1"},c.entries.Lcz_From,": "),l(this.fromDate)),e("span",{class:"text-bold-700 font-medium-1"},c.entries.Lcz_To,": "),l(this.toDate))),e("div",{class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},e("div",{class:"mb-1 "},e("label",{class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},c.entries.Lcz_Reason,":"),e("div",{class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},e("input",{class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:t=>this.handleOutOfService(t)})),e("span",{class:"align-middle out-of-service-label"},c.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?e("div",null,e("div",{class:"mb-1 d-flex  align-items-center"},e("span",{class:"align-middle"},c.entries.Lcz_Or," "),e("div",{class:"d-inline-flex col pr-0 align-middle"},e("input",{class:"form-control",type:"text",placeholder:c.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:t=>this.handleOptionalReason(t)}))),e("div",{class:"mb-1 w-100 pr-0 "},e("span",{class:"text-bold-700 font-medium-1"},c.entries.Lcz_AutomaticReleaseIn,": "),e("div",{class:"d-inline-block"},e("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:t=>this.handleReleaseAfterChange(t)},this.releaseList.map((t=>e("option",{value:+t.CODE_NAME,selected:this.blockDatesData.RELEASE_AFTER_HOURS==+t.CODE_NAME},t.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?e("div",{class:"d-inline-block releaseTime"},e("em",null,c.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};O.style=D;class I{setBookingInfoFromAutoComplete(t,i){t.bookedByInfoData={id:i.guest.id,email:i.guest.email,firstName:i.guest.first_name,lastName:i.guest.last_name,countryId:i.guest.country_id,isdCode:i.guest.country_id.toString(),contactNumber:i.guest.mobile,selectedArrivalTime:i.arrival,emailGuest:i.guest.subscribe_to_news_letter,message:i.remark,cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:"",bookingNumber:i.booking_nbr,rooms:i.rooms,from_date:i.from_date,to_date:i.to_date}}resetRoomsInfoAndMessage(t){t.defaultData.roomsInfo=[];t.message=""}onDataRoomUpdate(t,i,e,s,o){let n=i;const{data:a,key:l,changedKey:r}=t.detail;const h=`c_${a.roomCategoryId}`;const d=`p_${a.ratePlanId}`;if(this.shouldClearData(l)){n=new Map}this.initializeRoomCategoryIfNeeded(h,n);if(s){if(r==="rate"){if(n.has(h)&&n.get(h).has(d)){this.applyBookingEditToSelectedRoom(h,d,a,n,o,e)}}else{if(r!=="rateType"){if(r==="adult_child_offering"){if(n.has(h)&&i.get(h).has(d)){this.applyBookingEditToSelectedRoom(h,d,a,n,o,e)}}else{this.applyBookingEditToSelectedRoom(h,d,a,n,o,e)}}}}else{this.setSelectedRoomData(h,d,a,n)}this.cleanupEmptyData(h,n);return n}shouldClearData(t){return t==="clearData"||t==="EDIT_BOOKING"}initializeRoomCategoryIfNeeded(t,i){if(!i.has(t)){i.set(t,new Map)}}setSelectedRoomData(t,i,e,s){let o=s.get(t);if(e.totalRooms===0||e.inventory===0){o.delete(i)}else{s.set(t,o.set(i,Object.assign(Object.assign({},e),{selectedUnits:Array(e.totalRooms).fill(-1)})))}}cleanupEmptyData(t,i){if(i.has(t)){let e=i.get(t);if(e.size===0){i.delete(t)}}}applyBookingEditToSelectedRoom(t,i,e,s,o,n){s.clear();let a={};if(n){a=Object.assign(Object.assign({},e),{guestName:o||"",roomId:""})}else{a=Object.assign({},e)}s.set(t,(new Map).set(i,a))}async prepareBookUserServiceParams(t,i,e){try{const s=t.isEventType("EDIT_BOOKING")?t.getArrivalTimeForBooking():t.isEventType("ADD_ROOM")?t.bookingData.ARRIVAL.code:t.isEventType("SPLIT_BOOKING")?t.bookedByInfoData.selectedArrivalTime.code:"";const o=t.isEventType("BAR_BOOKING")?t.bookingData.PR_ID:undefined;const n=t.isEventType("EDIT_BOOKING")||t.isEventType("ADD_ROOM")?t.bookingData.BOOKING_NUMBER:t.isEventType("SPLIT_BOOKING")?t.bookedByInfoData.bookingNumber:undefined;let a=[];if(t.isEventType("ADD_ROOM")){a=t.bookingData.ROOMS}else if(t.isEventType("SPLIT_BOOKING")){a=t.bookedByInfoData.rooms}else if(t.isEventType("EDIT_BOOKING")){a=t.defaultData.ROOMS.filter((i=>i.identifier!==t.bookingData.IDENTIFIER))}console.log("rooms",a);return[t.bookedByInfoData,i,new Date(t.dateRangeData.fromDate),new Date(t.dateRangeData.toDate),t.guestData,t.dateRangeData.dateDifference,e,t.propertyid,a,t.currency,n,t.bookingData.GUEST,s,o,t.bookingData.IDENTIFIER]}catch(t){console.log(t)}}getBookingPreferenceRoomId(t){return t.hasOwnProperty("PR_ID")&&t.PR_ID||null}getRoomCategoryByRoomId(t){var i;return(i=t.roomsInfo)===null||i===void 0?void 0:i.find((i=>i.id===t.RATE_TYPE))}setEditingRoomInfo(t,i){console.log(t,t.roomsInfo);console.log(this.getBookingPreferenceRoomId(t));const e=this.getRoomCategoryByRoomId(t);const s=!e?"":`c_${e===null||e===void 0?void 0:e.id}`;const o=`p_${t.RATE_PLAN_ID}`;const n={adultCount:t.ADULTS_COUNT,rate:t.RATE,rateType:t.RATE_TYPE,ratePlanId:t.RATE_PLAN_ID,roomCategoryId:e?e.id:"",roomCategoryName:e?e.name:"",totalRooms:1,ratePlanName:t.RATE_PLAN,roomId:t.PR_ID,guestName:t.NAME,cancelation:t.cancelation,guarantee:t.guarantee,adult_child_offering:t.adult_child_offering};i.set(s,(new Map).set(o,n))}}const _=".sc-igl-book-property-h{position:fixed;top:0;right:0;width:100vw;height:100vh;z-index:99}.card-title.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%}.scrollContent.sc-igl-book-property{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-book-property{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-book-property{height:calc(100% - 79px);overflow:auto}.gap-30.sc-igl-book-property{gap:30px}.block-date.sc-igl-book-property{width:100%}.sideWindow.sc-igl-book-property{position:absolute;top:0;right:0;height:100%;background-color:#ffffff;width:100vw;overflow-y:auto}.card.sc-igl-book-property{top:0;z-index:1000}.close.sc-igl-book-property{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-book-property{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-book-property:not(:disabled),[type='button'].sc-igl-book-property:not(:disabled){cursor:pointer}.row.sc-igl-book-property{padding:0 0 0 15px;margin:0}@media only screen and (min-width: 1200px){.sideWindow.sc-igl-book-property{max-width:70%}}@media only screen and (min-width: 2000px){.sideWindow.sc-igl-book-property{max-width:40%}}@media only screen and (min-width: 768px) and (max-width: 1200px){.sideWindow.sc-igl-book-property{max-width:90%}}@media only screen and (min-width: 600px) and (max-width: 768px){.sideWindow.sc-igl-book-property{max-width:75%}}@media only screen and (min-width: 641px){.block-date.sc-igl-book-property{max-width:450px}}";const C=class{constructor(e){t(this,e);this.closeBookingWindow=i(this,"closeBookingWindow",7);this.bookingCreated=i(this,"bookingCreated",7);this.blockedCreated=i(this,"blockedCreated",7);this.resetBookingData=i(this,"resetBookingData",7);this.initialRoomIds=null;this.message="";this.showSplitBookingOption=false;this.sourceOptions=[];this.guestData=[];this.bookedByInfoData={};this.blockDatesData={};this.ratePricingMode=[];this.selectedUnits=new Map;this.bedPreferenceType=[];this.bookingService=new m;this.bookPropertyService=new I;this.eventsService=new g;this.propertyid=undefined;this.allowedBookingSources=undefined;this.language=undefined;this.countryNodeList=undefined;this.showPaymentDetails=false;this.currency=undefined;this.bookingData=undefined;this.adultChildConstraints=undefined;this.adultChildCount={adult:0,child:0};this.renderAgain=false;this.dateRangeData=undefined;this.defaultData=undefined;this.isLoading=undefined;this.buttonName=""}handleKeyDown(t){if(t.key==="Escape"){this.closeWindow()}else return}componentDidLoad(){document.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}clearBooking(t){if(this.isEventType("SPLIT_BOOKING")){t.stopImmediatePropagation();t.stopPropagation();this.bookedByInfoData={};this.bookPropertyService.resetRoomsInfoAndMessage(this);this.renderPage()}}async handleSpiltBookingSelected(t){t.stopImmediatePropagation();const{key:i,data:e}=t.detail;if(i==="select"){const t=await this.bookingService.getExposedBooking(e.booking_nbr,this.language);this.bookPropertyService.setBookingInfoFromAutoComplete(this,t);this.sourceOption=t.source;this.renderPage()}else if(i==="blur"&&e!==""){const t=await this.bookingService.getExposedBooking(e,this.language);this.bookPropertyService.setBookingInfoFromAutoComplete(this,t);this.sourceOption=t.source;this.renderPage()}}async componentWillLoad(){this.defaultDateRange={from_date:this.bookingData.FROM_DATE,to_date:this.bookingData.TO_DATE};this.handleKeyDown=this.handleKeyDown.bind(this);if(!this.bookingData.defaultDateRange){return}this.defaultData=this.bookingData;this.dateRangeData=Object.assign({},this.defaultData.defaultDateRange);try{const t=await this.fetchSetupEntries();this.setSourceOptions(this.allowedBookingSources);this.setOtherProperties(t);if(this.isEventType("EDIT_BOOKING")){this.adultChildCount={adult:this.defaultData.ADULTS_COUNT,child:this.defaultData.CHILDREN_COUNT};this.initialRoomIds={roomName:this.defaultData.roomName,ratePlanId:this.defaultData.RATE_PLAN_ID,roomId:this.defaultData.PR_ID,roomTypeId:this.defaultData.RATE_TYPE};this.bookPropertyService.setEditingRoomInfo(this.defaultData,this.selectedUnits)}if(!this.isEventType("BAR_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}if(this.defaultData.event_type==="SPLIT_BOOKING"){this.showSplitBookingOption=true;this.page="page_one"}else if(this.defaultData.event_type==="BLOCK_DATES"){this.page="page_block_date"}else{this.page="page_one"}}catch(t){console.error("Error fetching setup entries:",t)}}async fetchSetupEntries(){return await this.bookingService.fetchSetupEntries()}isGuestDataIncomplete(){if(this.guestData.length===0){return true}for(const t of this.guestData){if(t.guestName===""||t.preference===""||t.preference===0){return true}}return false}isButtonDisabled(){const t=(t,i,e)=>{if(!t){return true}if(t===this.guestData){return this.isGuestDataIncomplete()}if(i==="selectedArrivalTime"){if(t[i]!==undefined){return t[i].code===""}else{return true}}return t[i]===e||t[i]===undefined};return t(this.guestData,"guestName","")||t(this.bookedByInfoData,"isdCode","")||t(this.bookedByInfoData,"contactNumber","")||t(this.bookedByInfoData,"firstName","")||t(this.bookedByInfoData,"lastName","")||t(this.bookedByInfoData,"countryId",-1)||t(this.bookedByInfoData,"selectedArrivalTime","")||t(this.bookedByInfoData,"email","")}setSourceOptions(t){this.sourceOptions=t.map((t=>({id:t.code,value:t.description,tag:t.tag,type:t.type})));if(this.isEventType("EDIT_BOOKING")){this.sourceOption=Object.assign({},this.defaultData.SOURCE)}else{this.sourceOption={code:t[0].code,description:t[0].description,tag:t[0].tag}}}setOtherProperties(t){this.ratePricingMode=t.ratePricingMode;this.bookedByInfoData.arrivalTime=t.arrivalTime;this.bedPreferenceType=t.bedPreferenceType}handleAdultChildChange(t){if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}this.adultChildCount=Object.assign({},t.detail)}async initializeBookingAvailability(t,i){try{const e=this.defaultData.roomsInfo.map((t=>t.id));const s=await this.bookingService.getBookingAvailability(t,i,this.propertyid,this.adultChildCount,this.language,e,this.currency);this.message="";this.message=s.tax_statement;if(!this.isEventType("EDIT_BOOKING")){this.defaultData.defaultDateRange.fromDate=new Date(this.dateRangeData.fromDate);this.defaultData.defaultDateRange.toDate=new Date(this.dateRangeData.toDate)}this.defaultData=Object.assign(Object.assign({},this.defaultData),{roomsInfo:s.roomtypes})}catch(t){}}getRoomCategoryByRoomId(t){var i;return(i=this.defaultData.roomsInfo)===null||i===void 0?void 0:i.find((i=>i.physicalrooms.find((i=>i.id===+t))))}getSplitBookings(){return this.defaultData.hasOwnProperty("splitBookingEvents")&&this.defaultData.splitBookingEvents||[]}closeWindow(){this.dateRangeData={};this.closeBookingWindow.emit();document.removeEventListener("keydown",this.handleKeyDown)}isEventType(t){return this.defaultData.event_type===t}onDateRangeSelect(t){t.stopImmediatePropagation();t.stopPropagation();const i=t.detail;if(i.key==="selectedDateRange"){this.dateRangeData=i.data;if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.defaultData.roomsInfo=[];this.message=""}else if(this.adultChildCount.adult!==0){this.initializeBookingAvailability(r(new Date(this.dateRangeData.fromDate)),r(new Date(this.dateRangeData.toDate)))}}}handleBlockDateUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const i=t.detail;this.blockDatesData=i.data}handleGuestInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const i=t.detail;if(i.guestRefKey){if(this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING")){this.guestData[i.guestRefKey]=Object.assign(Object.assign({},i.data),{roomId:this.defaultData.PR_ID})}else this.guestData[i.guestRefKey]=i.data}}handleBookedByInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const i=t.detail;this.bookedByInfoData=i.value.data}handleSourceDropDown(t){t.stopImmediatePropagation();t.stopPropagation();const i=t.detail;const e=this.sourceOptions.find((t=>t.id===i.toString()));this.sourceOption={code:i,description:e.value||"",tag:e.tag}}renderPage(){this.renderAgain=!this.renderAgain}gotoSplitPageTwo(){this.gotoPage("page_two")}gotoPage(t){this.page=t;this.renderPage()}showSplitBooking(){this.showSplitBookingOption=true;this.gotoPage("page_one")}getPageBlockDatesView(){return e(o,null,e("igl-block-dates-view",{fromDate:this.dateRangeData.fromDateStr,toDate:this.dateRangeData.toDateStr,entryDate:this.defaultData.ENTRY_DATE,onDataUpdateEvent:t=>this.handleBlockDateUpdate(t)}),e("div",{class:"p-0 mb-1 mt-2 gap-30 d-flex align-items-center justify-content-between"},e("button",{class:"btn btn-secondary flex-fill",onClick:()=>this.closeWindow()},c.entries.Lcz_Cancel),e("button",{class:"btn btn-primary flex-fill",onClick:()=>this.handleBlockDate()},c.entries.Lcz_Blockdates)))}handleButtonClicked(t){switch(t.detail.key){case"save":this.bookUser(false);break;case"cancel":t.stopImmediatePropagation();t.stopPropagation();this.closeWindow();break;case"back":t.stopImmediatePropagation();t.stopPropagation();this.gotoPage("page_one");break;case"book":this.bookUser(false);this.buttonName="book";break;case"bookAndCheckIn":this.bookUser(true);this.buttonName="bookAndCheckIn";break;case"next":t.stopImmediatePropagation();t.stopPropagation();this.gotoPage("page_two");case"check":this.initializeBookingAvailability(r(new Date(this.dateRangeData.fromDate)),r(new Date(this.dateRangeData.toDate)))}}handlePageTwoDataUpdateEvent(t){t.stopImmediatePropagation();t.stopPropagation();if(t.detail.key==="propertyBookedBy"){this.handleBookedByInfoUpdate(t)}else{this.handleGuestInfoUpdate(t)}}async handleBlockDate(){const t=h(+this.blockDatesData.RELEASE_AFTER_HOURS);const i=await this.bookingService.blockUnit(Object.assign({from_date:r(this.defaultData.defaultDateRange.fromDate),to_date:r(this.defaultData.defaultDateRange.toDate),NOTES:this.blockDatesData.OPTIONAL_REASON||"",pr_id:this.defaultData.PR_ID.toString(),STAY_STATUS_CODE:this.blockDatesData.OUT_OF_SERVICE?"004":this.blockDatesData.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:this.blockDatesData.RELEASE_AFTER_HOURS||""},t));const e=await f(i);this.blockedCreated.emit(e);this.closeWindow()}async bookUser(t){this.setLoadingState(t);if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){if(this.isGuestDataIncomplete()){this.isLoading="";return}}else{if(this.isButtonDisabled()){this.isLoading="";return}}try{if(["003","002","004"].includes(this.defaultData.STATUS_CODE)){this.eventsService.deleteEvent(this.defaultData.POOL)}if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.bookedByInfoData.message=this.defaultData.NOTES}const i=await this.bookPropertyService.prepareBookUserServiceParams(this,t,this.sourceOption);await this.bookingService.bookUser(...i);if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.resetBookingData.emit(null)}}catch(t){}finally{this.resetLoadingState()}}setLoadingState(t){if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.isLoading="save"}else{this.isLoading=t?"bookAndCheckIn":"book"}}getArrivalTimeForBooking(){return this.bookedByInfoData.arrivalTime.find((t=>t.CODE_VALUE_EN===this.defaultData.ARRIVAL_TIME)).CODE_NAME}resetLoadingState(){this.isLoading="";setTimeout((()=>{this.closeWindow()}),100)}onRoomDataUpdate(t){const i=this.bookPropertyService.onDataRoomUpdate(t,this.selectedUnits,this.isEventType("EDIT_BOOKING"),this.isEventType("EDIT_BOOKING")||this.isEventType("SPLIT_BOOKING")||this.isEventType("BAR_BOOKING"),this.defaultData.NAME);this.selectedUnits=new Map(i);this.renderPage()}getCurrentPage(t){return this.page===t}render(){return e(s,null,e("div",{class:"background-overlay",onClick:()=>this.closeWindow()}),e("div",{class:"sideWindow "+(this.getCurrentPage("page_block_date")?"block-date":"")},e("div",{class:"card position-sticky mb-0 shadow-none p-0 "},e("div",{class:"d-flex mt-2 align-items-center justify-content-between  "},e("h3",{class:"card-title text-left pb-1 font-medium-2 px-2 px-md-3"},this.getCurrentPage("page_block_date")?this.defaultData.BLOCK_DATES_TITLE:this.defaultData.TITLE),e("ir-icon",{class:"close close-icon",onIconClickHandler:()=>{this.closeWindow()}},e("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},e("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),e("div",{class:"px-2 px-md-3"},this.getCurrentPage("page_one")&&e("igl-booking-overview-page",{initialRoomIds:this.initialRoomIds,defaultDaterange:this.defaultDateRange,class:"p-0 mb-1",eventType:this.defaultData.event_type,selectedRooms:this.selectedUnits,currency:this.currency,message:this.message,showSplitBookingOption:this.showSplitBookingOption,ratePricingMode:this.ratePricingMode,dateRangeData:this.dateRangeData,bookingData:this.defaultData,adultChildCount:this.adultChildCount,bookedByInfoData:this.bookedByInfoData,adultChildConstraints:this.adultChildConstraints,onRoomsDataUpdate:t=>{this.onRoomDataUpdate(t)},sourceOptions:this.sourceOptions,propertyId:this.propertyid}),this.getCurrentPage("page_two")&&e("igl-pagetwo",{currency:this.currency,propertyId:this.propertyid,showPaymentDetails:this.showPaymentDetails,selectedGuestData:this.guestData,countryNodeList:this.countryNodeList,isLoading:this.isLoading,selectedRooms:this.selectedUnits,bedPreferenceType:this.bedPreferenceType,dateRangeData:this.dateRangeData,bookingData:this.defaultData,showSplitBookingOption:this.showSplitBookingOption,language:this.language,bookedByInfoData:this.bookedByInfoData,defaultGuestData:this.defaultData,isEditOrAddRoomEvent:this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM"),onDataUpdateEvent:t=>this.handlePageTwoDataUpdateEvent(t)}),this.getCurrentPage("page_block_date")?this.getPageBlockDatesView():null)))}};C.style=_;const B=".sc-igl-book-property-container-h{display:block;margin:0;padding:0}.book-container.sc-igl-book-property-container{width:min-content;margin:0;padding:0}";const N=class{constructor(i){t(this,i);this.bookingService=new b;this.roomService=new x;this.language="";this.ticket="";this.baseurl="";this.propertyid=undefined;this.from_date=undefined;this.to_date=undefined;this.bookingItem=undefined;this.showPaymentDetails=undefined;this.countryNodeList=undefined;this.calendarData={}}setRoomsData(t){var i,e;let s=new Array;if((e=(i=t.My_Result)===null||i===void 0?void 0:i.roomtypes)===null||e===void 0?void 0:e.length){s=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}this.calendarData.roomsInfo=s}async initializeApp(){try{const[t,i,e]=await Promise.all([this.roomService.fetchData(this.propertyid,this.language),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language)]);console.log(i);if(!c.entries){c.entries=i.entries;c.direction=i.direction}this.countryNodeList=e;const{allowed_payment_methods:s,currency:o,allowed_booking_sources:n,adult_child_constraints:a,calendar_legends:l}=t["My_Result"];this.calendarData={currency:o,allowed_booking_sources:n,adult_child_constraints:a,legendData:l};this.setRoomsData(t);const r=["001","004"];this.showPaymentDetails=s.some((t=>r.includes(t.code)))}catch(t){console.error("Error initializing app:",t)}}componentDidLoad(){if(this.baseurl){y.defaults.baseURL=this.baseurl}if(this.ticket!==""){this.initializeApp()}}async ticketChanged(){sessionStorage.setItem("token",JSON.stringify(this.ticket));this.initializeApp()}handleCloseBookingWindow(){this.bookingItem=null}handleTriggerClicked(){const t=new Date;t.setDate(t.getDate()+1);this.bookingItem={FROM_DATE:this.from_date,defaultDateRange:{fromDate:new Date,fromDateStr:"",toDate:t,toDateStr:"",dateDifference:0,message:""},TO_DATE:this.to_date,EMAIL:"",event_type:"PLUS_BOOKING",ID:"",NAME:"",PHONE:"",REFERENCE_TYPE:"",TITLE:c.entries.Lcz_NewBooking}}render(){return e(s,null,e("ir-toast",null),e("ir-interceptor",null),e("div",{class:"book-container",onClick:this.handleTriggerClicked.bind(this)},e("slot",{name:"trigger"})),this.bookingItem&&e("igl-book-property",{allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countryNodeList:this.countryNodeList,currency:this.calendarData.currency,language:this.language,propertyid:this.propertyid,bookingData:this.bookingItem,onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))}static get watchers(){return{ticket:["ticketChanged"]}}};N.style=B;const R=".sc-igl-book-property-footer-h{display:block;margin:0;padding:0}.sc-igl-book-property-footer-h>*.sc-igl-book-property-footer{margin:auto;padding:auto}.gap-30.sc-igl-book-property-footer{gap:30px}";const T=class{constructor(e){t(this,e);this.buttonClicked=i(this,"buttonClicked",7);this.eventType=undefined;this.disabled=true}isEventType(t){return t===this.eventType}editNext(t){if(this.isEventType("EDIT_BOOKING")){if(t==="Cancel"){return"flex-fill"}else{return"d-none d-md-block  flex-fill"}}return"flex-fill"}renderButton(t,i,s=false){return e("div",{class:this.shouldRenderTwoButtons()?` ${this.editNext(i)}`:"flex-fill"},e("button",{class:`btn btn-${t==="cancel"?"secondary":"primary"} full-width`,onClick:()=>this.buttonClicked.emit({key:t}),disabled:s},i))}shouldRenderTwoButtons(){return this.isEventType("PLUS_BOOKING")||this.isEventType("ADD_ROOM")||this.isEventType("EDIT_BOOKING")}render(){return e(s,null,e("div",{class:"d-flex justify-content-between gap-30 align-items-center"},this.isEventType("EDIT_BOOKING")?e(o,null,this.renderButton("cancel",c.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${c.entries.Lcz_Next} >>`)):e(o,null,this.renderButton("cancel",c.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${c.entries.Lcz_Next} >>`,this.disabled))))}};T.style=R;const S={status:null};const{state:E,onChange:j}=k(S);const A=".sc-igl-book-property-header-h{display:block}.row.sc-igl-book-property-header{padding:0 0 0 15px;margin:0}.sourceContainer.sc-igl-book-property-header{max-width:350px}.message-label.sc-igl-book-property-header{font-size:80%}";const M=class{constructor(e){t(this,e);this.splitBookingDropDownChange=i(this,"splitBookingDropDownChange",7);this.sourceDropDownChange=i(this,"sourceDropDownChange",7);this.adultChild=i(this,"adultChild",7);this.checkClicked=i(this,"checkClicked",7);this.buttonClicked=i(this,"buttonClicked",7);this.toast=i(this,"toast",7);this.spiltBookingSelected=i(this,"spiltBookingSelected",7);this.sourceOption={code:"",description:"",tag:""};this.splitBookingId="";this.bookingData="";this.minDate=undefined;this.sourceOptions=[];this.message=undefined;this.bookingDataDefaultDateRange=undefined;this.showSplitBookingOption=false;this.adultChildConstraints=undefined;this.splitBookings=undefined;this.adultChildCount=undefined;this.dateRangeData=undefined;this.bookedByInfoData=undefined;this.defaultDaterange=undefined;this.propertyId=undefined}getSplitBookingList(){return e("fieldset",{class:"form-group  text-left"},e("label",{class:"h5"},c.entries.Lcz_Tobooking,"# "),e("div",{class:"btn-group ml-1"},e("ir-autocomplete",{value:Object.keys(this.bookedByInfoData).length>1?`${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}`:"",from_date:d(this.bookingDataDefaultDateRange.fromDate).format("YYYY-MM-DD"),to_date:d(this.bookingDataDefaultDateRange.toDate).format("YYYY-MM-DD"),propertyId:this.propertyId,placeholder:c.entries.Lcz_BookingNumber,onComboboxValue:t=>{t.stopImmediatePropagation();this.spiltBookingSelected.emit(t.detail)},isSplitBooking:true})))}getSourceNode(){return e("fieldset",{class:"d-flex flex-column text-left flex-lg-row align-items-lg-center"},e("label",{class:"mr-lg-1"},c.entries.Lcz_Source," "),e("div",{class:"btn-group mt-1 mt-lg-0 sourceContainer"},e("select",{class:"form-control input-sm",id:"xSmallSelect",onChange:t=>this.sourceDropDownChange.emit(t.target.value)},this.sourceOptions.map((t=>{if(t.type==="LABEL"){return e("optgroup",{label:t.value})}return e("option",{value:t.id,selected:this.sourceOption.code===t.id},t.value)})))))}handleAdultChildChange(t,i){const e=i.target.value;let s={};if(e===""){s=Object.assign(Object.assign({},this.adultChildCount),{[t]:0})}else{s=Object.assign(Object.assign({},this.adultChildCount),{[t]:e})}this.adultChild.emit(s)}getAdultChildConstraints(){return e("div",{class:"mt-1 mt-lg-0 d-flex flex-column text-left"},e("label",{class:"mb-1 d-lg-none"},c.entries.Lcz_NumberOfGuests," "),e("div",{class:"form-group my-lg-0 text-left d-flex align-items-center justify-content-between justify-content-sm-start"},e("fieldset",null,e("div",{class:"btn-group "},e("select",{class:"form-control input-sm",id:"xAdultSmallSelect",onChange:t=>this.handleAdultChildChange("adult",t)},e("option",{value:""},c.entries.Lcz_AdultsCaption),Array.from(Array(this.adultChildConstraints.adult_max_nbr),((t,i)=>i+1)).map((t=>e("option",{value:t},t)))))),this.adultChildConstraints.child_max_nbr>0&&e("fieldset",null,e("div",{class:"btn-group ml-1"},e("select",{class:"form-control input-sm",id:"xChildrenSmallSelect",onChange:t=>this.handleAdultChildChange("child",t)},e("option",{value:""},this.renderChildCaption()),Array.from(Array(this.adultChildConstraints.child_max_nbr),((t,i)=>i+1)).map((t=>e("option",{value:t},t)))))),e("ir-button",{isLoading:E.status==="pending",icon:"",size:"sm",class:"ml-2",text:c.entries.Lcz_Check,onClickHanlder:()=>this.handleButtonClicked()})))}renderChildCaption(){const t=this.adultChildConstraints.child_max_age;let i=c.entries.Lcz_Years;if(t===1){i=c.entries.Lcz_Year}return`${c.entries.Lcz_ChildCaption} < ${this.adultChildConstraints.child_max_age} ${i}`}handleButtonClicked(){if(this.isEventType("SPLIT_BOOKING")&&Object.keys(this.bookedByInfoData).length<=1){this.toast.emit({type:"error",title:c.entries.Lcz_ChooseBookingNumber,description:"",position:"top-right"})}else if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){const t=d(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date));const i=d(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date));const e=d(new Date(this.dateRangeData.fromDate));const s=d(new Date(this.dateRangeData.toDate));if(s.isBefore(i)||e.isAfter(t)){this.toast.emit({type:"error",title:`${c.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",d(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",d(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"});return}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:c.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}else if(this.minDate&&new Date(this.dateRangeData.fromDate).getTime()>new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date).getTime()){this.toast.emit({type:"error",title:`${c.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",d(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",d(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"})}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:c.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}isEventType(t){return this.bookingData.event_type===t}render(){const t=this.showSplitBookingOption?this.getSplitBookingList():this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")?false:true;return e(s,null,t&&this.getSourceNode(),e("div",{class:`d-flex flex-column flex-lg-row align-items-lg-center ${t?"mt-1":""}`},e("fieldset",{class:"mt-lg-0  "},e("igl-date-range",{maxDate:d().add(p.max_nights,"days").format("YYYY-MM-DD"),dateLabel:c.entries.Lcz_Dates,minDate:this.minDate,disabled:this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING"),defaultData:this.bookingDataDefaultDateRange})),!this.isEventType("EDIT_BOOKING")&&this.getAdultChildConstraints()),e("p",{class:"text-right mt-1 message-label"},this.message))}};M.style=A;const L=".sc-igl-booking-overview-page-h{display:block}.sc-igl-booking-overview-page-h>*.sc-igl-booking-overview-page{margin:0;padding:auto}.scrollContent.sc-igl-booking-overview-page{height:calc(100% - 79px);overflow:auto;position:relative}";const P=class{constructor(e){t(this,e);this.roomsDataUpdate=i(this,"roomsDataUpdate",7);this.bookingData=undefined;this.propertyId=undefined;this.message=undefined;this.showSplitBookingOption=undefined;this.eventType=undefined;this.currency=undefined;this.adultChildConstraints=undefined;this.ratePricingMode=undefined;this.dateRangeData=undefined;this.defaultDaterange=undefined;this.selectedRooms=undefined;this.adultChildCount=undefined;this.sourceOptions=undefined;this.bookedByInfoData=undefined;this.initialRoomIds=undefined}getSplitBookings(){return this.bookingData.hasOwnProperty("splitBookingEvents")&&this.bookingData.splitBookingEvents||[]}isEventType(t){return t===this.eventType}render(){var t,i;return e(s,null,e("igl-book-property-header",{bookedByInfoData:this.bookedByInfoData,defaultDaterange:this.defaultDaterange,dateRangeData:this.dateRangeData,adultChildCount:this.adultChildCount,splitBookingId:this.showSplitBookingOption,bookingData:this.bookingData,sourceOptions:this.sourceOptions,message:this.message,bookingDataDefaultDateRange:this.bookingData.defaultDateRange,showSplitBookingOption:this.showSplitBookingOption,adultChildConstraints:this.adultChildConstraints,splitBookings:this.getSplitBookings(),propertyId:this.propertyId}),e("div",{class:" text-left"},(i=(t=this.bookingData)===null||t===void 0?void 0:t.roomsInfo)===null||i===void 0?void 0:i.map((t=>{console.log(this.selectedRooms);return e("igl-booking-rooms",{initialRoomIds:this.initialRoomIds,isBookDisabled:Object.keys(this.bookedByInfoData).length<=1,key:`room-info-${t.id}`,currency:this.currency,ratePricingMode:this.ratePricingMode,dateDifference:this.dateRangeData.dateDifference,bookingType:this.bookingData.event_type,roomTypeData:t,class:"mt-2 mb-1 p-0",roomInfoId:this.selectedRooms.has(`c_${t.id}`)?t.id:null,defaultData:this.selectedRooms.get(`c_${t.id}`),onDataUpdateEvent:t=>this.roomsDataUpdate.emit(t.detail)})}))),e("igl-book-property-footer",{class:"p-0 mb-1 mt-3",eventType:this.bookingData.event_type,disabled:this.selectedRooms.size===0}))}};P.style=L;const G=".sc-igl-booking-room-rate-plan-h{display:block;margin-bottom:0.5rem}.currency.sc-igl-booking-room-rate-plan{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-igl-booking-room-rate-plan{font-size:14px;line-height:0;padding:0;height:0}.rate-input-container.sc-igl-booking-room-rate-plan{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}@media only screen and (min-width: 1200px){.rateplan-name-container.sc-igl-booking-room-rate-plan{width:40%}.rateplan-container.sc-igl-booking-room-rate-plan{width:40%}}@media only screen and (min-width: 991px){.max-w-300.sc-igl-booking-room-rate-plan{max-width:200px}.rate-input-container.sc-igl-booking-room-rate-plan{max-width:100px}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-booking-room-rate-plan{width:35%}}@media only screen and (max-width: 768px){.booking-btn.sc-igl-booking-room-rate-plan{width:100%}}.total-nights-container.sc-igl-booking-room-rate-plan{width:max-content}.rateInputBorder.sc-igl-booking-room-rate-plan{border-top-left-radius:3px !important;border-bottom-left-radius:3px !important}.nightBorder.sc-igl-booking-room-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}";const K=class{constructor(e){t(this,e);this.dataUpdateEvent=i(this,"dataUpdateEvent",7);this.gotoSplitPageTwoEvent=i(this,"gotoSplitPageTwoEvent",7);this.initialRateValue=0;this.defaultData=undefined;this.ratePlanData=undefined;this.totalAvailableRooms=undefined;this.index=undefined;this.ratePricingMode=[];this.currency=undefined;this.physicalrooms=undefined;this.shouldBeDisabled=undefined;this.dateDifference=undefined;this.bookingType="PLUS_BOOKING";this.fullyBlocked=undefined;this.isBookDisabled=false;this.defaultRoomId=undefined;this.selectedRoom=undefined;this.selectedData=undefined;this.ratePlanChangedState=false}getAvailableRooms(t){let i=[];t.forEach((t=>{if(t.Is_Fully_Available){i.push({name:t.name,id:t.pr_id})}}));return i}componentWillLoad(){console.log("default data",this.defaultData);this.updateSelectedRatePlan(this.ratePlanData)}disableForm(){if(this.bookingType==="EDIT_BOOKING"&&this.shouldBeDisabled){return false}else{return this.selectedData.is_closed||this.totalAvailableRooms===0||this.selectedData.physicalRooms.length===0}}setAvailableRooms(t){let i=this.getAvailableRooms(t);if(this.bookingType==="EDIT_BOOKING"&&this.shouldBeDisabled){if(this.selectedRoom){i.push({id:this.selectedRoom.roomId,name:this.selectedRoom.roomName});i.sort(((t,i)=>{if(t.name<i.name){return-1}if(t.name>i.name){return 1}return 0}))}}return i}getSelectedOffering(t){return this.ratePlanData.variations.find((i=>i.adult_child_offering===t))}updateSelectedRatePlan(t){var i;this.selectedData={ratePlanId:t.id,adult_child_offering:t.variations[t.variations.length-1].adult_child_offering,rateType:1,totalRooms:0,rate:(i=t.variations[t.variations.length-1].amount)!==null&&i!==void 0?i:0,ratePlanName:t.name,adultCount:t.variations[t.variations.length-1].adult_nbr,childrenCount:t.variations[t.variations.length-1].child_nbr,cancelation:t.cancelation,guarantee:t.guarantee,isRateModified:false,defaultSelectedRate:0,index:this.index,is_closed:t.is_closed,physicalRooms:this.setAvailableRooms(this.ratePlanData.assignable_units),dateDifference:this.dateDifference};if(this.defaultData){for(const[t,i]of Object.entries(this.defaultData)){this.selectedData[t]=i}this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"physicalRooms",data:this.selectedData})}if(this.defaultData&&this.defaultData.isRateModified){console.log("object");if(this.selectedData.rateType===1){console.log("object1");this.initialRateValue=this.selectedData.rate}else{console.log("object2");this.initialRateValue=this.selectedData.rate*this.dateDifference}}else{this.initialRateValue=this.selectedData.rate/this.dateDifference}}async ratePlanDataChanged(t){this.selectedData=Object.assign(Object.assign({},this.selectedData),{adult_child_offering:t.variations[t.variations.length-1].adult_child_offering,adultCount:t.variations[t.variations.length-1].adult_nbr,childrenCount:t.variations[t.variations.length-1].child_nbr,rate:this.handleRateDaysUpdate(),physicalRooms:this.setAvailableRooms(t.assignable_units)});this.initialRateValue=this.selectedData.rateType===2?this.selectedData.rate/this.dateDifference:this.selectedData.rate;this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"rate",data:this.selectedData})}handleRateDaysUpdate(){if(this.selectedData.isRateModified){return this.selectedData.defaultSelectedRate}const t=this.getSelectedOffering(this.selectedData.adult_child_offering);return t?t.amount:0}handleInput(t){const i=t.target;let e=i.value.replace(/[^0-9.]/g,"");const s=/^\d*\.?\d*$/;if(!s.test(e)){e=e.substring(0,e.length-1)}i.value=e;if(e){this.selectedData.isRateModified=true;this.handleDataChange("rate",t)}else{this.selectedData=Object.assign(Object.assign({},this.selectedData),{rate:-1,totalRooms:0});this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"rate",data:this.selectedData})}}handleDataChange(t,i){const e=i.target.value;switch(t){case"adult_child_offering":this.updateOffering(e);break;case"rate":this.updateRate(e);break;default:this.updateGenericData(t,e);break}this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:t,data:this.selectedData})}updateOffering(t){const i=this.getSelectedOffering(t);if(i){this.selectedData=Object.assign(Object.assign({},this.selectedData),{adult_child_offering:t,adultCount:i.adult_nbr,childrenCount:i.child_nbr,rate:i.amount,isRateModified:false})}}updateRate(t){const i=t===""?0:Number(t);this.selectedData=Object.assign(Object.assign({},this.selectedData),{rate:i,totalRooms:t===""?0:this.selectedData.totalRooms,defaultSelectedRate:this.selectedData.rateType===2?i/this.dateDifference:i})}updateGenericData(t,i){this.selectedData=Object.assign(Object.assign({},this.selectedData),{[t]:i===""?0:parseInt(i)})}bookProperty(){this.dataUpdateEvent.emit({key:"clearData",data:this.selectedData});this.handleDataChange("totalRooms",{target:{value:"1"}});this.gotoSplitPageTwoEvent.emit({key:"gotoSplitPage",data:""})}renderRate(){if(this.selectedData.isRateModified){console.log("selectedData.rate",this.selectedData.rate);return this.selectedData.rate===-1?"":this.selectedData.rate}return this.selectedData.rateType===1?Number(this.selectedData.rate).toFixed(2):Number(this.initialRateValue).toFixed(2)}render(){return e(s,null,e("div",{class:"d-flex flex-column m-0 p-0 flex-lg-row align-items-lg-center justify-content-lg-between "},e("div",{class:"rateplan-name-container"},this.bookingType==="BAR_BOOKING"?e(o,null,e("span",{class:"font-weight-bold\t"},this.ratePlanData.name.split("/")[0]),e("span",null,"/",this.ratePlanData.name.split("/")[1])):e("span",null,this.ratePlanData.name),e("ir-tooltip",{message:this.ratePlanData.cancelation+this.ratePlanData.guarantee})),e("div",{class:"d-md-flex justify-content-md-end  align-items-md-center  flex-fill rateplan-container"},e("div",{class:"mt-1 mt-lg-0 flex-fill max-w-300"},e("fieldset",{class:"position-relative"},e("select",{disabled:this.disableForm(),class:"form-control  input-sm",id:u(),onChange:t=>this.handleDataChange("adult_child_offering",t)},this.ratePlanData.variations.map((t=>e("option",{value:t.adult_child_offering,selected:this.selectedData.adult_child_offering===t.adult_child_offering},t.adult_child_offering)))))),e("div",{class:"m-0 p-0 d-md-flex justify-content-between ml-md-1 "},e("div",{class:" d-flex mt-1  mt-lg-0 m-0 p-0 rate-total-night-view   "},e("fieldset",{class:"position-relative has-icon-left m-0 p-0 rate-input-container  "},e("input",{disabled:this.disableForm(),type:"text",class:"form-control input-sm rate-input py-0 m-0 rounded-0 rateInputBorder",value:this.renderRate(),id:u(),placeholder:c.entries.Lcz_Rate||"Rate",onInput:t=>this.handleInput(t)}),e("span",{class:"currency"},a(this.currency.code))),e("fieldset",{class:"position-relative m-0 total-nights-container p-0 "},e("select",{disabled:this.disableForm(),class:"form-control input-sm m-0 nightBorder rounded-0  py-0",id:u(),onChange:t=>this.handleDataChange("rateType",t)},this.ratePricingMode.map((t=>e("option",{value:t.CODE_NAME,selected:this.selectedData.rateType===+t.CODE_NAME},t.CODE_VALUE_EN)))))),this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"?e("div",{class:"flex-lg-fill  mt-lg-0 ml-md-2 m-0 mt-1 p-0"},e("fieldset",{class:"position-relative"},e("select",{disabled:this.selectedData.rate===0||this.disableForm(),class:"form-control input-sm",id:u(),onChange:t=>this.handleDataChange("totalRooms",t)},Array.from({length:this.totalAvailableRooms+1},((t,i)=>i)).map((t=>e("option",{value:t,selected:this.selectedData.totalRooms===t},t)))))):null),this.bookingType==="EDIT_BOOKING"?e(o,null,e("div",{class:" m-0 p-0  mt-lg-0  ml-md-1 mt-md-1 d-none d-md-block"},e("fieldset",{class:"position-relative"},e("input",{disabled:this.disableForm(),type:"radio",name:"ratePlanGroup",value:"1",onChange:t=>this.handleDataChange("totalRooms",t),checked:this.selectedData.totalRooms===1}))),e("button",{disabled:this.selectedData.rate===-1||this.disableForm(),type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1  mt-1 d-md-none ",onClick:()=>this.bookProperty()},this.selectedData.totalRooms===1?c.entries.Lcz_Current:c.entries.Lcz_Select)):null,this.bookingType==="BAR_BOOKING"||this.bookingType==="SPLIT_BOOKING"?e("button",{disabled:this.selectedData.rate===-1||this.disableForm()||this.bookingType==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1  mt-1 ",onClick:()=>this.bookProperty()},c.entries.Lcz_Book):null)))}static get watchers(){return{ratePlanData:["ratePlanDataChanged"]}}};K.style=G;const U=".sc-igl-booking-rooms-h{display:block}";const Y=class{constructor(e){t(this,e);this.dataUpdateEvent=i(this,"dataUpdateEvent",7);this.validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"];this.roomTypeData=undefined;this.defaultData=undefined;this.bookingType="PLUS_BOOKING";this.dateDifference=undefined;this.ratePricingMode=[];this.roomInfoId=null;this.currency=undefined;this.selectedRooms=[];this.totalRooms=undefined;this.isBookDisabled=undefined;this.initialRoomIds=undefined;this.roomsDistributions=[]}componentWillLoad(){this.initializeRoomData()}initializeRoomData(){const{inventory:t,rateplans:i}=this.roomTypeData;this.totalRooms=t||0;this.selectedRooms=new Array(i.length).fill(0);this.roomsDistributions=this.calculateInitialDistributions(i,t)}handleRoomTypeData(){this.initializeRoomData()}calculateInitialDistributions(t,i){let e=new Array(t.length).fill(i);if(this.defaultData&&this.bookingType!=="EDIT_BOOKING"&&i>0){let t=[];let i=0;this.defaultData.forEach((s=>{this.selectedRooms[s.index]=s.totalRooms;e[s.index]=s.totalRooms;i+=s.totalRooms;t.push(s.index)}));if(t.length<e.length){e.forEach(((s,o)=>{if(!t.includes(o)){if(i===this.totalRooms){e[o]=0}else{e[o]=e[o]-i}}else{if(i<this.totalRooms){e[o]=this.totalRooms-i+e[o]}}}))}}else{e.fill(i)}return e}onRoomDataUpdate(t,i){t.stopImmediatePropagation();const{detail:{data:e,changedKey:s}}=t;let o=Object.assign({},e);if(s==="totalRooms"){this.handleTotalRoomsUpdate(i,o.totalRooms)}o=Object.assign(Object.assign({},o),{roomCategoryId:this.roomTypeData.id,roomCategoryName:this.roomTypeData.name,inventory:this.roomTypeData.inventory});this.dataUpdateEvent.emit({key:e.key,data:o,changedKey:s})}handleTotalRoomsUpdate(t,i){if(this.selectedRooms[t]!==i){this.selectedRooms[t]=i;this.updateRatePlanTotalRooms(t)}}updateRatePlanTotalRooms(t){const i=t=>this.selectedRooms.reduce(((i,e,s)=>s!==t?i+e:i),0);const e=this.selectedRooms.map(((e,s)=>{if(s===t){return this.roomsDistributions[s]}const o=i(s);const n=this.totalRooms-o;return n>0?n:0}));if(JSON.stringify(this.roomsDistributions)!==JSON.stringify(e)){this.roomsDistributions=[...e]}}render(){const t=this.validBookingTypes.includes(this.bookingType);return e(s,null,t&&e("div",{class:"font-weight-bold font-medium-1 mb-1"},this.roomTypeData.name),this.roomTypeData.rateplans.map(((i,s)=>{if(i.variations!==null){let o=this.roomInfoId&&this.roomInfoId===this.roomTypeData.id;let n=-1;if(o&&this.initialRoomIds){n=this.initialRoomIds.roomId}return e("igl-booking-room-rate-plan",{index:s,isBookDisabled:this.isBookDisabled,key:`rate-plan-${i.id}`,ratePricingMode:this.ratePricingMode,class:t?"":"",currency:this.currency,dateDifference:this.dateDifference,ratePlanData:i,totalAvailableRooms:this.roomsDistributions[s],bookingType:this.bookingType,defaultData:this.defaultData&&this.defaultData.get(`p_${i.id}`)||null,shouldBeDisabled:o,onDataUpdateEvent:t=>this.onRoomDataUpdate(t,s),physicalrooms:this.roomTypeData.physicalrooms,defaultRoomId:n,selectedRoom:this.initialRoomIds})}else{return null}})))}static get watchers(){return{roomTypeData:["handleRoomTypeData"]}}};Y.style=U;const z=".sc-igl-date-range-h{display:flex;text-align:left;align-items:center}.date-range-input.sc-igl-date-range{margin:0;padding:0;display:flex;flex:1}.iglRangeNights.sc-igl-date-range{margin:0;padding:0}.iglRangePicker[data-state='disabled'].sc-igl-date-range{border:0;padding-left:0;padding-right:0;width:180px;margin-right:0}.iglRangePicker.sc-igl-date-range{margin:0;border:1px solid #379ff2;box-sizing:border-box;width:220px;display:flex;align-items:center}.calendarPickerContainer.sc-igl-date-range{display:flex}";const W=class{constructor(e){t(this,e);this.dateSelectEvent=i(this,"dateSelectEvent",7);this.toast=i(this,"toast",7);this.totalNights=0;this.fromDateStr="from";this.toDateStr="to";this.defaultData=undefined;this.disabled=false;this.minDate=undefined;this.dateLabel=undefined;this.maxDate=undefined;this.renderAgain=false}getStringDateFormat(t){return t.getFullYear()+"-"+(t.getMonth()<9?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<=9?"0":"")+t.getDate()}componentWillLoad(){let t=new Date;t.setHours(0,0,0,0);t.setDate(t.getDate()+1);if(this.defaultData){if(this.defaultData.fromDate){this.fromDate=new Date(this.defaultData.fromDate);this.fromDate.setHours(0,0,0,0);this.fromDateStr=this.getFormattedDateString(this.fromDate)}if(this.defaultData.toDate){this.toDate=new Date(this.defaultData.toDate);this.toDate.setHours(0,0,0,0);this.toDateStr=this.getFormattedDateString(this.toDate)}}if(this.fromDate&&this.toDate){this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:this.fromDateStr,toDateStr:this.toDateStr,dateDifference:this.totalNights})}}calculateTotalNights(){this.totalNights=Math.floor((this.toDate.getTime()-this.fromDate.getTime())/864e5)}getFormattedDateString(t){return t.getDate()+" "+t.toLocaleString("default",{month:"short"}).toLowerCase()+" "+t.getFullYear()}handleDateSelectEvent(t,i=""){this.dateSelectEvent.emit({key:t,data:i})}handleDateChange(t){const{start:i,end:e}=t.detail;this.fromDate=i.toDate();this.toDate=e.toDate();this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:i.format("DD MMM YYYY"),toDateStr:e.format("DD MMM YYYY"),dateDifference:this.totalNights});this.renderAgain=!this.renderAgain}render(){return e(s,null,e("div",{class:"calendarPickerContainer ml-0 d-flex flex-column flex-lg-row align-items-lg-center "},e("span",{class:"mt-0 mb-1 mb-lg-0 mr-lg-1 text-left"},this.dateLabel,":"),e("div",{class:"d-flex align-items-center mr-lg-1"},e("div",{class:"iglRangePicker form-control input-sm ","data-state":this.disabled?"disabled":"active"},e("ir-date-picker",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,onDateChanged:t=>{this.handleDateChange(t)}})),this.totalNights?e("span",{class:"iglRangeNights ml-1"},"(",this.totalNights+(this.totalNights>1?` ${c.entries.Lcz_Nights}`:` ${c.entries.Lcz_Night}`),")"):"")))}};W.style=z;const F=".sc-igl-pagetwo-h{display:block}.card-title.sc-igl-pagetwo{border-bottom:1px solid #e4e5ec}.scrollContent.sc-igl-pagetwo{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-pagetwo{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-pagetwo{height:calc(100% - 79px);overflow:auto}.sideWindow.sc-igl-pagetwo{position:absolute;top:0;right:0;height:100%;background-color:#ffffff}.close.sc-igl-pagetwo{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-pagetwo{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-pagetwo:not(:disabled),[type='button'].sc-igl-pagetwo:not(:disabled){cursor:pointer}.row.sc-igl-pagetwo{padding:0 0 0 15px;margin:0}";const H=class{constructor(e){t(this,e);this.dataUpdateEvent=i(this,"dataUpdateEvent",7);this.buttonClicked=i(this,"buttonClicked",7);this.showPaymentDetails=undefined;this.currency=undefined;this.isEditOrAddRoomEvent=undefined;this.dateRangeData=undefined;this.bookingData=undefined;this.showSplitBookingOption=undefined;this.language=undefined;this.bookedByInfoData=undefined;this.propertyId=undefined;this.bedPreferenceType=undefined;this.selectedRooms=undefined;this.isLoading=undefined;this.countryNodeList=undefined;this.selectedGuestData=undefined;this.defaultGuestData=undefined;this.selectedBookedByData=undefined;this.guestData=undefined;this.selectedUnits={}}componentWillLoad(){this.initializeGuestData();this.selectedBookedByData=this.bookedByInfoData}initializeGuestData(){let t=0;const i=Object.assign({},this.selectedUnits);const e=(t,i,e,s)=>{if(e&&s===2){return t*i}return t};this.selectedUnits=i;this.guestData=[];this.selectedRooms.forEach(((s,o)=>{s.forEach((s=>{i[o]=s.selectedUnits;t+=s.totalRooms*e(s.rate,this.dateRangeData.dateDifference,s.isRateModified,s.rateType);for(let t=1;t<=s.totalRooms;t++){this.guestData.push(Object.assign({guestName:"",roomId:"",preference:""},s))}}))}));this.bookingData.TOTAL_PRICE=t}handleOnApplicationInfoDataUpdateEvent(t,i){const e=t.detail;const s=`c_${e.data.roomCategoryId}`;const o=[...this.selectedUnits[s]||[]];o[i]=e.data.roomId;this.selectedUnits=Object.assign(Object.assign({},this.selectedUnits),{[s]:o});this.dataUpdateEvent.emit({key:"applicationInfoUpdateEvent",value:t.detail})}handleEventData(t,i,e){if(i==="application-info"){this.handleOnApplicationInfoDataUpdateEvent(t,e)}else{this.selectedBookedByData=t.detail.data;this.dataUpdateEvent.emit({key:"propertyBookedBy",value:t.detail})}}isGuestDataIncomplete(){if(this.selectedGuestData.length!==this.guestData.length){return true}for(const t of this.selectedGuestData){if(t.guestName===""||t.preference===""||t.roomId===""){return true}}return false}isButtonDisabled(t){const i=(t,i,e)=>{if(!t){return true}if(t===this.selectedGuestData){return this.isGuestDataIncomplete()}if(i==="selectedArrivalTime"){if(t[i]!==undefined){return t[i].code===""}else{return true}}return t[i]===e||t[i]===undefined};return this.isLoading===t||i(this.selectedGuestData,"guestName","")||i(this.selectedBookedByData,"isdCode","")||i(this.selectedBookedByData,"contactNumber","")||i(this.selectedBookedByData,"firstName","")||i(this.selectedBookedByData,"lastName","")||i(this.selectedBookedByData,"countryId",-1)||i(this.selectedBookedByData,"selectedArrivalTime","")||i(this.selectedBookedByData,"email","")}render(){return e(s,null,e("div",{class:"d-flex flex-wrap"},e("div",{class:"flex-fill text-left p-0"},e("span",{class:"mr-1 font-weight-bold font-medium-1"},l(this.dateRangeData.fromDateStr)," - ",l(this.dateRangeData.toDateStr)),this.dateRangeData.dateDifference," ",+this.dateRangeData.dateDifference>1?` ${c.entries.Lcz_Nights}`:` ${c.entries.Lcz_Night}`),this.guestData.length>1&&e("div",{class:"mt-1 mt-md-0 text-right"},c.entries.Lcz_TotalPrice," ",e("span",{class:"font-weight-bold font-medium-1"},a(this.currency.code)+this.bookingData.TOTAL_PRICE||"$0.00"))),this.guestData.map(((t,i)=>e("igl-application-info",{dateDifference:this.dateRangeData.dateDifference,defaultGuestPreference:this.defaultGuestData.bed_preference,defaultGuestRoomId:this.defaultGuestData.PR_ID,currency:this.currency,bedPreferenceType:this.bedPreferenceType,index:i,selectedUnits:this.selectedUnits[`c_${t.roomCategoryId}`],guestInfo:t,guestRefKey:i,bookingType:this.bookingData.event_type,roomsList:t.physicalRooms,onDataUpdateEvent:t=>this.handleEventData(t,"application-info",i)}))),this.isEditOrAddRoomEvent||this.showSplitBookingOption?null:e("igl-property-booked-by",{propertyId:this.propertyId,countryNodeList:this.countryNodeList,language:this.language,showPaymentDetails:this.showPaymentDetails,defaultData:this.bookedByInfoData,onDataUpdateEvent:t=>this.handleEventData(t,"propertyBookedBy",0)}),this.isEditOrAddRoomEvent?e("div",{class:"d-flex p-0 mb-1 mt-2"},e("div",{class:"flex-fill mr-2"},e("ir-button",{icon:"",text:c.entries.Lcz_Back,class:"full-width",btn_color:"secondary",btn_styles:"justify-content-center",onClickHanlder:()=>this.buttonClicked.emit({key:"back"})})),e("div",{class:"flex-fill"},e("ir-button",{isLoading:this.isLoading==="save",onClickHanlder:()=>this.buttonClicked.emit({key:"save"}),btn_styles:"full-width align-items-center justify-content-center",text:c.entries.Lcz_Save}))):e("div",{class:"d-flex flex-column flex-md-row p-0 mb-1 mt-2 justify-content-md-between align-items-md-center"},e("div",{class:"flex-fill mr-md-1"},e("button",{type:"button",class:"btn btn-secondary full-width",onClick:()=>this.buttonClicked.emit({key:"back"})},e("span",{class:"d-none d-md-inline-flex"}," <<")," ",c.entries.Lcz_Back)),e("div",{class:"mt-1 mt-md-0 flex-fill"},e("ir-button",{isLoading:this.isLoading==="book",btn_styles:"full-width align-items-center justify-content-center",onClickHanlder:()=>this.buttonClicked.emit({key:"book"}),text:c.entries.Lcz_Book}))))}};H.style=F;const J=".sc-igl-property-booked-by-h{display:block}.row.sc-igl-property-booked-by{padding:0 0 0 15px;margin:0}.bookedByEmailContainer.sc-igl-property-booked-by{flex:auto;max-width:350px}.bookedDetailsForm.sc-igl-property-booked-by label.sc-igl-property-booked-by{min-width:125px;max-width:125px}.bookedDetailsForm.sc-igl-property-booked-by .form-group.sc-igl-property-booked-by{margin-bottom:10px !important}.bookedDetailsForm.sc-igl-property-booked-by .checkBoxContainer.sc-igl-property-booked-by input.sc-igl-property-booked-by{height:1.2rem !important;width:30px}.controlContainer.sc-igl-property-booked-by textarea.sc-igl-property-booked-by{height:60px !important}.margin3.sc-igl-property-booked-by{margin-bottom:5px !important}@media (min-width: 768px){.bookedByEmailContainer.sc-igl-property-booked-by{margin-left:37px}}";const V=class{constructor(e){t(this,e);this.dataUpdateEvent=i(this,"dataUpdateEvent",7);this.bookingService=new m;this.arrivalTimeList=[];this.expiryMonths=["01","02","03","04","05","06","07","08","09","10","11","12"];this.expiryYears=[];this.currentMonth="01";this.language=undefined;this.showPaymentDetails=false;this.defaultData=undefined;this.countryNodeList=[];this.propertyId=undefined;this.isButtonPressed=false;this.bookedByData={id:undefined,email:"",firstName:"",lastName:"",countryId:"",isdCode:"",contactNumber:"",selectedArrivalTime:{code:"",description:""},emailGuest:true,message:"",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:""}}async componentWillLoad(){this.assignCountryCode();this.initializeExpiryYears();this.initializeDateData();this.populateBookedByData()}initializeExpiryYears(){const t=(new Date).getFullYear();this.expiryYears=Array.from({length:4},((i,e)=>(t+e).toString()))}async assignCountryCode(){const t=await this.bookingService.getUserDefaultCountry();const i=t["COUNTRY_ID"];this.country=i;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:i.toString(),countryId:i})}initializeDateData(){const t=new Date;const i=t.getMonth()+1;this.currentMonth=i<10?`0${i}`:i.toString()}populateBookedByData(){var t;this.bookedByData=this.defaultData?Object.assign(Object.assign({},this.bookedByData),this.defaultData):{};this.arrivalTimeList=((t=this.defaultData)===null||t===void 0?void 0:t.arrivalTime)||[];this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{selectedArrivalTime:{code:this.arrivalTimeList[0].CODE_NAME,description:this.arrivalTimeList[0].CODE_VALUE_EN}});if(!this.bookedByData.expiryMonth){this.bookedByData.expiryMonth=this.currentMonth}if(!this.bookedByData.expiryYear){this.bookedByData.expiryYear=(new Date).getFullYear()}}handleDataChange(t,i){const e=this.arrivalTimeList.find((t=>t.CODE_NAME===i.target.value));this.bookedByData[t]=t==="emailGuest"?i.target.checked:t==="arrivalTime"?{code:i.target.value,description:e&&e.CODE_VALUE_EN||""}:i.target.value;this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)});if(t==="countryId"){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:i.target.value})}}handleNumberInput(t,i){const e=i.target;const s=e.value;const o=/^[0-9]+$/;if(!o.test(s)){e.value=s.replace(/[^0-9]/g,"")}if(s===e.value){this.handleDataChange(t,i)}}async handleEmailInput(t,i){const e=i.target;const s=e.value;if(this.isValidEmail(s)){this.handleDataChange(t,i)}}async checkUser(){try{const t=this.bookedByData.email;if(this.isValidEmail(t)){const i=await this.bookingService.getUserInfo(t);if(i!==null){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:i.id,firstName:i.first_name,lastName:i.last_name,contactNumber:i.mobile,countryId:i.country_id,isdCode:i.country_id.toString()})}else{this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:undefined,firstName:"",lastName:"",contactNumber:"",countryId:"",isdCode:""})}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}}catch(t){}}isValidEmail(t){const i=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return i.test(t)}handleComboboxChange(t){t.stopImmediatePropagation();t.stopPropagation();const{key:i,data:e}=t.detail;switch(i){case"blur":if(e!==""){this.bookedByData.email=e;this.checkUser()}break;case"select":this.bookedByData.email=e.email;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:e.id,firstName:e.first_name,lastName:e.last_name,contactNumber:e.mobile,countryId:e.country_id,isdCode:e.country_id.toString()});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData});break}}clearEvent(){this.bookedByData.email="";this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:"",firstName:"",lastName:"",contactNumber:"",isdCode:this.country.toString(),countryId:this.country});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":this.isButtonPressed=true;break}}render(){return e(s,null,e("div",{class:"text-left mt-3"},e("div",{class:"form-group d-flex flex-column flex-md-row align-items-md-center text-left "},e("label",{class:"p-0 m-0 label-control mr-1 font-weight-bold"},c.entries.Lcz_BookedBy),e("div",{class:"bookedByEmailContainer mt-1 mt-md-0"},e("ir-autocomplete",{danger_border:this.isButtonPressed&&this.bookedByData.email==="",onComboboxValue:this.handleComboboxChange.bind(this),propertyId:this.propertyId,type:"email",value:this.bookedByData.email,required:true,placeholder:c.entries.Lcz_EmailAddress,onInputCleared:()=>this.clearEvent()})))),e("div",{class:"bookedDetailsForm text-left mt-2 font-small-3 "},e("div",{class:"d-flex flex-column flex-md-row  justify-content-md-between "},e("div",{class:"p-0 flex-fill "},e("div",{class:"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill "},e("label",{class:"p-0 m-0 margin3"},c.entries.Lcz_FirstName),e("div",{class:"p-0 m-0  controlContainer flex-fill  "},e("input",{class:`form-control flex-fill ${this.isButtonPressed&&this.bookedByData.firstName===""&&"border-danger"}`,type:"text",placeholder:c.entries.Lcz_FirstName,id:u(),value:this.bookedByData.firstName,onInput:t=>this.handleDataChange("firstName",t),required:true}))),e("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{class:"p-0 m-0 margin3"},c.entries.Lcz_LastName),e("div",{class:"p-0 m-0  controlContainer flex-fill"},e("input",{class:`form-control ${this.isButtonPressed&&this.bookedByData.lastName===""&&"border-danger"}`,type:"text",placeholder:c.entries.Lcz_LastName,id:u(),value:this.bookedByData.lastName,onInput:t=>this.handleDataChange("lastName",t)}))),e("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{class:"p-0 m-0 margin3"},c.entries.Lcz_Country),e("div",{class:"p-0 m-0  controlContainer flex-fill"},e("select",{class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.countryId===""&&"border-danger"}`,id:u(),onChange:t=>this.handleDataChange("countryId",t)},e("option",{value:"",selected:this.bookedByData.countryId===""},c.entries.Lcz_Select),this.countryNodeList.map((t=>e("option",{value:t.id,selected:this.bookedByData.countryId===t.id},t.name)))))),e("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{class:"p-0 m-0 margin3"},c.entries.Lcz_MobilePhone),e("div",{class:"p-0 m-0  d-flex  controlContainer flex-fill"},e("div",{class:" p-0 m-0"},e("select",{class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.isdCode===""&&"border-danger"}`,id:u(),onChange:t=>this.handleDataChange("isdCode",t)},e("option",{value:"",selected:this.bookedByData.isdCode===""},c.entries.Lcz_Isd),this.countryNodeList.map((t=>e("option",{value:t.id,selected:this.bookedByData.isdCode===t.id.toString()},t.phone_prefix))))),e("div",{class:"flex-fill p-0 m-0"},e("input",{class:`form-control ${this.isButtonPressed&&this.bookedByData.contactNumber===""&&"border-danger"}`,type:"tel",placeholder:c.entries.Lcz_ContactNumber,id:u(),value:this.bookedByData.contactNumber,onInput:t=>this.handleNumberInput("contactNumber",t)})))),e("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{class:"p-0 m-0 margin3"},c.entries.Lcz_YourArrivalTime),e("div",{class:"p-0 m-0  controlContainer flex-fill"},e("select",{class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.selectedArrivalTime.code===""&&"border-danger"}`,id:u(),onChange:t=>this.handleDataChange("selectedArrivalTime",t)},this.arrivalTimeList.map((t=>e("option",{value:t.CODE_NAME,selected:this.bookedByData.selectedArrivalTime.code===t.CODE_NAME},t.CODE_VALUE_EN))))))),e("div",{class:"p-0 flex-fill  ml-md-3"},e("div",{class:"  p-0 d-flex flex-column flex-md-row align-items-md-center "},e("label",{class:"p-0 m-0 margin3"},c.entries.Lcz_AnyMessageForUs),e("div",{class:"p-0 m-0  controlContainer flex-fill "},e("textarea",{id:u(),rows:4,class:"form-control ",name:"message",value:this.bookedByData.message,onInput:t=>this.handleDataChange("message",t)}))),this.showPaymentDetails&&e(o,null,e("div",{class:"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{class:"p-0 m-0 margin3"},c.entries.Lcz_CardNumber),e("div",{class:"p-0 m-0  controlContainer flex-fill"},e("input",{class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:u(),value:this.bookedByData.cardNumber,onInput:t=>this.handleNumberInput("cardNumber",t)}))),e("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{class:"p-0 m-0 margin3"},c.entries.Lcz_CardHolderName),e("div",{class:"p-0 m-0  controlContainer flex-fill"},e("input",{class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:u(),value:this.bookedByData.cardHolderName,onInput:t=>this.handleDataChange("cardHolderName",t)}))),e("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},e("label",{class:"p-0 m-0 margin3"},c.entries.Lcz_ExpiryDate),e("div",{class:"p-0 m-0 row  controlContainer flex-fill"},e("div",{class:"p-0 m-0"},e("select",{class:"form-control input-sm pr-0",id:u(),onChange:t=>this.handleDataChange("expiryMonth",t)},this.expiryMonths.map((t=>e("option",{value:t,selected:t===this.bookedByData.expiryMonth},t))))),e("div",{class:"p-0 m-0 ml-1"},e("select",{class:"form-control input-sm pr-0",id:u(),onChange:t=>this.handleDataChange("expiryYear",t)},this.expiryYears.map(((t,i)=>e("option",{value:t,selected:i===this.bookedByData.expiryYear},t)))))))),e("div",{class:"form-group mt-1 p-0 d-flex flex-row align-items-center"},e("label",{class:"p-0 m-0",htmlFor:"emailTheGuestId"},c.entries.Lcz_EmailTheGuest),e("div",{class:"p-0 m-0  controlContainer flex-fill checkBoxContainer"},e("input",{class:"form-control",type:"checkbox",checked:this.bookedByData.emailGuest,id:"emailTheGuestId",onChange:t=>this.handleDataChange("emailGuest",t)})))))))}};V.style=J;const X=".sc-ir-autocomplete-h{display:block;position:relative}.selected.sc-ir-autocomplete{color:#fff;text-decoration:none;background-color:#666ee8}input.sc-ir-autocomplete{width:100%;position:relative}.combobox.sc-ir-autocomplete{margin:0;top:30px;min-width:100%;width:max-content;display:block;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto}.dropdown-item.sc-ir-autocomplete{cursor:pointer}button.sc-ir-autocomplete{all:unset;right:4px}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete,span.sc-ir-autocomplete,loader-container.sc-ir-autocomplete{padding:5px 16px;margin:0px;margin-top:2px;width:100%}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete{cursor:pointer}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete:hover{background:#f4f5fa}.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete,.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete:hover{color:#fff;text-decoration:none;background-color:#666ee8}.loader.sc-ir-autocomplete{width:14px;height:14px;border:2px solid #0f0f0f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const q=class{constructor(e){t(this,e);this.comboboxValue=i(this,"comboboxValue",7);this.inputCleared=i(this,"inputCleared",7);this.toast=i(this,"toast",7);this.bookingService=new m;this.no_result_found="";this.duration=300;this.placeholder="";this.propertyId=undefined;this.isSplitBooking=false;this.type="text";this.name="";this.inputId=u();this.required=false;this.disabled=false;this.value=undefined;this.from_date="";this.to_date="";this.danger_border=undefined;this.inputValue="";this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.isItemSelected=undefined}componentWillLoad(){this.no_result_found=c.entries.Lcz_NoResultsFound}handleKeyDown(t){var i;const e=this.data.length;const s=this.getHeightOfPElement();if(e>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+e)%e;this.adjustScrollPosition(s);break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%e;this.adjustScrollPosition(s);break;case"Enter":case" ":case"ArrowRight":t.preventDefault();this.selectItem(this.selectedIndex);break;case"Escape":(i=this.inputRef)===null||i===void 0?void 0:i.blur();this.isComboBoxVisible=false;break}}}getHeightOfPElement(){const t=this.el.querySelector(".combobox");if(t){const i=t.querySelector("p");return i?i.offsetHeight:0}return 0}adjustScrollPosition(t,i=250){const e=this.el.querySelector(".combobox");if(e){const s=2;const o=t+s;const n=o*this.selectedIndex;let a=n-i/2+t/2;a=Math.max(0,Math.min(a,e.scrollHeight-i));e.scrollTo({top:a,behavior:"auto"})}}selectItem(t){if(this.data[t]){this.isItemSelected=true;this.comboboxValue.emit({key:"select",data:this.data[t]});this.inputValue="";this.resetCombobox()}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}async fetchData(){try{this.isLoading=true;let t=[];if(!this.isSplitBooking){t=await this.bookingService.fetchExposedGuest(this.inputValue,this.propertyId)}else{if(this.inputValue.split(" ").length===1){t=await this.bookingService.fetchExposedBookings(this.inputValue,this.propertyId,this.from_date,this.to_date)}}this.data=t;if(!this.isComboBoxVisible){this.isComboBoxVisible=true}}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{clearTimeout(this.debounceTimer);this.resetCombobox(false)}}handleDocumentClick(t){const i=t.target;if(!this.el.contains(i)){this.isComboBoxVisible=false}}handleBlur(){setTimeout((()=>{if(this.isDropdownItem(document.activeElement)){return}if(this.isSplitBooking){if(!this.isItemSelected){if(this.data.length>0){this.comboboxValue.emit({key:"blur",data:this.inputValue})}else{if(this.inputValue!==""){this.toast.emit({type:"error",description:"",title:`The Booking #${this.inputValue} is not Available`,position:"top-right"});this.inputCleared.emit()}}this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}else{if(!this.isItemSelected){this.comboboxValue.emit({key:"blur",data:this.inputValue});this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}}),200)}isDropdownItem(t){return t&&t.closest(".combobox")}disconnectedCallback(){var t,i,e,s;clearTimeout(this.debounceTimer);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("click",this.selectItem);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("keydown",this.handleKeyDown);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(t,i){var e;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(i);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(e=this.inputRef)===null||e===void 0?void 0:e.blur();t.preventDefault()}else{return}}renderDropdown(){var t;if(this.inputValue!==""){return e("div",{class:`position-absolute border rounded combobox`},(t=this.data)===null||t===void 0?void 0:t.map(((t,i)=>e("p",{role:"button",onKeyDown:t=>this.handleItemKeyDown(t,i),"data-selected":this.selectedIndex===i,tabIndex:0,onClick:()=>this.selectItem(i)},this.isSplitBooking?e(o,null,`${t.booking_nbr} ${t.guest.first_name} ${t.guest.last_name}`):e("div",{class:"d-flex align-items-center flex-fill"},e("p",{class:"p-0 m-0"},`${t.email}`," ",e("span",{class:"p-0 m-0"},` - ${t.first_name} ${t.last_name}`)))))),this.isLoading&&e("div",{class:"loader-container d-flex align-items-center justify-content-center"},e("div",{class:"loader"})),this.data.length===0&&!this.isLoading&&e("span",{class:"text-center"},this.no_result_found))}}handleFocus(){this.isComboBoxVisible=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(t=true){var i;if(t){(i=this.inputRef)===null||i===void 0?void 0:i.blur()}this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false}render(){return e(s,null,e("div",{class:"d-flex align-items-center "},e("input",{required:this.required,disabled:this.disabled,id:this.inputId,onKeyDown:this.handleKeyDown.bind(this),class:`form-control input-sm flex-full ${this.danger_border&&"border-danger"}`,type:this.type,name:this.name,value:this.value||this.inputValue,placeholder:this.placeholder,onBlur:this.handleBlur.bind(this),onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),ref:t=>this.inputRef=t}),this.inputValue&&e("button",{type:"button",class:"position-absolute d-flex align-items-center justify-content-center ",onClick:this.clearInput.bind(this)},e("p",{class:"sr-only"},"clear input"),e("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})))),this.isComboBoxVisible&&this.renderDropdown())}get el(){return n(this)}};q.style=X;const Z=".loader{width:11px;height:11px;border:2px solid #fff;border-bottom-color:transparent;border-radius:50%;margin:0;padding:0;display:inline-flex;box-sizing:border-box;animation:rotation 1s linear infinite}.button-icon{padding:0;margin-top:0}.button-icon[data-state='loading']{display:none}.button-text{padding:0 5px}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Q=class{constructor(e){t(this,e);this.clickHanlder=i(this,"clickHanlder",7);this.name=undefined;this.text=undefined;this.icon="ft-save";this.btn_color="primary";this.size="md";this.textSize="md";this.btn_block=true;this.btn_disabled=false;this.btn_type="button";this.isLoading=false;this.btn_styles=undefined}connectedCallback(){}disconnectedCallback(){}render(){let t=this.btn_block?"btn-block":"";return e("button",{onClick:()=>this.clickHanlder.emit(),class:`btn btn-${this.btn_color} ${this.btn_styles} d-flex align-items-center btn-${this.size} text-${this.textSize} ${t}`,type:this.btn_type,disabled:this.btn_disabled},e("span",{class:"button-icon","data-state":this.isLoading?"loading":""},e("slot",{name:"icon"})),this.isLoading&&e("span",{class:"loader m-0 p-0"}),this.text&&e("span",{class:"button-text m-0"},this.text))}};Q.style=Z;const tt=[{isCSS:true,link:"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/colors.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/components.css"},{isCSS:true,link:"https://x.igloorooms.com/assets/css/style.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/pages/login-register.css"}];const it=class{constructor(i){t(this,i);this.extraResources="";this.resources=tt}componentWillLoad(){this.parseRefs()}componentDidLoad(){this.initializeStyles()}hrefsChanged(){this.parseRefs();this.initializeStyles()}parseRefs(){if(this.extraResources!=="")this.resources.push(JSON.parse(this.extraResources))}appendTag(t,i){const e=document.createElement(t);const s=[];Object.keys(i).forEach((t=>{e.setAttribute(t,i[t]);s.push(`[${t}="${i[t]}"]`)}));const o=`${t}${s.join("")}`;const n=document.querySelector(o);if(!n){document.head.appendChild(e)}}initializeStyles(){this.resources.forEach((t=>{if(t.isCSS){this.appendTag("link",{href:t.link,rel:"stylesheet",type:"text/css"})}if(t.isJS){this.appendTag("script",{src:t.link})}}))}render(){return e(s,null,e("slot",null))}static get watchers(){return{extraResources:["hrefsChanged"]}}};const et="input.sc-ir-date-picker{all:unset;box-sizing:border-box;padding:0;margin:0;width:100%;text-align:center}input.sc-ir-date-picker:disabled{text-align:start;font-size:14px}";const st=class{constructor(e){t(this,e);this.dateChanged=i(this,"dateChanged",7);this.fromDate=undefined;this.toDate=undefined;this.opens=undefined;this.autoApply=undefined;this.firstDay=1;this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];this.daysOfWeek=["Su","Mo","Tu","We","Th","Fr","Sa"];this.format="MMM DD, YYYY";this.separator=" - ";this.applyLabel="Apply";this.cancelLabel="Cancel";this.fromLabel="Form";this.toLabel="To";this.customRangeLabel="Custom";this.weekLabel="W";this.disabled=false;this.singleDatePicker=false;this.minDate=undefined;this.maxDate=undefined;this.maxSpan={days:240}}componentDidLoad(){this.dateRangeInput=this.element.querySelector(".date-range-input");$(this.dateRangeInput).daterangepicker({singleDatePicker:this.singleDatePicker,opens:this.opens,startDate:d(this.fromDate),endDate:d(this.toDate),minDate:d(this.minDate||d(new Date).format("YYYY-MM-DD")),maxDate:this.maxDate?d(this.maxDate):undefined,maxSpan:this.maxSpan,autoApply:this.autoApply,locale:{format:this.format,separator:this.separator,applyLabel:this.applyLabel,cancelLabel:this.cancelLabel,fromLabel:this.fromLabel,toLabel:this.toLabel,customRangeLabel:this.customRangeLabel,weekLabel:this.weekLabel,daysOfWeek:this.daysOfWeek,monthNames:this.monthNames,firstDay:this.firstDay}},((t,i)=>{this.dateChanged.emit({start:t,end:i})}))}render(){return e("input",{class:"date-range-input",type:"text",disabled:this.disabled})}get element(){return n(this)}};st.style=et;const ot=".sc-ir-icon-h{margin:0;padding:0}.icon-button.sc-ir-icon{all:unset;margin:0;padding:0}.icon-button.sc-ir-icon:hover{cursor:pointer}";const nt=class{constructor(e){t(this,e);this.iconClickHandler=i(this,"iconClickHandler",7);this.icon="ft-check"}render(){return e("button",{class:"icon-button",onClick:()=>this.iconClickHandler.emit()},e("slot",{name:"icon"}))}};nt.style=ot;const at=".sc-ir-interceptor-h{--viewport-padding:25px;position:fixed;top:0;right:0;display:flex;flex-direction:column;padding:var(--viewport-padding);gap:10px;max-width:60vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none}.toast-container.sc-ir-interceptor{background-color:white;border-radius:6px;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px 30px;display:grid;grid-template-areas:'title action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;overflow:hidden}.toast-container[data-state='open'].sc-ir-interceptor{animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards}.toast-container[data-state='closed'].sc-ir-interceptor{pointer-events:none;animation:fadeOut 150ms ease-in forwards}p.sc-ir-interceptor{margin:0;padding:0;grid-area:title;font-weight:500;color:#1c2024;font-size:15px}.x-mark-container.sc-ir-interceptor,.check-mark-container.sc-ir-interceptor{display:flex;align-items:center;justify-content:center;height:1.5rem;width:1.5rem;border-radius:50%}.x-mark-container.sc-ir-interceptor{background:red}.check-mark-container.sc-ir-interceptor{background:rgb(9, 153, 9)}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes slideIn{0%{transform:translateX(calc(100% + var(--viewport-padding)));opacity:0}100%{transform:translateX(0);opacity:1}}";const lt=class{constructor(e){t(this,e);this.toast=i(this,"toast",7);this.isShown=false;this.isLoading=false;this.isUnassignedUnit=false;this.defaultMessage={loadingMessage:"Fetching Data",errorMessage:"Something Went Wrong"};this.handledEndpoints=["/ReAllocate_Exposed_Room"]}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){y.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));y.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(t){return t.split("?")[0]}isHandledEndpoint(t){return this.handledEndpoints.includes(this.extractEndpoint(t))}handleRequest(t){E.status="pending";if(this.isHandledEndpoint(t.url)){this.isLoading=true;if(this.extractEndpoint(t.url)==="/ReAllocate_Exposed_Room"){this.defaultMessage.loadingMessage="Updating Event"}else if(this.extractEndpoint(t.url)==="/Get_Aggregated_UnAssigned_Rooms"){this.isUnassignedUnit=true}else{this.defaultMessage.loadingMessage="Fetching Data"}this.showToast()}return t}handleResponse(t){var i;this.isLoading=false;E.status="done";if((i=t.data.ExceptionMsg)===null||i===void 0?void 0:i.trim()){this.handleError(t.data.ExceptionMsg);throw new Error(t.data.ExceptionMsg)}else{this.hideToastAfterDelay(true)}return t}handleError(t){if(this.isUnassignedUnit){this.isUnassignedUnit=false}this.hideToastAfterDelay(true);this.toast.emit({type:"error",title:t,description:"",position:"top-right"});return Promise.reject(t)}showToast(){this.isShown=true}hideToastAfterDelay(t){if(this.isUnassignedUnit){this.isShown=false;this.isUnassignedUnit=false}else{const i=t?0:5e3;setTimeout((()=>{this.isShown=false}),i)}}renderMessage(){return this.defaultMessage.errorMessage}render(){return e(s,null,this.isLoading&&this.isShown&&e("div",{class:"loadingScreenContainer"},e("div",{class:"loadingContainer"},e("ir-loading-screen",null))))}};lt.style=at;const rt=".sc-ir-loading-screen-h{display:fix;height:100vh;width:100vw;z-index:1000;top:0;left:0}.loader.sc-ir-loading-screen{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.backdrop.sc-ir-loading-screen{height:100vh;width:100vw;background:rgba(0, 0, 0, 0.4);position:absolute;top:0;left:0}.loaderContainer.sc-ir-loading-screen{position:absolute;z-index:100001;padding:20px;top:50%;left:50%;transform:translate(-50%, -50%);background:white;display:flex;align-items:center;justify-content:center;gap:20px;border-radius:5px}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const ht=class{constructor(i){t(this,i);this.message=""}render(){return e(s,null,e("div",{class:"loaderContainer"},e("span",{class:"loader"})))}};ht.style=rt;const dt="button.sc-ir-toast,p.sc-ir-toast,h3.sc-ir-toast,div.sc-ir-toast{all:unset}.sc-ir-toast-h{--rd-viewport-padding:25px;--rd-success:#2b9a66;position:fixed;bottom:0;right:0;display:flex;flex-direction:column;padding:var(--rd-viewport-padding);gap:10px;max-width:100vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none;-webkit-user-select:none;user-select:none}@media (prefers-color-scheme: dark){.sc-ir-toast-h{--rd-success:#33b074}}p.sc-ir-toast{color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3}h1.sc-ir-toast,h2.sc-ir-toast,h3.sc-ir-toast,h4.sc-ir-toast,h5.sc-ir-toast,h6.sc-ir-toast{font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}[position='top-left'].sc-ir-toast-h{top:0;left:0}[position='top-right'].sc-ir-toast-h{top:0;right:0}[position='bottom-left'].sc-ir-toast-h{bottom:0;left:0}[position='bottom-right'].sc-ir-toast-h{bottom:0;right:0}.icon-container.sc-ir-toast{height:25px;width:25px;border-radius:25px;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.icon-container.sc-ir-toast>svg.sc-ir-toast{margin:0;color:white;stroke-width:5px}.success.sc-ir-toast{background-color:var(--rd-success)}.error.sc-ir-toast{background-color:red}.ToastRoot.sc-ir-toast{background-color:hsl(0, 0%, 100%);border-radius:0.5rem;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px;display:grid;grid-template-areas:'title action' 'description action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;pointer-events:none;opacity:0;border:1px solid hsl(214.3, 31.8%, 91.4%);position:relative}.ToastRoot[data-state='open'].sc-ir-toast{pointer-events:all;animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1)}.ToastRoot[data-state='closed'].sc-ir-toast{pointer-events:none;animation:hide 100ms ease-in}@-webkit-keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}@keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}.ToastTitle.sc-ir-toast{grid-area:title;font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}.ToastDescription.sc-ir-toast{grid-area:description;margin:0;margin-top:5px;color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3;overflow:hidden;text-overflow:ellipsis}.ToastAction.sc-ir-toast{grid-area:action}";const ct=class{constructor(i){t(this,i);this.position="bottom-left";this.toasts=[]}onToast(t){const i=t.detail;this.showToast(i)}showToast(t){const i={positionClass:"toast-top-right",closeButton:true,timeOut:t.duration||5e3};switch(t.type){case"success":toastr.success(t.title,"",i);break;case"error":toastr.error(t.title,"",i);break}}render(){return e(s,null)}get element(){return n(this)}};ct.style=dt;const pt=".sc-ir-tooltip-h{position:relative}.tooltip-icon.sc-ir-tooltip{margin:0 5px;padding:0}";const ut=class{constructor(i){t(this,i);this.message=undefined;this.open=undefined}toggleOpen(t){if(this.tooltipTimeout){clearTimeout(this.tooltipTimeout)}if(t){this.tooltipTimeout=setTimeout((()=>{this.open=true}),300)}else{this.open=false}}render(){return e(s,{class:"m-0 p-0"},e("span",{onMouseEnter:()=>this.toggleOpen(true),onMouseLeave:()=>this.toggleOpen(false)},e("svg",{"data-toggle":"tooltip","data-placement":"top","data-original-title":"Info popup",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",class:"tooltip-icon",viewBox:"0 0 512 512"},e("path",{fill:"#6b6f82",d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"}))),this.open&&e("div",{class:"tooltip bottom show position-absolute",role:"tooltip"},e("div",{class:"tooltip-arrow"}),e("div",{class:"tooltip-inner fit"},e("span",{innerHTML:this.message}))))}};ut.style=pt;export{w as igl_application_info,O as igl_block_dates_view,C as igl_book_property,N as igl_book_property_container,T as igl_book_property_footer,M as igl_book_property_header,P as igl_booking_overview_page,K as igl_booking_room_rate_plan,Y as igl_booking_rooms,W as igl_date_range,H as igl_pagetwo,V as igl_property_booked_by,q as ir_autocomplete,Q as ir_button,it as ir_common,st as ir_date_picker,nt as ir_icon,lt as ir_interceptor,ht as ir_loading_screen,ct as ir_toast,ut as ir_tooltip};
//# sourceMappingURL=p-f98ef3ed.entry.js.map