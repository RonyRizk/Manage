{"version":3,"names":["initialState","adultChildConstraints","adult_max_nbr","child_max_nbr","child_max_age","allowedBookingSources","currency","undefined","endingDate","formattedLegendData","is_vacation_rental","legendData","roomsInfo","startingDate","language","toBeAssignedEvents","allowed_payment_methods","pickup_service","max_nights","is_frontdesk_enabled","taxes","id","name","state","calendar_data","onChange","onCalendarDatesChange","createStore","channels","selectedChannel","mappedChannels","connected_channels","isConnectedToChannel","channel_settings","property_id","channels_data","onChannelChange","dispose","selectChannel","channel_id","find","c","toString","properties","setMappedChannel","updateChannelSettings","key","value","hotel_id","hotel_title","selectedChannelMap","channel","map","resetStore","addMapping","ir_id","fr_id","isRoomType","push","type","testConnection","hotelConnection","property","length","_a"],"sources":["src/stores/calendar-data.ts","src/stores/channel.store.ts"],"sourcesContent":["import { CalendarDataDetails } from '@/models/calendarData';\r\nimport { createStore } from '@stencil/store';\r\n\r\nconst initialState: CalendarDataDetails = {\r\n  adultChildConstraints: {\r\n    adult_max_nbr: 0,\r\n    child_max_nbr: 0,\r\n    child_max_age: 0,\r\n  },\r\n  allowedBookingSources: [],\r\n  currency: undefined,\r\n  endingDate: 0,\r\n  formattedLegendData: undefined,\r\n  is_vacation_rental: false,\r\n  legendData: [],\r\n  roomsInfo: [],\r\n  startingDate: 0,\r\n  language: '',\r\n  toBeAssignedEvents: [],\r\n  allowed_payment_methods: [],\r\n  pickup_service: undefined,\r\n  max_nights: 0,\r\n  is_frontdesk_enabled: false,\r\n  taxes: [],\r\n  id: null,\r\n  name: '',\r\n};\r\nexport const { state: calendar_data, onChange: onCalendarDatesChange } = createStore<CalendarDataDetails>(initialState);\r\n\r\nexport default calendar_data;\r\n","import { IChannel, IExposedChannel, IMap } from '@/models/calendarData';\r\nimport { createStore } from '@stencil/store';\r\nexport interface IChannelSettings {\r\n  hotel_id: string;\r\n  hotel_title: string;\r\n}\r\nexport interface IChannelStore {\r\n  channels: IExposedChannel[];\r\n  connected_channels: IChannel[];\r\n  selectedChannel: IExposedChannel | null;\r\n  mappedChannels: IMap[];\r\n  isConnectedToChannel: boolean;\r\n  channel_settings: IChannelSettings | null;\r\n  property_id: number | null;\r\n}\r\nconst initialState: IChannelStore = {\r\n  channels: [],\r\n  selectedChannel: null,\r\n  mappedChannels: [],\r\n  connected_channels: [],\r\n  isConnectedToChannel: false,\r\n  channel_settings: null,\r\n  property_id: null,\r\n};\r\nexport const { state: channels_data, onChange: onChannelChange, dispose } = createStore<IChannelStore>(initialState);\r\n\r\nexport function selectChannel(channel_id: string) {\r\n  if (channel_id === '') {\r\n    channels_data.selectedChannel = null;\r\n    return;\r\n  }\r\n  const selectedChannel = channels_data.channels.find(c => c.id.toString() === channel_id);\r\n  if (selectedChannel) {\r\n    channels_data.selectedChannel = selectedChannel;\r\n  } else {\r\n    channels_data.selectedChannel = {\r\n      id: channel_id,\r\n      name: '',\r\n      properties: [],\r\n    };\r\n  }\r\n  setMappedChannel();\r\n}\r\nexport function updateChannelSettings(key: keyof IChannelSettings, value: string) {\r\n  if (!channels_data.channel_settings) {\r\n    channels_data.channel_settings = {\r\n      hotel_id: '',\r\n      hotel_title: '',\r\n    };\r\n  }\r\n  channels_data.channel_settings[key] = value;\r\n}\r\nexport function setMappedChannel() {\r\n  let selectedChannelMap = channels_data.connected_channels.find(c => c.channel.id.toString() === channels_data.selectedChannel.id.toString());\r\n  if (!selectedChannelMap) {\r\n    channels_data.mappedChannels = [];\r\n    return;\r\n  }\r\n  channels_data.mappedChannels = [...selectedChannelMap.map];\r\n}\r\nexport function resetStore() {\r\n  channels_data.selectedChannel = null;\r\n  channels_data.mappedChannels = [];\r\n  channels_data.isConnectedToChannel = false;\r\n  channels_data.channel_settings = null;\r\n}\r\nexport function addMapping(ir_id: string, fr_id: string, isRoomType: boolean) {\r\n  channels_data.mappedChannels.push({\r\n    channel_id: fr_id,\r\n    ir_id,\r\n    type: isRoomType ? 'room_type' : 'rate_plan',\r\n  });\r\n}\r\nexport function testConnection() {\r\n  // const hotelConnection = channels_data.selectedChannel.properties.find(property => property.id === 'd09e6374-1ebf-45e0-a130-64c8c9930987');\r\n  const hotelConnection = channels_data.selectedChannel.properties.find(property => property.id === channels_data.channel_settings.hotel_id);\r\n  if (!hotelConnection) {\r\n    return false;\r\n  }\r\n  channels_data.selectedChannel.property = hotelConnection;\r\n  if (channels_data.mappedChannels.length === 0) {\r\n    channels_data.mappedChannels.push({ ir_id: (channels_data.property_id ?? -1).toString(), channel_id: channels_data.channel_settings.hotel_id, type: 'property' });\r\n  }\r\n  channels_data.isConnectedToChannel = true;\r\n  return true;\r\n}\r\n\r\nexport function saveChannel() {\r\n  console.log(channels_data.channel_settings, channels_data.mappedChannels, channels_data.selectedChannel);\r\n}\r\nexport default channels_data;\r\n"],"mappings":"oCAGA,MAAMA,EAAoC,CACxCC,sBAAuB,CACrBC,cAAe,EACfC,cAAe,EACfC,cAAe,GAEjBC,sBAAuB,GACvBC,SAAUC,UACVC,WAAY,EACZC,oBAAqBF,UACrBG,mBAAoB,MACpBC,WAAY,GACZC,UAAW,GACXC,aAAc,EACdC,SAAU,GACVC,mBAAoB,GACpBC,wBAAyB,GACzBC,eAAgBV,UAChBW,WAAY,EACZC,qBAAsB,MACtBC,MAAO,GACPC,GAAI,KACJC,KAAM,I,MAEOC,MAAOC,EAAeC,SAAUC,GAA0BC,EAAiC3B,GCZ1G,MAAMA,EAA8B,CAClC4B,SAAU,GACVC,gBAAiB,KACjBC,eAAgB,GAChBC,mBAAoB,GACpBC,qBAAsB,MACtBC,iBAAkB,KAClBC,YAAa,M,MAEAX,MAAOY,EAAeV,SAAUW,EAAeC,QAAEA,GAAYV,EAA2B3B,G,SAEvFsC,EAAcC,GAC5B,GAAIA,IAAe,GAAI,CACrBJ,EAAcN,gBAAkB,KAChC,M,CAEF,MAAMA,EAAkBM,EAAcP,SAASY,MAAKC,GAAKA,EAAEpB,GAAGqB,aAAeH,IAC7E,GAAIV,EAAiB,CACnBM,EAAcN,gBAAkBA,C,KAC3B,CACLM,EAAcN,gBAAkB,CAC9BR,GAAIkB,EACJjB,KAAM,GACNqB,WAAY,G,CAGhBC,GACF,C,SACgBC,EAAsBC,EAA6BC,GACjE,IAAKZ,EAAcF,iBAAkB,CACnCE,EAAcF,iBAAmB,CAC/Be,SAAU,GACVC,YAAa,G,CAGjBd,EAAcF,iBAAiBa,GAAOC,CACxC,C,SACgBH,IACd,IAAIM,EAAqBf,EAAcJ,mBAAmBS,MAAKC,GAAKA,EAAEU,QAAQ9B,GAAGqB,aAAeP,EAAcN,gBAAgBR,GAAGqB,aACjI,IAAKQ,EAAoB,CACvBf,EAAcL,eAAiB,GAC/B,M,CAEFK,EAAcL,eAAiB,IAAIoB,EAAmBE,IACxD,C,SACgBC,IACdlB,EAAcN,gBAAkB,KAChCM,EAAcL,eAAiB,GAC/BK,EAAcH,qBAAuB,MACrCG,EAAcF,iBAAmB,IACnC,C,SACgBqB,EAAWC,EAAeC,EAAeC,GACvDtB,EAAcL,eAAe4B,KAAK,CAChCnB,WAAYiB,EACZD,QACAI,KAAMF,EAAa,YAAc,aAErC,C,SACgBG,I,MAEd,MAAMC,EAAkB1B,EAAcN,gBAAgBc,WAAWH,MAAKsB,GAAYA,EAASzC,KAAOc,EAAcF,iBAAiBe,WACjI,IAAKa,EAAiB,CACpB,OAAO,K,CAET1B,EAAcN,gBAAgBiC,SAAWD,EACzC,GAAI1B,EAAcL,eAAeiC,SAAW,EAAG,CAC7C5B,EAAcL,eAAe4B,KAAK,CAAEH,QAAQS,EAAA7B,EAAcD,eAAW,MAAA8B,SAAA,EAAAA,GAAK,GAAGtB,WAAYH,WAAYJ,EAAcF,iBAAiBe,SAAUW,KAAM,Y,CAEtJxB,EAAcH,qBAAuB,KACrC,OAAO,IACT,Q"}