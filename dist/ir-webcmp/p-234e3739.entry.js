import{r as t,h as s,H as e,c as i,g as a}from"./p-05195efb.js";import{s as n,a as l}from"./p-b140279c.js";const r=".sc-ir-channel-general-h{display:block}";const o=class{constructor(s){t(this,s)}render(){return s(e,null,s("ir-select",{selectContainerStyle:"mb-1",onSelectChange:t=>n(t.detail),class:"m-0 mb-1",LabelAvailable:false,data:l.channels.map((t=>({value:t.id,text:t.name})))}))}};o.style=r;const c=".sc-ir-channel-header-h{display:block;position:relative;padding:0;margin:0;border-bottom:1px solid #e4e5ec}ul.sc-ir-channel-header{display:flex;align-items:center;gap:2rem;padding:0}.tab.sc-ir-channel-header{font-size:0.95rem;font-weight:600;cursor:pointer;position:relative;margin:0;padding:0;transition:color 0.3s ease;user-select:none}.tab[data-disabled].sc-ir-channel-header{cursor:auto}.tab.sc-ir-channel-header:hover{opacity:80%}.tab[data-state='selected'].sc-ir-channel-header,.tab[data-state='selected'].sc-ir-channel-header:hover{color:var(--blue);opacity:100%}.active-indicator.sc-ir-channel-header{padding:0;bottom:0px;position:absolute;height:3px;border-radius:4px;transition:transform 0.3s ease, width 0.3s ease;background:var(--blue)}";const h=class{constructor(s){t(this,s);this.tabChanged=i(this,"tabChanged",7);this.headerTitles=[];this.selectedIndex=0}componentDidLoad(){this.updateActiveIndicator()}disconnectedCallback(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}handleTabSelection(t){this.selectedIndex=t;this.updateActiveIndicator();this.tabChanged.emit(this.headerTitles[this.selectedIndex].id)}updateActiveIndicator(){if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}requestAnimationFrame((()=>{const t=this.el.querySelector(`li.tab[data-state="selected"]`);if(t){const{left:s,width:e}=t.getBoundingClientRect();const i=this.el.getBoundingClientRect().left;const a=s-i;this.activeIndicator.style.width=`${e}px`;this.activeIndicator.style.transform=`translateX(${a}px)`}}))}render(){return s(e,null,s("ul",null,this.headerTitles.map(((t,e)=>s("li",{class:`tab ${t.disabled?"text-light":""}`,key:t.id,onClick:()=>{if(!t.disabled)this.handleTabSelection(e)},"data-disabled":t.disabled,"data-state":this.selectedIndex===e?"selected":""},t.name)))),s("span",{class:"active-indicator",ref:t=>this.activeIndicator=t}))}get el(){return a(this)}};h.style=c;class d{checkMappingExists(t){return l.mappedChannel.find((s=>s.channel_id===t))}}const p=".sc-ir-channel-mapping-h{display:block;box-sizing:border-box}.map-row.sc-ir-channel-mapping{display:flex;align-items:center;justify-content:space-between}.map-row.sc-ir-channel-mapping span.sc-ir-channel-mapping{width:49%}.submap-text.sc-ir-channel-mapping{padding-left:10px}.text-blue.sc-ir-channel-mapping{color:var(--blue)}.text-red.sc-ir-channel-mapping{color:var(--red)}";const u=class{constructor(s){t(this,s);this.mappingService=new d;this.activeMapField=""}renderMappingStatus(t){const e=this.mappingService.checkMappingExists(t);if(e){return s("span",{class:"px-2"},"exist")}return s("span",{class:"px-2"},this.activeMapField===t?s("ir-combobox",null):s("span",{class:"cursor-pointer text-red",onClick:()=>this.activeMapField=t},"Not mapped"))}render(){return s(e,null,s("ul",{class:"m-0 p-0"},s("li",{class:"map-row my-2"},s("span",{class:"font-weight-bold"},l.selectedChannel.name),s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},s("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})),s("span",{class:"font-weight-bold px-2"},"Channel manager")),l.selectedChannel.property.room_types.map((t=>s("li",{key:t.id,class:"mb-1"},s("div",{class:"map-row"},s("span",null,t.name),s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},s("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})),this.renderMappingStatus(t.id)),s("ul",{class:"m-0 p-0"},t.rate_plans.map((t=>s("li",{class:"map-row",key:t.id},s("span",{class:"submap-text"},t.name),s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"12.25",viewBox:"0 0 448 512"},s("path",{fill:"currentColor",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})),this.renderMappingStatus(t.id))))))))))}};u.style=p;const m=".sc-ir-combobox-h{display:block;position:relative;padding:0;margin:0}ul.sc-ir-combobox{position:absolute;background:#ffffff;padding:0 0.75rem;margin:0;margin-top:2px;width:100%;max-height:80px;border-radius:0.21rem;border:1px solid #cacfe7}";const b=class{constructor(s){t(this,s);this.comboboxValue=i(this,"comboboxValue",7);this.inputCleared=i(this,"inputCleared",7);this.toast=i(this,"toast",7);this.data=[];this.duration=300;this.selectedIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.isItemSelected=undefined;this.inputValue=""}handleKeyDown(t){var s;const e=this.data.length;const i=this.getHeightOfPElement();if(e>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+e)%e;this.adjustScrollPosition(i);break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%e;this.adjustScrollPosition(i);break;case"Enter":case" ":case"ArrowRight":t.preventDefault();this.selectItem(this.selectedIndex);break;case"Escape":(s=this.inputRef)===null||s===void 0?void 0:s.blur();this.isComboBoxVisible=false;break}}}getHeightOfPElement(){const t=this.el.querySelector(".combobox");if(t){const s=t.querySelector("p");return s?s.offsetHeight:0}return 0}adjustScrollPosition(t,s=250){const e=this.el.querySelector(".combobox");if(e){const i=2;const a=t+i;const n=a*this.selectedIndex;let l=n-s/2+t/2;l=Math.max(0,Math.min(l,e.scrollHeight-s));e.scrollTo({top:l,behavior:"auto"})}}selectItem(t){if(this.data[t]){this.isItemSelected=true;this.inputValue="";this.resetCombobox()}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}handleFocus(){this.isComboBoxVisible=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(t=true){var s;if(t){(s=this.inputRef)===null||s===void 0?void 0:s.blur()}this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false}async fetchData(){try{this.isLoading=true}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{clearTimeout(this.debounceTimer);this.resetCombobox(false)}}handleDocumentClick(t){const s=t.target;if(!this.el.contains(s)){this.isComboBoxVisible=false}}handleBlur(){setTimeout((()=>{if(!this.isItemSelected){this.comboboxValue.emit({key:"blur",data:this.inputValue});this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}),200)}isDropdownItem(t){return t&&t.closest(".combobox")}disconnectedCallback(){var t,s,e,i;clearTimeout(this.debounceTimer);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("click",this.selectItem);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("keydown",this.handleKeyDown);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(t,s){var e;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(s);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(e=this.inputRef)===null||e===void 0?void 0:e.blur();t.preventDefault()}else{return}}render(){return s("fieldset",{class:"m-0 p-0"},s("input",{type:"text",class:"form-control"}),s("ul",{class:""},s("p",null,"Room 1")))}get el(){return a(this)}};b.style=m;export{o as ir_channel_general,h as ir_channel_header,u as ir_channel_mapping,b as ir_combobox};
//# sourceMappingURL=p-234e3739.entry.js.map