import{r as t,c as s,h as i,g as e}from"./p-05195efb.js";const o=".sc-ir-combobox-h{display:block;position:relative;padding:0;margin:0}ul.sc-ir-combobox{position:absolute;background:#ffffff;padding:0 0.75rem;margin:0;margin-top:2px;width:100%;max-height:80px;border-radius:0.21rem;border:1px solid #cacfe7}";const h=class{constructor(i){t(this,i);this.comboboxValue=s(this,"comboboxValue",7);this.inputCleared=s(this,"inputCleared",7);this.toast=s(this,"toast",7);this.data=[];this.duration=300;this.selectedIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.isItemSelected=undefined;this.inputValue=""}handleKeyDown(t){var s;const i=this.data.length;const e=this.getHeightOfPElement();if(i>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+i)%i;this.adjustScrollPosition(e);break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%i;this.adjustScrollPosition(e);break;case"Enter":case" ":case"ArrowRight":t.preventDefault();this.selectItem(this.selectedIndex);break;case"Escape":(s=this.inputRef)===null||s===void 0?void 0:s.blur();this.isComboBoxVisible=false;break}}}getHeightOfPElement(){const t=this.el.querySelector(".combobox");if(t){const s=t.querySelector("p");return s?s.offsetHeight:0}return 0}adjustScrollPosition(t,s=250){const i=this.el.querySelector(".combobox");if(i){const e=2;const o=t+e;const h=o*this.selectedIndex;let r=h-s/2+t/2;r=Math.max(0,Math.min(r,i.scrollHeight-s));i.scrollTo({top:r,behavior:"auto"})}}selectItem(t){if(this.data[t]){this.isItemSelected=true;this.inputValue="";this.resetCombobox()}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}handleFocus(){this.isComboBoxVisible=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(t=true){var s;if(t){(s=this.inputRef)===null||s===void 0?void 0:s.blur()}this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false}async fetchData(){try{this.isLoading=true}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{clearTimeout(this.debounceTimer);this.resetCombobox(false)}}handleDocumentClick(t){const s=t.target;if(!this.el.contains(s)){this.isComboBoxVisible=false}}handleBlur(){setTimeout((()=>{if(!this.isItemSelected){this.comboboxValue.emit({key:"blur",data:this.inputValue});this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}),200)}isDropdownItem(t){return t&&t.closest(".combobox")}disconnectedCallback(){var t,s,i,e;clearTimeout(this.debounceTimer);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("click",this.selectItem);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("keydown",this.handleKeyDown);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(t,s){var i;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(s);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(i=this.inputRef)===null||i===void 0?void 0:i.blur();t.preventDefault()}else{return}}render(){return i("fieldset",{class:"m-0 p-0"},i("input",{type:"text",class:"form-control"}),i("ul",{class:""},i("p",null,"Room 1")))}get el(){return e(this)}};h.style=o;export{h as ir_combobox};
//# sourceMappingURL=p-2f16c5c6.entry.js.map