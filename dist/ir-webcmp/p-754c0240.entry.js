import{g as t,f as e,r as i,c as s,h as n,H as o,F as r,a}from"./p-2900b889.js";import{v as l}from"./p-d4c9256e.js";
//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var h;function c(){return h.apply(null,arguments)}function d(t){h=t}function u(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function f(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function p(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function g(t){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(t).length===0}else{var e;for(e in t){if(p(t,e)){return false}}return true}}function m(t){return t===void 0}function b(t){return typeof t==="number"||Object.prototype.toString.call(t)==="[object Number]"}function w(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function y(t,e){var i=[],s,n=t.length;for(s=0;s<n;++s){i.push(e(t[s],s))}return i}function v(t,e){for(var i in e){if(p(e,i)){t[i]=e[i]}}if(p(e,"toString")){t.toString=e.toString}if(p(e,"valueOf")){t.valueOf=e.valueOf}return t}function k(t,e,i,s){return is(t,e,i,s,true).utc()}function D(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidEra:null,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],era:null,meridiem:null,rfc2822:false,weekdayMismatch:false}}function x(t){if(t._pf==null){t._pf=D()}return t._pf}var _;if(Array.prototype.some){_=Array.prototype.some}else{_=function(t){var e=Object(this),i=e.length>>>0,s;for(s=0;s<i;s++){if(s in e&&t.call(this,e[s],s,e)){return true}}return false}}function E(t){if(t._isValid==null){var e=x(t),i=_.call(e.parsedDateParts,(function(t){return t!=null})),s=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict){s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(t)){t._isValid=s}else{return s}}return t._isValid}function O(t){var e=k(NaN);if(t!=null){v(x(e),t)}else{x(e).userInvalidated=true}return e}var T=c.momentProperties=[],C=false;function S(t,e){var i,s,n,o=T.length;if(!m(e._isAMomentObject)){t._isAMomentObject=e._isAMomentObject}if(!m(e._i)){t._i=e._i}if(!m(e._f)){t._f=e._f}if(!m(e._l)){t._l=e._l}if(!m(e._strict)){t._strict=e._strict}if(!m(e._tzm)){t._tzm=e._tzm}if(!m(e._isUTC)){t._isUTC=e._isUTC}if(!m(e._offset)){t._offset=e._offset}if(!m(e._pf)){t._pf=x(e)}if(!m(e._locale)){t._locale=e._locale}if(o>0){for(i=0;i<o;i++){s=T[i];n=e[s];if(!m(n)){t[s]=n}}}return t}function N(t){S(this,t);this._d=new Date(t._d!=null?t._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(C===false){C=true;c.updateOffset(this);C=false}}function M(t){return t instanceof N||t!=null&&t._isAMomentObject!=null}function I(t){if(c.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+t)}}function A(t,e){var i=true;return v((function(){if(c.deprecationHandler!=null){c.deprecationHandler(null,t)}if(i){var s=[],n,o,r,a=arguments.length;for(o=0;o<a;o++){n="";if(typeof arguments[o]==="object"){n+="\n["+o+"] ";for(r in arguments[0]){if(p(arguments[0],r)){n+=r+": "+arguments[0][r]+", "}}n=n.slice(0,-2)}else{n=arguments[o]}s.push(n)}I(t+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack);i=false}return e.apply(this,arguments)}),e)}var R={};function Y(t,e){if(c.deprecationHandler!=null){c.deprecationHandler(t,e)}if(!R[t]){I(e);R[t]=true}}c.suppressDeprecationWarnings=false;c.deprecationHandler=null;function B(t){return typeof Function!=="undefined"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function L(t){var e,i;for(i in t){if(p(t,i)){e=t[i];if(B(e)){this[i]=e}else{this["_"+i]=e}}}this._config=t;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function j(t,e){var i=v({},t),s;for(s in e){if(p(e,s)){if(f(t[s])&&f(e[s])){i[s]={};v(i[s],t[s]);v(i[s],e[s])}else if(e[s]!=null){i[s]=e[s]}else{delete i[s]}}}for(s in t){if(p(t,s)&&!p(e,s)&&f(t[s])){i[s]=v({},i[s])}}return i}function P(t){if(t!=null){this.set(t)}}var H;if(Object.keys){H=Object.keys}else{H=function(t){var e,i=[];for(e in t){if(p(t,e)){i.push(e)}}return i}}var U={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function G(t,e,i){var s=this._calendar[t]||this._calendar["sameElse"];return B(s)?s.call(e,i):s}function F(t,e,i){var s=""+Math.abs(t),n=e-s.length,o=t>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+s}var z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,V=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,K={},W={};function J(t,e,i,s){var n=s;if(typeof s==="string"){n=function(){return this[s]()}}if(t){W[t]=n}if(e){W[e[0]]=function(){return F(n.apply(this,arguments),e[1],e[2])}}if(i){W[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)}}}function q(t){if(t.match(/\[[\s\S]/)){return t.replace(/^\[|\]$/g,"")}return t.replace(/\\/g,"")}function Z(t){var e=t.match(z),i,s;for(i=0,s=e.length;i<s;i++){if(W[e[i]]){e[i]=W[e[i]]}else{e[i]=q(e[i])}}return function(i){var n="",o;for(o=0;o<s;o++){n+=B(e[o])?e[o].call(i,t):e[o]}return n}}function X(t,e){if(!t.isValid()){return t.localeData().invalidDate()}e=Q(e,t.localeData());K[e]=K[e]||Z(e);return K[e](t)}function Q(t,e){var i=5;function s(t){return e.longDateFormat(t)||t}V.lastIndex=0;while(i>=0&&V.test(t)){t=t.replace(V,s);V.lastIndex=0;i-=1}return t}var tt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function et(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];if(e||!i){return e}this._longDateFormat[t]=i.match(z).map((function(t){if(t==="MMMM"||t==="MM"||t==="DD"||t==="dddd"){return t.slice(1)}return t})).join("");return this._longDateFormat[t]}var it="Invalid date";function st(){return this._invalidDate}var nt="%d",ot=/\d{1,2}/;function rt(t){return this._ordinal.replace("%d",t)}var at={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function lt(t,e,i,s){var n=this._relativeTime[i];return B(n)?n(t,e,i,s):n.replace(/%d/i,t)}function ht(t,e){var i=this._relativeTime[t>0?"future":"past"];return B(i)?i(e):i.replace(/%s/i,e)}var ct={};function dt(t,e){var i=t.toLowerCase();ct[i]=ct[i+"s"]=ct[e]=t}function ut(t){return typeof t==="string"?ct[t]||ct[t.toLowerCase()]:undefined}function ft(t){var e={},i,s;for(s in t){if(p(t,s)){i=ut(s);if(i){e[i]=t[s]}}}return e}var pt={};function gt(t,e){pt[t]=e}function mt(t){var e=[],i;for(i in t){if(p(t,i)){e.push({unit:i,priority:pt[i]})}}e.sort((function(t,e){return t.priority-e.priority}));return e}function bt(t){return t%4===0&&t%100!==0||t%400===0}function wt(t){if(t<0){return Math.ceil(t)||0}else{return Math.floor(t)}}function yt(t){var e=+t,i=0;if(e!==0&&isFinite(e)){i=wt(e)}return i}function vt(t,e){return function(i){if(i!=null){Dt(this,t,i);c.updateOffset(this,e);return this}else{return kt(this,t)}}}function kt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Dt(t,e,i){if(t.isValid()&&!isNaN(i)){if(e==="FullYear"&&bt(t.year())&&t.month()===1&&t.date()===29){i=yt(i);t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),le(i,t.month()))}else{t._d["set"+(t._isUTC?"UTC":"")+e](i)}}}function xt(t){t=ut(t);if(B(this[t])){return this[t]()}return this}function _t(t,e){if(typeof t==="object"){t=ft(t);var i=mt(t),s,n=i.length;for(s=0;s<n;s++){this[i[s].unit](t[i[s].unit])}}else{t=ut(t);if(B(this[t])){return this[t](e)}}return this}var Et=/\d/,Ot=/\d\d/,Tt=/\d{3}/,Ct=/\d{4}/,St=/[+-]?\d{6}/,Nt=/\d\d?/,Mt=/\d\d\d\d?/,It=/\d\d\d\d\d\d?/,At=/\d{1,3}/,Rt=/\d{1,4}/,Yt=/[+-]?\d{1,6}/,Bt=/\d+/,Lt=/[+-]?\d+/,jt=/Z|[+-]\d\d:?\d\d/gi,Pt=/Z|[+-]\d\d(?::?\d\d)?/gi,$t=/[+-]?\d+(\.\d{1,3})?/,Ht=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ut;Ut={};function Gt(t,e,i){Ut[t]=B(e)?e:function(t,s){return t&&i?i:e}}function Ft(t,e){if(!p(Ut,t)){return new RegExp(zt(t))}return Ut[t](e._strict,e._locale)}function zt(t){return Vt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,i,s,n){return e||i||s||n})))}function Vt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Kt={};function Wt(t,e){var i,s=e,n;if(typeof t==="string"){t=[t]}if(b(e)){s=function(t,i){i[e]=yt(t)}}n=t.length;for(i=0;i<n;i++){Kt[t[i]]=s}}function Jt(t,e){Wt(t,(function(t,i,s,n){s._w=s._w||{};e(t,s._w,s,n)}))}function qt(t,e,i){if(e!=null&&p(Kt,t)){Kt[t](e,i._a,i,t)}}var Zt=0,Xt=1,Qt=2,te=3,ee=4,ie=5,se=6,ne=7,oe=8;function re(t,e){return(t%e+e)%e}var ae;if(Array.prototype.indexOf){ae=Array.prototype.indexOf}else{ae=function(t){var e;for(e=0;e<this.length;++e){if(this[e]===t){return e}}return-1}}function le(t,e){if(isNaN(t)||isNaN(e)){return NaN}var i=re(e,12);t+=(e-i)/12;return i===1?bt(t)?29:28:31-i%7%2}J("M",["MM",2],"Mo",(function(){return this.month()+1}));J("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)}));J("MMMM",0,0,(function(t){return this.localeData().months(this,t)}));dt("month","M");gt("month",8);Gt("M",Nt);Gt("MM",Nt,Ot);Gt("MMM",(function(t,e){return e.monthsShortRegex(t)}));Gt("MMMM",(function(t,e){return e.monthsRegex(t)}));Wt(["M","MM"],(function(t,e){e[Xt]=yt(t)-1}));Wt(["MMM","MMMM"],(function(t,e,i,s){var n=i._locale.monthsParse(t,s,i._strict);if(n!=null){e[Xt]=n}else{x(i).invalidMonth=t}}));var he="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),de=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ue=Ht,fe=Ht;function pe(t,e){if(!t){return u(this._months)?this._months:this._months["standalone"]}return u(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||de).test(e)?"format":"standalone"][t.month()]}function ge(t,e){if(!t){return u(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return u(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[de.test(e)?"format":"standalone"][t.month()]}function me(t,e,i){var s,n,o,r=t.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(s=0;s<12;++s){o=k([2e3,s]);this._shortMonthsParse[s]=this.monthsShort(o,"").toLocaleLowerCase();this._longMonthsParse[s]=this.months(o,"").toLocaleLowerCase()}}if(i){if(e==="MMM"){n=ae.call(this._shortMonthsParse,r);return n!==-1?n:null}else{n=ae.call(this._longMonthsParse,r);return n!==-1?n:null}}else{if(e==="MMM"){n=ae.call(this._shortMonthsParse,r);if(n!==-1){return n}n=ae.call(this._longMonthsParse,r);return n!==-1?n:null}else{n=ae.call(this._longMonthsParse,r);if(n!==-1){return n}n=ae.call(this._shortMonthsParse,r);return n!==-1?n:null}}}function be(t,e,i){var s,n,o;if(this._monthsParseExact){return me.call(this,t,e,i)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(s=0;s<12;s++){n=k([2e3,s]);if(i&&!this._longMonthsParse[s]){this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i");this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")}if(!i&&!this._monthsParse[s]){o="^"+this.months(n,"")+"|^"+this.monthsShort(n,"");this._monthsParse[s]=new RegExp(o.replace(".",""),"i")}if(i&&e==="MMMM"&&this._longMonthsParse[s].test(t)){return s}else if(i&&e==="MMM"&&this._shortMonthsParse[s].test(t)){return s}else if(!i&&this._monthsParse[s].test(t)){return s}}}function we(t,e){var i;if(!t.isValid()){return t}if(typeof e==="string"){if(/^\d+$/.test(e)){e=yt(e)}else{e=t.localeData().monthsParse(e);if(!b(e)){return t}}}i=Math.min(t.date(),le(t.year(),e));t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i);return t}function ye(t){if(t!=null){we(this,t);c.updateOffset(this,true);return this}else{return kt(this,"Month")}}function ve(){return le(this.year(),this.month())}function ke(t){if(this._monthsParseExact){if(!p(this,"_monthsRegex")){xe.call(this)}if(t){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!p(this,"_monthsShortRegex")){this._monthsShortRegex=ue}return this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}}function De(t){if(this._monthsParseExact){if(!p(this,"_monthsRegex")){xe.call(this)}if(t){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!p(this,"_monthsRegex")){this._monthsRegex=fe}return this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}}function xe(){function t(t,e){return e.length-t.length}var e=[],i=[],s=[],n,o;for(n=0;n<12;n++){o=k([2e3,n]);e.push(this.monthsShort(o,""));i.push(this.months(o,""));s.push(this.months(o,""));s.push(this.monthsShort(o,""))}e.sort(t);i.sort(t);s.sort(t);for(n=0;n<12;n++){e[n]=Vt(e[n]);i[n]=Vt(i[n])}for(n=0;n<24;n++){s[n]=Vt(s[n])}this._monthsRegex=new RegExp("^("+s.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}J("Y",0,0,(function(){var t=this.year();return t<=9999?F(t,4):"+"+t}));J(0,["YY",2],0,(function(){return this.year()%100}));J(0,["YYYY",4],0,"year");J(0,["YYYYY",5],0,"year");J(0,["YYYYYY",6,true],0,"year");dt("year","y");gt("year",1);Gt("Y",Lt);Gt("YY",Nt,Ot);Gt("YYYY",Rt,Ct);Gt("YYYYY",Yt,St);Gt("YYYYYY",Yt,St);Wt(["YYYYY","YYYYYY"],Zt);Wt("YYYY",(function(t,e){e[Zt]=t.length===2?c.parseTwoDigitYear(t):yt(t)}));Wt("YY",(function(t,e){e[Zt]=c.parseTwoDigitYear(t)}));Wt("Y",(function(t,e){e[Zt]=parseInt(t,10)}));function _e(t){return bt(t)?366:365}c.parseTwoDigitYear=function(t){return yt(t)+(yt(t)>68?1900:2e3)};var Ee=vt("FullYear",true);function Oe(){return bt(this.year())}function Te(t,e,i,s,n,o,r){var a;if(t<100&&t>=0){a=new Date(t+400,e,i,s,n,o,r);if(isFinite(a.getFullYear())){a.setFullYear(t)}}else{a=new Date(t,e,i,s,n,o,r)}return a}function Ce(t){var e,i;if(t<100&&t>=0){i=Array.prototype.slice.call(arguments);i[0]=t+400;e=new Date(Date.UTC.apply(null,i));if(isFinite(e.getUTCFullYear())){e.setUTCFullYear(t)}}else{e=new Date(Date.UTC.apply(null,arguments))}return e}function Se(t,e,i){var s=7+e-i,n=(7+Ce(t,0,s).getUTCDay()-e)%7;return-n+s-1}function Ne(t,e,i,s,n){var o=(7+i-s)%7,r=Se(t,s,n),a=1+7*(e-1)+o+r,l,h;if(a<=0){l=t-1;h=_e(l)+a}else if(a>_e(t)){l=t+1;h=a-_e(t)}else{l=t;h=a}return{year:l,dayOfYear:h}}function Me(t,e,i){var s=Se(t.year(),e,i),n=Math.floor((t.dayOfYear()-s-1)/7)+1,o,r;if(n<1){r=t.year()-1;o=n+Ie(r,e,i)}else if(n>Ie(t.year(),e,i)){o=n-Ie(t.year(),e,i);r=t.year()+1}else{r=t.year();o=n}return{week:o,year:r}}function Ie(t,e,i){var s=Se(t,e,i),n=Se(t+1,e,i);return(_e(t)-s+n)/7}J("w",["ww",2],"wo","week");J("W",["WW",2],"Wo","isoWeek");dt("week","w");dt("isoWeek","W");gt("week",5);gt("isoWeek",5);Gt("w",Nt);Gt("ww",Nt,Ot);Gt("W",Nt);Gt("WW",Nt,Ot);Jt(["w","ww","W","WW"],(function(t,e,i,s){e[s.substr(0,1)]=yt(t)}));function Ae(t){return Me(t,this._week.dow,this._week.doy).week}var Re={dow:0,doy:6};function Ye(){return this._week.dow}function Be(){return this._week.doy}function Le(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function je(t){var e=Me(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}J("d",0,"do","day");J("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)}));J("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)}));J("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)}));J("e",0,0,"weekday");J("E",0,0,"isoWeekday");dt("day","d");dt("weekday","e");dt("isoWeekday","E");gt("day",11);gt("weekday",11);gt("isoWeekday",11);Gt("d",Nt);Gt("e",Nt);Gt("E",Nt);Gt("dd",(function(t,e){return e.weekdaysMinRegex(t)}));Gt("ddd",(function(t,e){return e.weekdaysShortRegex(t)}));Gt("dddd",(function(t,e){return e.weekdaysRegex(t)}));Jt(["dd","ddd","dddd"],(function(t,e,i,s){var n=i._locale.weekdaysParse(t,s,i._strict);if(n!=null){e.d=n}else{x(i).invalidWeekday=t}}));Jt(["d","e","E"],(function(t,e,i,s){e[s]=yt(t)}));function Pe(t,e){if(typeof t!=="string"){return t}if(!isNaN(t)){return parseInt(t,10)}t=e.weekdaysParse(t);if(typeof t==="number"){return t}return null}function $e(t,e){if(typeof t==="string"){return e.weekdaysParse(t)%7||7}return isNaN(t)?null:t}function He(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Ue="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ge="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Fe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ze=Ht,Ve=Ht,Ke=Ht;function We(t,e){var i=u(this._weekdays)?this._weekdays:this._weekdays[t&&t!==true&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===true?He(i,this._week.dow):t?i[t.day()]:i}function Je(t){return t===true?He(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function qe(t){return t===true?He(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ze(t,e,i){var s,n,o,r=t.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(s=0;s<7;++s){o=k([2e3,1]).day(s);this._minWeekdaysParse[s]=this.weekdaysMin(o,"").toLocaleLowerCase();this._shortWeekdaysParse[s]=this.weekdaysShort(o,"").toLocaleLowerCase();this._weekdaysParse[s]=this.weekdays(o,"").toLocaleLowerCase()}}if(i){if(e==="dddd"){n=ae.call(this._weekdaysParse,r);return n!==-1?n:null}else if(e==="ddd"){n=ae.call(this._shortWeekdaysParse,r);return n!==-1?n:null}else{n=ae.call(this._minWeekdaysParse,r);return n!==-1?n:null}}else{if(e==="dddd"){n=ae.call(this._weekdaysParse,r);if(n!==-1){return n}n=ae.call(this._shortWeekdaysParse,r);if(n!==-1){return n}n=ae.call(this._minWeekdaysParse,r);return n!==-1?n:null}else if(e==="ddd"){n=ae.call(this._shortWeekdaysParse,r);if(n!==-1){return n}n=ae.call(this._weekdaysParse,r);if(n!==-1){return n}n=ae.call(this._minWeekdaysParse,r);return n!==-1?n:null}else{n=ae.call(this._minWeekdaysParse,r);if(n!==-1){return n}n=ae.call(this._weekdaysParse,r);if(n!==-1){return n}n=ae.call(this._shortWeekdaysParse,r);return n!==-1?n:null}}}function Xe(t,e,i){var s,n,o;if(this._weekdaysParseExact){return Ze.call(this,t,e,i)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(s=0;s<7;s++){n=k([2e3,1]).day(s);if(i&&!this._fullWeekdaysParse[s]){this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i");this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i");this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")}if(!this._weekdaysParse[s]){o="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,"");this._weekdaysParse[s]=new RegExp(o.replace(".",""),"i")}if(i&&e==="dddd"&&this._fullWeekdaysParse[s].test(t)){return s}else if(i&&e==="ddd"&&this._shortWeekdaysParse[s].test(t)){return s}else if(i&&e==="dd"&&this._minWeekdaysParse[s].test(t)){return s}else if(!i&&this._weekdaysParse[s].test(t)){return s}}}function Qe(t){if(!this.isValid()){return t!=null?this:NaN}var e=this._isUTC?this._d.getUTCDay():this._d.getDay();if(t!=null){t=Pe(t,this.localeData());return this.add(t-e,"d")}else{return e}}function ti(t){if(!this.isValid()){return t!=null?this:NaN}var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function ei(t){if(!this.isValid()){return t!=null?this:NaN}if(t!=null){var e=$e(t,this.localeData());return this.day(this.day()%7?e:e-7)}else{return this.day()||7}}function ii(t){if(this._weekdaysParseExact){if(!p(this,"_weekdaysRegex")){oi.call(this)}if(t){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!p(this,"_weekdaysRegex")){this._weekdaysRegex=ze}return this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex}}function si(t){if(this._weekdaysParseExact){if(!p(this,"_weekdaysRegex")){oi.call(this)}if(t){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!p(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Ve}return this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}function ni(t){if(this._weekdaysParseExact){if(!p(this,"_weekdaysRegex")){oi.call(this)}if(t){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!p(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Ke}return this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function oi(){function t(t,e){return e.length-t.length}var e=[],i=[],s=[],n=[],o,r,a,l,h;for(o=0;o<7;o++){r=k([2e3,1]).day(o);a=Vt(this.weekdaysMin(r,""));l=Vt(this.weekdaysShort(r,""));h=Vt(this.weekdays(r,""));e.push(a);i.push(l);s.push(h);n.push(a);n.push(l);n.push(h)}e.sort(t);i.sort(t);s.sort(t);n.sort(t);this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function ri(){return this.hours()%12||12}function ai(){return this.hours()||24}J("H",["HH",2],0,"hour");J("h",["hh",2],0,ri);J("k",["kk",2],0,ai);J("hmm",0,0,(function(){return""+ri.apply(this)+F(this.minutes(),2)}));J("hmmss",0,0,(function(){return""+ri.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}));J("Hmm",0,0,(function(){return""+this.hours()+F(this.minutes(),2)}));J("Hmmss",0,0,(function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}));function li(t,e){J(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}li("a",true);li("A",false);dt("hour","h");gt("hour",13);function hi(t,e){return e._meridiemParse}Gt("a",hi);Gt("A",hi);Gt("H",Nt);Gt("h",Nt);Gt("k",Nt);Gt("HH",Nt,Ot);Gt("hh",Nt,Ot);Gt("kk",Nt,Ot);Gt("hmm",Mt);Gt("hmmss",It);Gt("Hmm",Mt);Gt("Hmmss",It);Wt(["H","HH"],te);Wt(["k","kk"],(function(t,e,i){var s=yt(t);e[te]=s===24?0:s}));Wt(["a","A"],(function(t,e,i){i._isPm=i._locale.isPM(t);i._meridiem=t}));Wt(["h","hh"],(function(t,e,i){e[te]=yt(t);x(i).bigHour=true}));Wt("hmm",(function(t,e,i){var s=t.length-2;e[te]=yt(t.substr(0,s));e[ee]=yt(t.substr(s));x(i).bigHour=true}));Wt("hmmss",(function(t,e,i){var s=t.length-4,n=t.length-2;e[te]=yt(t.substr(0,s));e[ee]=yt(t.substr(s,2));e[ie]=yt(t.substr(n));x(i).bigHour=true}));Wt("Hmm",(function(t,e,i){var s=t.length-2;e[te]=yt(t.substr(0,s));e[ee]=yt(t.substr(s))}));Wt("Hmmss",(function(t,e,i){var s=t.length-4,n=t.length-2;e[te]=yt(t.substr(0,s));e[ee]=yt(t.substr(s,2));e[ie]=yt(t.substr(n))}));function ci(t){return(t+"").toLowerCase().charAt(0)==="p"}var di=/[ap]\.?m?\.?/i,ui=vt("Hours",true);function fi(t,e,i){if(t>11){return i?"pm":"PM"}else{return i?"am":"AM"}}var pi={calendar:U,longDateFormat:tt,invalidDate:it,ordinal:nt,dayOfMonthOrdinalParse:ot,relativeTime:at,months:he,monthsShort:ce,week:Re,weekdays:Ue,weekdaysMin:Fe,weekdaysShort:Ge,meridiemParse:di};var gi={},mi={},bi;function wi(t,e){var i,s=Math.min(t.length,e.length);for(i=0;i<s;i+=1){if(t[i]!==e[i]){return i}}return s}function yi(t){return t?t.toLowerCase().replace("_","-"):t}function vi(t){var e=0,i,s,n,o;while(e<t.length){o=yi(t[e]).split("-");i=o.length;s=yi(t[e+1]);s=s?s.split("-"):null;while(i>0){n=Di(o.slice(0,i).join("-"));if(n){return n}if(s&&s.length>=i&&wi(o,s)>=i-1){break}i--}e++}return bi}function ki(t){return t.match("^[^/\\\\]*$")!=null}function Di(t){var e=null,i;if(gi[t]===undefined&&typeof module!=="undefined"&&module&&module.exports&&ki(t)){try{e=bi._abbr;i=require;i("./locale/"+t);xi(e)}catch(e){gi[t]=null}}return gi[t]}function xi(t,e){var i;if(t){if(m(e)){i=Oi(t)}else{i=_i(t,e)}if(i){bi=i}else{if(typeof console!=="undefined"&&console.warn){console.warn("Locale "+t+" not found. Did you forget to load it?")}}}return bi._abbr}function _i(t,e){if(e!==null){var i,s=pi;e.abbr=t;if(gi[t]!=null){Y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");s=gi[t]._config}else if(e.parentLocale!=null){if(gi[e.parentLocale]!=null){s=gi[e.parentLocale]._config}else{i=Di(e.parentLocale);if(i!=null){s=i._config}else{if(!mi[e.parentLocale]){mi[e.parentLocale]=[]}mi[e.parentLocale].push({name:t,config:e});return null}}}gi[t]=new P(j(s,e));if(mi[t]){mi[t].forEach((function(t){_i(t.name,t.config)}))}xi(t);return gi[t]}else{delete gi[t];return null}}function Ei(t,e){if(e!=null){var i,s,n=pi;if(gi[t]!=null&&gi[t].parentLocale!=null){gi[t].set(j(gi[t]._config,e))}else{s=Di(t);if(s!=null){n=s._config}e=j(n,e);if(s==null){e.abbr=t}i=new P(e);i.parentLocale=gi[t];gi[t]=i}xi(t)}else{if(gi[t]!=null){if(gi[t].parentLocale!=null){gi[t]=gi[t].parentLocale;if(t===xi()){xi(t)}}else if(gi[t]!=null){delete gi[t]}}}return gi[t]}function Oi(t){var e;if(t&&t._locale&&t._locale._abbr){t=t._locale._abbr}if(!t){return bi}if(!u(t)){e=Di(t);if(e){return e}t=[t]}return vi(t)}function Ti(){return H(gi)}function Ci(t){var e,i=t._a;if(i&&x(t).overflow===-2){e=i[Xt]<0||i[Xt]>11?Xt:i[Qt]<1||i[Qt]>le(i[Zt],i[Xt])?Qt:i[te]<0||i[te]>24||i[te]===24&&(i[ee]!==0||i[ie]!==0||i[se]!==0)?te:i[ee]<0||i[ee]>59?ee:i[ie]<0||i[ie]>59?ie:i[se]<0||i[se]>999?se:-1;if(x(t)._overflowDayOfYear&&(e<Zt||e>Qt)){e=Qt}if(x(t)._overflowWeeks&&e===-1){e=ne}if(x(t)._overflowWeekday&&e===-1){e=oe}x(t).overflow=e}return t}var Si=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ni=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mi=/Z|[+-]\d\d(?::?\d\d)?/,Ii=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,false],["YYYY",/\d{4}/,false]],Ai=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ri=/^\/?Date\((-?\d+)/i,Yi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Bi={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Li(t){var e,i,s=t._i,n=Si.exec(s)||Ni.exec(s),o,r,a,l,h=Ii.length,c=Ai.length;if(n){x(t).iso=true;for(e=0,i=h;e<i;e++){if(Ii[e][1].exec(n[1])){r=Ii[e][0];o=Ii[e][2]!==false;break}}if(r==null){t._isValid=false;return}if(n[3]){for(e=0,i=c;e<i;e++){if(Ai[e][1].exec(n[3])){a=(n[2]||" ")+Ai[e][0];break}}if(a==null){t._isValid=false;return}}if(!o&&a!=null){t._isValid=false;return}if(n[4]){if(Mi.exec(n[4])){l="Z"}else{t._isValid=false;return}}t._f=r+(a||"")+(l||"");Ji(t)}else{t._isValid=false}}function ji(t,e,i,s,n,o){var r=[Pi(t),ce.indexOf(e),parseInt(i,10),parseInt(s,10),parseInt(n,10)];if(o){r.push(parseInt(o,10))}return r}function Pi(t){var e=parseInt(t,10);if(e<=49){return 2e3+e}else if(e<=999){return 1900+e}return e}function $i(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Hi(t,e,i){if(t){var s=Ge.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(s!==n){x(i).weekdayMismatch=true;i._isValid=false;return false}}return true}function Ui(t,e,i){if(t){return Bi[t]}else if(e){return 0}else{var s=parseInt(i,10),n=s%100,o=(s-n)/100;return o*60+n}}function Gi(t){var e=Yi.exec($i(t._i)),i;if(e){i=ji(e[4],e[3],e[2],e[5],e[6],e[7]);if(!Hi(e[1],i,t)){return}t._a=i;t._tzm=Ui(e[8],e[9],e[10]);t._d=Ce.apply(null,t._a);t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm);x(t).rfc2822=true}else{t._isValid=false}}function Fi(t){var e=Ri.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}Li(t);if(t._isValid===false){delete t._isValid}else{return}Gi(t);if(t._isValid===false){delete t._isValid}else{return}if(t._strict){t._isValid=false}else{c.createFromInputFallback(t)}}c.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}));function zi(t,e,i){if(t!=null){return t}if(e!=null){return e}return i}function Vi(t){var e=new Date(c.now());if(t._useUTC){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]}return[e.getFullYear(),e.getMonth(),e.getDate()]}function Ki(t){var e,i,s=[],n,o,r;if(t._d){return}n=Vi(t);if(t._w&&t._a[Qt]==null&&t._a[Xt]==null){Wi(t)}if(t._dayOfYear!=null){r=zi(t._a[Zt],n[Zt]);if(t._dayOfYear>_e(r)||t._dayOfYear===0){x(t)._overflowDayOfYear=true}i=Ce(r,0,t._dayOfYear);t._a[Xt]=i.getUTCMonth();t._a[Qt]=i.getUTCDate()}for(e=0;e<3&&t._a[e]==null;++e){t._a[e]=s[e]=n[e]}for(;e<7;e++){t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e]}if(t._a[te]===24&&t._a[ee]===0&&t._a[ie]===0&&t._a[se]===0){t._nextDay=true;t._a[te]=0}t._d=(t._useUTC?Ce:Te).apply(null,s);o=t._useUTC?t._d.getUTCDay():t._d.getDay();if(t._tzm!=null){t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm)}if(t._nextDay){t._a[te]=24}if(t._w&&typeof t._w.d!=="undefined"&&t._w.d!==o){x(t).weekdayMismatch=true}}function Wi(t){var e,i,s,n,o,r,a,l,h;e=t._w;if(e.GG!=null||e.W!=null||e.E!=null){o=1;r=4;i=zi(e.GG,t._a[Zt],Me(ss(),1,4).year);s=zi(e.W,1);n=zi(e.E,1);if(n<1||n>7){l=true}}else{o=t._locale._week.dow;r=t._locale._week.doy;h=Me(ss(),o,r);i=zi(e.gg,t._a[Zt],h.year);s=zi(e.w,h.week);if(e.d!=null){n=e.d;if(n<0||n>6){l=true}}else if(e.e!=null){n=e.e+o;if(e.e<0||e.e>6){l=true}}else{n=o}}if(s<1||s>Ie(i,o,r)){x(t)._overflowWeeks=true}else if(l!=null){x(t)._overflowWeekday=true}else{a=Ne(i,s,n,o,r);t._a[Zt]=a.year;t._dayOfYear=a.dayOfYear}}c.ISO_8601=function(){};c.RFC_2822=function(){};function Ji(t){if(t._f===c.ISO_8601){Li(t);return}if(t._f===c.RFC_2822){Gi(t);return}t._a=[];x(t).empty=true;var e=""+t._i,i,s,n,o,r,a=e.length,l=0,h,d;n=Q(t._f,t._locale).match(z)||[];d=n.length;for(i=0;i<d;i++){o=n[i];s=(e.match(Ft(o,t))||[])[0];if(s){r=e.substr(0,e.indexOf(s));if(r.length>0){x(t).unusedInput.push(r)}e=e.slice(e.indexOf(s)+s.length);l+=s.length}if(W[o]){if(s){x(t).empty=false}else{x(t).unusedTokens.push(o)}qt(o,s,t)}else if(t._strict&&!s){x(t).unusedTokens.push(o)}}x(t).charsLeftOver=a-l;if(e.length>0){x(t).unusedInput.push(e)}if(t._a[te]<=12&&x(t).bigHour===true&&t._a[te]>0){x(t).bigHour=undefined}x(t).parsedDateParts=t._a.slice(0);x(t).meridiem=t._meridiem;t._a[te]=qi(t._locale,t._a[te],t._meridiem);h=x(t).era;if(h!==null){t._a[Zt]=t._locale.erasConvertYear(h,t._a[Zt])}Ki(t);Ci(t)}function qi(t,e,i){var s;if(i==null){return e}if(t.meridiemHour!=null){return t.meridiemHour(e,i)}else if(t.isPM!=null){s=t.isPM(i);if(s&&e<12){e+=12}if(!s&&e===12){e=0}return e}else{return e}}function Zi(t){var e,i,s,n,o,r,a=false,l=t._f.length;if(l===0){x(t).invalidFormat=true;t._d=new Date(NaN);return}for(n=0;n<l;n++){o=0;r=false;e=S({},t);if(t._useUTC!=null){e._useUTC=t._useUTC}e._f=t._f[n];Ji(e);if(E(e)){r=true}o+=x(e).charsLeftOver;o+=x(e).unusedTokens.length*10;x(e).score=o;if(!a){if(s==null||o<s||r){s=o;i=e;if(r){a=true}}}else{if(o<s){s=o;i=e}}}v(t,i||e)}function Xi(t){if(t._d){return}var e=ft(t._i),i=e.day===undefined?e.date:e.day;t._a=y([e.year,e.month,i,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)}));Ki(t)}function Qi(t){var e=new N(Ci(ts(t)));if(e._nextDay){e.add(1,"d");e._nextDay=undefined}return e}function ts(t){var e=t._i,i=t._f;t._locale=t._locale||Oi(t._l);if(e===null||i===undefined&&e===""){return O({nullInput:true})}if(typeof e==="string"){t._i=e=t._locale.preparse(e)}if(M(e)){return new N(Ci(e))}else if(w(e)){t._d=e}else if(u(i)){Zi(t)}else if(i){Ji(t)}else{es(t)}if(!E(t)){t._d=null}return t}function es(t){var e=t._i;if(m(e)){t._d=new Date(c.now())}else if(w(e)){t._d=new Date(e.valueOf())}else if(typeof e==="string"){Fi(t)}else if(u(e)){t._a=y(e.slice(0),(function(t){return parseInt(t,10)}));Ki(t)}else if(f(e)){Xi(t)}else if(b(e)){t._d=new Date(e)}else{c.createFromInputFallback(t)}}function is(t,e,i,s,n){var o={};if(e===true||e===false){s=e;e=undefined}if(i===true||i===false){s=i;i=undefined}if(f(t)&&g(t)||u(t)&&t.length===0){t=undefined}o._isAMomentObject=true;o._useUTC=o._isUTC=n;o._l=i;o._i=t;o._f=e;o._strict=s;return Qi(o)}function ss(t,e,i,s){return is(t,e,i,s,false)}var ns=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ss.apply(null,arguments);if(this.isValid()&&t.isValid()){return t<this?this:t}else{return O()}})),os=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ss.apply(null,arguments);if(this.isValid()&&t.isValid()){return t>this?this:t}else{return O()}}));function rs(t,e){var i,s;if(e.length===1&&u(e[0])){e=e[0]}if(!e.length){return ss()}i=e[0];for(s=1;s<e.length;++s){if(!e[s].isValid()||e[s][t](i)){i=e[s]}}return i}function as(){var t=[].slice.call(arguments,0);return rs("isBefore",t)}function ls(){var t=[].slice.call(arguments,0);return rs("isAfter",t)}var hs=function(){return Date.now?Date.now():+new Date};var cs=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ds(t){var e,i=false,s,n=cs.length;for(e in t){if(p(t,e)&&!(ae.call(cs,e)!==-1&&(t[e]==null||!isNaN(t[e])))){return false}}for(s=0;s<n;++s){if(t[cs[s]]){if(i){return false}if(parseFloat(t[cs[s]])!==yt(t[cs[s]])){i=true}}}return true}function us(){return this._isValid}function fs(){return Bs(NaN)}function ps(t){var e=ft(t),i=e.year||0,s=e.quarter||0,n=e.month||0,o=e.week||e.isoWeek||0,r=e.day||0,a=e.hour||0,l=e.minute||0,h=e.second||0,c=e.millisecond||0;this._isValid=ds(e);this._milliseconds=+c+h*1e3+l*6e4+a*1e3*60*60;this._days=+r+o*7;this._months=+n+s*3+i*12;this._data={};this._locale=Oi();this._bubble()}function gs(t){return t instanceof ps}function ms(t){if(t<0){return Math.round(-1*t)*-1}else{return Math.round(t)}}function bs(t,e,i){var s=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),o=0,r;for(r=0;r<s;r++){if(i&&t[r]!==e[r]||!i&&yt(t[r])!==yt(e[r])){o++}}return o+n}function ws(t,e){J(t,0,0,(function(){var t=this.utcOffset(),i="+";if(t<0){t=-t;i="-"}return i+F(~~(t/60),2)+e+F(~~t%60,2)}))}ws("Z",":");ws("ZZ","");Gt("Z",Pt);Gt("ZZ",Pt);Wt(["Z","ZZ"],(function(t,e,i){i._useUTC=true;i._tzm=vs(Pt,t)}));var ys=/([\+\-]|\d\d)/gi;function vs(t,e){var i=(e||"").match(t),s,n,o;if(i===null){return null}s=i[i.length-1]||[];n=(s+"").match(ys)||["-",0,0];o=+(n[1]*60)+yt(n[2]);return o===0?0:n[0]==="+"?o:-o}function ks(t,e){var i,s;if(e._isUTC){i=e.clone();s=(M(t)||w(t)?t.valueOf():ss(t).valueOf())-i.valueOf();i._d.setTime(i._d.valueOf()+s);c.updateOffset(i,false);return i}else{return ss(t).local()}}function Ds(t){return-Math.round(t._d.getTimezoneOffset())}c.updateOffset=function(){};function xs(t,e,i){var s=this._offset||0,n;if(!this.isValid()){return t!=null?this:NaN}if(t!=null){if(typeof t==="string"){t=vs(Pt,t);if(t===null){return this}}else if(Math.abs(t)<16&&!i){t=t*60}if(!this._isUTC&&e){n=Ds(this)}this._offset=t;this._isUTC=true;if(n!=null){this.add(n,"m")}if(s!==t){if(!e||this._changeInProgress){Hs(this,Bs(t-s,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;c.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?s:Ds(this)}}function _s(t,e){if(t!=null){if(typeof t!=="string"){t=-t}this.utcOffset(t,e);return this}else{return-this.utcOffset()}}function Es(t){return this.utcOffset(0,t)}function Os(t){if(this._isUTC){this.utcOffset(0,t);this._isUTC=false;if(t){this.subtract(Ds(this),"m")}}return this}function Ts(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var t=vs(jt,this._i);if(t!=null){this.utcOffset(t)}else{this.utcOffset(0,true)}}return this}function Cs(t){if(!this.isValid()){return false}t=t?ss(t).utcOffset():0;return(this.utcOffset()-t)%60===0}function Ss(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ns(){if(!m(this._isDSTShifted)){return this._isDSTShifted}var t={},e;S(t,this);t=ts(t);if(t._a){e=t._isUTC?k(t._a):ss(t._a);this._isDSTShifted=this.isValid()&&bs(t._a,e.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function Ms(){return this.isValid()?!this._isUTC:false}function Is(){return this.isValid()?this._isUTC:false}function As(){return this.isValid()?this._isUTC&&this._offset===0:false}var Rs=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ys=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bs(t,e){var i=t,s=null,n,o,r;if(gs(t)){i={ms:t._milliseconds,d:t._days,M:t._months}}else if(b(t)||!isNaN(+t)){i={};if(e){i[e]=+t}else{i.milliseconds=+t}}else if(s=Rs.exec(t)){n=s[1]==="-"?-1:1;i={y:0,d:yt(s[Qt])*n,h:yt(s[te])*n,m:yt(s[ee])*n,s:yt(s[ie])*n,ms:yt(ms(s[se]*1e3))*n}}else if(s=Ys.exec(t)){n=s[1]==="-"?-1:1;i={y:Ls(s[2],n),M:Ls(s[3],n),w:Ls(s[4],n),d:Ls(s[5],n),h:Ls(s[6],n),m:Ls(s[7],n),s:Ls(s[8],n)}}else if(i==null){i={}}else if(typeof i==="object"&&("from"in i||"to"in i)){r=Ps(ss(i.from),ss(i.to));i={};i.ms=r.milliseconds;i.M=r.months}o=new ps(i);if(gs(t)&&p(t,"_locale")){o._locale=t._locale}if(gs(t)&&p(t,"_isValid")){o._isValid=t._isValid}return o}Bs.fn=ps.prototype;Bs.invalid=fs;function Ls(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function js(t,e){var i={};i.months=e.month()-t.month()+(e.year()-t.year())*12;if(t.clone().add(i.months,"M").isAfter(e)){--i.months}i.milliseconds=+e-+t.clone().add(i.months,"M");return i}function Ps(t,e){var i;if(!(t.isValid()&&e.isValid())){return{milliseconds:0,months:0}}e=ks(e,t);if(t.isBefore(e)){i=js(t,e)}else{i=js(e,t);i.milliseconds=-i.milliseconds;i.months=-i.months}return i}function $s(t,e){return function(i,s){var n,o;if(s!==null&&!isNaN(+s)){Y(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");o=i;i=s;s=o}n=Bs(i,s);Hs(this,n,t);return this}}function Hs(t,e,i,s){var n=e._milliseconds,o=ms(e._days),r=ms(e._months);if(!t.isValid()){return}s=s==null?true:s;if(r){we(t,kt(t,"Month")+r*i)}if(o){Dt(t,"Date",kt(t,"Date")+o*i)}if(n){t._d.setTime(t._d.valueOf()+n*i)}if(s){c.updateOffset(t,o||r)}}var Us=$s(1,"add"),Gs=$s(-1,"subtract");function Fs(t){return typeof t==="string"||t instanceof String}function zs(t){return M(t)||w(t)||Fs(t)||b(t)||Ks(t)||Vs(t)||t===null||t===undefined}function Vs(t){var e=f(t)&&!g(t),i=false,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,o,r=s.length;for(n=0;n<r;n+=1){o=s[n];i=i||p(t,o)}return e&&i}function Ks(t){var e=u(t),i=false;if(e){i=t.filter((function(e){return!b(e)&&Fs(t)})).length===0}return e&&i}function Ws(t){var e=f(t)&&!g(t),i=false,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,o;for(n=0;n<s.length;n+=1){o=s[n];i=i||p(t,o)}return e&&i}function Js(t,e){var i=t.diff(e,"days",true);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function qs(t,e){if(arguments.length===1){if(!arguments[0]){t=undefined;e=undefined}else if(zs(arguments[0])){t=arguments[0];e=undefined}else if(Ws(arguments[0])){e=arguments[0];t=undefined}}var i=t||ss(),s=ks(i,this).startOf("day"),n=c.calendarFormat(this,s)||"sameElse",o=e&&(B(e[n])?e[n].call(this,i):e[n]);return this.format(o||this.localeData().calendar(n,this,ss(i)))}function Zs(){return new N(this)}function Xs(t,e){var i=M(t)?t:ss(t);if(!(this.isValid()&&i.isValid())){return false}e=ut(e)||"millisecond";if(e==="millisecond"){return this.valueOf()>i.valueOf()}else{return i.valueOf()<this.clone().startOf(e).valueOf()}}function Qs(t,e){var i=M(t)?t:ss(t);if(!(this.isValid()&&i.isValid())){return false}e=ut(e)||"millisecond";if(e==="millisecond"){return this.valueOf()<i.valueOf()}else{return this.clone().endOf(e).valueOf()<i.valueOf()}}function tn(t,e,i,s){var n=M(t)?t:ss(t),o=M(e)?e:ss(e);if(!(this.isValid()&&n.isValid()&&o.isValid())){return false}s=s||"()";return(s[0]==="("?this.isAfter(n,i):!this.isBefore(n,i))&&(s[1]===")"?this.isBefore(o,i):!this.isAfter(o,i))}function en(t,e){var i=M(t)?t:ss(t),s;if(!(this.isValid()&&i.isValid())){return false}e=ut(e)||"millisecond";if(e==="millisecond"){return this.valueOf()===i.valueOf()}else{s=i.valueOf();return this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf()}}function sn(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function nn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function on(t,e,i){var s,n,o;if(!this.isValid()){return NaN}s=ks(t,this);if(!s.isValid()){return NaN}n=(s.utcOffset()-this.utcOffset())*6e4;e=ut(e);switch(e){case"year":o=rn(this,s)/12;break;case"month":o=rn(this,s);break;case"quarter":o=rn(this,s)/3;break;case"second":o=(this-s)/1e3;break;case"minute":o=(this-s)/6e4;break;case"hour":o=(this-s)/36e5;break;case"day":o=(this-s-n)/864e5;break;case"week":o=(this-s-n)/6048e5;break;default:o=this-s}return i?o:wt(o)}function rn(t,e){if(t.date()<e.date()){return-rn(e,t)}var i=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(i,"months"),n,o;if(e-s<0){n=t.clone().add(i-1,"months");o=(e-s)/(s-n)}else{n=t.clone().add(i+1,"months");o=(e-s)/(n-s)}return-(i+o)||0}c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function an(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ln(t){if(!this.isValid()){return null}var e=t!==true,i=e?this.clone().utc():this;if(i.year()<0||i.year()>9999){return X(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(B(Date.prototype.toISOString)){if(e){return this.toDate().toISOString()}else{return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",X(i,"Z"))}}return X(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function hn(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var t="moment",e="",i,s,n,o;if(!this.isLocal()){t=this.utcOffset()===0?"moment.utc":"moment.parseZone";e="Z"}i="["+t+'("]';s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";n="-MM-DD[T]HH:mm:ss.SSS";o=e+'[")]';return this.format(i+s+n+o)}function cn(t){if(!t){t=this.isUtc()?c.defaultFormatUtc:c.defaultFormat}var e=X(this,t);return this.localeData().postformat(e)}function dn(t,e){if(this.isValid()&&(M(t)&&t.isValid()||ss(t).isValid())){return Bs({to:this,from:t}).locale(this.locale()).humanize(!e)}else{return this.localeData().invalidDate()}}function un(t){return this.from(ss(),t)}function fn(t,e){if(this.isValid()&&(M(t)&&t.isValid()||ss(t).isValid())){return Bs({from:this,to:t}).locale(this.locale()).humanize(!e)}else{return this.localeData().invalidDate()}}function pn(t){return this.to(ss(),t)}function gn(t){var e;if(t===undefined){return this._locale._abbr}else{e=Oi(t);if(e!=null){this._locale=e}return this}}var mn=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){if(t===undefined){return this.localeData()}else{return this.locale(t)}}));function bn(){return this._locale}var wn=1e3,yn=60*wn,vn=60*yn,kn=(365*400+97)*24*vn;function Dn(t,e){return(t%e+e)%e}function xn(t,e,i){if(t<100&&t>=0){return new Date(t+400,e,i)-kn}else{return new Date(t,e,i).valueOf()}}function _n(t,e,i){if(t<100&&t>=0){return Date.UTC(t+400,e,i)-kn}else{return Date.UTC(t,e,i)}}function En(t){var e,i;t=ut(t);if(t===undefined||t==="millisecond"||!this.isValid()){return this}i=this._isUTC?_n:xn;switch(t){case"year":e=i(this.year(),0,1);break;case"quarter":e=i(this.year(),this.month()-this.month()%3,1);break;case"month":e=i(this.year(),this.month(),1);break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=i(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf();e-=Dn(e+(this._isUTC?0:this.utcOffset()*yn),vn);break;case"minute":e=this._d.valueOf();e-=Dn(e,yn);break;case"second":e=this._d.valueOf();e-=Dn(e,wn);break}this._d.setTime(e);c.updateOffset(this,true);return this}function On(t){var e,i;t=ut(t);if(t===undefined||t==="millisecond"||!this.isValid()){return this}i=this._isUTC?_n:xn;switch(t){case"year":e=i(this.year()+1,0,1)-1;break;case"quarter":e=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=i(this.year(),this.month()+1,1)-1;break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf();e+=vn-Dn(e+(this._isUTC?0:this.utcOffset()*yn),vn)-1;break;case"minute":e=this._d.valueOf();e+=yn-Dn(e,yn)-1;break;case"second":e=this._d.valueOf();e+=wn-Dn(e,wn)-1;break}this._d.setTime(e);c.updateOffset(this,true);return this}function Tn(){return this._d.valueOf()-(this._offset||0)*6e4}function Cn(){return Math.floor(this.valueOf()/1e3)}function Sn(){return new Date(this.valueOf())}function Nn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Mn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function In(){return this.isValid()?this.toISOString():null}function An(){return E(this)}function Rn(){return v({},x(this))}function Yn(){return x(this).overflow}function Bn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}J("N",0,0,"eraAbbr");J("NN",0,0,"eraAbbr");J("NNN",0,0,"eraAbbr");J("NNNN",0,0,"eraName");J("NNNNN",0,0,"eraNarrow");J("y",["y",1],"yo","eraYear");J("y",["yy",2],0,"eraYear");J("y",["yyy",3],0,"eraYear");J("y",["yyyy",4],0,"eraYear");Gt("N",Kn);Gt("NN",Kn);Gt("NNN",Kn);Gt("NNNN",Wn);Gt("NNNNN",Jn);Wt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,i,s){var n=i._locale.erasParse(t,s,i._strict);if(n){x(i).era=n}else{x(i).invalidEra=t}}));Gt("y",Bt);Gt("yy",Bt);Gt("yyy",Bt);Gt("yyyy",Bt);Gt("yo",qn);Wt(["y","yy","yyy","yyyy"],Zt);Wt(["yo"],(function(t,e,i,s){var n;if(i._locale._eraYearOrdinalRegex){n=t.match(i._locale._eraYearOrdinalRegex)}if(i._locale.eraYearOrdinalParse){e[Zt]=i._locale.eraYearOrdinalParse(t,n)}else{e[Zt]=parseInt(t,10)}}));function Ln(t,e){var i,s,n,o=this._eras||Oi("en")._eras;for(i=0,s=o.length;i<s;++i){switch(typeof o[i].since){case"string":n=c(o[i].since).startOf("day");o[i].since=n.valueOf();break}switch(typeof o[i].until){case"undefined":o[i].until=+Infinity;break;case"string":n=c(o[i].until).startOf("day").valueOf();o[i].until=n.valueOf();break}}return o}function jn(t,e,i){var s,n,o=this.eras(),r,a,l;t=t.toUpperCase();for(s=0,n=o.length;s<n;++s){r=o[s].name.toUpperCase();a=o[s].abbr.toUpperCase();l=o[s].narrow.toUpperCase();if(i){switch(e){case"N":case"NN":case"NNN":if(a===t){return o[s]}break;case"NNNN":if(r===t){return o[s]}break;case"NNNNN":if(l===t){return o[s]}break}}else if([r,a,l].indexOf(t)>=0){return o[s]}}}function Pn(t,e){var i=t.since<=t.until?+1:-1;if(e===undefined){return c(t.since).year()}else{return c(t.since).year()+(e-t.offset)*i}}function $n(){var t,e,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t){i=this.clone().startOf("day").valueOf();if(s[t].since<=i&&i<=s[t].until){return s[t].name}if(s[t].until<=i&&i<=s[t].since){return s[t].name}}return""}function Hn(){var t,e,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t){i=this.clone().startOf("day").valueOf();if(s[t].since<=i&&i<=s[t].until){return s[t].narrow}if(s[t].until<=i&&i<=s[t].since){return s[t].narrow}}return""}function Un(){var t,e,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t){i=this.clone().startOf("day").valueOf();if(s[t].since<=i&&i<=s[t].until){return s[t].abbr}if(s[t].until<=i&&i<=s[t].since){return s[t].abbr}}return""}function Gn(){var t,e,i,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t){i=n[t].since<=n[t].until?+1:-1;s=this.clone().startOf("day").valueOf();if(n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since){return(this.year()-c(n[t].since).year())*i+n[t].offset}}return this.year()}function Fn(t){if(!p(this,"_erasNameRegex")){Zn.call(this)}return t?this._erasNameRegex:this._erasRegex}function zn(t){if(!p(this,"_erasAbbrRegex")){Zn.call(this)}return t?this._erasAbbrRegex:this._erasRegex}function Vn(t){if(!p(this,"_erasNarrowRegex")){Zn.call(this)}return t?this._erasNarrowRegex:this._erasRegex}function Kn(t,e){return e.erasAbbrRegex(t)}function Wn(t,e){return e.erasNameRegex(t)}function Jn(t,e){return e.erasNarrowRegex(t)}function qn(t,e){return e._eraYearOrdinalRegex||Bt}function Zn(){var t=[],e=[],i=[],s=[],n,o,r=this.eras();for(n=0,o=r.length;n<o;++n){e.push(Vt(r[n].name));t.push(Vt(r[n].abbr));i.push(Vt(r[n].narrow));s.push(Vt(r[n].name));s.push(Vt(r[n].abbr));s.push(Vt(r[n].narrow))}this._erasRegex=new RegExp("^("+s.join("|")+")","i");this._erasNameRegex=new RegExp("^("+e.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}J(0,["gg",2],0,(function(){return this.weekYear()%100}));J(0,["GG",2],0,(function(){return this.isoWeekYear()%100}));function Xn(t,e){J(0,[t,t.length],0,e)}Xn("gggg","weekYear");Xn("ggggg","weekYear");Xn("GGGG","isoWeekYear");Xn("GGGGG","isoWeekYear");dt("weekYear","gg");dt("isoWeekYear","GG");gt("weekYear",1);gt("isoWeekYear",1);Gt("G",Lt);Gt("g",Lt);Gt("GG",Nt,Ot);Gt("gg",Nt,Ot);Gt("GGGG",Rt,Ct);Gt("gggg",Rt,Ct);Gt("GGGGG",Yt,St);Gt("ggggg",Yt,St);Jt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,i,s){e[s.substr(0,2)]=yt(t)}));Jt(["gg","GG"],(function(t,e,i,s){e[s]=c.parseTwoDigitYear(t)}));function Qn(t){return oo.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function to(t){return oo.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function eo(){return Ie(this.year(),1,4)}function io(){return Ie(this.isoWeekYear(),1,4)}function so(){var t=this.localeData()._week;return Ie(this.year(),t.dow,t.doy)}function no(){var t=this.localeData()._week;return Ie(this.weekYear(),t.dow,t.doy)}function oo(t,e,i,s,n){var o;if(t==null){return Me(this,s,n).year}else{o=Ie(t,s,n);if(e>o){e=o}return ro.call(this,t,e,i,s,n)}}function ro(t,e,i,s,n){var o=Ne(t,e,i,s,n),r=Ce(o.year,0,o.dayOfYear);this.year(r.getUTCFullYear());this.month(r.getUTCMonth());this.date(r.getUTCDate());return this}J("Q",0,"Qo","quarter");dt("quarter","Q");gt("quarter",7);Gt("Q",Et);Wt("Q",(function(t,e){e[Xt]=(yt(t)-1)*3}));function ao(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}J("D",["DD",2],"Do","date");dt("date","D");gt("date",9);Gt("D",Nt);Gt("DD",Nt,Ot);Gt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}));Wt(["D","DD"],Qt);Wt("Do",(function(t,e){e[Qt]=yt(t.match(Nt)[0])}));var lo=vt("Date",true);J("DDD",["DDDD",3],"DDDo","dayOfYear");dt("dayOfYear","DDD");gt("dayOfYear",4);Gt("DDD",At);Gt("DDDD",Tt);Wt(["DDD","DDDD"],(function(t,e,i){i._dayOfYear=yt(t)}));function ho(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}J("m",["mm",2],0,"minute");dt("minute","m");gt("minute",14);Gt("m",Nt);Gt("mm",Nt,Ot);Wt(["m","mm"],ee);var co=vt("Minutes",false);J("s",["ss",2],0,"second");dt("second","s");gt("second",15);Gt("s",Nt);Gt("ss",Nt,Ot);Wt(["s","ss"],ie);var uo=vt("Seconds",false);J("S",0,0,(function(){return~~(this.millisecond()/100)}));J(0,["SS",2],0,(function(){return~~(this.millisecond()/10)}));J(0,["SSS",3],0,"millisecond");J(0,["SSSS",4],0,(function(){return this.millisecond()*10}));J(0,["SSSSS",5],0,(function(){return this.millisecond()*100}));J(0,["SSSSSS",6],0,(function(){return this.millisecond()*1e3}));J(0,["SSSSSSS",7],0,(function(){return this.millisecond()*1e4}));J(0,["SSSSSSSS",8],0,(function(){return this.millisecond()*1e5}));J(0,["SSSSSSSSS",9],0,(function(){return this.millisecond()*1e6}));dt("millisecond","ms");gt("millisecond",16);Gt("S",At,Et);Gt("SS",At,Ot);Gt("SSS",At,Tt);var fo,po;for(fo="SSSS";fo.length<=9;fo+="S"){Gt(fo,Bt)}function go(t,e){e[se]=yt(("0."+t)*1e3)}for(fo="S";fo.length<=9;fo+="S"){Wt(fo,go)}po=vt("Milliseconds",false);J("z",0,0,"zoneAbbr");J("zz",0,0,"zoneName");function mo(){return this._isUTC?"UTC":""}function bo(){return this._isUTC?"Coordinated Universal Time":""}var wo=N.prototype;wo.add=Us;wo.calendar=qs;wo.clone=Zs;wo.diff=on;wo.endOf=On;wo.format=cn;wo.from=dn;wo.fromNow=un;wo.to=fn;wo.toNow=pn;wo.get=xt;wo.invalidAt=Yn;wo.isAfter=Xs;wo.isBefore=Qs;wo.isBetween=tn;wo.isSame=en;wo.isSameOrAfter=sn;wo.isSameOrBefore=nn;wo.isValid=An;wo.lang=mn;wo.locale=gn;wo.localeData=bn;wo.max=os;wo.min=ns;wo.parsingFlags=Rn;wo.set=_t;wo.startOf=En;wo.subtract=Gs;wo.toArray=Nn;wo.toObject=Mn;wo.toDate=Sn;wo.toISOString=ln;wo.inspect=hn;if(typeof Symbol!=="undefined"&&Symbol.for!=null){wo[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}}wo.toJSON=In;wo.toString=an;wo.unix=Cn;wo.valueOf=Tn;wo.creationData=Bn;wo.eraName=$n;wo.eraNarrow=Hn;wo.eraAbbr=Un;wo.eraYear=Gn;wo.year=Ee;wo.isLeapYear=Oe;wo.weekYear=Qn;wo.isoWeekYear=to;wo.quarter=wo.quarters=ao;wo.month=ye;wo.daysInMonth=ve;wo.week=wo.weeks=Le;wo.isoWeek=wo.isoWeeks=je;wo.weeksInYear=so;wo.weeksInWeekYear=no;wo.isoWeeksInYear=eo;wo.isoWeeksInISOWeekYear=io;wo.date=lo;wo.day=wo.days=Qe;wo.weekday=ti;wo.isoWeekday=ei;wo.dayOfYear=ho;wo.hour=wo.hours=ui;wo.minute=wo.minutes=co;wo.second=wo.seconds=uo;wo.millisecond=wo.milliseconds=po;wo.utcOffset=xs;wo.utc=Es;wo.local=Os;wo.parseZone=Ts;wo.hasAlignedHourOffset=Cs;wo.isDST=Ss;wo.isLocal=Ms;wo.isUtcOffset=Is;wo.isUtc=As;wo.isUTC=As;wo.zoneAbbr=mo;wo.zoneName=bo;wo.dates=A("dates accessor is deprecated. Use date instead.",lo);wo.months=A("months accessor is deprecated. Use month instead",ye);wo.years=A("years accessor is deprecated. Use year instead",Ee);wo.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",_s);wo.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ns);function yo(t){return ss(t*1e3)}function vo(){return ss.apply(null,arguments).parseZone()}function ko(t){return t}var Do=P.prototype;Do.calendar=G;Do.longDateFormat=et;Do.invalidDate=st;Do.ordinal=rt;Do.preparse=ko;Do.postformat=ko;Do.relativeTime=lt;Do.pastFuture=ht;Do.set=L;Do.eras=Ln;Do.erasParse=jn;Do.erasConvertYear=Pn;Do.erasAbbrRegex=zn;Do.erasNameRegex=Fn;Do.erasNarrowRegex=Vn;Do.months=pe;Do.monthsShort=ge;Do.monthsParse=be;Do.monthsRegex=De;Do.monthsShortRegex=ke;Do.week=Ae;Do.firstDayOfYear=Be;Do.firstDayOfWeek=Ye;Do.weekdays=We;Do.weekdaysMin=qe;Do.weekdaysShort=Je;Do.weekdaysParse=Xe;Do.weekdaysRegex=ii;Do.weekdaysShortRegex=si;Do.weekdaysMinRegex=ni;Do.isPM=ci;Do.meridiem=fi;function xo(t,e,i,s){var n=Oi(),o=k().set(s,e);return n[i](o,t)}function _o(t,e,i){if(b(t)){e=t;t=undefined}t=t||"";if(e!=null){return xo(t,e,i,"month")}var s,n=[];for(s=0;s<12;s++){n[s]=xo(t,s,i,"month")}return n}function Eo(t,e,i,s){if(typeof t==="boolean"){if(b(e)){i=e;e=undefined}e=e||""}else{e=t;i=e;t=false;if(b(e)){i=e;e=undefined}e=e||""}var n=Oi(),o=t?n._week.dow:0,r,a=[];if(i!=null){return xo(e,(i+o)%7,s,"day")}for(r=0;r<7;r++){a[r]=xo(e,(r+o)%7,s,"day")}return a}function Oo(t,e){return _o(t,e,"months")}function To(t,e){return _o(t,e,"monthsShort")}function Co(t,e,i){return Eo(t,e,i,"weekdays")}function So(t,e,i){return Eo(t,e,i,"weekdaysShort")}function No(t,e,i){return Eo(t,e,i,"weekdaysMin")}xi("en",{eras:[{since:"0001-01-01",until:+Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=yt(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+i}});c.lang=A("moment.lang is deprecated. Use moment.locale instead.",xi);c.langData=A("moment.langData is deprecated. Use moment.localeData instead.",Oi);var Mo=Math.abs;function Io(){var t=this._data;this._milliseconds=Mo(this._milliseconds);this._days=Mo(this._days);this._months=Mo(this._months);t.milliseconds=Mo(t.milliseconds);t.seconds=Mo(t.seconds);t.minutes=Mo(t.minutes);t.hours=Mo(t.hours);t.months=Mo(t.months);t.years=Mo(t.years);return this}function Ao(t,e,i,s){var n=Bs(e,i);t._milliseconds+=s*n._milliseconds;t._days+=s*n._days;t._months+=s*n._months;return t._bubble()}function Ro(t,e){return Ao(this,t,e,1)}function Yo(t,e){return Ao(this,t,e,-1)}function Bo(t){if(t<0){return Math.floor(t)}else{return Math.ceil(t)}}function Lo(){var t=this._milliseconds,e=this._days,i=this._months,s=this._data,n,o,r,a,l;if(!(t>=0&&e>=0&&i>=0||t<=0&&e<=0&&i<=0)){t+=Bo(Po(i)+e)*864e5;e=0;i=0}s.milliseconds=t%1e3;n=wt(t/1e3);s.seconds=n%60;o=wt(n/60);s.minutes=o%60;r=wt(o/60);s.hours=r%24;e+=wt(r/24);l=wt(jo(e));i+=l;e-=Bo(Po(l));a=wt(i/12);i%=12;s.days=e;s.months=i;s.years=a;return this}function jo(t){return t*4800/146097}function Po(t){return t*146097/4800}function $o(t){if(!this.isValid()){return NaN}var e,i,s=this._milliseconds;t=ut(t);if(t==="month"||t==="quarter"||t==="year"){e=this._days+s/864e5;i=this._months+jo(e);switch(t){case"month":return i;case"quarter":return i/3;case"year":return i/12}}else{e=this._days+Math.round(Po(this._months));switch(t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}}function Ho(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+yt(this._months/12)*31536e6}function Uo(t){return function(){return this.as(t)}}var Go=Uo("ms"),Fo=Uo("s"),zo=Uo("m"),Vo=Uo("h"),Ko=Uo("d"),Wo=Uo("w"),Jo=Uo("M"),qo=Uo("Q"),Zo=Uo("y");function Xo(){return Bs(this)}function Qo(t){t=ut(t);return this.isValid()?this[t+"s"]():NaN}function tr(t){return function(){return this.isValid()?this._data[t]:NaN}}var er=tr("milliseconds"),ir=tr("seconds"),sr=tr("minutes"),nr=tr("hours"),or=tr("days"),rr=tr("months"),ar=tr("years");function lr(){return wt(this.days()/7)}var hr=Math.round,cr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function dr(t,e,i,s,n){return n.relativeTime(e||1,!!i,t,s)}function ur(t,e,i,s){var n=Bs(t).abs(),o=hr(n.as("s")),r=hr(n.as("m")),a=hr(n.as("h")),l=hr(n.as("d")),h=hr(n.as("M")),c=hr(n.as("w")),d=hr(n.as("y")),u=o<=i.ss&&["s",o]||o<i.s&&["ss",o]||r<=1&&["m"]||r<i.m&&["mm",r]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];if(i.w!=null){u=u||c<=1&&["w"]||c<i.w&&["ww",c]}u=u||h<=1&&["M"]||h<i.M&&["MM",h]||d<=1&&["y"]||["yy",d];u[2]=e;u[3]=+t>0;u[4]=s;return dr.apply(null,u)}function fr(t){if(t===undefined){return hr}if(typeof t==="function"){hr=t;return true}return false}function pr(t,e){if(cr[t]===undefined){return false}if(e===undefined){return cr[t]}cr[t]=e;if(t==="s"){cr.ss=e-1}return true}function gr(t,e){if(!this.isValid()){return this.localeData().invalidDate()}var i=false,s=cr,n,o;if(typeof t==="object"){e=t;t=false}if(typeof t==="boolean"){i=t}if(typeof e==="object"){s=Object.assign({},cr,e);if(e.s!=null&&e.ss==null){s.ss=e.s-1}}n=this.localeData();o=ur(this,!i,s,n);if(i){o=n.pastFuture(+this,o)}return n.postformat(o)}var mr=Math.abs;function br(t){return(t>0)-(t<0)||+t}function wr(){if(!this.isValid()){return this.localeData().invalidDate()}var t=mr(this._milliseconds)/1e3,e=mr(this._days),i=mr(this._months),s,n,o,r,a=this.asSeconds(),l,h,c,d;if(!a){return"P0D"}s=wt(t/60);n=wt(s/60);t%=60;s%=60;o=wt(i/12);i%=12;r=t?t.toFixed(3).replace(/\.?0+$/,""):"";l=a<0?"-":"";h=br(this._months)!==br(a)?"-":"";c=br(this._days)!==br(a)?"-":"";d=br(this._milliseconds)!==br(a)?"-":"";return l+"P"+(o?h+o+"Y":"")+(i?h+i+"M":"")+(e?c+e+"D":"")+(n||s||t?"T":"")+(n?d+n+"H":"")+(s?d+s+"M":"")+(t?d+r+"S":"")}var yr=ps.prototype;yr.isValid=us;yr.abs=Io;yr.add=Ro;yr.subtract=Yo;yr.as=$o;yr.asMilliseconds=Go;yr.asSeconds=Fo;yr.asMinutes=zo;yr.asHours=Vo;yr.asDays=Ko;yr.asWeeks=Wo;yr.asMonths=Jo;yr.asQuarters=qo;yr.asYears=Zo;yr.valueOf=Ho;yr._bubble=Lo;yr.clone=Xo;yr.get=Qo;yr.milliseconds=er;yr.seconds=ir;yr.minutes=sr;yr.hours=nr;yr.days=or;yr.weeks=lr;yr.months=rr;yr.years=ar;yr.humanize=gr;yr.toISOString=wr;yr.toString=wr;yr.toJSON=wr;yr.locale=gn;yr.localeData=bn;yr.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",wr);yr.lang=mn;J("X",0,0,"unix");J("x",0,0,"valueOf");Gt("x",Lt);Gt("X",$t);Wt("X",(function(t,e,i){i._d=new Date(parseFloat(t)*1e3)}));Wt("x",(function(t,e,i){i._d=new Date(yt(t))}));
//! moment.js
c.version="2.29.4";d(ss);c.fn=wo;c.min=as;c.max=ls;c.now=hs;c.utc=k;c.unix=yo;c.months=Oo;c.isDate=w;c.locale=xi;c.invalid=O;c.duration=Bs;c.isMoment=M;c.weekdays=Co;c.parseZone=vo;c.localeData=Oi;c.isDuration=gs;c.monthsShort=To;c.weekdaysMin=No;c.defineLocale=_i;c.updateLocale=Ei;c.locales=Ti;c.weekdaysShort=So;c.normalizeUnits=ut;c.relativeTimeRounding=fr;c.relativeTimeThreshold=pr;c.calendarFormat=Js;c.prototype=wo;c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function vr(t,e){const i=`${t.split(" ")[1]} ${e}`;const s=c(i,"DD MMM YYYY");if(!s.isValid()){throw new Error("Invalid Date")}return s.format("D_M_YYYY")}function kr(t,e){const i=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];const[s,n]=t.split(" ");const[o,r]=e.split(" ");const a=i.indexOf(o);if(a!==-1){let t=new Date(`${r}-${a+1}-${n}`);t.setHours(0,0,0,0);return t.getTime()}else{throw new Error("Invalid Month")}}function Dr(t,e){const i=new Date(t);const s=new Date(e);return Math.ceil((s.getTime()-i.getTime())/(1e3*60*60*24))}function xr(t){const e=t.getFullYear();const i=(t.getMonth()+1).toString().padStart(2,"0");const s=t.getDate().toString().padStart(2,"0");return`${e}-${i}-${s}`}function _r(t){let e={};const i={"IN-HOUSE":{id:1,clsName:"IN_HOUSE"},CONFIRMED:{id:2,clsName:"CONFIRMED"},"PENDING-CONFIRMATION":{id:3,clsName:"PENDING_CONFIRMATION"},"SPLIT-UNIT":{id:4,clsName:"SPLIT_UNIT"},"CHECKED-IN":{id:5,clsName:"CHECKED_IN"},"CHECKED-OUT":{id:5,clsName:"CHECKED_OUT"},BLOCKED:{id:6,clsName:"BLOCKED"},"BLOCKED-WITH-DATES":{id:7,clsName:"BLOCKED_WITH_DATES"},NOTES:{id:8,clsName:"NOTES"},"OUTSTANDING-BALANCE":{id:9,clsName:"OUTSTANDING_BALANCE"},"TEMP-EVENT":{id:10,clsName:"PENDING_CONFIRMATION"}};t.forEach((t=>{e[t.id]=t;e.statusId=i}));return e}function Er(t){return["003","002","004"].includes(t)}function Or(t){const e=new Intl.NumberFormat(undefined,{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0});return e.format(0).replace(/[0-9]/g,"").trim()}const Tr=(t,e)=>e.find((e=>e.id===t));function Cr(t){const e=new Date;const i=t;e.setHours(e.getHours()+i,e.getMinutes(),0,0);return{BLOCKED_TILL_DATE:xr(e),BLOCKED_TILL_HOUR:e.getHours().toString(),BLOCKED_TILL_MINUTE:e.getMinutes().toString()}}function Sr(t,e){const i=c(t,"D_M_YYYY");i.add(e,"days");return i.format("YYYY-MM-DD")}function Nr(t){const e=c(t,"D_M_YYYY");return e.format("YYYY-MM-DD")}function Mr(t){return c(t).add(2,"months").format("YYYY-MM-DD")}function Ir(t,e="DD MMM YYYY"){const i=c(t,e).format("ddd, DD MMM YYYY");return i}function Ar(t){return c(t).add(1,"days").format("YYYY-MM-DD")}function Rr(t){return c(t,"YYYY-MM-DD").format("DD/MM ddd")}function Yr(t,e){let i=[];let s=c.min(c(t).add(1,"days"),c(e));let n=c.max(c(t),c(e));while(s<n){i.push(s.format("YYYY-MM-DD"));s=s.clone().add(1,"days")}return i}const Br=(t,e,i)=>{const s=t.get(e);if(!s){t.set(e,[i])}else if(!s.includes(i)){s.push(i)}};const Lr=(t,e)=>{let i;return(...s)=>{if(i){clearTimeout(i)}i=setTimeout((()=>{i=0;t(...s)}),e)}};const jr=t=>!("isConnected"in t)||t.isConnected;const Pr=Lr((t=>{for(let e of t.keys()){t.set(e,t.get(e).filter(jr))}}),2e3);const $r=()=>{if(typeof t!=="function"){return{}}const i=new Map;return{dispose:()=>i.clear(),get:e=>{const s=t();if(s){Br(i,e,s)}},set:t=>{const s=i.get(t);if(s){i.set(t,s.filter(e))}Pr(i)},reset:()=>{i.forEach((t=>t.forEach(e)));Pr(i)}}};const Hr=t=>typeof t==="function"?t():t;const Ur=(t,e=((t,e)=>t!==e))=>{const i=Hr(t);let s=new Map(Object.entries(i!==null&&i!==void 0?i:{}));const n={dispose:[],get:[],set:[],reset:[]};const o=()=>{var e;s=new Map(Object.entries((e=Hr(t))!==null&&e!==void 0?e:{}));n.reset.forEach((t=>t()))};const r=()=>{n.dispose.forEach((t=>t()));o()};const a=t=>{n.get.forEach((e=>e(t)));return s.get(t)};const l=(t,i)=>{const o=s.get(t);if(e(i,o,t)){s.set(t,i);n.set.forEach((e=>e(t,i,o)))}};const h=typeof Proxy==="undefined"?{}:new Proxy(i,{get(t,e){return a(e)},ownKeys(t){return Array.from(s.keys())},getOwnPropertyDescriptor(){return{enumerable:true,configurable:true}},has(t,e){return s.has(e)},set(t,e,i){l(e,i);return true}});const c=(t,e)=>{n[t].push(e);return()=>{Gr(n[t],e)}};const d=(e,i)=>{const s=c("set",((t,s)=>{if(t===e){i(s)}}));const n=c("reset",(()=>i(Hr(t)[e])));return()=>{s();n()}};const u=(...t)=>{const e=t.reduce(((t,e)=>{if(e.set){t.push(c("set",e.set))}if(e.get){t.push(c("get",e.get))}if(e.reset){t.push(c("reset",e.reset))}if(e.dispose){t.push(c("dispose",e.dispose))}return t}),[]);return()=>e.forEach((t=>t()))};const f=t=>{const e=s.get(t);n.set.forEach((i=>i(t,e,e)))};return{state:h,get:a,set:l,on:c,onChange:d,use:u,dispose:r,reset:o,forceUpdate:f}};const Gr=(t,e)=>{const i=t.indexOf(e);if(i>=0){t[i]=t[t.length-1];t.length--}};const Fr=(t,e)=>{const i=Ur(t,e);i.use($r());return i};const zr={entries:null,direction:"ltr"};const{state:Vr,onChange:Kr}=Fr(zr);const Wr=".sc-igl-application-info-h{display:block}@media only screen and (min-width: 908px){.aplicationInfoContainer.sc-igl-application-info{max-width:80%}.guest-info-container.sc-igl-application-info{max-width:300px}.preference-select-container.sc-igl-application-info{max-width:250px}}";const Jr=class{constructor(t){i(this,t);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.userRate=0;this.guestInfo=undefined;this.currency=undefined;this.roomsList=[];this.guestRefKey=undefined;this.bedPreferenceType=[];this.selectedUnits=[];this.bookingType="PLUS_BOOKING";this.defaultGuestPreference=undefined;this.index=undefined;this.defaultGuestRoomId=undefined;this.dateDifference=undefined;this.filterdRoomList=[];this.isButtonPressed=false;this.guestData=undefined}componentWillLoad(){console.log(this.guestInfo);if(this.guestInfo.isRateModified&&this.guestInfo.rateType===2){this.userRate=this.guestInfo.rate*this.dateDifference}else{this.userRate=this.guestInfo.rate}this.guestData=this.guestInfo?Object.assign({},this.guestInfo):{};this.guestData.roomId="";if(this.defaultGuestRoomId&&this.roomsList.filter((t=>t.id.toString()===this.defaultGuestRoomId.toString())).length>0){this.guestData.roomId=this.defaultGuestRoomId}this.guestData.preference=+this.defaultGuestPreference||"";this.updateRoomList()}async handleSelctedUnits(){this.updateRoomList()}updateRoomList(){const t=[...this.selectedUnits];t[this.index]=-1;this.filterdRoomList=this.roomsList.filter((e=>!t.includes(e.id)))}updateData(){this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",guestRefKey:this.guestRefKey,data:Object.assign({},this.guestData)})}handleDataChange(t,e){this.guestData[t]=+e;if(e===""){this.guestData["roomName"]=e}if(t==="roomId"&&e!==""){this.guestData["roomName"]=this.filterdRoomList.find((t=>t.id===+e)).name||""}console.log("guest data",this.guestData);this.updateData()}handleGuestNameChange(t){this.guestData.guestName=t.target.value;this.updateData()}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":case"save":this.isButtonPressed=true;break}}render(){return n(o,null,n("div",{class:"text-left mt-1 "},n("div",{class:" mb-1 "},this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING"?n("span",{class:"h5 mr-1"},this.guestInfo.roomCategoryName):null,n("span",{class:" font-weight-bold"},this.guestInfo.ratePlanName.replace(this.guestInfo.roomCategoryName+"/",""),n("ir-tooltip",{class:" mr-1",message:this.guestInfo.cancelation+this.guestInfo.guarantee})),n("span",null,this.guestInfo.adult_child_offering)),n("div",{class:"d-flex flex-column flex-md-row m-0 p-0 align-items-md-center aplicationInfoContainer "},n("div",{class:"mr-1 flex-fill guest-info-container"},n("input",{id:l(),type:"email",class:`form-control ${this.isButtonPressed&&this.guestData.guestName===""&&"border-danger"}`,placeholder:Vr.entries.Lcz_GuestFirstnameAndLastname,name:"guestName",onInput:t=>this.handleGuestNameChange(t),required:true,value:this.guestData.guestName})),n("div",{class:"mt-1 mt-md-0 d-flex align-items-center flex-fill"},this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"||this.bookingType==="EDIT_BOOKING"?n("div",{class:"mr-1 p-0 flex-fill  preference-select-container"},n("select",{class:`form-control  input-sm pr-0`,id:l(),onChange:t=>this.handleDataChange("roomId",t.target.value)},n("option",{value:"",selected:this.guestData.roomId===""},Vr.entries.Lcz_Assignunits),this.filterdRoomList.map((t=>n("option",{value:t.id,selected:+this.guestData.roomId===t.id},t.name))))):null,n("div",{class:"mr-1 flex-fill"},n("select",{class:`form-control input-sm ${this.isButtonPressed&&(this.guestData.preference===""||this.guestData.preference===0)&&"border-danger"}`,id:l(),onChange:t=>this.handleDataChange("preference",t.target.value)},n("option",{value:"",selected:this.guestData.preference===""},Vr.entries.Lcz_BedConfiguration),this.bedPreferenceType.map((t=>n("option",{value:+t.CODE_NAME,selected:this.guestData.preference===+t.CODE_NAME},t.CODE_VALUE_EN))))),n("div",{class:""},Or(this.currency.code)+Number(this.userRate).toFixed(2),"/",Vr.entries.Lcz_Stay)))))}static get watchers(){return{selectedUnits:["handleSelctedUnits"]}}};Jr.style=Wr;function qr(t,e){return function i(){return t.apply(e,arguments)}}const{toString:Zr}=Object.prototype;const{getPrototypeOf:Xr}=Object;const Qr=(t=>e=>{const i=Zr.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null));const ta=t=>{t=t.toLowerCase();return e=>Qr(e)===t};const ea=t=>e=>typeof e===t;const{isArray:ia}=Array;const sa=ea("undefined");function na(t){return t!==null&&!sa(t)&&t.constructor!==null&&!sa(t.constructor)&&la(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const oa=ta("ArrayBuffer");function ra(t){let e;if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){e=ArrayBuffer.isView(t)}else{e=t&&t.buffer&&oa(t.buffer)}return e}const aa=ea("string");const la=ea("function");const ha=ea("number");const ca=t=>t!==null&&typeof t==="object";const da=t=>t===true||t===false;const ua=t=>{if(Qr(t)!=="object"){return false}const e=Xr(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};const fa=ta("Date");const pa=ta("File");const ga=ta("Blob");const ma=ta("FileList");const ba=t=>ca(t)&&la(t.pipe);const wa=t=>{let e;return t&&(typeof FormData==="function"&&t instanceof FormData||la(t.append)&&((e=Qr(t))==="formdata"||e==="object"&&la(t.toString)&&t.toString()==="[object FormData]"))};const ya=ta("URLSearchParams");const va=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ka(t,e,{allOwnKeys:i=false}={}){if(t===null||typeof t==="undefined"){return}let s;let n;if(typeof t!=="object"){t=[t]}if(ia(t)){for(s=0,n=t.length;s<n;s++){e.call(null,t[s],s,t)}}else{const n=i?Object.getOwnPropertyNames(t):Object.keys(t);const o=n.length;let r;for(s=0;s<o;s++){r=n[s];e.call(null,t[r],r,t)}}}function Da(t,e){e=e.toLowerCase();const i=Object.keys(t);let s=i.length;let n;while(s-- >0){n=i[s];if(e===n.toLowerCase()){return n}}return null}const xa=(()=>{if(typeof globalThis!=="undefined")return globalThis;return typeof self!=="undefined"?self:typeof window!=="undefined"?window:global})();const _a=t=>!sa(t)&&t!==xa;function Ea(){const{caseless:t}=_a(this)&&this||{};const e={};const i=(i,s)=>{const n=t&&Da(e,s)||s;if(ua(e[n])&&ua(i)){e[n]=Ea(e[n],i)}else if(ua(i)){e[n]=Ea({},i)}else if(ia(i)){e[n]=i.slice()}else{e[n]=i}};for(let t=0,e=arguments.length;t<e;t++){arguments[t]&&ka(arguments[t],i)}return e}const Oa=(t,e,i,{allOwnKeys:s}={})=>{ka(e,((e,s)=>{if(i&&la(e)){t[s]=qr(e,i)}else{t[s]=e}}),{allOwnKeys:s});return t};const Ta=t=>{if(t.charCodeAt(0)===65279){t=t.slice(1)}return t};const Ca=(t,e,i,s)=>{t.prototype=Object.create(e.prototype,s);t.prototype.constructor=t;Object.defineProperty(t,"super",{value:e.prototype});i&&Object.assign(t.prototype,i)};const Sa=(t,e,i,s)=>{let n;let o;let r;const a={};e=e||{};if(t==null)return e;do{n=Object.getOwnPropertyNames(t);o=n.length;while(o-- >0){r=n[o];if((!s||s(r,t,e))&&!a[r]){e[r]=t[r];a[r]=true}}t=i!==false&&Xr(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e};const Na=(t,e,i)=>{t=String(t);if(i===undefined||i>t.length){i=t.length}i-=e.length;const s=t.indexOf(e,i);return s!==-1&&s===i};const Ma=t=>{if(!t)return null;if(ia(t))return t;let e=t.length;if(!ha(e))return null;const i=new Array(e);while(e-- >0){i[e]=t[e]}return i};const Ia=(t=>e=>t&&e instanceof t)(typeof Uint8Array!=="undefined"&&Xr(Uint8Array));const Aa=(t,e)=>{const i=t&&t[Symbol.iterator];const s=i.call(t);let n;while((n=s.next())&&!n.done){const i=n.value;e.call(t,i[0],i[1])}};const Ra=(t,e)=>{let i;const s=[];while((i=t.exec(e))!==null){s.push(i)}return s};const Ya=ta("HTMLFormElement");const Ba=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function t(e,i,s){return i.toUpperCase()+s}));const La=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype);const ja=ta("RegExp");const Pa=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t);const s={};ka(i,((i,n)=>{let o;if((o=e(i,n,t))!==false){s[n]=o||i}}));Object.defineProperties(t,s)};const $a=t=>{Pa(t,((e,i)=>{if(la(t)&&["arguments","caller","callee"].indexOf(i)!==-1){return false}const s=t[i];if(!la(s))return;e.enumerable=false;if("writable"in e){e.writable=false;return}if(!e.set){e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}}}))};const Ha=(t,e)=>{const i={};const s=t=>{t.forEach((t=>{i[t]=true}))};ia(t)?s(t):s(String(t).split(e));return i};const Ua=()=>{};const Ga=(t,e)=>{t=+t;return Number.isFinite(t)?t:e};const Fa="abcdefghijklmnopqrstuvwxyz";const za="0123456789";const Va={DIGIT:za,ALPHA:Fa,ALPHA_DIGIT:Fa+Fa.toUpperCase()+za};const Ka=(t=16,e=Va.ALPHA_DIGIT)=>{let i="";const{length:s}=e;while(t--){i+=e[Math.random()*s|0]}return i};function Wa(t){return!!(t&&la(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Ja=t=>{const e=new Array(10);const i=(t,s)=>{if(ca(t)){if(e.indexOf(t)>=0){return}if(!("toJSON"in t)){e[s]=t;const n=ia(t)?[]:{};ka(t,((t,e)=>{const o=i(t,s+1);!sa(o)&&(n[e]=o)}));e[s]=undefined;return n}}return t};return i(t,0)};const qa=ta("AsyncFunction");const Za=t=>t&&(ca(t)||la(t))&&la(t.then)&&la(t.catch);const Xa={isArray:ia,isArrayBuffer:oa,isBuffer:na,isFormData:wa,isArrayBufferView:ra,isString:aa,isNumber:ha,isBoolean:da,isObject:ca,isPlainObject:ua,isUndefined:sa,isDate:fa,isFile:pa,isBlob:ga,isRegExp:ja,isFunction:la,isStream:ba,isURLSearchParams:ya,isTypedArray:Ia,isFileList:ma,forEach:ka,merge:Ea,extend:Oa,trim:va,stripBOM:Ta,inherits:Ca,toFlatObject:Sa,kindOf:Qr,kindOfTest:ta,endsWith:Na,toArray:Ma,forEachEntry:Aa,matchAll:Ra,isHTMLForm:Ya,hasOwnProperty:La,hasOwnProp:La,reduceDescriptors:Pa,freezeMethods:$a,toObjectSet:Ha,toCamelCase:Ba,noop:Ua,toFiniteNumber:Ga,findKey:Da,global:xa,isContextDefined:_a,ALPHABET:Va,generateString:Ka,isSpecCompliantForm:Wa,toJSONObject:Ja,isAsyncFn:qa,isThenable:Za};function Qa(t,e,i,s,n){Error.call(this);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else{this.stack=(new Error).stack}this.message=t;this.name="AxiosError";e&&(this.code=e);i&&(this.config=i);s&&(this.request=s);n&&(this.response=n)}Xa.inherits(Qa,Error,{toJSON:function t(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xa.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const tl=Qa.prototype;const el={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{el[t]={value:t}}));Object.defineProperties(Qa,el);Object.defineProperty(tl,"isAxiosError",{value:true});Qa.from=(t,e,i,s,n,o)=>{const r=Object.create(tl);Xa.toFlatObject(t,r,(function t(e){return e!==Error.prototype}),(t=>t!=="isAxiosError"));Qa.call(r,t.message,e,i,s,n);r.cause=t;r.name=t.name;o&&Object.assign(r,o);return r};const il=null;function sl(t){return Xa.isPlainObject(t)||Xa.isArray(t)}function nl(t){return Xa.endsWith(t,"[]")?t.slice(0,-2):t}function ol(t,e,i){if(!t)return e;return t.concat(e).map((function t(e,s){e=nl(e);return!i&&s?"["+e+"]":e})).join(i?".":"")}function rl(t){return Xa.isArray(t)&&!t.some(sl)}const al=Xa.toFlatObject(Xa,{},null,(function t(e){return/^is[A-Z]/.test(e)}));function ll(t,e,i){if(!Xa.isObject(t)){throw new TypeError("target must be an object")}e=e||new FormData;i=Xa.toFlatObject(i,{metaTokens:true,dots:false,indexes:false},false,(function t(e,i){return!Xa.isUndefined(i[e])}));const s=i.metaTokens;const n=i.visitor||c;const o=i.dots;const r=i.indexes;const a=i.Blob||typeof Blob!=="undefined"&&Blob;const l=a&&Xa.isSpecCompliantForm(e);if(!Xa.isFunction(n)){throw new TypeError("visitor must be a function")}function h(t){if(t===null)return"";if(Xa.isDate(t)){return t.toISOString()}if(!l&&Xa.isBlob(t)){throw new Qa("Blob is not supported. Use a Buffer instead.")}if(Xa.isArrayBuffer(t)||Xa.isTypedArray(t)){return l&&typeof Blob==="function"?new Blob([t]):Buffer.from(t)}return t}function c(t,i,n){let a=t;if(t&&!n&&typeof t==="object"){if(Xa.endsWith(i,"{}")){i=s?i:i.slice(0,-2);t=JSON.stringify(t)}else if(Xa.isArray(t)&&rl(t)||(Xa.isFileList(t)||Xa.endsWith(i,"[]"))&&(a=Xa.toArray(t))){i=nl(i);a.forEach((function t(s,n){!(Xa.isUndefined(s)||s===null)&&e.append(r===true?ol([i],n,o):r===null?i:i+"[]",h(s))}));return false}}if(sl(t)){return true}e.append(ol(n,i,o),h(t));return false}const d=[];const u=Object.assign(al,{defaultVisitor:c,convertValue:h,isVisitable:sl});function f(t,i){if(Xa.isUndefined(t))return;if(d.indexOf(t)!==-1){throw Error("Circular reference detected in "+i.join("."))}d.push(t);Xa.forEach(t,(function t(s,o){const r=!(Xa.isUndefined(s)||s===null)&&n.call(e,s,Xa.isString(o)?o.trim():o,i,u);if(r===true){f(s,i?i.concat(o):[o])}}));d.pop()}if(!Xa.isObject(t)){throw new TypeError("data must be an object")}f(t);return e}function hl(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function t(i){return e[i]}))}function cl(t,e){this._pairs=[];t&&ll(t,this,e)}const dl=cl.prototype;dl.append=function t(e,i){this._pairs.push([e,i])};dl.toString=function t(e){const i=e?function(t){return e.call(this,t,hl)}:hl;return this._pairs.map((function t(e){return i(e[0])+"="+i(e[1])}),"").join("&")};function ul(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fl(t,e,i){if(!e){return t}const s=i&&i.encode||ul;const n=i&&i.serialize;let o;if(n){o=n(e,i)}else{o=Xa.isURLSearchParams(e)?e.toString():new cl(e,i).toString(s)}if(o){const e=t.indexOf("#");if(e!==-1){t=t.slice(0,e)}t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class pl{constructor(){this.handlers=[]}use(t,e,i){this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:false,runWhen:i?i.runWhen:null});return this.handlers.length-1}eject(t){if(this.handlers[t]){this.handlers[t]=null}}clear(){if(this.handlers){this.handlers=[]}}forEach(t){Xa.forEach(this.handlers,(function e(i){if(i!==null){t(i)}}))}}const gl={silentJSONParsing:true,forcedJSONParsing:true,clarifyTimeoutError:false};const ml=typeof URLSearchParams!=="undefined"?URLSearchParams:cl;const bl=typeof FormData!=="undefined"?FormData:null;const wl=typeof Blob!=="undefined"?Blob:null;const yl=(()=>{let t;if(typeof navigator!=="undefined"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")){return false}return typeof window!=="undefined"&&typeof document!=="undefined"})();const vl=(()=>typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts==="function")();const kl={isBrowser:true,classes:{URLSearchParams:ml,FormData:bl,Blob:wl},isStandardBrowserEnv:yl,isStandardBrowserWebWorkerEnv:vl,protocols:["http","https","file","blob","url","data"]};function Dl(t,e){return ll(t,new kl.classes.URLSearchParams,Object.assign({visitor:function(t,e,i,s){return s.defaultVisitor.apply(this,arguments)}},e))}function xl(t){return Xa.matchAll(/\w+|\[(\w*)]/g,t).map((t=>t[0]==="[]"?"":t[1]||t[0]))}function _l(t){const e={};const i=Object.keys(t);let s;const n=i.length;let o;for(s=0;s<n;s++){o=i[s];e[o]=t[o]}return e}function El(t){function e(t,i,s,n){let o=t[n++];const r=Number.isFinite(+o);const a=n>=t.length;o=!o&&Xa.isArray(s)?s.length:o;if(a){if(Xa.hasOwnProp(s,o)){s[o]=[s[o],i]}else{s[o]=i}return!r}if(!s[o]||!Xa.isObject(s[o])){s[o]=[]}const l=e(t,i,s[o],n);if(l&&Xa.isArray(s[o])){s[o]=_l(s[o])}return!r}if(Xa.isFormData(t)&&Xa.isFunction(t.entries)){const i={};Xa.forEachEntry(t,((t,s)=>{e(xl(t),s,i,0)}));return i}return null}function Ol(t,e,i){if(Xa.isString(t)){try{(e||JSON.parse)(t);return Xa.trim(t)}catch(t){if(t.name!=="SyntaxError"){throw t}}}return(i||JSON.stringify)(t)}const Tl={transitional:gl,adapter:["xhr","http"],transformRequest:[function t(e,i){const s=i.getContentType()||"";const n=s.indexOf("application/json")>-1;const o=Xa.isObject(e);if(o&&Xa.isHTMLForm(e)){e=new FormData(e)}const r=Xa.isFormData(e);if(r){if(!n){return e}return n?JSON.stringify(El(e)):e}if(Xa.isArrayBuffer(e)||Xa.isBuffer(e)||Xa.isStream(e)||Xa.isFile(e)||Xa.isBlob(e)){return e}if(Xa.isArrayBufferView(e)){return e.buffer}if(Xa.isURLSearchParams(e)){i.setContentType("application/x-www-form-urlencoded;charset=utf-8",false);return e.toString()}let a;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1){return Dl(e,this.formSerializer).toString()}if((a=Xa.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ll(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}if(o||n){i.setContentType("application/json",false);return Ol(e)}return e}],transformResponse:[function t(e){const i=this.transitional||Tl.transitional;const s=i&&i.forcedJSONParsing;const n=this.responseType==="json";if(e&&Xa.isString(e)&&(s&&!this.responseType||n)){const t=i&&i.silentJSONParsing;const s=!t&&n;try{return JSON.parse(e)}catch(t){if(s){if(t.name==="SyntaxError"){throw Qa.from(t,Qa.ERR_BAD_RESPONSE,this,null,this.response)}throw t}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kl.classes.FormData,Blob:kl.classes.Blob},validateStatus:function t(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":undefined}}};Xa.forEach(["delete","get","head","post","put","patch"],(t=>{Tl.headers[t]={}}));const Cl=Xa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Sl=t=>{const e={};let i;let s;let n;t&&t.split("\n").forEach((function t(o){n=o.indexOf(":");i=o.substring(0,n).trim().toLowerCase();s=o.substring(n+1).trim();if(!i||e[i]&&Cl[i]){return}if(i==="set-cookie"){if(e[i]){e[i].push(s)}else{e[i]=[s]}}else{e[i]=e[i]?e[i]+", "+s:s}}));return e};const Nl=Symbol("internals");function Ml(t){return t&&String(t).trim().toLowerCase()}function Il(t){if(t===false||t==null){return t}return Xa.isArray(t)?t.map(Il):String(t)}function Al(t){const e=Object.create(null);const i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;while(s=i.exec(t)){e[s[1]]=s[2]}return e}const Rl=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Yl(t,e,i,s,n){if(Xa.isFunction(s)){return s.call(this,e,i)}if(n){e=i}if(!Xa.isString(e))return;if(Xa.isString(s)){return e.indexOf(s)!==-1}if(Xa.isRegExp(s)){return s.test(e)}}function Bl(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,i)=>e.toUpperCase()+i))}function Ll(t,e){const i=Xa.toCamelCase(" "+e);["get","set","has"].forEach((s=>{Object.defineProperty(t,s+i,{value:function(t,i,n){return this[s].call(this,e,t,i,n)},configurable:true})}))}class jl{constructor(t){t&&this.set(t)}set(t,e,i){const s=this;function n(t,e,i){const n=Ml(e);if(!n){throw new Error("header name must be a non-empty string")}const o=Xa.findKey(s,n);if(!o||s[o]===undefined||i===true||i===undefined&&s[o]!==false){s[o||e]=Il(t)}}const o=(t,e)=>Xa.forEach(t,((t,i)=>n(t,i,e)));if(Xa.isPlainObject(t)||t instanceof this.constructor){o(t,e)}else if(Xa.isString(t)&&(t=t.trim())&&!Rl(t)){o(Sl(t),e)}else{t!=null&&n(e,t,i)}return this}get(t,e){t=Ml(t);if(t){const i=Xa.findKey(this,t);if(i){const t=this[i];if(!e){return t}if(e===true){return Al(t)}if(Xa.isFunction(e)){return e.call(this,t,i)}if(Xa.isRegExp(e)){return e.exec(t)}throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){t=Ml(t);if(t){const i=Xa.findKey(this,t);return!!(i&&this[i]!==undefined&&(!e||Yl(this,this[i],i,e)))}return false}delete(t,e){const i=this;let s=false;function n(t){t=Ml(t);if(t){const n=Xa.findKey(i,t);if(n&&(!e||Yl(i,i[n],n,e))){delete i[n];s=true}}}if(Xa.isArray(t)){t.forEach(n)}else{n(t)}return s}clear(t){const e=Object.keys(this);let i=e.length;let s=false;while(i--){const n=e[i];if(!t||Yl(this,this[n],n,t,true)){delete this[n];s=true}}return s}normalize(t){const e=this;const i={};Xa.forEach(this,((s,n)=>{const o=Xa.findKey(i,n);if(o){e[o]=Il(s);delete e[n];return}const r=t?Bl(n):String(n).trim();if(r!==n){delete e[n]}e[r]=Il(s);i[r]=true}));return this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);Xa.forEach(this,((i,s)=>{i!=null&&i!==false&&(e[s]=t&&Xa.isArray(i)?i.join(", "):i)}));return e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);e.forEach((t=>i.set(t)));return i}static accessor(t){const e=this[Nl]=this[Nl]={accessors:{}};const i=e.accessors;const s=this.prototype;function n(t){const e=Ml(t);if(!i[e]){Ll(s,t);i[e]=true}}Xa.isArray(t)?t.forEach(n):n(t);return this}}jl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xa.reduceDescriptors(jl.prototype,(({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[i]=t}}}));Xa.freezeMethods(jl);function Pl(t,e){const i=this||Tl;const s=e||i;const n=jl.from(s.headers);let o=s.data;Xa.forEach(t,(function t(s){o=s.call(i,o,n.normalize(),e?e.status:undefined)}));n.normalize();return o}function $l(t){return!!(t&&t.__CANCEL__)}function Hl(t,e,i){Qa.call(this,t==null?"canceled":t,Qa.ERR_CANCELED,e,i);this.name="CanceledError"}Xa.inherits(Hl,Qa,{__CANCEL__:true});function Ul(t,e,i){const s=i.config.validateStatus;if(!i.status||!s||s(i.status)){t(i)}else{e(new Qa("Request failed with status code "+i.status,[Qa.ERR_BAD_REQUEST,Qa.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}}const Gl=kl.isStandardBrowserEnv?function t(){return{write:function t(e,i,s,n,o,r){const a=[];a.push(e+"="+encodeURIComponent(i));if(Xa.isNumber(s)){a.push("expires="+new Date(s).toGMTString())}if(Xa.isString(n)){a.push("path="+n)}if(Xa.isString(o)){a.push("domain="+o)}if(r===true){a.push("secure")}document.cookie=a.join("; ")},read:function t(e){const i=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function t(e){this.write(e,"",Date.now()-864e5)}}}():function t(){return{write:function t(){},read:function t(){return null},remove:function t(){}}}();function Fl(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function zl(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Vl(t,e){if(t&&!Fl(e)){return zl(t,e)}return e}const Kl=kl.isStandardBrowserEnv?function t(){const e=/(msie|trident)/i.test(navigator.userAgent);const i=document.createElement("a");let s;function n(t){let s=t;if(e){i.setAttribute("href",s);s=i.href}i.setAttribute("href",s);return{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}s=n(window.location.href);return function t(e){const i=Xa.isString(e)?n(e):e;return i.protocol===s.protocol&&i.host===s.host}}():function t(){return function t(){return true}}();function Wl(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Jl(t,e){t=t||10;const i=new Array(t);const s=new Array(t);let n=0;let o=0;let r;e=e!==undefined?e:1e3;return function a(l){const h=Date.now();const c=s[o];if(!r){r=h}i[n]=l;s[n]=h;let d=o;let u=0;while(d!==n){u+=i[d++];d=d%t}n=(n+1)%t;if(n===o){o=(o+1)%t}if(h-r<e){return}const f=c&&h-c;return f?Math.round(u*1e3/f):undefined}}function ql(t,e){let i=0;const s=Jl(50,250);return n=>{const o=n.loaded;const r=n.lengthComputable?n.total:undefined;const a=o-i;const l=s(a);const h=o<=r;i=o;const c={loaded:o,total:r,progress:r?o/r:undefined,bytes:a,rate:l?l:undefined,estimated:l&&r&&h?(r-o)/l:undefined,event:n};c[e?"download":"upload"]=true;t(c)}}const Zl=typeof XMLHttpRequest!=="undefined";const Xl=Zl&&function(t){return new Promise((function e(i,s){let n=t.data;const o=jl.from(t.headers).normalize();const r=t.responseType;let a;function l(){if(t.cancelToken){t.cancelToken.unsubscribe(a)}if(t.signal){t.signal.removeEventListener("abort",a)}}let h;if(Xa.isFormData(n)){if(kl.isStandardBrowserEnv||kl.isStandardBrowserWebWorkerEnv){o.setContentType(false)}else if(!o.getContentType(/^\s*multipart\/form-data/)){o.setContentType("multipart/form-data")}else if(Xa.isString(h=o.getContentType())){o.setContentType(h.replace(/^\s*(multipart\/form-data);+/,"$1"))}}let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"";const i=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(e+":"+i))}const d=Vl(t.baseURL,t.url);c.open(t.method.toUpperCase(),fl(d,t.params,t.paramsSerializer),true);c.timeout=t.timeout;function u(){if(!c){return}const e=jl.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());const n=!r||r==="text"||r==="json"?c.responseText:c.response;const o={data:n,status:c.status,statusText:c.statusText,headers:e,config:t,request:c};Ul((function t(e){i(e);l()}),(function t(e){s(e);l()}),o);c=null}if("onloadend"in c){c.onloadend=u}else{c.onreadystatechange=function t(){if(!c||c.readyState!==4){return}if(c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)){return}setTimeout(u)}}c.onabort=function e(){if(!c){return}s(new Qa("Request aborted",Qa.ECONNABORTED,t,c));c=null};c.onerror=function e(){s(new Qa("Network Error",Qa.ERR_NETWORK,t,c));c=null};c.ontimeout=function e(){let i=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const n=t.transitional||gl;if(t.timeoutErrorMessage){i=t.timeoutErrorMessage}s(new Qa(i,n.clarifyTimeoutError?Qa.ETIMEDOUT:Qa.ECONNABORTED,t,c));c=null};if(kl.isStandardBrowserEnv){const e=Kl(d)&&t.xsrfCookieName&&Gl.read(t.xsrfCookieName);if(e){o.set(t.xsrfHeaderName,e)}}n===undefined&&o.setContentType(null);if("setRequestHeader"in c){Xa.forEach(o.toJSON(),(function t(e,i){c.setRequestHeader(i,e)}))}if(!Xa.isUndefined(t.withCredentials)){c.withCredentials=!!t.withCredentials}if(r&&r!=="json"){c.responseType=t.responseType}if(typeof t.onDownloadProgress==="function"){c.addEventListener("progress",ql(t.onDownloadProgress,true))}if(typeof t.onUploadProgress==="function"&&c.upload){c.upload.addEventListener("progress",ql(t.onUploadProgress))}if(t.cancelToken||t.signal){a=e=>{if(!c){return}s(!e||e.type?new Hl(null,t,c):e);c.abort();c=null};t.cancelToken&&t.cancelToken.subscribe(a);if(t.signal){t.signal.aborted?a():t.signal.addEventListener("abort",a)}}const f=Wl(d);if(f&&kl.protocols.indexOf(f)===-1){s(new Qa("Unsupported protocol "+f+":",Qa.ERR_BAD_REQUEST,t));return}c.send(n||null)}))};const Ql={http:il,xhr:Xl};Xa.forEach(Ql,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const th=t=>`- ${t}`;const eh=t=>Xa.isFunction(t)||t===null||t===false;const ih={getAdapter:t=>{t=Xa.isArray(t)?t:[t];const{length:e}=t;let i;let s;const n={};for(let o=0;o<e;o++){i=t[o];let e;s=i;if(!eh(i)){s=Ql[(e=String(i)).toLowerCase()];if(s===undefined){throw new Qa(`Unknown adapter '${e}'`)}}if(s){break}n[e||"#"+o]=s}if(!s){const t=Object.entries(n).map((([t,e])=>`adapter ${t} `+(e===false?"is not supported by the environment":"is not available in the build")));let i=e?t.length>1?"since :\n"+t.map(th).join("\n"):" "+th(t[0]):"as no adapter specified";throw new Qa(`There is no suitable adapter to dispatch the request `+i,"ERR_NOT_SUPPORT")}return s},adapters:Ql};function sh(t){if(t.cancelToken){t.cancelToken.throwIfRequested()}if(t.signal&&t.signal.aborted){throw new Hl(null,t)}}function nh(t){sh(t);t.headers=jl.from(t.headers);t.data=Pl.call(t,t.transformRequest);if(["post","put","patch"].indexOf(t.method)!==-1){t.headers.setContentType("application/x-www-form-urlencoded",false)}const e=ih.getAdapter(t.adapter||Tl.adapter);return e(t).then((function e(i){sh(t);i.data=Pl.call(t,t.transformResponse,i);i.headers=jl.from(i.headers);return i}),(function e(i){if(!$l(i)){sh(t);if(i&&i.response){i.response.data=Pl.call(t,t.transformResponse,i.response);i.response.headers=jl.from(i.response.headers)}}return Promise.reject(i)}))}const oh=t=>t instanceof jl?t.toJSON():t;function rh(t,e){e=e||{};const i={};function s(t,e,i){if(Xa.isPlainObject(t)&&Xa.isPlainObject(e)){return Xa.merge.call({caseless:i},t,e)}else if(Xa.isPlainObject(e)){return Xa.merge({},e)}else if(Xa.isArray(e)){return e.slice()}return e}function n(t,e,i){if(!Xa.isUndefined(e)){return s(t,e,i)}else if(!Xa.isUndefined(t)){return s(undefined,t,i)}}function o(t,e){if(!Xa.isUndefined(e)){return s(undefined,e)}}function r(t,e){if(!Xa.isUndefined(e)){return s(undefined,e)}else if(!Xa.isUndefined(t)){return s(undefined,t)}}function a(i,n,o){if(o in e){return s(i,n)}else if(o in t){return s(undefined,i)}}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(t,e)=>n(oh(t),oh(e),true)};Xa.forEach(Object.keys(Object.assign({},t,e)),(function s(o){const r=l[o]||n;const h=r(t[o],e[o],o);Xa.isUndefined(h)&&r!==a||(i[o]=h)}));return i}const ah="1.6.0";const lh={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{lh[t]=function i(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}}));const hh={};lh.transitional=function t(e,i,s){function n(t,e){return"[Axios v"+ah+"] Transitional option '"+t+"'"+e+(s?". "+s:"")}return(t,s,o)=>{if(e===false){throw new Qa(n(s," has been removed"+(i?" in "+i:"")),Qa.ERR_DEPRECATED)}if(i&&!hh[s]){hh[s]=true;console.warn(n(s," has been deprecated since v"+i+" and will be removed in the near future"))}return e?e(t,s,o):true}};function ch(t,e,i){if(typeof t!=="object"){throw new Qa("options must be an object",Qa.ERR_BAD_OPTION_VALUE)}const s=Object.keys(t);let n=s.length;while(n-- >0){const o=s[n];const r=e[o];if(r){const e=t[o];const i=e===undefined||r(e,o,t);if(i!==true){throw new Qa("option "+o+" must be "+i,Qa.ERR_BAD_OPTION_VALUE)}continue}if(i!==true){throw new Qa("Unknown option "+o,Qa.ERR_BAD_OPTION)}}}const dh={assertOptions:ch,validators:lh};const uh=dh.validators;class fh{constructor(t){this.defaults=t;this.interceptors={request:new pl,response:new pl}}request(t,e){if(typeof t==="string"){e=e||{};e.url=t}else{e=t||{}}e=rh(this.defaults,e);const{transitional:i,paramsSerializer:s,headers:n}=e;if(i!==undefined){dh.assertOptions(i,{silentJSONParsing:uh.transitional(uh.boolean),forcedJSONParsing:uh.transitional(uh.boolean),clarifyTimeoutError:uh.transitional(uh.boolean)},false)}if(s!=null){if(Xa.isFunction(s)){e.paramsSerializer={serialize:s}}else{dh.assertOptions(s,{encode:uh.function,serialize:uh.function},true)}}e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=n&&Xa.merge(n.common,n[e.method]);n&&Xa.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete n[t]}));e.headers=jl.concat(o,n);const r=[];let a=true;this.interceptors.request.forEach((function t(i){if(typeof i.runWhen==="function"&&i.runWhen(e)===false){return}a=a&&i.synchronous;r.unshift(i.fulfilled,i.rejected)}));const l=[];this.interceptors.response.forEach((function t(e){l.push(e.fulfilled,e.rejected)}));let h;let c=0;let d;if(!a){const t=[nh.bind(this),undefined];t.unshift.apply(t,r);t.push.apply(t,l);d=t.length;h=Promise.resolve(e);while(c<d){h=h.then(t[c++],t[c++])}return h}d=r.length;let u=e;c=0;while(c<d){const t=r[c++];const e=r[c++];try{u=t(u)}catch(t){e.call(this,t);break}}try{h=nh.call(this,u)}catch(t){return Promise.reject(t)}c=0;d=l.length;while(c<d){h=h.then(l[c++],l[c++])}return h}getUri(t){t=rh(this.defaults,t);const e=Vl(t.baseURL,t.url);return fl(e,t.params,t.paramsSerializer)}}Xa.forEach(["delete","get","head","options"],(function t(e){fh.prototype[e]=function(t,i){return this.request(rh(i||{},{method:e,url:t,data:(i||{}).data}))}}));Xa.forEach(["post","put","patch"],(function t(e){function i(t){return function i(s,n,o){return this.request(rh(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}fh.prototype[e]=i();fh.prototype[e+"Form"]=i(true)}));class ph{constructor(t){if(typeof t!=="function"){throw new TypeError("executor must be a function.")}let e;this.promise=new Promise((function t(i){e=i}));const i=this;this.promise.then((t=>{if(!i._listeners)return;let e=i._listeners.length;while(e-- >0){i._listeners[e](t)}i._listeners=null}));this.promise.then=t=>{let e;const s=new Promise((t=>{i.subscribe(t);e=t})).then(t);s.cancel=function t(){i.unsubscribe(e)};return s};t((function t(s,n,o){if(i.reason){return}i.reason=new Hl(s,n,o);e(i.reason)}))}throwIfRequested(){if(this.reason){throw this.reason}}subscribe(t){if(this.reason){t(this.reason);return}if(this._listeners){this._listeners.push(t)}else{this._listeners=[t]}}unsubscribe(t){if(!this._listeners){return}const e=this._listeners.indexOf(t);if(e!==-1){this._listeners.splice(e,1)}}static source(){let t;const e=new ph((function e(i){t=i}));return{token:e,cancel:t}}}function gh(t){return function e(i){return t.apply(null,i)}}function mh(t){return Xa.isObject(t)&&t.isAxiosError===true}const bh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bh).forEach((([t,e])=>{bh[e]=t}));function wh(t){const e=new fh(t);const i=qr(fh.prototype.request,e);Xa.extend(i,fh.prototype,e,{allOwnKeys:true});Xa.extend(i,e,null,{allOwnKeys:true});i.create=function e(i){return wh(rh(t,i))};return i}const yh=wh(Tl);yh.Axios=fh;yh.CanceledError=Hl;yh.CancelToken=ph;yh.isCancel=$l;yh.VERSION=ah;yh.toFormData=ll;yh.AxiosError=Qa;yh.Cancel=yh.CanceledError;yh.all=function t(e){return Promise.all(e)};yh.spread=gh;yh.isAxiosError=mh;yh.mergeConfig=rh;yh.AxiosHeaders=jl;yh.formToJSON=t=>El(Xa.isHTMLForm(t)?new FormData(t):t);yh.getAdapter=ih.getAdapter;yh.HttpStatusCode=bh;yh.default=yh;async function vh(t){const e=[];const i=await Eh();for(const s of t){for(const t of s.days){for(const s of t.room_types){kh(s.physicalrooms,e,i)}}}return e}function kh(t,e,i){for(const s of t){for(const t in s.calendar_cell){if(s.calendar_cell[t].Is_Available===false){Sh(s.calendar_cell[t],e,i)}}}}const Dh={"004":"BLOCKED","003":"BLOCKED-WITH-DATES","002":"BLOCKED"};const xh={"000":"IN-HOUSE","001":"PENDING-CONFIRMATION","002":"CONFIRMED","003":"CHECKED-OUT"};function _h(t,e){if(t===null&&e===null)return"";if(e!==null){return`${t!==null&&t!==void 0?t:""} , ${e!==null&&e!==void 0?e:""}`}return t}async function Eh(){try{const t=JSON.parse(sessionStorage.getItem("token"));if(t){const{data:e}=await yh.post(`/Get_Setup_Entries_By_TBL_NAME_Multi?Ticket=${t}`,{TBL_NAMES:["_STAY_STATUS"]});return e.My_Result.map((t=>({code:t.CODE_NAME,value:t.CODE_VALUE_EN})))}else{throw new Error("Invalid Token")}}catch(t){console.log(t)}}function Oh(t,e,i){const s=new Date(t);s.setHours(e);s.setMinutes(i);return`${Vr.entries.Lcz_BlockedTill} ${c(s).format("MMM DD, HH:mm")}`}function Th(t,e){var i,s;if(Er(t.STAY_STATUS_CODE)){return{ID:t.POOL,NOTES:"",BALANCE:"",NAME:t.My_Block_Info.NOTES!==""?t.My_Block_Info.NOTES:t.STAY_STATUS_CODE==="003"?Oh(t.My_Block_Info.BLOCKED_TILL_DATE,t.My_Block_Info.BLOCKED_TILL_HOUR,t.My_Block_Info.BLOCKED_TILL_MINUTE):e.find((e=>e.code===t.STAY_STATUS_CODE)).value||"",RELEASE_AFTER_HOURS:t.My_Block_Info.DESCRIPTION,PR_ID:t.My_Block_Info.pr_id,ENTRY_DATE:t.My_Block_Info.BLOCKED_TILL_DATE,ENTRY_HOUR:t.My_Block_Info.BLOCKED_TILL_HOUR,ENTRY_MINUTE:t.My_Block_Info.BLOCKED_TILL_MINUTE,OPTIONAL_REASON:t.My_Block_Info.NOTES,FROM_DATE:t.DATE,TO_DATE:t.DATE,NO_OF_DAYS:1,STATUS:Dh[t.STAY_STATUS_CODE],POOL:t.POOL,STATUS_CODE:t.STAY_STATUS_CODE,OUT_OF_SERVICE:t.STAY_STATUS_CODE==="004",FROM_DATE_STR:t.My_Block_Info.format.from_date,TO_DATE_STR:t.My_Block_Info.format.to_date}}return{ID:t.POOL,TO_DATE:t.DATE,FROM_DATE:t.DATE,NO_OF_DAYS:1,STATUS:xh[(i=t.booking)===null||i===void 0?void 0:i.status.code],NAME:_h(t.room.guest.first_name,t.room.guest.last_name),IDENTIFIER:t.room.identifier,PR_ID:t.pr_id,POOL:t.POOL,BOOKING_NUMBER:t.booking.booking_nbr,NOTES:t.booking.remark,is_direct:t.booking.is_direct,BALANCE:(s=t.booking.financial)===null||s===void 0?void 0:s.due_amount}}function Ch(t,e){t.NO_OF_DAYS=Dr(t.FROM_DATE,e.DATE);t.TO_DATE=e.DATE;if(e.booking){const{arrival:i}=e.booking;Object.assign(t,{ARRIVAL_TIME:i.description})}return t}function Sh(t,e,i){const s=e.findIndex((e=>e.POOL===t.POOL));if(s===-1){const s=Th(t,i);e.push(s)}else{const i=Ch(e[s],t);e[s]=i}}function Nh(t){let e=[];const i=e=>{const i=c();const s=c(e.to_date,"YYYY-MM-DD");const n=c(e.from_date,"YYYY-MM-DD");if(n.isSame(i,"day")&&i.hour()>=12){return xh["000"]}else if(i.isAfter(n,"day")&&i.isBefore(s,"day")){return xh["000"]}else if(s.isSame(i,"day")&&i.hour()<12){return xh["000"]}else if(s.isSame(i,"day")&&i.hour()>=12||s.isBefore(i,"day")){return xh["003"]}else{return xh[(t===null||t===void 0?void 0:t.status.code)||"001"]}};t.rooms.forEach((s=>{var n,o;e.push({ID:s["assigned_units_pool"],TO_DATE:s.to_date,FROM_DATE:s.from_date,NO_OF_DAYS:s.days.length,ARRIVAL:t.arrival,IS_EDITABLE:true,BALANCE:(n=t.financial)===null||n===void 0?void 0:n.due_amount,STATUS:i(s),NAME:_h(s.guest.first_name,s.guest.last_name),PHONE:(o=t.guest.mobile)!==null&&o!==void 0?o:"",ENTRY_DATE:"12-12-2023",RATE:s.total,RATE_PLAN:s.rateplan.name,SPLIT_BOOKING:false,RATE_PLAN_ID:s.rateplan.id,IDENTIFIER:s.identifier,RATE_TYPE:s.roomtype.id,ADULTS_COUNT:s.occupancy.adult_nbr,CHILDREN_COUNT:s.occupancy.children_nbr,PR_ID:+s.unit.id,POOL:s["assigned_units_pool"],GUEST:t.guest,ROOMS:t.rooms,BOOKING_NUMBER:t.booking_nbr,cancelation:s.rateplan.cancelation,guarantee:s.rateplan.guarantee,TOTAL_PRICE:s.total,COUNTRY:t.guest.country_id,FROM_DATE_STR:t.format.from_date,TO_DATE_STR:t.format.to_date,adult_child_offering:s.rateplan.selected_variation.adult_child_offering,ARRIVAL_TIME:t.arrival.description,origin:t.origin,channel_booking_nbr:t.channel_booking_nbr,is_direct:t.is_direct,NOTES:t.remark,SOURCE:{code:t.source.code,description:t.source.description,tag:t.source.tag}})}));return e}async function Mh(t){const e=await Eh();return{ID:t.POOL,NOTES:"",BALANCE:"",NAME:t.NOTES!==""?t.NOTES:t.STAY_STATUS_CODE==="003"?Oh(t.BLOCKED_TILL_DATE,t.BLOCKED_TILL_HOUR,t.BLOCKED_TILL_MINUTE):e.find((e=>e.code===t.STAY_STATUS_CODE)).value||"",RELEASE_AFTER_HOURS:t.DESCRIPTION,PR_ID:t.pr_id,ENTRY_DATE:t.BLOCKED_TILL_DATE,ENTRY_HOUR:t.BLOCKED_TILL_HOUR,ENTRY_MINUTE:t.BLOCKED_TILL_MINUTE,OPTIONAL_REASON:t.NOTES,FROM_DATE:t.from_date,TO_DATE:t.to_date,NO_OF_DAYS:Ih(t.from_date,t.to_date),STATUS:Dh[t.STAY_STATUS_CODE],POOL:t.POOL,STATUS_CODE:t.STAY_STATUS_CODE,OUT_OF_SERVICE:t.STAY_STATUS_CODE==="004",FROM_DATE_STR:t.format.from_date,TO_DATE_STR:t.format.to_date}}function Ih(t,e){const i=c(t,"YYYY-MM-DD");const s=c(e,"YYYY-MM-DD");const n=s.diff(i,"days");return n}class Ah{async getCalendarData(t,e,i){try{const s=JSON.parse(sessionStorage.getItem("token"));if(s!==null){const{data:n}=await yh.post(`/Get_Exposed_Calendar?Ticket=${s}`,{propertyid:t,from_date:e,to_date:i});if(n.ExceptionMsg!==""){throw new Error(n.ExceptionMsg)}const o=n.My_Result.months;const r=[];const a=await vh(o);const l=o.map((t=>{r.push({daysCount:t.days.length,monthName:t.description});return t.days.map((e=>({day:vr(e.description,t.description),currentDate:kr(e.description,t.description),dayDisplayName:e.description,rate:e.room_types,unassigned_units_nbr:e.unassigned_units_nbr,occupancy:e.occupancy})))})).flat();return Promise.resolve({ExceptionCode:null,ExceptionMsg:"",My_Params_Get_Rooming_Data:{AC_ID:t,FROM:n.My_Params_Get_Exposed_Calendar.from_date,TO:n.My_Params_Get_Exposed_Calendar.to_date},days:l,months:r,myBookings:a,defaultMonths:o})}}catch(t){console.error(t)}}async fetchGuest(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e!==null){const{data:i}=await yh.post(`/Get_Exposed_Guest?Ticket=${e}`,{email:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}}catch(t){console.log(t);throw new Error(t)}}async editExposedGuest(t,e){try{const i=JSON.parse(sessionStorage.getItem("token"));if(i!==null){const{data:s}=await yh.post(`/Edit_Exposed_Guest?Ticket=${i}`,Object.assign(Object.assign({},t),{book_nbr:e}));if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}return s.My_Result}}catch(t){console.log(t);throw new Error(t)}}async getBookingAvailability(t,e,i,s,n,o,r){try{const a=JSON.parse(sessionStorage.getItem("token"));if(a){const{data:l}=await yh.post(`/Get_Exposed_Booking_Availability?Ticket=${a}`,{propertyid:i,from_date:t,to_date:e,adult_nbr:s.adult,child_nbr:s.child,language:n,currency_ref:r.code,room_type_ids:o});if(l.ExceptionMsg!==""){throw new Error(l.ExceptionMsg)}return l["My_Result"]}else{throw new Error("Token doesn't exist")}}catch(t){console.error(t);throw new Error(t)}}async getCountries(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/Get_Exposed_Countries?Ticket=${e}`,{language:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}}catch(t){console.error(t);throw new Error(t)}}async fetchSetupEntries(){try{const t=JSON.parse(sessionStorage.getItem("token"));if(t){const{data:e}=await yh.post(`/Get_Setup_Entries_By_TBL_NAME_MULTI?Ticket=${t}`,{TBL_NAMES:["_ARRIVAL_TIME","_RATE_PRICING_MODE","_BED_PREFERENCE_TYPE"]});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}const i=e.My_Result;return{arrivalTime:i.filter((t=>t.TBL_NAME==="_ARRIVAL_TIME")),ratePricingMode:i.filter((t=>t.TBL_NAME==="_RATE_PRICING_MODE")),bedPreferenceType:i.filter((t=>t.TBL_NAME==="_BED_PREFERENCE_TYPE"))}}}catch(t){console.error(t);throw new Error(t)}}async getBlockedInfo(){try{const t=JSON.parse(sessionStorage.getItem("token"));if(t){const{data:e}=await yh.post(`/Get_Setup_Entries_By_TBL_NAME_MULTI?Ticket=${t}`,{TBL_NAMES:["_CALENDAR_BLOCKED_TILL"]});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}}catch(t){console.error(t);throw new Error(t)}}async getUserDefaultCountry(){try{const t=JSON.parse(sessionStorage.getItem("token"));if(t){const{data:e}=await yh.post(`/Get_Country_By_IP?Ticket=${t}`,{IP:""});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e["My_Result"]}}catch(t){console.error(t);throw new Error(t)}}async blockUnit(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/Block_Exposed_Unit?Ticket=${e}`,t);if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}console.log(i);return i["My_Params_Block_Exposed_Unit"]}}catch(t){console.error(t);throw new Error(t)}}async getUserInfo(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/GET_EXPOSED_GUEST?Ticket=${e}`,{email:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}else{throw new Error("Invalid Token")}}catch(t){console.error(t);throw new Error(t)}}async getExposedBooking(t,e){try{const i=JSON.parse(sessionStorage.getItem("token"));if(i){const{data:s}=await yh.post(`/Get_Exposed_Booking?Ticket=${i}`,{booking_nbr:t,language:e});if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}return s.My_Result}else{throw new Error("Invalid Token")}}catch(t){console.error(t)}}generateDays(t,e,i){const s=new Date(t);const n=new Date(e);const o=[];while(s<n){o.push({date:s.toISOString().split("T")[0],amount:i});s.setDate(s.getDate()+1)}return o}calculateTotalRate(t,e,i,s){if(i&&s===2){return+t}return+t/+e}async fetchExposedGuest(t,e){try{const i=JSON.parse(sessionStorage.getItem("token"));if(i){const{data:s}=await yh.post(`/Fetch_Exposed_Guests?Ticket=${i}`,{email:t,property_id:e});if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}return s["My_Result"]}else{throw new Error("Token doesn't exist")}}catch(t){console.error(t);throw new Error(t)}}async fetchExposedBookings(t,e,i,s){try{const n=JSON.parse(sessionStorage.getItem("token"));if(n){const{data:o}=await yh.post(`/Fetch_Exposed_Bookings?Ticket=${n}`,{booking_nbr:t,property_id:e,from_date:i,to_date:s});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}return o["My_Result"]}else{throw new Error("Token doesn't exist")}}catch(t){console.error(t);throw new Error(t)}}async getPCICardInfoURL(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/Get_PCI_Card_Info_URL?Ticket=${e}`,{BOOK_NBR:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i["My_Result"]}else{throw new Error("Token doesn't exist")}}catch(t){console.error(t);throw new Error(t)}}async bookUser(t,e,i,s,n,o,r,a,l,h,c,d,u,f,p){console.log(u);try{const g=JSON.parse(sessionStorage.getItem("token"));if(g){const m=xr(i);const b=xr(s);let w={email:t.email||null,first_name:t.firstName,last_name:t.lastName,country_id:t.countryId,city:null,mobile:t.contactNumber,address:"",dob:null,subscribe_to_news_letter:t.emailGuest||false,cci:t.cardNumber?{nbr:t.cardNumber,holder_name:t.cardHolderName,expiry_month:t.expiryMonth,expiry_year:t.expiryYear}:null};if(t.id){w=Object.assign(Object.assign({},w),{id:t.id})}const y={assign_units:true,check_in:e,is_pms:true,is_direct:true,booking:{booking_nbr:c||"",from_date:m,to_date:b,remark:t.message||null,property:{id:a},source:r,currency:h,arrival:u?{code:u}:Object.assign({},t.selectedArrivalTime),guest:d||w,rooms:[...n.map((t=>({identifier:p||null,roomtype:{id:t.roomCategoryId,name:t.roomCategoryName,physicalrooms:null,rateplans:null,availabilities:null,inventory:t.inventory,rate:t.rate/o},rateplan:{id:t.ratePlanId,name:t.ratePlanName,rate_restrictions:null,variations:null,cancelation:t.cancelation,guarantee:t.guarantee},unit:typeof f==="undefined"&&t.roomId===""?null:{id:+f||+t.roomId},occupancy:{adult_nbr:t.adultCount,children_nbr:t.childrenCount,infant_nbr:null},bed_preference:t.preference,from_date:m,to_date:b,notes:null,days:this.generateDays(m,b,this.calculateTotalRate(t.rate,o,t.isRateModified,t.rateType)),guest:{email:null,first_name:t.guestName,last_name:null,country_id:null,city:null,mobile:null,address:null,dob:null,subscribe_to_news_letter:null}}))),...l]}};console.log("book user payload",y);const{data:v}=await yh.post(`/DoReservation?Ticket=${g}`,y);if(v.ExceptionMsg!==""){throw new Error(v.ExceptionMsg)}console.log(v["My_Result"]);return v["My_Result"]}else{throw new Error("Invalid token")}}catch(t){console.error(t);throw new Error(t)}}}const Rh=".sc-igl-block-dates-view-h{display:block}.sc-igl-block-dates-view-h .controlContainer.sc-igl-block-dates-view{width:24px}.sc-igl-block-dates-view-h .checkBoxContainer.sc-igl-block-dates-view input.sc-igl-block-dates-view{height:1.2rem !important;width:30px}.releaseTime.sc-igl-block-dates-view{padding-left:5px}.out-of-service-label.sc-igl-block-dates-view{margin-left:5px !important}";const Yh=class{constructor(t){i(this,t);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.blockDatesData={RELEASE_AFTER_HOURS:0,OPTIONAL_REASON:"",OUT_OF_SERVICE:false};this.releaseList=[];this.bookingService=new Ah;this.defaultData=undefined;this.fromDate=undefined;this.toDate=undefined;this.entryDate=undefined;this.entryHour=undefined;this.isEventHover=false;this.entryMinute=undefined;this.renderAgain=false}async componentWillLoad(){try{this.releaseList=await this.bookingService.getBlockedInfo();if(this.defaultData){this.blockDatesData=Object.assign({},this.defaultData)}else{this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(this.releaseList[0].CODE_NAME);this.emitData()}}catch(t){}}handleOptionalReason(t){this.blockDatesData.OPTIONAL_REASON=t.target.value;this.emitData()}handleReleaseAfterChange(t){if(this.entryDate)this.entryDate=undefined;this.blockDatesData.RELEASE_AFTER_HOURS=parseInt(t.target.value);this.renderPage();this.emitData()}emitData(){this.dataUpdateEvent.emit({key:"blockDatesData",data:Object.assign({},this.blockDatesData)})}getReleaseHoursString(){let t=this.entryDate?new Date(this.entryDate):new Date;if(this.entryDate&&this.entryHour&&this.entryMinute){t.setHours(this.entryHour,this.entryMinute,0,0)}else{t.setHours(t.getHours()+this.blockDatesData.RELEASE_AFTER_HOURS,t.getMinutes(),0,0)}return t.toLocaleString("default",{month:"short"})+" "+t.getDate()+", "+this.formatNumber(t.getHours())+":"+this.formatNumber(t.getMinutes())}formatNumber(t){return t<10?`0${t}`:t}handleOutOfService(t){this.blockDatesData.OUT_OF_SERVICE=t.target.checked;if(this.blockDatesData.OUT_OF_SERVICE){this.blockDatesData.OPTIONAL_REASON="";this.blockDatesData.RELEASE_AFTER_HOURS=0}this.renderPage();this.emitData()}renderPage(){this.renderAgain=!this.renderAgain}render(){return n(o,null,n("div",{class:`m-0 p-0 mb-1`},n("div",{class:"text-left p-0"},n("span",{class:"pr-1"},n("span",{class:"text-bold-700 font-medium-1"},Vr.entries.Lcz_From,": "),Ir(this.fromDate)),n("span",{class:"text-bold-700 font-medium-1"},Vr.entries.Lcz_To,": "),Ir(this.toDate))),n("div",{class:` mb-1 text-left ${this.isEventHover&&"p-0"}`},n("div",{class:"mb-1 "},n("label",{class:"p-0 text-bold-700 font-medium-1 m-0 align-middle"},Vr.entries.Lcz_Reason,":"),n("div",{class:"p-0 m-0 pr-1  controlContainer checkBoxContainer d-inline-block align-middle"},n("input",{class:"form-control",type:"checkbox",checked:this.blockDatesData.OUT_OF_SERVICE,id:"userinput6",onChange:t=>this.handleOutOfService(t)})),n("span",{class:"align-middle out-of-service-label"},Vr.entries.Lcz_OutOfservice)),!this.blockDatesData.OUT_OF_SERVICE?n("div",null,n("div",{class:"mb-1 d-flex  align-items-center"},n("span",{class:"align-middle"},Vr.entries.Lcz_Or," "),n("div",{class:"d-inline-flex col pr-0 align-middle"},n("input",{class:"form-control",type:"text",placeholder:Vr.entries.Lcz_OptionalReason,id:"optReason",value:this.blockDatesData.OPTIONAL_REASON,onInput:t=>this.handleOptionalReason(t)}))),n("div",{class:"mb-1 w-100 pr-0 "},n("span",{class:"text-bold-700 font-medium-1"},Vr.entries.Lcz_AutomaticReleaseIn,": "),n("div",{class:"d-inline-block"},n("select",{class:"form-control input-sm",id:"zSmallSelect",onChange:t=>this.handleReleaseAfterChange(t)},this.releaseList.map((t=>n("option",{value:+t.CODE_NAME,selected:this.blockDatesData.RELEASE_AFTER_HOURS==+t.CODE_NAME},t.CODE_VALUE_EN))))),this.blockDatesData.RELEASE_AFTER_HOURS?n("div",{class:"d-inline-block releaseTime"},n("em",null,Vr.entries.Lcz_On," ",this.getReleaseHoursString())):null)):null))}};Yh.style=Rh;class Bh{setBookingInfoFromAutoComplete(t,e){t.bookedByInfoData={id:e.guest.id,email:e.guest.email,firstName:e.guest.first_name,lastName:e.guest.last_name,countryId:e.guest.country_id,isdCode:e.guest.country_id.toString(),contactNumber:e.guest.mobile,selectedArrivalTime:e.arrival,emailGuest:e.guest.subscribe_to_news_letter,message:e.remark,cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:"",bookingNumber:e.booking_nbr,rooms:e.rooms,from_date:e.from_date,to_date:e.to_date}}resetRoomsInfoAndMessage(t){t.defaultData.roomsInfo=[];t.message=""}onDataRoomUpdate(t,e,i,s,n){let o=e;const{data:r,key:a,changedKey:l}=t.detail;const h=`c_${r.roomCategoryId}`;const c=`p_${r.ratePlanId}`;if(this.shouldClearData(a)){o=new Map}this.initializeRoomCategoryIfNeeded(h,o);if(s){if(l==="rate"){if(o.has(h)&&o.get(h).has(c)){this.applyBookingEditToSelectedRoom(h,c,r,o,n,i)}}else{if(l!=="rateType"){if(l==="adult_child_offering"){if(o.has(h)&&e.get(h).has(c)){this.applyBookingEditToSelectedRoom(h,c,r,o,n,i)}}else{this.applyBookingEditToSelectedRoom(h,c,r,o,n,i)}}}}else{this.setSelectedRoomData(h,c,r,o)}this.cleanupEmptyData(h,o);return o}shouldClearData(t){return t==="clearData"||t==="EDIT_BOOKING"}initializeRoomCategoryIfNeeded(t,e){if(!e.has(t)){e.set(t,new Map)}}setSelectedRoomData(t,e,i,s){let n=s.get(t);if(i.totalRooms===0||i.inventory===0){n.delete(e)}else{s.set(t,n.set(e,Object.assign(Object.assign({},i),{selectedUnits:Array(i.totalRooms).fill(-1)})))}}cleanupEmptyData(t,e){if(e.has(t)){let i=e.get(t);if(i.size===0){e.delete(t)}}}applyBookingEditToSelectedRoom(t,e,i,s,n,o){s.clear();let r={};if(o){r=Object.assign(Object.assign({},i),{guestName:n||"",roomId:""})}else{r=Object.assign({},i)}s.set(t,(new Map).set(e,r))}async prepareBookUserServiceParams(t,e,i){try{const s=t.isEventType("EDIT_BOOKING")?t.getArrivalTimeForBooking():t.isEventType("ADD_ROOM")?t.bookingData.ARRIVAL.code:t.isEventType("SPLIT_BOOKING")?t.bookedByInfoData.selectedArrivalTime.code:"";const n=t.isEventType("BAR_BOOKING")?t.bookingData.PR_ID:undefined;const o=t.isEventType("EDIT_BOOKING")||t.isEventType("ADD_ROOM")?t.bookingData.BOOKING_NUMBER:t.isEventType("SPLIT_BOOKING")?t.bookedByInfoData.bookingNumber:undefined;let r=[];if(t.isEventType("ADD_ROOM")){r=t.bookingData.ROOMS}else if(t.isEventType("SPLIT_BOOKING")){r=t.bookedByInfoData.rooms}else if(t.isEventType("EDIT_BOOKING")){r=t.defaultData.ROOMS.filter((e=>e.identifier!==t.bookingData.IDENTIFIER))}console.log("rooms",r);return[t.bookedByInfoData,e,new Date(t.dateRangeData.fromDate),new Date(t.dateRangeData.toDate),t.guestData,t.dateRangeData.dateDifference,i,t.propertyid,r,t.currency,o,t.bookingData.GUEST,s,n,t.bookingData.IDENTIFIER]}catch(t){console.log(t)}}getBookingPreferenceRoomId(t){return t.hasOwnProperty("PR_ID")&&t.PR_ID||null}getRoomCategoryByRoomId(t,e){var i;return(i=e.roomsInfo)===null||i===void 0?void 0:i.find((e=>e.physicalrooms.find((e=>e.id===+t))))}setEditingRoomInfo(t,e){const i=this.getRoomCategoryByRoomId(this.getBookingPreferenceRoomId(t),t);const s=`c_${i.id}`;const n=`p_${t.RATE_PLAN_ID}`;const o={adultCount:t.ADULTS_COUNT,rate:t.RATE,rateType:t.RATE_TYPE,ratePlanId:t.RATE_PLAN_ID,roomCategoryId:i.id,roomCategoryName:i.name,totalRooms:1,ratePlanName:t.RATE_PLAN,roomId:t.PR_ID,guestName:t.NAME,cancelation:t.cancelation,guarantee:t.guarantee,adult_child_offering:t.adult_child_offering};e.set(s,(new Map).set(n,o))}}class Lh{constructor(){this.bookingService=new Ah}async reallocateEvent(t,e,i,s){try{const n=JSON.parse(sessionStorage.getItem("token"));if(n){console.log(t,e,i,s);const{data:o}=await yh.post(`/ReAllocate_Exposed_Room?Ticket=${n}`,{pool:t,destination_pr_id:e,from_date:i,to_date:s});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}console.log(o);return o}else{throw new Error("Invalid Token")}}catch(t){console.error(t);throw new Error(t)}}async deleteEvent(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/UnBlock_Exposed_Unit?Ticket=${e}`,{POOL:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}else{throw new Error("Invalid Token")}}catch(t){console.log(t);throw new Error(t)}}async updateBlockedEvent(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const e=Cr(+t.RELEASE_AFTER_HOURS);await this.deleteEvent(t.POOL);const i=await this.bookingService.blockUnit(Object.assign({from_date:this.formatDate(t.FROM_DATE),to_date:this.formatDate(t.TO_DATE),pr_id:t.PR_ID,STAY_STATUS_CODE:t.OUT_OF_SERVICE?"004":t.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:t.RELEASE_AFTER_HOURS||"",NOTES:t.OPTIONAL_REASON||""},e));return i}else{throw new Error("Invalid Token")}}catch(t){console.error(t);throw new Error(t)}}formatDate(t){return t.split("/").join("-")}}const jh=".sc-igl-book-property-h{position:fixed;top:0;right:0;width:100vw;height:100vh;z-index:99}.card-title.sc-igl-book-property{border-bottom:1px solid #e4e5ec;width:100%}.scrollContent.sc-igl-book-property{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-book-property{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-book-property{height:calc(100% - 79px);overflow:auto}.gap-30.sc-igl-book-property{gap:30px}.block-date.sc-igl-book-property{width:100%}.sideWindow.sc-igl-book-property{position:absolute;top:0;right:0;height:100%;background-color:#ffffff;width:100vw;overflow-y:auto}.card.sc-igl-book-property{top:0;z-index:1000}.close.sc-igl-book-property{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-book-property{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-book-property:not(:disabled),[type='button'].sc-igl-book-property:not(:disabled){cursor:pointer}.row.sc-igl-book-property{padding:0 0 0 15px;margin:0}@media only screen and (min-width: 1200px){.sideWindow.sc-igl-book-property{max-width:70%}}@media only screen and (min-width: 2000px){.sideWindow.sc-igl-book-property{max-width:40%}}@media only screen and (min-width: 768px) and (max-width: 1200px){.sideWindow.sc-igl-book-property{max-width:90%}}@media only screen and (min-width: 600px) and (max-width: 768px){.sideWindow.sc-igl-book-property{max-width:75%}}@media only screen and (min-width: 641px){.block-date.sc-igl-book-property{max-width:450px}}";const Ph=class{constructor(t){i(this,t);this.closeBookingWindow=s(this,"closeBookingWindow",7);this.bookingCreated=s(this,"bookingCreated",7);this.blockedCreated=s(this,"blockedCreated",7);this.resetBookingData=s(this,"resetBookingData",7);this.initialRoomIds=null;this.message="";this.showSplitBookingOption=false;this.sourceOptions=[];this.guestData=[];this.bookedByInfoData={};this.blockDatesData={};this.ratePricingMode=[];this.selectedUnits=new Map;this.bedPreferenceType=[];this.bookingService=new Ah;this.bookPropertyService=new Bh;this.eventsService=new Lh;this.propertyid=undefined;this.allowedBookingSources=undefined;this.language=undefined;this.countryNodeList=undefined;this.showPaymentDetails=false;this.currency=undefined;this.bookingData=undefined;this.adultChildConstraints=undefined;this.adultChildCount={adult:0,child:0};this.renderAgain=false;this.dateRangeData=undefined;this.defaultData=undefined;this.isLoading=undefined;this.buttonName=""}handleKeyDown(t){if(t.key==="Escape"){this.closeWindow()}else return}componentDidLoad(){document.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}clearBooking(t){if(this.isEventType("SPLIT_BOOKING")){t.stopImmediatePropagation();t.stopPropagation();this.bookedByInfoData={};this.bookPropertyService.resetRoomsInfoAndMessage(this);this.renderPage()}}async handleSpiltBookingSelected(t){t.stopImmediatePropagation();const{key:e,data:i}=t.detail;if(e==="select"){const t=await this.bookingService.getExposedBooking(i.booking_nbr,this.language);this.bookPropertyService.setBookingInfoFromAutoComplete(this,t);this.sourceOption=t.source;this.renderPage()}else if(e==="blur"&&i!==""){const t=await this.bookingService.getExposedBooking(i,this.language);this.bookPropertyService.setBookingInfoFromAutoComplete(this,t);this.sourceOption=t.source;this.renderPage()}}async componentWillLoad(){this.defaultDateRange={from_date:this.bookingData.FROM_DATE,to_date:this.bookingData.TO_DATE};this.handleKeyDown=this.handleKeyDown.bind(this);if(!this.bookingData.defaultDateRange){return}this.defaultData=this.bookingData;this.dateRangeData=Object.assign({},this.defaultData.defaultDateRange);try{const t=await this.fetchSetupEntries();this.setSourceOptions(this.allowedBookingSources);this.setOtherProperties(t);if(this.isEventType("EDIT_BOOKING")){this.adultChildCount={adult:this.defaultData.ADULTS_COUNT,child:this.defaultData.CHILDREN_COUNT};this.initialRoomIds={roomName:this.defaultData.roomName,ratePlanId:this.defaultData.RATE_PLAN_ID,roomId:this.defaultData.PR_ID,roomTypeId:this.defaultData.RATE_TYPE};this.bookPropertyService.setEditingRoomInfo(this.defaultData,this.selectedUnits)}if(!this.isEventType("BAR_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}if(this.defaultData.event_type==="SPLIT_BOOKING"){this.showSplitBookingOption=true;this.page="page_one"}else if(this.defaultData.event_type==="BLOCK_DATES"){this.page="page_block_date"}else{this.page="page_one"}}catch(t){console.error("Error fetching setup entries:",t)}}async fetchSetupEntries(){return await this.bookingService.fetchSetupEntries()}isGuestDataIncomplete(){if(this.guestData.length===0){return true}for(const t of this.guestData){if(t.guestName===""||t.preference===""||t.preference===0){return true}}return false}isButtonDisabled(){const t=(t,e,i)=>{if(!t){return true}if(t===this.guestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return t(this.guestData,"guestName","")||t(this.bookedByInfoData,"isdCode","")||t(this.bookedByInfoData,"contactNumber","")||t(this.bookedByInfoData,"firstName","")||t(this.bookedByInfoData,"lastName","")||t(this.bookedByInfoData,"countryId",-1)||t(this.bookedByInfoData,"selectedArrivalTime","")||t(this.bookedByInfoData,"email","")}setSourceOptions(t){this.sourceOptions=t.map((t=>({id:t.code,value:t.description,tag:t.tag,type:t.type})));if(this.isEventType("EDIT_BOOKING")){this.sourceOption=Object.assign({},this.defaultData.SOURCE)}else{this.sourceOption={code:t[0].code,description:t[0].description,tag:t[0].tag}}}setOtherProperties(t){this.ratePricingMode=t.ratePricingMode;this.bookedByInfoData.arrivalTime=t.arrivalTime;this.bedPreferenceType=t.bedPreferenceType}handleAdultChildChange(t){if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.bookPropertyService.resetRoomsInfoAndMessage(this)}this.adultChildCount=Object.assign({},t.detail)}async initializeBookingAvailability(t,e){try{const i=this.defaultData.roomsInfo.map((t=>t.id));const s=await this.bookingService.getBookingAvailability(t,e,this.propertyid,this.adultChildCount,this.language,i,this.currency);this.message="";this.message=s.tax_statement;if(!this.isEventType("EDIT_BOOKING")){this.defaultData.defaultDateRange.fromDate=new Date(this.dateRangeData.fromDate);this.defaultData.defaultDateRange.toDate=new Date(this.dateRangeData.toDate)}this.defaultData=Object.assign(Object.assign({},this.defaultData),{roomsInfo:s.roomtypes})}catch(t){}}getRoomCategoryByRoomId(t){var e;return(e=this.defaultData.roomsInfo)===null||e===void 0?void 0:e.find((e=>e.physicalrooms.find((e=>e.id===+t))))}getSplitBookings(){return this.defaultData.hasOwnProperty("splitBookingEvents")&&this.defaultData.splitBookingEvents||[]}closeWindow(){this.dateRangeData={};this.closeBookingWindow.emit();document.removeEventListener("keydown",this.handleKeyDown)}isEventType(t){return this.defaultData.event_type===t}onDateRangeSelect(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e.key==="selectedDateRange"){this.dateRangeData=e.data;if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){this.defaultData.roomsInfo=[];this.message=""}else if(this.adultChildCount.adult!==0){this.initializeBookingAvailability(xr(new Date(this.dateRangeData.fromDate)),xr(new Date(this.dateRangeData.toDate)))}}}handleBlockDateUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.blockDatesData=e.data}handleGuestInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e.guestRefKey){if(this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING")){this.guestData[e.guestRefKey]=Object.assign(Object.assign({},e.data),{roomId:this.defaultData.PR_ID})}else this.guestData[e.guestRefKey]=e.data}}handleBookedByInfoUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.bookedByInfoData=e.value.data}handleSourceDropDown(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;const i=this.sourceOptions.find((t=>t.id===e.toString()));this.sourceOption={code:e,description:i.value||"",tag:i.tag}}renderPage(){this.renderAgain=!this.renderAgain}gotoSplitPageTwo(){this.gotoPage("page_two")}gotoPage(t){this.page=t;this.renderPage()}showSplitBooking(){this.showSplitBookingOption=true;this.gotoPage("page_one")}getPageBlockDatesView(){return n(r,null,n("igl-block-dates-view",{fromDate:this.dateRangeData.fromDateStr,toDate:this.dateRangeData.toDateStr,entryDate:this.defaultData.ENTRY_DATE,onDataUpdateEvent:t=>this.handleBlockDateUpdate(t)}),n("div",{class:"p-0 mb-1 mt-2 gap-30 d-flex align-items-center justify-content-between"},n("button",{class:"btn btn-secondary flex-fill",onClick:()=>this.closeWindow()},Vr.entries.Lcz_Cancel),n("button",{class:"btn btn-primary flex-fill",onClick:()=>this.handleBlockDate()},Vr.entries.Lcz_Blockdates)))}handleButtonClicked(t){switch(t.detail.key){case"save":this.bookUser(false);break;case"cancel":t.stopImmediatePropagation();t.stopPropagation();this.closeWindow();break;case"back":t.stopImmediatePropagation();t.stopPropagation();this.gotoPage("page_one");break;case"book":this.bookUser(false);this.buttonName="book";break;case"bookAndCheckIn":this.bookUser(true);this.buttonName="bookAndCheckIn";break;case"next":t.stopImmediatePropagation();t.stopPropagation();this.gotoPage("page_two");case"check":this.initializeBookingAvailability(xr(new Date(this.dateRangeData.fromDate)),xr(new Date(this.dateRangeData.toDate)))}}handlePageTwoDataUpdateEvent(t){t.stopImmediatePropagation();t.stopPropagation();if(t.detail.key==="propertyBookedBy"){this.handleBookedByInfoUpdate(t)}else{this.handleGuestInfoUpdate(t)}}async handleBlockDate(){const t=Cr(+this.blockDatesData.RELEASE_AFTER_HOURS);const e=await this.bookingService.blockUnit(Object.assign({from_date:xr(this.defaultData.defaultDateRange.fromDate),to_date:xr(this.defaultData.defaultDateRange.toDate),NOTES:this.blockDatesData.OPTIONAL_REASON||"",pr_id:this.defaultData.PR_ID.toString(),STAY_STATUS_CODE:this.blockDatesData.OUT_OF_SERVICE?"004":this.blockDatesData.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:this.blockDatesData.RELEASE_AFTER_HOURS||""},t));const i=await Mh(e);this.blockedCreated.emit(i);this.closeWindow()}async bookUser(t){this.setLoadingState(t);if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){if(this.isGuestDataIncomplete()){this.isLoading="";return}}else{if(this.isButtonDisabled()){this.isLoading="";return}}try{if(["003","002","004"].includes(this.defaultData.STATUS_CODE)){this.eventsService.deleteEvent(this.defaultData.POOL)}if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.bookedByInfoData.message=this.defaultData.NOTES}const e=await this.bookPropertyService.prepareBookUserServiceParams(this,t,this.sourceOption);await this.bookingService.bookUser(...e);if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.resetBookingData.emit(null)}}catch(t){}finally{this.resetLoadingState()}}setLoadingState(t){if(this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")){this.isLoading="save"}else{this.isLoading=t?"bookAndCheckIn":"book"}}getArrivalTimeForBooking(){return this.bookedByInfoData.arrivalTime.find((t=>t.CODE_VALUE_EN===this.defaultData.ARRIVAL_TIME)).CODE_NAME}resetLoadingState(){this.isLoading="";setTimeout((()=>{this.closeWindow()}),100)}onRoomDataUpdate(t){const e=this.bookPropertyService.onDataRoomUpdate(t,this.selectedUnits,this.isEventType("EDIT_BOOKING"),this.isEventType("EDIT_BOOKING")||this.isEventType("SPLIT_BOOKING")||this.isEventType("BAR_BOOKING"),this.defaultData.NAME);this.selectedUnits=new Map(e);this.renderPage()}getCurrentPage(t){return this.page===t}render(){return n(o,null,n("div",{class:"background-overlay",onClick:()=>this.closeWindow()}),n("div",{class:"sideWindow "+(this.getCurrentPage("page_block_date")?"block-date":"")},n("div",{class:"card position-sticky mb-0 shadow-none p-0 "},n("div",{class:"d-flex mt-2 align-items-center justify-content-between  "},n("h3",{class:"card-title text-left pb-1 font-medium-2 px-2 px-md-3"},this.getCurrentPage("page_block_date")?this.defaultData.BLOCK_DATES_TITLE:this.defaultData.TITLE),n("ir-icon",{class:"close close-icon",onIconClickHandler:()=>{this.closeWindow()}},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},n("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))))),n("div",{class:"px-2 px-md-3"},this.getCurrentPage("page_one")&&n("igl-booking-overview-page",{initialRoomIds:this.initialRoomIds,defaultDaterange:this.defaultDateRange,class:"p-0 mb-1",eventType:this.defaultData.event_type,selectedRooms:this.selectedUnits,currency:this.currency,message:this.message,showSplitBookingOption:this.showSplitBookingOption,ratePricingMode:this.ratePricingMode,dateRangeData:this.dateRangeData,bookingData:this.defaultData,adultChildCount:this.adultChildCount,bookedByInfoData:this.bookedByInfoData,adultChildConstraints:this.adultChildConstraints,onRoomsDataUpdate:t=>{this.onRoomDataUpdate(t)},sourceOptions:this.sourceOptions,propertyId:this.propertyid}),this.getCurrentPage("page_two")&&n("igl-pagetwo",{currency:this.currency,propertyId:this.propertyid,showPaymentDetails:this.showPaymentDetails,selectedGuestData:this.guestData,countryNodeList:this.countryNodeList,isLoading:this.isLoading,selectedRooms:this.selectedUnits,bedPreferenceType:this.bedPreferenceType,dateRangeData:this.dateRangeData,bookingData:this.defaultData,showSplitBookingOption:this.showSplitBookingOption,language:this.language,bookedByInfoData:this.bookedByInfoData,defaultGuestData:this.defaultData,isEditOrAddRoomEvent:this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM"),onDataUpdateEvent:t=>this.handlePageTwoDataUpdateEvent(t)}),this.getCurrentPage("page_block_date")?this.getPageBlockDatesView():null)))}};Ph.style=jh;const $h=".sc-igl-book-property-footer-h{display:block;margin:0;padding:0}.sc-igl-book-property-footer-h>*.sc-igl-book-property-footer{margin:auto;padding:auto}.gap-30.sc-igl-book-property-footer{gap:30px}";const Hh=class{constructor(t){i(this,t);this.buttonClicked=s(this,"buttonClicked",7);this.eventType=undefined;this.disabled=true}isEventType(t){return t===this.eventType}editNext(t){if(this.isEventType("EDIT_BOOKING")){if(t==="Cancel"){return"flex-fill"}else{return"d-none d-md-block  flex-fill"}}return"flex-fill"}renderButton(t,e,i=false){return n("div",{class:this.shouldRenderTwoButtons()?` ${this.editNext(e)}`:"flex-fill"},n("button",{class:`btn btn-${t==="cancel"?"secondary":"primary"} full-width`,onClick:()=>this.buttonClicked.emit({key:t}),disabled:i},e))}shouldRenderTwoButtons(){return this.isEventType("PLUS_BOOKING")||this.isEventType("ADD_ROOM")||this.isEventType("EDIT_BOOKING")}render(){return n(o,null,n("div",{class:"d-flex justify-content-between gap-30 align-items-center"},this.isEventType("EDIT_BOOKING")?n(r,null,this.renderButton("cancel",Vr.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${Vr.entries.Lcz_Next} >>`)):n(r,null,this.renderButton("cancel",Vr.entries.Lcz_Cancel),this.shouldRenderTwoButtons()&&this.renderButton("next",`${Vr.entries.Lcz_Next} >>`,this.disabled))))}};Hh.style=$h;const Uh={adultChildConstraints:{adult_max_nbr:0,child_max_nbr:0,child_max_age:0},allowedBookingSources:[],currency:undefined,endingDate:0,formattedLegendData:undefined,is_vacation_rental:false,legendData:[],roomsInfo:[],startingDate:0,language:"",toBeAssignedEvents:[],allowed_payment_methods:[],pickup_service:undefined,max_nights:0};const{state:Gh,onChange:Fh}=Fr(Uh);const zh=".sc-igl-book-property-header-h{display:block}.row.sc-igl-book-property-header{padding:0 0 0 15px;margin:0}.sourceContainer.sc-igl-book-property-header{max-width:350px}.message-label.sc-igl-book-property-header{font-size:80%}";const Vh=class{constructor(t){i(this,t);this.splitBookingDropDownChange=s(this,"splitBookingDropDownChange",7);this.sourceDropDownChange=s(this,"sourceDropDownChange",7);this.adultChild=s(this,"adultChild",7);this.checkClicked=s(this,"checkClicked",7);this.buttonClicked=s(this,"buttonClicked",7);this.toast=s(this,"toast",7);this.spiltBookingSelected=s(this,"spiltBookingSelected",7);this.sourceOption={code:"",description:"",tag:""};this.splitBookingId="";this.bookingData="";this.minDate=undefined;this.sourceOptions=[];this.message=undefined;this.bookingDataDefaultDateRange=undefined;this.showSplitBookingOption=false;this.adultChildConstraints=undefined;this.splitBookings=undefined;this.adultChildCount=undefined;this.dateRangeData=undefined;this.bookedByInfoData=undefined;this.defaultDaterange=undefined;this.propertyId=undefined;this.isLoading=false}getSplitBookingList(){return n("fieldset",{class:"form-group  text-left"},n("label",{class:"h5"},Vr.entries.Lcz_Tobooking,"# "),n("div",{class:"btn-group ml-1"},n("ir-autocomplete",{value:Object.keys(this.bookedByInfoData).length>1?`${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}`:"",from_date:c(this.bookingDataDefaultDateRange.fromDate).format("YYYY-MM-DD"),to_date:c(this.bookingDataDefaultDateRange.toDate).format("YYYY-MM-DD"),propertyId:this.propertyId,placeholder:Vr.entries.Lcz_BookingNumber,onComboboxValue:t=>{t.stopImmediatePropagation();this.spiltBookingSelected.emit(t.detail)},isSplitBooking:true})))}getSourceNode(){return n("fieldset",{class:"d-flex flex-column text-left flex-lg-row align-items-lg-center"},n("label",{class:"mr-lg-1"},Vr.entries.Lcz_Source," "),n("div",{class:"btn-group mt-1 mt-lg-0 sourceContainer"},n("select",{class:"form-control input-sm",id:"xSmallSelect",onChange:t=>this.sourceDropDownChange.emit(t.target.value)},this.sourceOptions.map((t=>{if(t.type==="LABEL"){return n("optgroup",{label:t.value})}return n("option",{value:t.id,selected:this.sourceOption.code===t.id},t.value)})))))}handleAdultChildChange(t,e){const i=e.target.value;let s={};if(i===""){s=Object.assign(Object.assign({},this.adultChildCount),{[t]:0})}else{s=Object.assign(Object.assign({},this.adultChildCount),{[t]:i})}this.adultChild.emit(s)}handleFetchingDataStatus(t){const e=t.detail;if(e==="pending"){this.isLoading=true}else{this.isLoading=false}}getAdultChildConstraints(){return n("div",{class:"mt-1 d-flex flex-column text-left"},n("label",{class:"d-lg-none"},Vr.entries.Lcz_NumberOfGuests," "),n("div",{class:"form-group  text-left d-flex align-items-center justify-content-between justify-content-sm-start"},n("fieldset",null,n("div",{class:"btn-group "},n("select",{class:"form-control input-sm",id:"xAdultSmallSelect",onChange:t=>this.handleAdultChildChange("adult",t)},n("option",{value:""},Vr.entries.Lcz_AdultsCaption),Array.from(Array(this.adultChildConstraints.adult_max_nbr),((t,e)=>e+1)).map((t=>n("option",{value:t},t)))))),this.adultChildConstraints.child_max_nbr>0&&n("fieldset",null,n("div",{class:"btn-group ml-1"},n("select",{class:"form-control input-sm",id:"xChildrenSmallSelect",onChange:t=>this.handleAdultChildChange("child",t)},n("option",{value:""},this.renderChildCaption()),Array.from(Array(this.adultChildConstraints.child_max_nbr),((t,e)=>e+1)).map((t=>n("option",{value:t},t)))))),n("ir-button",{isLoading:this.isLoading,icon:"",size:"sm",class:"ml-2",text:Vr.entries.Lcz_Check,onClickHanlder:()=>this.handleButtonClicked()})))}renderChildCaption(){const t=this.adultChildConstraints.child_max_age;let e=Vr.entries.Lcz_Years;if(t===1){e=Vr.entries.Lcz_Year}return`${Vr.entries.Lcz_ChildCaption} < ${this.adultChildConstraints.child_max_age} ${e}`}handleButtonClicked(){if(this.isEventType("SPLIT_BOOKING")&&Object.keys(this.bookedByInfoData).length<=1){this.toast.emit({type:"error",title:Vr.entries.Lcz_ChooseBookingNumber,description:"",position:"top-right"})}else if(this.isEventType("ADD_ROOM")||this.isEventType("SPLIT_BOOKING")){const t=c(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date));const e=c(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date));const i=c(new Date(this.dateRangeData.fromDate));const s=c(new Date(this.dateRangeData.toDate));if(s.isBefore(e)||i.isAfter(t)){this.toast.emit({type:"error",title:`${Vr.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",c(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",c(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"});return}else{this.buttonClicked.emit({key:"check"})}}else if(this.minDate&&new Date(this.dateRangeData.fromDate).getTime()>new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date).getTime()){this.toast.emit({type:"error",title:`${Vr.entries.Lcz_CheckInDateShouldBeMAx.replace("%1",c(new Date(this.bookedByInfoData.from_date||this.defaultDaterange.from_date)).format("ddd, DD MMM YYYY")).replace("%2",c(new Date(this.bookedByInfoData.to_date||this.defaultDaterange.to_date)).format("ddd, DD MMM YYYY"))}  `,description:"",position:"top-right"})}else if(this.adultChildCount.adult===0){this.toast.emit({type:"error",title:Vr.entries.Lcz_PlzSelectNumberOfGuests,description:"",position:"top-right"})}else{this.buttonClicked.emit({key:"check"})}}isEventType(t){return this.bookingData.event_type===t}render(){console.log(Gh.max_nights);return n(o,null,this.showSplitBookingOption?this.getSplitBookingList():this.isEventType("EDIT_BOOKING")||this.isEventType("ADD_ROOM")?null:this.getSourceNode(),n("div",{class:"d-lg-flex align-items-center"},n("fieldset",{class:" mt-1 mt-lg-0  "},n("igl-date-range",{maxDate:c().add(Gh.max_nights,"days").format("YYYY-MM-DD"),dateLabel:Vr.entries.Lcz_Dates,minDate:this.minDate,disabled:this.isEventType("BAR_BOOKING")||this.isEventType("SPLIT_BOOKING"),defaultData:this.bookingDataDefaultDateRange})),!this.isEventType("EDIT_BOOKING")&&this.getAdultChildConstraints()),n("p",{class:"text-right mt-1 message-label"},this.message))}};Vh.style=zh;class Kh{async getCalendarData(t,e,i){try{const s=JSON.parse(sessionStorage.getItem("token"));if(s!==null){const{data:n}=await yh.post(`/Get_Exposed_Calendar?Ticket=${s}`,{propertyid:t,from_date:e,to_date:i});if(n.ExceptionMsg!==""){throw new Error(n.ExceptionMsg)}const o=n.My_Result.months;const r=[];const a=await vh(o);const l=o.map((t=>{r.push({daysCount:t.days.length,monthName:t.description});return t.days.map((e=>({day:vr(e.description,t.description),currentDate:kr(e.description,t.description),dayDisplayName:e.description,rate:e.room_types,unassigned_units_nbr:e.unassigned_units_nbr,occupancy:e.occupancy})))})).flat();return Promise.resolve({ExceptionCode:null,ExceptionMsg:"",My_Params_Get_Rooming_Data:{AC_ID:t,FROM:n.My_Params_Get_Exposed_Calendar.from_date,TO:n.My_Params_Get_Exposed_Calendar.to_date},days:l,months:r,myBookings:a,defaultMonths:o})}}catch(t){console.error(t)}}async fetchGuest(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e!==null){const{data:i}=await yh.post(`/Get_Exposed_Guest?Ticket=${e}`,{email:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}}catch(t){console.log(t);throw new Error(t)}}async editExposedGuest(t,e){try{const i=JSON.parse(sessionStorage.getItem("token"));if(i!==null){const{data:s}=await yh.post(`/Edit_Exposed_Guest?Ticket=${i}`,Object.assign(Object.assign({},t),{book_nbr:e}));if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}return s.My_Result}}catch(t){console.log(t);throw new Error(t)}}async getBookingAvailability(t,e,i,s,n,o,r){try{const a=JSON.parse(sessionStorage.getItem("token"));if(a){const{data:l}=await yh.post(`/Get_Exposed_Booking_Availability?Ticket=${a}`,{propertyid:i,from_date:t,to_date:e,adult_nbr:s.adult,child_nbr:s.child,language:n,currency_ref:r.code,room_type_ids:o});if(l.ExceptionMsg!==""){throw new Error(l.ExceptionMsg)}return l["My_Result"]}else{throw new Error("Token doesn't exist")}}catch(t){console.error(t);throw new Error(t)}}async getCountries(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/Get_Exposed_Countries?Ticket=${e}`,{language:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}}catch(t){console.error(t);throw new Error(t)}}async fetchSetupEntries(){try{const t=JSON.parse(sessionStorage.getItem("token"));if(t){const{data:e}=await yh.post(`/Get_Setup_Entries_By_TBL_NAME_MULTI?Ticket=${t}`,{TBL_NAMES:["_ARRIVAL_TIME","_RATE_PRICING_MODE","_BED_PREFERENCE_TYPE"]});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}const i=e.My_Result;return{arrivalTime:i.filter((t=>t.TBL_NAME==="_ARRIVAL_TIME")),ratePricingMode:i.filter((t=>t.TBL_NAME==="_RATE_PRICING_MODE")),bedPreferenceType:i.filter((t=>t.TBL_NAME==="_BED_PREFERENCE_TYPE"))}}}catch(t){console.error(t);throw new Error(t)}}async getBlockedInfo(){try{const t=JSON.parse(sessionStorage.getItem("token"));if(t){const{data:e}=await yh.post(`/Get_Setup_Entries_By_TBL_NAME_MULTI?Ticket=${t}`,{TBL_NAMES:["_CALENDAR_BLOCKED_TILL"]});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}}catch(t){console.error(t);throw new Error(t)}}async getUserDefaultCountry(){try{const t=JSON.parse(sessionStorage.getItem("token"));if(t){const{data:e}=await yh.post(`/Get_Country_By_IP?Ticket=${t}`,{IP:""});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e["My_Result"]}}catch(t){console.error(t);throw new Error(t)}}async blockUnit(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/Block_Exposed_Unit?Ticket=${e}`,t);if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}console.log(i);return i["My_Params_Block_Exposed_Unit"]}}catch(t){console.error(t);throw new Error(t)}}async getUserInfo(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/GET_EXPOSED_GUEST?Ticket=${e}`,{email:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}else{throw new Error("Invalid Token")}}catch(t){console.error(t);throw new Error(t)}}async getExposedBooking(t,e){try{const i=JSON.parse(sessionStorage.getItem("token"));if(i){const{data:s}=await yh.post(`/Get_Exposed_Booking?Ticket=${i}`,{booking_nbr:t,language:e});if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}return s.My_Result}else{throw new Error("Invalid Token")}}catch(t){console.error(t)}}generateDays(t,e,i){const s=new Date(t);const n=new Date(e);const o=[];while(s<n){o.push({date:s.toISOString().split("T")[0],amount:i});s.setDate(s.getDate()+1)}return o}calculateTotalRate(t,e,i,s){if(i&&s===2){return+t}return+t/+e}async fetchExposedGuest(t,e){try{const i=JSON.parse(sessionStorage.getItem("token"));if(i){const{data:s}=await yh.post(`/Fetch_Exposed_Guests?Ticket=${i}`,{email:t,property_id:e});if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}return s["My_Result"]}else{throw new Error("Token doesn't exist")}}catch(t){console.error(t);throw new Error(t)}}async fetchExposedBookings(t,e,i,s){try{const n=JSON.parse(sessionStorage.getItem("token"));if(n){const{data:o}=await yh.post(`/Fetch_Exposed_Bookings?Ticket=${n}`,{booking_nbr:t,property_id:e,from_date:i,to_date:s});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}return o["My_Result"]}else{throw new Error("Token doesn't exist")}}catch(t){console.error(t);throw new Error(t)}}async getPCICardInfoURL(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/Get_PCI_Card_Info_URL?Ticket=${e}`,{BOOK_NBR:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i["My_Result"]}else{throw new Error("Token doesn't exist")}}catch(t){console.error(t);throw new Error(t)}}async bookUser(t,e,i,s,n,o,r,a,l,h,c,d,u,f,p){console.log(u);try{const g=JSON.parse(sessionStorage.getItem("token"));if(g){const m=xr(i);const b=xr(s);let w={email:t.email||null,first_name:t.firstName,last_name:t.lastName,country_id:t.countryId,city:null,mobile:t.contactNumber,address:"",dob:null,subscribe_to_news_letter:t.emailGuest||false,cci:t.cardNumber?{nbr:t.cardNumber,holder_name:t.cardHolderName,expiry_month:t.expiryMonth,expiry_year:t.expiryYear}:null};if(t.id){w=Object.assign(Object.assign({},w),{id:t.id})}const y={assign_units:true,check_in:e,is_pms:true,is_direct:true,booking:{booking_nbr:c||"",from_date:m,to_date:b,remark:t.message||null,property:{id:a},source:r,currency:h,arrival:u?{code:u}:Object.assign({},t.selectedArrivalTime),guest:d||w,rooms:[...n.map((t=>({identifier:p||null,roomtype:{id:t.roomCategoryId,name:t.roomCategoryName,physicalrooms:null,rateplans:null,availabilities:null,inventory:t.inventory,rate:t.rate/o},rateplan:{id:t.ratePlanId,name:t.ratePlanName,rate_restrictions:null,variations:null,cancelation:t.cancelation,guarantee:t.guarantee},unit:typeof f==="undefined"&&t.roomId===""?null:{id:+f||+t.roomId},occupancy:{adult_nbr:t.adultCount,children_nbr:t.childrenCount,infant_nbr:null},bed_preference:t.preference,from_date:m,to_date:b,notes:null,days:this.generateDays(m,b,this.calculateTotalRate(t.rate,o,t.isRateModified,t.rateType)),guest:{email:null,first_name:t.guestName,last_name:null,country_id:null,city:null,mobile:null,address:null,dob:null,subscribe_to_news_letter:null}}))),...l]}};console.log("book user payload",y);const{data:v}=await yh.post(`/DoReservation?Ticket=${g}`,y);if(v.ExceptionMsg!==""){throw new Error(v.ExceptionMsg)}console.log(v["My_Result"]);return v["My_Result"]}else{throw new Error("Invalid token")}}catch(t){console.error(t);throw new Error(t)}}}const Wh={"000":"IN-HOUSE","001":"PENDING-CONFIRMATION","002":"CONFIRMED","003":"CHECKED-OUT"};function Jh(t,e){if(t===null&&e===null)return"";if(e!==null){return`${t!==null&&t!==void 0?t:""} , ${e!==null&&e!==void 0?e:""}`}return t}function qh(t){let e=[];const i=e=>{const i=c();const s=c(e.to_date,"YYYY-MM-DD");const n=c(e.from_date,"YYYY-MM-DD");if(n.isSame(i,"day")&&i.hour()>=12){return Wh["000"]}else if(i.isAfter(n,"day")&&i.isBefore(s,"day")){return Wh["000"]}else if(s.isSame(i,"day")&&i.hour()<12){return Wh["000"]}else if(s.isSame(i,"day")&&i.hour()>=12||s.isBefore(i,"day")){return Wh["003"]}else{return Wh[(t===null||t===void 0?void 0:t.status.code)||"001"]}};t.rooms.forEach((s=>{var n,o;e.push({ID:s["assigned_units_pool"],TO_DATE:s.to_date,FROM_DATE:s.from_date,NO_OF_DAYS:s.days.length,ARRIVAL:t.arrival,IS_EDITABLE:true,BALANCE:(n=t.financial)===null||n===void 0?void 0:n.due_amount,STATUS:i(s),NAME:Jh(s.guest.first_name,s.guest.last_name),PHONE:(o=t.guest.mobile)!==null&&o!==void 0?o:"",ENTRY_DATE:"12-12-2023",RATE:s.total,RATE_PLAN:s.rateplan.name,SPLIT_BOOKING:false,RATE_PLAN_ID:s.rateplan.id,IDENTIFIER:s.identifier,RATE_TYPE:s.roomtype.id,ADULTS_COUNT:s.occupancy.adult_nbr,CHILDREN_COUNT:s.occupancy.children_nbr,PR_ID:+s.unit.id,POOL:s["assigned_units_pool"],GUEST:t.guest,ROOMS:t.rooms,BOOKING_NUMBER:t.booking_nbr,cancelation:s.rateplan.cancelation,guarantee:s.rateplan.guarantee,TOTAL_PRICE:s.total,COUNTRY:t.guest.country_id,FROM_DATE_STR:t.format.from_date,TO_DATE_STR:t.format.to_date,adult_child_offering:s.rateplan.selected_variation.adult_child_offering,ARRIVAL_TIME:t.arrival.description,origin:t.origin,channel_booking_nbr:t.channel_booking_nbr,is_direct:t.is_direct,NOTES:t.remark,SOURCE:{code:t.source.code,description:t.source.description,tag:t.source.tag}})}));return e}function Zh(t){return["003","002","004"].includes(t)}class Xh{constructor(){this.bookingService=new Ah}async reallocateEvent(t,e,i,s){try{const n=JSON.parse(sessionStorage.getItem("token"));if(n){console.log(t,e,i,s);const{data:o}=await yh.post(`/ReAllocate_Exposed_Room?Ticket=${n}`,{pool:t,destination_pr_id:e,from_date:i,to_date:s});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}console.log(o);return o}else{throw new Error("Invalid Token")}}catch(t){console.error(t);throw new Error(t)}}async deleteEvent(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const{data:i}=await yh.post(`/UnBlock_Exposed_Unit?Ticket=${e}`,{POOL:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}else{throw new Error("Invalid Token")}}catch(t){console.log(t);throw new Error(t)}}async updateBlockedEvent(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e){const e=Cr(+t.RELEASE_AFTER_HOURS);await this.deleteEvent(t.POOL);const i=await this.bookingService.blockUnit(Object.assign({from_date:this.formatDate(t.FROM_DATE),to_date:this.formatDate(t.TO_DATE),pr_id:t.PR_ID,STAY_STATUS_CODE:t.OUT_OF_SERVICE?"004":t.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:t.RELEASE_AFTER_HOURS||"",NOTES:t.OPTIONAL_REASON||""},e));return i}else{throw new Error("Invalid Token")}}catch(t){console.error(t);throw new Error(t)}}formatDate(t){return t.split("/").join("-")}}const Qh=".sc-igl-booking-event-h{display:block;position:absolute}.bookingEventBase.sc-igl-booking-event{position:absolute;background-color:rgb(49, 190, 241);width:100%;height:100%;transform:skewX(-22deg)}.bookingEventHiddenBase.sc-igl-booking-event{position:absolute;top:0;left:-4px;width:calc(100% + 8)}.bookingEventDragHandle.sc-igl-booking-event{position:absolute;top:0;width:15px;height:100%;opacity:0.1;background-color:rgba(0, 0, 0, 0.15);transform:skewX(-22deg);cursor:pointer}.splitBooking.sc-igl-booking-event{border-right:2px solid #000000}.sc-igl-booking-event-h:hover .bookingEventDragHandle.sc-igl-booking-event{display:block;opacity:1}.newEvent.sc-igl-booking-event-h:hover .bookingEventDragHandle.sc-igl-booking-event{display:none;opacity:1}.leftSide.sc-igl-booking-event{left:0}.rightSide.sc-igl-booking-event{right:0}.bookingEventTitle.sc-igl-booking-event{color:#fff;font-size:0.8em;position:relative;max-width:calc(100% - 10px);overflow:hidden;text-overflow:ellipsis;top:2px;left:5px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legend_circle.sc-igl-booking-event{border-radius:100%;width:10px;height:10px;margin:3px 3px 3px 2px;border:1px solid #fff}.noteIcon.sc-igl-booking-event{position:absolute;bottom:-8px;left:2px}.balanceIcon.sc-igl-booking-event{position:absolute;top:-8px;right:2px}";var tc=undefined&&undefined.__rest||function(t,e){var i={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0)i[s]=t[s];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++){if(e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n]))i[s[n]]=t[s[n]]}return i};const ec=class{constructor(t){i(this,t);this.hideBubbleInfo=s(this,"hideBubbleInfo",7);this.updateEventData=s(this,"updateEventData",7);this.dragOverEventData=s(this,"dragOverEventData",7);this.showRoomNightsDialog=s(this,"showRoomNightsDialog",7);this.showDialog=s(this,"showDialog",7);this.resetStreachedBooking=s(this,"resetStreachedBooking",7);this.toast=s(this,"toast",7);this.dayWidth=0;this.eventSpace=8;this.vertSpace=10;this.showInfoPopup=false;this.bubbleInfoTopSide=false;this.isStreatch=false;this.eventsService=new Xh;this.bookingService=new Kh;this.resizeSide="";this.isDragging=false;this.animationFrameId=null;this.handleMouseMoveBind=this.handleMouseMove.bind(this);this.handleMouseUpBind=this.handleMouseUp.bind(this);this.handleClickOutsideBind=this.handleClickOutside.bind(this);this.currency=undefined;this.is_vacation_rental=false;this.language=undefined;this.bookingEvent=undefined;this.allBookingEvents=[];this.countryNodeList=undefined;this.renderElement=false;this.position=undefined;this.isShrinking=null}componentWillLoad(){window.addEventListener("click",this.handleClickOutsideBind)}async fetchAndAssignBookingData(){try{console.log("clicked on book#",this.bookingEvent.BOOKING_NUMBER);if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){const t=await this.bookingService.getExposedBooking(this.bookingEvent.BOOKING_NUMBER,"en");let e=t.rooms.filter((t=>t["assigned_units_pool"]===this.bookingEvent.ID));t.rooms=e;if(t.rooms.length===0){throw new Error(`"booking#${this.bookingEvent.BOOKING_NUMBER} have empty array"`)}else{if(t.rooms.some((t=>t["assigned_units_pool"]===null))){throw new Error(`"booking#${this.bookingEvent.BOOKING_NUMBER} have empty pool"`)}}const i=qh(t)[0],s=tc(i,["ID","TO_DATE","FROM_DATE","NO_OF_DAYS","STATUS","NAME","IDENTIFIER","PR_ID","POOL","BOOKING_NUMBER","NOTES","is_direct","BALANCE"]);this.bookingEvent=Object.assign(Object.assign({},this.bookingEvent),s);this.showEventInfo(true)}}catch(t){console.error(t)}}componentDidLoad(){if(this.isNewEvent()){if(!this.bookingEvent.hideBubble){setTimeout((async()=>{if(["003","002","004"].includes(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}else{this.showEventInfo(true)}this.renderAgain()}),1)}}}disconnectedCallback(){window.removeEventListener("click",this.handleClickOutsideBind);if(this.animationFrameId){cancelAnimationFrame(this.animationFrameId)}}handleClickOutside(t){const e=t.target;if(!this.element.contains(e)){this.showEventInfo(false)}}hideBubbleInfoPopup(t){if(t.detail.currentInfoBubbleId!=this.getBookingId()||t.detail.key==="hidebubble"&&t.detail.currentInfoBubbleId===this.getBookingId()){this.showInfoPopup=false;this.renderAgain()}}async moveBookingToHandler(t){try{if(t.detail.bookingId!==this.getBookingId()){this.showEventInfo(false);return}if(t.detail.moveToDay==="revert"||t.detail.toRoomId==="revert"){t.detail.moveToDay=this.bookingEvent.FROM_DATE;t.detail.toRoomId=t.detail.fromRoomId;if(this.isTouchStart&&this.moveDiffereneX<=5&&this.moveDiffereneY<=5&&!this.isStreatch){if(Zh(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}}else{this.animationFrameId=requestAnimationFrame((()=>{this.resetBookingToInitialPosition()}))}}else{if(this.isTouchStart&&this.moveDiffereneX<=5&&this.moveDiffereneY<=5&&!this.isStreatch){if(Zh(this.bookingEvent.STATUS_CODE)){this.showEventInfo(true)}else if(["IN-HOUSE","CONFIRMED","PENDING-CONFIRMATION","CHECKED-OUT"].includes(this.bookingEvent.STATUS)){await this.fetchAndAssignBookingData()}}else{const{pool:e,to_date:i,from_date:s,toRoomId:n}=t.detail;if(e){if(Zh(this.bookingEvent.STATUS_CODE)){await this.eventsService.reallocateEvent(e,n,s,i).catch((()=>{this.resetBookingToInitialPosition()}))}else{if(this.isShrinking||!this.isStreatch){const{description:e,status:o}=this.setModalDescription(n,s,i);let r=false;if(o==="400"){r=true}this.showDialog.emit(Object.assign(Object.assign({},t.detail),{description:e,title:"",hideConfirmButton:r}))}else{if(this.checkIfSlotOccupied(n,s,i)){this.animationFrameId=requestAnimationFrame((()=>{this.resetBookingToInitialPosition()}));throw new Error("Overlapping Dates")}else{this.showRoomNightsDialog.emit({bookingNumber:this.bookingEvent.BOOKING_NUMBER,identifier:this.bookingEvent.IDENTIFIER,to_date:i,pool:e,from_date:s})}}}this.isShrinking=null}}}}catch(t){this.toast.emit({position:"top-right",title:t.message,description:"",type:"error"});console.log("something went wrong")}}setModalDescription(t,e,i){const s=t=>{let e=this.bookingEvent.roomsInfo.filter((e=>e.physicalrooms.some((e=>e.id===+t))));if(e.length){return e[0].id}return null};if(!this.bookingEvent.is_direct){if(this.isShrinking){return{description:`${Vr.entries.Lcz_YouWillLoseFutureUpdates}.`,status:"200"}}else{if(c(e,"YYYY-MM-DD").isSame(c(this.bookingEvent.FROM_DATE,"YYYY-MM-DD"))&&c(i,"YYYY-MM-DD").isSame(c(this.bookingEvent.TO_DATE,"YYYY-MM-DD"))){const e=s(this.bookingEvent.PR_ID);const i=s(t);if(e===i){return{description:`${Vr.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`,status:"200"}}else{return{description:`${Vr.entries.Lcz_YouWillLoseFutureUpdates} ${this.bookingEvent.origin?this.bookingEvent.origin.Label:""}. ${Vr.entries.Lcz_SameRatesWillBeKept}`,status:"200"}}}return{description:Vr.entries.Lcz_CannotChangeCHBookings,status:"400"}}}else{if(!this.isShrinking){const e=s(this.bookingEvent.PR_ID);const i=s(t);if(e===i){console.log("same rt");return{description:`${Vr.entries.Lcz_AreYouSureWantToMoveAnotherUnit}?`,status:"200"}}else{return{description:Vr.entries.Lcz_SameRatesWillBeKept,status:"200"}}}return{description:Vr.entries.Lcz_BalanceWillBeCalculated,status:"200"}}}resetBookingToInitialPosition(){if(this.isStreatch){this.element.style.left=`${this.initialLeft}px`;this.element.style.width=`${this.initialWidth}px`;this.isStreatch=false;this.finalWidth=this.initialWidth;this.isShrinking=null}else{this.element.style.top=`${this.dragInitPos.top}px`;this.element.style.left=`${this.dragInitPos.left}px`}}handleRevertBooking(t){if(this.bookingEvent.POOL===t.detail){this.resetBookingToInitialPosition()}}checkIfSlotOccupied(t,e,i){const s=c(e,"YYYY-MM-DD");const n=c(i,"YYYY-MM-DD");const o=this.allBookingEvents.some((e=>{if(e.POOL===this.bookingEvent.POOL){return false}const i=c(e.FROM_DATE,"YYYY-MM-DD").add(1,"days");const o=c(e.TO_DATE,"YYYY-MM-DD");return e.PR_ID===+t&&n.isSameOrAfter(i)&&s.isBefore(o)}));return o}renderAgain(){this.renderElement=!this.renderElement}getUniqueId(){return(new Date).getTime()}isSplitBooking(){return!!this.bookingEvent.SPLIT_BOOKING}isNewEvent(){return this.getBookingId()==="NEW_TEMP_EVENT"}isHighlightEventType(){return this.getEventType()==="HIGH_LIGHT"}getBookingId(){return this.bookingEvent.ID}getBookingStatus(){return this.bookingEvent.STATUS}getBookedBy(){return this.bookingEvent.NAME}getBookedRoomId(){return this.bookingEvent.PR_ID}getEventStartingDate(){return new Date(this.bookingEvent.FROM_DATE)}getEventEndingDate(){return new Date(this.bookingEvent.TO_DATE)}getEventType(){return this.bookingEvent.event_type}getEventLegend(){var t,e;let i=(t=this.bookingEvent)===null||t===void 0?void 0:t.legendData.statusId[this.getBookingStatus()];let s=this.isNewEvent()?{color:"#f9f9c9"}:{};return Object.assign(Object.assign(Object.assign({},(e=this.bookingEvent)===null||e===void 0?void 0:e.legendData[i.id]),i),s)}getLegendOfStatus(t){var e;let i=(e=this.bookingEvent)===null||e===void 0?void 0:e.legendData.statusId[t];return Object.assign(Object.assign({},this.bookingEvent.legendData[i.id]),i)}getNoteNode(){if(this.bookingEvent.NOTES||this.bookingEvent.INTERNAL_NOTE){return this.getLegendOfStatus("NOTES")}return null}getBalanceNode(){if(this.bookingEvent.BALANCE!==null&&this.bookingEvent.BALANCE>0){return this.getLegendOfStatus("OUTSTANDING-BALANCE")}return null}setStayDays(t){this.bookingEvent.NO_OF_DAYS=t;this.renderAgain()}getStayDays(){return this.bookingEvent.NO_OF_DAYS}getPosition(){let t=this.getEventStartingDate();let e=".room_"+this.getBookedRoomId()+"_"+t.getDate()+"_"+(t.getMonth()+1)+"_"+t.getFullYear();let i=document.querySelector(".bodyContainer");let s=document.querySelector(e);let n={top:"0",left:"0",width:"0",height:"20px"};if(s&&i&&s.getBoundingClientRect()&&i.getBoundingClientRect()){let t=i.getBoundingClientRect();let e=s.getBoundingClientRect();this.dayWidth=this.dayWidth||e.width;n.top=e.top+e.height/2-this.vertSpace-t.top+"px";n.left=e.left+this.dayWidth/2+this.eventSpace/2-t.left+"px";n.width=this.getStayDays()*this.dayWidth-this.eventSpace+"px"}else{console.log("Locating event cell failed ",e)}return n}getNumber(t){return t?parseFloat(t):0}startDragging(t,e){t.preventDefault();t.stopPropagation();t.stopImmediatePropagation();if(this.isNewEvent()||this.isHighlightEventType()){return null}this.resizeSide=e;this.isDragging=true;this.showEventInfo(false);this.isStreatch=e!=="move";if(e==="move"){this.initialX=t.clientX||t.touches[0].clientX;this.initialY=t.clientY||t.touches[0].clientY;this.elementRect=this.element.getBoundingClientRect();const e=0;const i=0;this.dragInitPos={id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.getNumber(this.element.style.top)+i,left:this.getNumber(this.element.style.left)+e};this.dragInitPos.x=this.dragInitPos.left;this.dragInitPos.y=this.dragInitPos.top;this.dragEndPos=Object.assign({},this.dragInitPos);this.element.style.top=`${this.dragInitPos.top}px`;this.element.style.left=`${this.dragInitPos.left}px`;this.isTouchStart=true;this.dragOverEventData.emit({id:"CALCULATE_DRAG_OVER_BOUNDS",data:this.dragInitPos})}else{this.initialWidth=this.element.offsetWidth;this.initialLeft=this.element.offsetLeft;this.initialX=t.clientX||t.touches[0].clientX;this.dragOverEventData.emit({id:"CALCULATE_DRAG_OVER_BOUNDS",data:{id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.getNumber(this.element.style.top),left:this.initialLeft,x:this.initialX,y:t.clientY||t.touches[0].clientY}})}document.addEventListener("mousemove",this.handleMouseMoveBind);document.addEventListener("touchmove",this.handleMouseMoveBind);document.addEventListener("pointermove",this.handleMouseMoveBind);document.addEventListener("mouseup",this.handleMouseUpBind);document.addEventListener("touchup",this.handleMouseUpBind);document.addEventListener("pointerup",this.handleMouseUpBind)}handleMouseMove(t){if(this.isDragging){this.currentX=t.clientX||t.touches[0].clientX;let e=this.currentX-this.initialX;if(this.resizeSide==="move"){this.currentY=t.clientY||t.touches[0].clientY;let i=this.currentY-this.initialY;this.element.style.top=`${this.dragInitPos.top+i}px`;this.element.style.left=`${this.dragInitPos.left+e}px`;this.dragEndPos={id:this.getBookingId(),fromRoomId:this.getBookedRoomId(),top:this.dragInitPos.top+i,left:this.dragInitPos.left+e};this.dragEndPos.x=this.dragEndPos.left;this.dragEndPos.y=this.dragEndPos.top;this.dragOverEventData.emit({id:"DRAG_OVER",data:this.dragEndPos})}else{if(!this.bookingEvent.is_direct&&!Zh(this.bookingEvent.STATUS_CODE)){return}let t=this.initialWidth;if(this.resizeSide=="rightSide"){t=this.initialWidth+e;t=Math.min(t,this.initialX+this.element.offsetWidth);t=Math.max(this.dayWidth-this.eventSpace,t);this.element.style.width=`${t}px`;this.isShrinking=e<0}else if(this.resizeSide=="leftSide"){this.isShrinking=e>0;t=Math.max(this.dayWidth-this.eventSpace,this.initialWidth-e);let i=this.initialLeft+(this.initialWidth-t);this.element.style.left=`${i}px`;this.element.style.width=`${t}px`}this.finalWidth=t}}else{console.log("still mouse move listening...")}}handleMouseUp(){if(this.isDragging){if(this.resizeSide==="move"){if(this.isTouchStart){this.moveDiffereneX=Math.abs(this.dragEndPos.x-this.dragInitPos.x);this.moveDiffereneY=Math.abs(this.dragEndPos.y-this.dragInitPos.y)}this.dragOverEventData.emit({id:"DRAG_OVER_END",data:Object.assign(Object.assign({},this.dragEndPos),{pool:this.bookingEvent.POOL,nbOfDays:this.bookingEvent.NO_OF_DAYS})})}else{let t=Math.round(this.finalWidth/this.dayWidth);let e=this.getStayDays();if(e!=t&&!isNaN(t)){if(this.resizeSide=="leftSide"){this.element.style.left=`${this.initialLeft+(e-t)*this.dayWidth}px`}else{if(t<e){this.isShrinking=true}}this.dragOverEventData.emit({id:"STRETCH_OVER_END",data:{id:this.getBookingId(),fromRoomId:+this.getBookedRoomId(),x:+this.element.style.left.replace("px",""),y:+this.element.style.top.replace("px",""),pool:this.bookingEvent.POOL,nbOfDays:t}});this.element.style.width=`${t*this.dayWidth-this.eventSpace}px`}else{this.element.style.left=`${this.initialLeft}px`;this.element.style.width=`${t*this.dayWidth-this.eventSpace}px`}}}else{console.log("still mouse up listening...")}this.isDragging=false;document.removeEventListener("mousemove",this.handleMouseMoveBind);document.removeEventListener("touchmove",this.handleMouseMoveBind);document.removeEventListener("pointermove",this.handleMouseMoveBind);document.removeEventListener("mouseup",this.handleMouseUpBind);document.removeEventListener("touchup",this.handleMouseUpBind);document.removeEventListener("pointerup",this.handleMouseUpBind)}updateData(t){this.updateEventData.emit(t)}showEventInfo(t){if(this.isHighlightEventType()||this.bookingEvent.hideBubble){return null}if(t){let t=document.querySelector(".calendarScrollContainer");let e=t.getBoundingClientRect();let i=this.element.getBoundingClientRect();let s=e.height/2+e.top;if(i.top<s){this.bubbleInfoTopSide=false}else{this.bubbleInfoTopSide=true}}if(t){this.hideBubbleInfo.emit({key:"hidePopup",currentInfoBubbleId:this.getBookingId()})}this.showInfoPopup=t;this.renderAgain()}render(){let t=this.getEventLegend();let e=this.getNoteNode();let i=this.getBalanceNode();return n(o,{class:`bookingEvent ${this.isNewEvent()||this.isHighlightEventType()?"newEvent":""} ${t.clsName} `,style:this.getPosition(),id:"event_"+this.getBookingId()},n("div",{class:`bookingEventBase ${!this.bookingEvent.is_direct&&!Zh(this.bookingEvent.STATUS_CODE)&&this.bookingEvent.STATUS!=="TEMP-EVENT"&&this.bookingEvent.ID!=="NEW_TEMP_EVENT"&&"border border-dark"}  ${this.isSplitBooking()?"splitBooking":""}`,style:{backgroundColor:t.color},onTouchStart:t=>this.startDragging(t,"move"),onMouseDown:t=>this.startDragging(t,"move")}),e?n("div",{class:"legend_circle noteIcon",style:{backgroundColor:e.color}}):null,i?n("div",{class:"legend_circle balanceIcon",style:{backgroundColor:i.color}}):null,n("div",{class:"bookingEventTitle",onTouchStart:t=>this.startDragging(t,"move"),onMouseDown:t=>this.startDragging(t,"move")},this.getBookedBy()),n(r,null,n("div",{class:"bookingEventDragHandle leftSide",onTouchStart:t=>this.startDragging(t,"leftSide"),onMouseDown:t=>this.startDragging(t,"leftSide")}),n("div",{class:"bookingEventDragHandle rightSide",onTouchStart:t=>this.startDragging(t,"rightSide"),onMouseDown:t=>this.startDragging(t,"rightSide")})),this.showInfoPopup?n("igl-booking-event-hover",{is_vacation_rental:this.is_vacation_rental,countryNodeList:this.countryNodeList,currency:this.currency,class:"top",bookingEvent:this.bookingEvent,bubbleInfoTop:this.bubbleInfoTopSide}):null)}get element(){return a(this)}};ec.style=Qh;const ic=".sc-igl-booking-event-hover-h{display:block;position:relative;z-index:100}.btn.sc-igl-booking-event-hover{padding-left:4px !important;padding-right:4px !important}.pointerContainer.sc-igl-booking-event-hover{position:absolute;left:50%;height:10px;width:350px;transform:translate(-50%, 0)}.pointerContainerTop.sc-igl-booking-event-hover{top:-26px}.iglPopOver.sc-igl-booking-event-hover{background-color:#fff;padding:10px;border:1px solid #656ee7;border-radius:6px;position:absolute;transform:translate(-50%, 10px);left:50%;box-shadow:1px 0px 20px rgba(0, 0, 0, 0.2)}.iglPopOver.infoBubble.sc-igl-booking-event-hover{width:350px}.iglPopOver.blockedView.sc-igl-booking-event-hover{max-width:400px;width:400px}.iglPopOver.newBookingOptions.sc-igl-booking-event-hover{overflow-wrap:break-word !important;min-width:230px;width:fit-content}.bubblePointer.sc-igl-booking-event-hover{position:absolute;width:0;height:0;left:50%;border-left:10px solid transparent;border-right:10px solid transparent;transform:translate(-50%, 0px)}.bubblePointTop.sc-igl-booking-event-hover{border-top:10px solid #656ee7}.bubblePointBottom.sc-igl-booking-event-hover{border-bottom:10px solid #656ee7}.bubbleInfoAbove.sc-igl-booking-event-hover{bottom:35px}.updateBtnIcon.sc-igl-booking-event-hover{margin-right:4px}.icon-image.sc-igl-booking-event-hover{margin-right:5px}";const sc=class{constructor(t){i(this,t);this.showBookingPopup=s(this,"showBookingPopup",7);this.hideBubbleInfo=s(this,"hideBubbleInfo",7);this.deleteButton=s(this,"deleteButton",7);this.bookingCreated=s(this,"bookingCreated",7);this.todayTimeStamp=(new Date).setHours(0,0,0,0);this.eventService=new Lh;this.hideButtons=false;this.bookingEvent=undefined;this.bubbleInfoTop=false;this.currency=undefined;this.countryNodeList=undefined;this.is_vacation_rental=false;this.isLoading=undefined;this.shouldHideUnassignUnit=false}componentWillLoad(){console.log("this.bookingEvent",this.bookingEvent);let t=this.bookingEvent.roomsInfo.find((t=>t.id===this.bookingEvent.RATE_TYPE));if(t){console.log(t.physicalrooms.length===1);this.shouldHideUnassignUnit=t.physicalrooms.length===1}if(c(this.bookingEvent.TO_DATE,"YYYY-MM-DD").isBefore(c())){this.hideButtons=true}this.handleKeyDown=this.handleKeyDown.bind(this)}handleKeyDown(t){if(t.key==="Escape"){this.hideBubble()}else return}hideBubble(){this.hideBubbleInfo.emit({key:"hidebubble",currentInfoBubbleId:this.getBookingId()});document.removeEventListener("keydown",this.handleKeyDown)}componentDidLoad(){document.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}getBookingId(){return this.bookingEvent.ID}getTotalOccupants(){return this.bookingEvent.ADULTS_COUNT}getPhoneNumber(){return this.bookingEvent.PHONE}getCountry(){return Tr(this.bookingEvent.COUNTRY,this.countryNodeList).name}getPhoneCode(){return Tr(this.bookingEvent.COUNTRY,this.countryNodeList).phone_prefix}renderPhone(){return this.bookingEvent.COUNTRY?`${this.bookingEvent.is_direct?this.getPhoneCode()+"-":""}${this.getPhoneNumber()} - ${this.getCountry()}`:this.getPhoneNumber()}getGuestNote(){return this.bookingEvent.NOTES}getInternalNote(){return this.bookingEvent.INTERNAL_NOTE}getTotalPrice(){return this.bookingEvent.TOTAL_PRICE}getCheckInDate(){return this.bookingEvent.FROM_DATE_STR}getCheckOutDate(){return this.bookingEvent.TO_DATE_STR}getArrivalTime(){return this.bookingEvent.ARRIVAL_TIME}getRatePlan(){return this.bookingEvent.RATE_PLAN}getEntryDate(){return this.bookingEvent.ENTRY_DATE}getReleaseAfterHours(){return this.bookingEvent.RELEASE_AFTER_HOURS}isNewBooking(){return this.getBookingId()==="NEW_TEMP_EVENT"}isCheckedIn(){return this.bookingEvent.STATUS==="CHECKED-IN"}isCheckedOut(){return this.bookingEvent.STATUS==="CHECKED-OUT"}isBlockedDateEvent(){return this.bookingEvent.STATUS==="BLOCKED"||this.bookingEvent.STATUS==="BLOCKED-WITH-DATES"}getRoomId(){return this.bookingEvent.PR_ID}getCategoryByRoomId(t){return this.bookingEvent.roomsInfo.find((e=>e.physicalrooms.find((e=>e.id===t))))}hasSplitBooking(){return this.bookingEvent.hasOwnProperty("splitBookingEvents")&&this.bookingEvent.splitBookingEvents}canCheckIn(){if(!this.fromTimeStamp){let t=new Date(this.getCheckInDate());t.setHours(0,0,0,0);this.fromTimeStamp=t.getTime()}if(!this.toTimeStamp){let t=new Date(this.getCheckOutDate());t.setHours(0,0,0,0);this.toTimeStamp=t.getTime()}if(this.isCheckedIn()||this.isCheckedOut()){return false}if(this.fromTimeStamp<=this.todayTimeStamp&&this.todayTimeStamp<=this.toTimeStamp){return true}else{return false}}canCheckOut(){if(this.isCheckedIn()&&this.todayTimeStamp<=this.toTimeStamp){return true}else{return false}}handleBlockDateUpdate(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.bookingEvent=Object.assign(Object.assign({},this.bookingEvent),e.data)}handleEditBooking(){this.bookingEvent.TITLE=Vr.entries.Lcz_EditBookingFor;this.handleBookingOption("EDIT_BOOKING")}getStringDateFormat(t){return t.getFullYear()+"-"+(t.getMonth()<9?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<=9?"0":"")+t.getDate()}handleAddRoom(){let t=new Date(this.bookingEvent.FROM_DATE);t.setHours(0,0,0,0);let e=this.getStringDateFormat(t);let i=new Date(this.bookingEvent.TO_DATE);i.setHours(0,0,0,0);let s=this.getStringDateFormat(i);let n={ID:"",NAME:"",BOOKING_NUMBER:this.bookingEvent.BOOKING_NUMBER,FROM_DATE:e,TO_DATE:s,roomsInfo:this.bookingEvent.roomsInfo,ARRIVAL:this.bookingEvent.ARRIVAL,ADD_ROOM_TO_BOOKING:this.bookingEvent.ID,TITLE:"Add Room to #"+this.bookingEvent.BOOKING_NUMBER,event_type:"ADD_ROOM",ROOMS:this.bookingEvent.ROOMS,GUEST:this.bookingEvent.GUEST,message:this.bookingEvent.NOTES,SOURCE:this.bookingEvent.SOURCE,defaultDateRange:{fromDate:t,fromDateStr:"",toDate:i,toDateStr:"",dateDifference:0,editabled:true,message:"Including 5.00% City Tax - Excluding 11.00% VAT"}};this.handleBookingOption("ADD_ROOM",n)}handleCustomerCheckIn(){console.log("Handle Customer Check In")}handleCustomerCheckOut(){console.log("Handle Customer Check Out")}handleDeleteEvent(){this.hideBubble();this.deleteButton.emit(this.bookingEvent.POOL);console.log("Delete Event")}async handleUpdateBlockedDates(){try{this.isLoading="update";setTimeout((()=>{this.hideBubble()}),50);await this.eventService.updateBlockedEvent(this.bookingEvent);this.isLoading=""}catch(t){}}handleConvertBlockedDateToBooking(){this.handleBookingOption("BAR_BOOKING")}getRoomInfo(){const t=+this.bookingEvent.PR_ID;let e={};for(const i of this.bookingEvent.roomsInfo){for(const s of i.physicalrooms){if(t===s.id){e.CATEGORY=i.name;e.ROOM_NAME=s.name;e.ROOMS_INFO=i;return e}}}return e}renderTitle(t,e){switch(t){case"EDIT_BOOKING":return`${Vr.entries.Lcz_EditBookingFor} ${e.CATEGORY} ${e.ROOM_NAME}`;case"ADD_ROOM":return`${Vr.entries.Lcz_AddingUnitToBooking}# ${this.bookingEvent.BOOKING_NUMBER}`;case"SPLIT_BOOKING":return Vr.entries.Lcz_Adding+` ${e.CATEGORY} ${e.ROOM_NAME}`;default:return`${Vr.entries.Lcz_NewBookingFor} ${e.CATEGORY} ${e.ROOM_NAME}`}}handleBookingOption(t,e=null){const i=this.getRoomInfo();let s=e?e:this.bookingEvent;s.event_type=t;s.TITLE=this.renderTitle(t,i);if(["003","002","004"].includes(this.bookingEvent.STATUS_CODE)){s.roomsInfo=[i.ROOMS_INFO]}this.showBookingPopup.emit({key:"add",data:Object.assign({},s)});this.hideBubbleInfo.emit({key:"hidebubble",currentInfoBubbleId:this.getBookingId()})}getInfoElement(){var t,e;return n("div",{class:`iglPopOver infoBubble ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`},n("div",{class:"row p-0 m-0 pb-1"},n("div",{class:"pl-0 col-8 font-weight-bold font-medium-1 d-flex align-items-center"},n("img",{src:(e=(t=this.bookingEvent)===null||t===void 0?void 0:t.origin)===null||e===void 0?void 0:e.Icon,alt:"icon",class:"icon-image"}),n("p",{class:"p-0 m-0"},!this.bookingEvent.is_direct?this.bookingEvent.channel_booking_nbr:this.bookingEvent.BOOKING_NUMBER)),n("div",{class:"pr-0 col-4 text-right"},Or(this.currency.code),this.getTotalPrice())),n("div",{class:"row p-0 m-0"},n("div",{class:"pl-0 pr-0 col-12"},n("span",{class:"font-weight-bold"},Vr.entries.Lcz_In,": "),Ir(this.bookingEvent.FROM_DATE,"YYYY-MM-DD")," - ",n("span",{class:"font-weight-bold"},Vr.entries.Lcz_Out,": "),Ir(this.bookingEvent.TO_DATE,"YYYY-MM-DD"))),this.getArrivalTime()&&n("div",{class:"row p-0 m-0"},n("div",{class:"pl-0 pr-0 col-12"},n("span",{class:"font-weight-bold"},Vr.entries.Lcz_ArrivalTime,": "),this.getArrivalTime())),this.getTotalOccupants()&&n("div",{class:"row p-0 m-0"},n("div",{class:"pl-0 pr-0 col-12"},n("span",{class:"font-weight-bold"},Vr.entries.Lcz_Occupancy,": "),this.getTotalOccupants())),this.getPhoneNumber()&&n("div",{class:"row p-0 m-0"},n("div",{class:"pl-0 pr-0 col-12 text-wrap"},n("span",{class:"font-weight-bold"},Vr.entries.Lcz_Phone,": "),this.renderPhone())),this.getRatePlan()&&n("div",{class:"row p-0 m-0"},n("div",{class:"pl-0 pr-0 col-12"},n("span",{class:"font-weight-bold"},Vr.entries.Lcz_RatePlan,": "),this.getRatePlan())),this.getGuestNote()?n("div",{class:"row p-0 m-0"},n("div",{class:"col-12 pl-0 pr-0 text-wrap"},n("sapn",{class:"font-weight-bold"},Vr.entries.Lcz_Note,": "),this.getGuestNote())):null,this.getInternalNote()?n("div",{class:"row p-0 m-0"},n("div",{class:"col-12 pl-0 pr-0 text-wrap"},n("span",{class:"font-weight-bold"},Vr.entries.Lcz_InternalRemark,": "),this.getInternalNote())):null,n("div",{class:"row p-0 m-0 mt-2"},n("div",{class:"full-width btn-group  btn-group-sm font-small-3",role:"group"},n("button",{type:"button",class:`btn btn-primary d-flex align-items-center justify-content-center ${this.hideButtons?"mr-0":"mr-1"} ${this.shouldHideUnassignUnit?"w-50":""}`,onClick:t=>{this.handleEditBooking()},disabled:!this.bookingEvent.IS_EDITABLE},n("svg",{class:"p-0 m-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",height:"12",width:"12",viewBox:"0 0 512 512"},n("path",{fill:"currentColor",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"})),n("span",null," ",Vr.entries.Lcz_Edit)),this.bookingEvent.IS_EDITABLE&&!this.hideButtons&&n("button",{type:"button",class:`btn btn-primary d-flex align-items-center justify-content-center ${!this.shouldHideUnassignUnit?"mr-1":"w-50"}`,onClick:t=>{this.handleAddRoom()}},n("svg",{class:"p-0 m-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",height:12,width:12},n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})),n("span",null," ",Vr.entries.Lcz_AddRoom)),this.hideButtons?null:!this.shouldHideUnassignUnit&&n("button",{type:"button",class:"btn btn-primary p-0 d-flex align-items-center justify-content-center",onClick:t=>{this.handleDeleteEvent()},disabled:!this.bookingEvent.IS_EDITABLE||this.is_vacation_rental},n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"8.75",class:"p-0 m-0",viewBox:"0 0 384 512"},n("path",{fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})),n("span",{class:"m-0 p-0"}," ",Vr.entries.Lcz_Unassign)))))}getNewBookingOptions(){const t=this.bookingEvent.roomsInfo[0].rateplans.some((t=>t.is_active));return n("div",{class:`iglPopOver newBookingOptions ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`},t?n(r,null,n("button",{type:"button",class:"d-block full-width btn btn-sm btn-primary mb-1 font-small-3 square",onClick:t=>{this.handleBookingOption("BAR_BOOKING")}},Vr.entries.Lcz_CreateNewBooking),this.hasSplitBooking()?n("button",{type:"button",class:"d-block full-width btn btn-sm btn-primary mb-1 font-small-3 square",onClick:t=>{this.handleBookingOption("SPLIT_BOOKING")}},Vr.entries.Lcz_AssignUnitToExistingBooking):null):n("p",{class:"text-danger"},Vr.entries.Lcz_NoRatePlanDefined),n("button",{type:"button",class:"d-block full-width btn btn-sm btn-primary font-small-3 square",onClick:t=>{this.handleBookingOption("BLOCK_DATES")}},Vr.entries.Lcz_Blockdates))}getBlockedView(){return n("div",{class:`iglPopOver blockedView ${this.bubbleInfoTop?"bubbleInfoAbove":""} text-left`},n("igl-block-dates-view",{isEventHover:true,entryHour:this.bookingEvent.ENTRY_HOUR,entryMinute:this.bookingEvent.ENTRY_MINUTE,defaultData:this.bookingEvent,fromDate:c(this.bookingEvent.FROM_DATE,"YYYY-MM-DD").format("DD MM YYYY"),toDate:c(this.bookingEvent.TO_DATE,"YYYY-MM-DD").format("DD MM YYYY"),entryDate:this.getEntryDate(),onDataUpdateEvent:t=>this.handleBlockDateUpdate(t)}),n("div",{class:"row p-0 m-0 mt-2"},n("div",{class:"full-width btn-group btn-group-sm font-small-3",role:"group"},n("button",{disabled:this.isLoading==="update",type:"button",class:"btn btn-primary mr-1 d-flex align-items-center justify-content-center",onClick:t=>{this.handleUpdateBlockedDates()}},this.isLoading==="update"?n("i",{class:"la la-circle-o-notch spinner mx-1"}):n("svg",{class:"p-0 m-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",height:"12",width:"12",viewBox:"0 0 512 512"},n("path",{fill:"currentColor",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"})),n("span",null," ",Vr.entries.Lcz_Update)),n("button",{type:"button",class:"btn btn-primary",onClick:t=>{this.handleConvertBlockedDateToBooking()}},Vr.entries.Lcz_ConvertToBooking),n("button",{type:"button",class:"btn btn-danger ml-1 d-flex align-items-center justify-content-center",onClick:t=>{this.handleDeleteEvent()}},n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12",width:"10.5",viewBox:"0 0 448 512"},n("path",{fill:"currentColor",d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})),n("span",null," ",Vr.entries.Lcz_Delete)))))}render(){return n(o,null,n("div",{class:`pointerContainer ${this.bubbleInfoTop?"pointerContainerTop":""}`},n("div",{class:`bubblePointer ${this.bubbleInfoTop?"bubblePointTop":"bubblePointBottom"}`})),this.isBlockedDateEvent()?this.getBlockedView():null,this.isNewBooking()?this.getNewBookingOptions():null,!this.isBlockedDateEvent()&&!this.isNewBooking()?this.getInfoElement():null)}get element(){return a(this)}};sc.style=ic;const nc=".sc-igl-booking-overview-page-h{display:block}.sc-igl-booking-overview-page-h>*.sc-igl-booking-overview-page{margin:0;padding:auto}.scrollContent.sc-igl-booking-overview-page{height:calc(100% - 79px);overflow:auto;position:relative}";const oc=class{constructor(t){i(this,t);this.roomsDataUpdate=s(this,"roomsDataUpdate",7);this.bookingData=undefined;this.propertyId=undefined;this.message=undefined;this.showSplitBookingOption=undefined;this.eventType=undefined;this.currency=undefined;this.adultChildConstraints=undefined;this.ratePricingMode=undefined;this.dateRangeData=undefined;this.defaultDaterange=undefined;this.selectedRooms=undefined;this.adultChildCount=undefined;this.sourceOptions=undefined;this.bookedByInfoData=undefined;this.initialRoomIds=undefined}getSplitBookings(){return this.bookingData.hasOwnProperty("splitBookingEvents")&&this.bookingData.splitBookingEvents||[]}isEventType(t){return t===this.eventType}render(){var t,e;return n(o,null,n("igl-book-property-header",{bookedByInfoData:this.bookedByInfoData,defaultDaterange:this.defaultDaterange,dateRangeData:this.dateRangeData,adultChildCount:this.adultChildCount,splitBookingId:this.showSplitBookingOption,bookingData:this.bookingData,sourceOptions:this.sourceOptions,message:this.message,bookingDataDefaultDateRange:this.bookingData.defaultDateRange,showSplitBookingOption:this.showSplitBookingOption,adultChildConstraints:this.adultChildConstraints,splitBookings:this.getSplitBookings(),propertyId:this.propertyId}),n("div",{class:" text-left"},(e=(t=this.bookingData)===null||t===void 0?void 0:t.roomsInfo)===null||e===void 0?void 0:e.map((t=>n("igl-booking-rooms",{initialRoomIds:this.initialRoomIds,isBookDisabled:Object.keys(this.bookedByInfoData).length<=1,key:`room-info-${t.id}`,currency:this.currency,ratePricingMode:this.ratePricingMode,dateDifference:this.dateRangeData.dateDifference,bookingType:this.bookingData.event_type,roomTypeData:t,class:"mt-2 mb-1 p-0",roomInfoId:this.selectedRooms.has(`c_${t.id}`)?t.id:null,defaultData:this.selectedRooms.get(`c_${t.id}`),onDataUpdateEvent:t=>this.roomsDataUpdate.emit(t.detail)})))),n("igl-book-property-footer",{class:"p-0 mb-1 mt-3",eventType:this.bookingData.event_type,disabled:this.selectedRooms.size===0}))}};oc.style=nc;const rc=".sc-igl-booking-room-rate-plan-h{display:block;margin-bottom:0.5rem}.currency.sc-igl-booking-room-rate-plan{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-igl-booking-room-rate-plan{font-size:14px;line-height:0;padding:0;height:0}.rate-input-container.sc-igl-booking-room-rate-plan{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}@media only screen and (min-width: 1200px){.rateplan-name-container.sc-igl-booking-room-rate-plan{width:40%}.rateplan-container.sc-igl-booking-room-rate-plan{width:40%}}@media only screen and (min-width: 991px){.max-w-300.sc-igl-booking-room-rate-plan{max-width:200px}.rate-input-container.sc-igl-booking-room-rate-plan{max-width:100px}}@media only screen and (min-width: 991px) and (max-width: 1300px){.rateplan-name-container.sc-igl-booking-room-rate-plan{width:35%}}@media only screen and (max-width: 768px){.booking-btn.sc-igl-booking-room-rate-plan{width:100%}}.total-nights-container.sc-igl-booking-room-rate-plan{width:max-content}.rateInputBorder.sc-igl-booking-room-rate-plan{border-top-left-radius:3px !important;border-bottom-left-radius:3px !important}.nightBorder.sc-igl-booking-room-rate-plan{border-left-width:0;border-top-right-radius:3px !important;border-bottom-right-radius:3px !important}";const ac=class{constructor(t){i(this,t);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.gotoSplitPageTwoEvent=s(this,"gotoSplitPageTwoEvent",7);this.initialRateValue=0;this.defaultData=undefined;this.ratePlanData=undefined;this.totalAvailableRooms=undefined;this.index=undefined;this.ratePricingMode=[];this.currency=undefined;this.physicalrooms=undefined;this.shouldBeDisabled=undefined;this.dateDifference=undefined;this.bookingType="PLUS_BOOKING";this.fullyBlocked=undefined;this.isBookDisabled=false;this.defaultRoomId=undefined;this.selectedRoom=undefined;this.selectedData=undefined;this.ratePlanChangedState=false}getAvailableRooms(t){let e=[];t.forEach((t=>{if(t.Is_Fully_Available){e.push({name:t.name,id:t.pr_id})}}));return e}componentWillLoad(){console.log("default data",this.defaultData);this.updateSelectedRatePlan(this.ratePlanData)}disableForm(){if(this.bookingType==="EDIT_BOOKING"&&this.shouldBeDisabled){return false}else{return this.selectedData.is_closed||this.totalAvailableRooms===0||this.selectedData.physicalRooms.length===0}}setAvailableRooms(t){let e=this.getAvailableRooms(t);if(this.bookingType==="EDIT_BOOKING"&&this.shouldBeDisabled){if(this.selectedRoom){e.push({id:this.selectedRoom.roomId,name:this.selectedRoom.roomName});e.sort(((t,e)=>{if(t.name<e.name){return-1}if(t.name>e.name){return 1}return 0}))}}return e}getSelectedOffering(t){return this.ratePlanData.variations.find((e=>e.adult_child_offering===t))}updateSelectedRatePlan(t){var e;this.selectedData={ratePlanId:t.id,adult_child_offering:t.variations[t.variations.length-1].adult_child_offering,rateType:1,totalRooms:0,rate:(e=t.variations[t.variations.length-1].amount)!==null&&e!==void 0?e:0,ratePlanName:t.name,adultCount:t.variations[t.variations.length-1].adult_nbr,childrenCount:t.variations[t.variations.length-1].child_nbr,cancelation:t.cancelation,guarantee:t.guarantee,isRateModified:false,defaultSelectedRate:0,index:this.index,is_closed:t.is_closed,physicalRooms:this.setAvailableRooms(this.ratePlanData.assignable_units),dateDifference:this.dateDifference};if(this.defaultData){for(const[t,e]of Object.entries(this.defaultData)){this.selectedData[t]=e}}if(this.defaultData&&this.defaultData.isRateModified){console.log("object");if(this.selectedData.rateType===1){console.log("object1");this.initialRateValue=this.selectedData.rate}else{console.log("object2");this.initialRateValue=this.selectedData.rate*this.dateDifference}}else{this.initialRateValue=this.selectedData.rate/this.dateDifference}console.log("initialRateValue",this.initialRateValue)}async ratePlanDataChanged(t){this.selectedData=Object.assign(Object.assign({},this.selectedData),{adult_child_offering:t.variations[t.variations.length-1].adult_child_offering,adultCount:t.variations[t.variations.length-1].adult_nbr,childrenCount:t.variations[t.variations.length-1].child_nbr,rate:this.handleRateDaysUpdate(),physicalRooms:this.setAvailableRooms(t.assignable_units)});this.initialRateValue=this.selectedData.rateType===2?this.selectedData.rate/this.dateDifference:this.selectedData.rate;this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"rate",data:this.selectedData})}handleRateDaysUpdate(){if(this.selectedData.isRateModified){return this.selectedData.defaultSelectedRate}const t=this.getSelectedOffering(this.selectedData.adult_child_offering);return t?t.amount:0}handleInput(t){const e=t.target;let i=e.value.replace(/[^0-9.]/g,"");const s=/^\d*\.?\d*$/;if(!s.test(i)){i=i.substring(0,i.length-1)}e.value=i;if(i){this.selectedData.isRateModified=true;this.handleDataChange("rate",t)}else{this.selectedData=Object.assign(Object.assign({},this.selectedData),{rate:-1,totalRooms:0});this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:"rate",data:this.selectedData})}}handleDataChange(t,e){const i=e.target.value;switch(t){case"adult_child_offering":this.updateOffering(i);break;case"rate":this.updateRate(i);break;default:this.updateGenericData(t,i);break}this.dataUpdateEvent.emit({key:"roomRatePlanUpdate",changedKey:t,data:this.selectedData})}updateOffering(t){const e=this.getSelectedOffering(t);if(e){this.selectedData=Object.assign(Object.assign({},this.selectedData),{adult_child_offering:t,adultCount:e.adult_nbr,childrenCount:e.child_nbr,rate:e.amount,isRateModified:false})}}updateRate(t){const e=t===""?0:Number(t);this.selectedData=Object.assign(Object.assign({},this.selectedData),{rate:e,totalRooms:t===""?0:this.selectedData.totalRooms,defaultSelectedRate:this.selectedData.rateType===2?e/this.dateDifference:e})}updateGenericData(t,e){this.selectedData=Object.assign(Object.assign({},this.selectedData),{[t]:e===""?0:parseInt(e)})}bookProperty(){this.dataUpdateEvent.emit({key:"clearData",data:this.selectedData});this.handleDataChange("totalRooms",{target:{value:"1"}});this.gotoSplitPageTwoEvent.emit({key:"gotoSplitPage",data:""})}renderRate(){if(this.selectedData.isRateModified){console.log("selectedData.rate",this.selectedData.rate);return this.selectedData.rate===-1?"":this.selectedData.rate}return this.selectedData.rateType===1?Number(this.selectedData.rate).toFixed(2):Number(this.initialRateValue).toFixed(2)}render(){return n(o,null,n("div",{class:"d-flex flex-column m-0 p-0 flex-lg-row align-items-lg-center justify-content-lg-between "},n("div",{class:"rateplan-name-container"},this.bookingType==="BAR_BOOKING"?n(r,null,n("span",{class:"font-weight-bold\t"},this.ratePlanData.name.split("/")[0]),n("span",null,"/",this.ratePlanData.name.split("/")[1])):n("span",null,this.ratePlanData.name),n("ir-tooltip",{message:this.ratePlanData.cancelation+this.ratePlanData.guarantee})),n("div",{class:"d-md-flex justify-content-md-end  align-items-md-center  flex-fill rateplan-container"},n("div",{class:"mt-1 mt-lg-0 flex-fill max-w-300"},n("fieldset",{class:"position-relative"},n("select",{disabled:this.disableForm(),class:"form-control  input-sm",id:l(),onChange:t=>this.handleDataChange("adult_child_offering",t)},this.ratePlanData.variations.map((t=>n("option",{value:t.adult_child_offering,selected:this.selectedData.adult_child_offering===t.adult_child_offering},t.adult_child_offering)))))),n("div",{class:"m-0 p-0 d-md-flex justify-content-between ml-md-1 "},n("div",{class:" d-flex mt-1  mt-lg-0 m-0 p-0 rate-total-night-view   "},n("fieldset",{class:"position-relative has-icon-left m-0 p-0 rate-input-container  "},n("input",{disabled:this.disableForm(),type:"text",class:"form-control input-sm rate-input py-0 m-0 rounded-0 rateInputBorder",value:this.renderRate(),id:l(),placeholder:Vr.entries.Lcz_Rate||"Rate",onInput:t=>this.handleInput(t)}),n("span",{class:"currency"},Or(this.currency.code))),n("fieldset",{class:"position-relative m-0 total-nights-container p-0 "},n("select",{disabled:this.disableForm(),class:"form-control input-sm m-0 nightBorder rounded-0  py-0",id:l(),onChange:t=>this.handleDataChange("rateType",t)},this.ratePricingMode.map((t=>n("option",{value:t.CODE_NAME,selected:this.selectedData.rateType===+t.CODE_NAME},t.CODE_VALUE_EN)))))),this.bookingType==="PLUS_BOOKING"||this.bookingType==="ADD_ROOM"?n("div",{class:"flex-lg-fill  mt-lg-0 ml-md-2 m-0 mt-1 p-0"},n("fieldset",{class:"position-relative"},n("select",{disabled:this.selectedData.rate===0||this.disableForm(),class:"form-control input-sm",id:l(),onChange:t=>this.handleDataChange("totalRooms",t)},Array.from({length:this.totalAvailableRooms+1},((t,e)=>e)).map((t=>n("option",{value:t,selected:this.selectedData.totalRooms===t},t)))))):null),this.bookingType==="EDIT_BOOKING"?n(r,null,n("div",{class:" m-0 p-0  mt-lg-0  ml-md-1 mt-md-1 d-none d-md-block"},n("fieldset",{class:"position-relative"},n("input",{disabled:this.disableForm(),type:"radio",name:"ratePlanGroup",value:"1",onChange:t=>this.handleDataChange("totalRooms",t),checked:this.selectedData.totalRooms===1}))),n("button",{disabled:this.selectedData.rate===-1||this.disableForm(),type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1  mt-1 d-md-none ",onClick:()=>this.bookProperty()},this.selectedData.totalRooms===1?Vr.entries.Lcz_Current:Vr.entries.Lcz_Select)):null,this.bookingType==="BAR_BOOKING"||this.bookingType==="SPLIT_BOOKING"?n("button",{disabled:this.selectedData.rate===-1||this.disableForm()||this.bookingType==="SPLIT_BOOKING"&&this.isBookDisabled,type:"button",class:"btn btn-primary booking-btn mt-lg-0 btn-sm ml-md-1  mt-1 ",onClick:()=>this.bookProperty()},Vr.entries.Lcz_Book):null)))}static get watchers(){return{ratePlanData:["ratePlanDataChanged"]}}};ac.style=rc;const lc=".sc-igl-booking-rooms-h{display:block}";const hc=class{constructor(t){i(this,t);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.validBookingTypes=["PLUS_BOOKING","ADD_ROOM","EDIT_BOOKING","SPLIT_BOOKING"];this.roomTypeData=undefined;this.defaultData=undefined;this.bookingType="PLUS_BOOKING";this.dateDifference=undefined;this.ratePricingMode=[];this.roomInfoId=null;this.currency=undefined;this.selectedRooms=[];this.totalRooms=undefined;this.isBookDisabled=undefined;this.initialRoomIds=undefined;this.roomsDistributions=[]}componentWillLoad(){this.initializeRoomData()}initializeRoomData(){const{inventory:t,rateplans:e}=this.roomTypeData;this.totalRooms=t||0;this.selectedRooms=new Array(e.length).fill(0);this.roomsDistributions=this.calculateInitialDistributions(e,t)}handleRoomTypeData(){this.initializeRoomData()}calculateInitialDistributions(t,e){let i=new Array(t.length).fill(e);if(this.defaultData&&this.bookingType!=="EDIT_BOOKING"&&e>0){let t=[];let e=0;this.defaultData.forEach((s=>{this.selectedRooms[s.index]=s.totalRooms;i[s.index]=s.totalRooms;e+=s.totalRooms;t.push(s.index)}));if(t.length<i.length){i.forEach(((s,n)=>{if(!t.includes(n)){if(e===this.totalRooms){i[n]=0}else{i[n]=i[n]-e}}else{if(e<this.totalRooms){i[n]=this.totalRooms-e+i[n]}}}))}}else{i.fill(e)}return i}onRoomDataUpdate(t,e){t.stopImmediatePropagation();const{detail:{data:i,changedKey:s}}=t;let n=Object.assign({},i);if(s==="totalRooms"){this.handleTotalRoomsUpdate(e,n.totalRooms)}n=Object.assign(Object.assign({},n),{roomCategoryId:this.roomTypeData.id,roomCategoryName:this.roomTypeData.name,inventory:this.roomTypeData.inventory});this.dataUpdateEvent.emit({key:i.key,data:n,changedKey:s})}handleTotalRoomsUpdate(t,e){if(this.selectedRooms[t]!==e){this.selectedRooms[t]=e;this.updateRatePlanTotalRooms(t)}}updateRatePlanTotalRooms(t){const e=t=>this.selectedRooms.reduce(((e,i,s)=>s!==t?e+i:e),0);const i=this.selectedRooms.map(((i,s)=>{if(s===t){return this.roomsDistributions[s]}const n=e(s);const o=this.totalRooms-n;return o>0?o:0}));if(JSON.stringify(this.roomsDistributions)!==JSON.stringify(i)){this.roomsDistributions=[...i]}}render(){const t=this.validBookingTypes.includes(this.bookingType);return n(o,null,t&&n("div",{class:"font-weight-bold font-medium-1 mb-1"},this.roomTypeData.name),this.roomTypeData.rateplans.map(((e,i)=>{if(e.variations!==null){let s=this.roomInfoId&&this.roomInfoId===this.roomTypeData.id;let o=-1;if(s&&this.initialRoomIds){o=this.initialRoomIds.roomId}return n("igl-booking-room-rate-plan",{index:i,isBookDisabled:this.isBookDisabled,key:`rate-plan-${e.id}`,ratePricingMode:this.ratePricingMode,class:t?"":"",currency:this.currency,dateDifference:this.dateDifference,ratePlanData:e,totalAvailableRooms:this.roomsDistributions[i],bookingType:this.bookingType,defaultData:this.defaultData&&this.defaultData.get(`p_${e.id}`)||null,shouldBeDisabled:s,onDataUpdateEvent:t=>this.onRoomDataUpdate(t,i),physicalrooms:this.roomTypeData.physicalrooms,defaultRoomId:o,selectedRoom:this.initialRoomIds})}else{return null}})))}static get watchers(){return{roomTypeData:["handleRoomTypeData"]}}};hc.style=lc;const cc={days:[],months:[]};const{state:dc,onChange:uc}=Fr(cc);const fc=".sc-igl-cal-body-h{display:block}.bodyContainer.sc-igl-cal-body{position:relative}.roomRow.sc-igl-cal-body{width:max-content}.roomRow.sc-igl-cal-body:first-child{margin-top:80px}.categoryName.sc-igl-cal-body{font-weight:bold;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.cellData.sc-igl-cal-body{width:70px;height:30px;display:inline-grid;border-top:1px solid #e0e0e0;border-left:1px solid #e0e0e0;vertical-align:top}.cellData.sc-igl-cal-body:nth-child(2){border-left:0px}.cellData.sc-igl-cal-body:last-child{border-right:1px solid #e0e0e0}.roomHeaderCell.sc-igl-cal-body{position:-webkit-sticky;position:sticky;left:0;background:#fff;border-right:1px solid #ccc;width:170px;z-index:1}.currentDay.sc-igl-cal-body{background-color:#e3f3fa}.dragOverHighlight.sc-igl-cal-body{background-color:#f5f5dc !important}.selectedDay.sc-igl-cal-body{background-color:#f9f9c9 !important}.categoryTitle.sc-igl-cal-body{grid-template-columns:1fr 20px;padding-left:10px;cursor:pointer;height:40px;font-size:0.9em}.categoryTitle.sc-igl-cal-body>.sc-igl-cal-body:nth-child(1){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.roomTitle.sc-igl-cal-body{padding-left:20px;font-size:0.9em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.roomTitle.sc-igl-cal-body>.sc-igl-cal-body:nth-child(1){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.roomTitle.pl10.sc-igl-cal-body{padding-left:10px}.categoryPriceColumn.sc-igl-cal-body{align-items:center;height:40px;-webkit-user-select:none;user-select:none}.bookingEventsContainer.sc-igl-cal-body{position:absolute;top:0;left:0}";const pc=class{constructor(t){i(this,t);this.showBookingPopup=s(this,"showBookingPopup",7);this.scrollPageToRoom=s(this,"scrollPageToRoom",7);this.addBookingDatasEvent=s(this,"addBookingDatasEvent",7);this.selectedRooms={};this.fromRoomId=-1;this.currentDate=new Date;this.isScrollViewDragging=undefined;this.calendarData=undefined;this.today=undefined;this.currency=undefined;this.language=undefined;this.countryNodeList=undefined;this.dragOverElement="";this.renderAgain=false}componentWillLoad(){this.currentDate.setHours(0,0,0,0)}dragOverHighlightElementHandler(t){this.dragOverElement=t.detail.dragOverElement}gotoRoom(t){let e=t.detail.roomId;let i=this.getRoomCategoryByRoomId(e);if(!i.expanded){this.toggleCategory(i);setTimeout((()=>{this.scrollToRoom(e)}),10)}else{this.scrollToRoom(e)}}addToBeAssignedEvents(t){this.addBookingDatas(t.detail.data);this.renderElement()}scrollToRoom(t){this.scrollPageToRoom.emit({key:"scrollPageToRoom",id:t,refClass:"room_"+t})}getRoomCategoryByRoomId(t){return this.calendarData.roomsInfo.find((e=>this.getCategoryRooms(e).find((e=>this.getRoomId(e)===t))))}getCategoryName(t){return t.name}getCategoryId(t){return t.id}getTotalPhysicalRooms(t){return this.getCategoryRooms(t).length}getCategoryRooms(t){return t&&t.physicalrooms||[]}getRoomName(t){return t.name}getRoomId(t){return t.id}getRoomById(t,e){return t.find((t=>this.getRoomId(t)===e))}getBookingData(){return this.calendarData.bookingEvents}addBookingDatas(t){this.addBookingDatasEvent.emit(t)}getSelectedCellRefName(t,e){return"room_"+t+"_"+e.currentDate}getSplitBookingEvents(t){console.log(t.FROM_DATE);return this.getBookingData().some((e=>{if(!["003","002","004"].includes(e.STATUS_CODE)){if(new Date(t.FROM_DATE).getTime()>=new Date(e.FROM_DATE).getTime()&&new Date(t.FROM_DATE).getTime()<=new Date(e.TO_DATE).getTime()){return e}}}))}closeWindow(){let t=this.getBookingData().findIndex((t=>t.ID==="NEW_TEMP_EVENT"));if(t!==-1){this.getBookingData().splice(t,1);console.log("removed item..");this.renderElement()}}addNewEvent(t){let e=Object.keys(this.selectedRooms);let i,s;if(this.selectedRooms[e[0]].currentDate<this.selectedRooms[e[1]].currentDate){i=new Date(this.selectedRooms[e[0]].currentDate);s=new Date(this.selectedRooms[e[1]].currentDate)}else{i=new Date(this.selectedRooms[e[1]].currentDate);s=new Date(this.selectedRooms[e[0]].currentDate)}this.newEvent={ID:"NEW_TEMP_EVENT",NAME:n("span",null," "),EMAIL:"",PHONE:"",convertBooking:false,REFERENCE_TYPE:"PHONE",FROM_DATE:i.getFullYear()+"-"+this.getTwoDigitNumStr(i.getMonth()+1)+"-"+this.getTwoDigitNumStr(i.getDate()),TO_DATE:s.getFullYear()+"-"+this.getTwoDigitNumStr(s.getMonth()+1)+"-"+this.getTwoDigitNumStr(s.getDate()),BALANCE:"",NOTES:"",RELEASE_AFTER_HOURS:0,PR_ID:this.selectedRooms[e[0]].roomId,ENTRY_DATE:"",NO_OF_DAYS:(s-i)/864e5,ADULTS_COUNT:1,COUNTRY:"",INTERNAL_NOTE:"",RATE:"",TOTAL_PRICE:"",RATE_PLAN:"",ARRIVAL_TIME:"",TITLE:Vr.entries.Lcz_NewBookingFor,roomsInfo:[t],CATEGORY:t.name,event_type:"BAR_BOOKING",STATUS:"TEMP-EVENT",defaultDateRange:{fromDate:null,fromDateStr:"",toDate:null,toDateStr:"",dateDifference:(s-i)/864e5,editable:false,message:"Including 5.00% City Tax - Excluding 11.00% VAT"}};let o=t.name+" "+this.getRoomName(this.getRoomById(this.getCategoryRooms(t),this.selectedRooms[e[0]].roomId));this.newEvent.BLOCK_DATES_TITLE=Vr.entries.Lcz_BlockDatesFor+o;this.newEvent.TITLE+=o;this.newEvent.defaultDateRange.toDate=new Date(this.newEvent.TO_DATE+"T00:00:00");this.newEvent.defaultDateRange.fromDate=new Date(this.newEvent.FROM_DATE+"T00:00:00");this.newEvent.defaultDateRange.fromDateStr=this.getDateStr(this.newEvent.defaultDateRange.fromDate);this.newEvent.defaultDateRange.toDateStr=this.getDateStr(this.newEvent.defaultDateRange.toDate);this.newEvent.ENTRY_DATE=(new Date).toISOString();this.newEvent.legendData=this.calendarData.formattedLegendData;let r=this.getSplitBookingEvents(this.newEvent);if(r){this.newEvent.splitBookingEvents=r}this.getBookingData().push(this.newEvent);return this.newEvent}getTwoDigitNumStr(t){return t<=9?"0"+t:t}getDateStr(t,e="default"){return t.getDate()+" "+t.toLocaleString(e,{month:"short"})+" "+t.getFullYear()}removeNewEvent(){this.calendarData.bookingEvents=this.calendarData.bookingEvents.filter((t=>t.ID!=="NEW_TEMP_EVENT"));this.newEvent=null}clickCell(t,e,i){if(!this.isScrollViewDragging&&e.currentDate>=this.currentDate.getTime()){let s=this.getSelectedCellRefName(t,e);if(this.selectedRooms.hasOwnProperty(s)){this.removeNewEvent();delete this.selectedRooms[s];this.renderElement();return}else if(Object.keys(this.selectedRooms).length!=1||this.fromRoomId!=t){this.removeNewEvent();this.selectedRooms={};this.selectedRooms[s]=Object.assign(Object.assign({},e),{roomId:t});this.fromRoomId=t;this.renderElement()}else{this.selectedRooms[s]=Object.assign(Object.assign({},e),{roomId:t});this.addNewEvent(i);this.selectedRooms={};this.renderElement();this.showNewBookingPopup(this.newEvent)}}}showNewBookingPopup(t){console.log(t)}renderElement(){this.renderAgain=!this.renderAgain}getGeneralCategoryDayColumns(t,e=false,i){return dc.days.map((s=>n("div",{class:`cellData  font-weight-bold categoryPriceColumn ${t+"_"+s.day} ${s.day===this.today?"currentDay":""}`},e?n("span",{class:"categoryName"},s.rate[i].exposed_inventory.rts):"")))}getGeneralRoomDayColumns(t,e){return this.calendarData.days.map((i=>n("div",{class:`cellData ${"room_"+t+"_"+i.day} ${i.day===this.today?"currentDay":""} ${this.dragOverElement===t+"_"+i.day?"dragOverHighlight":""} ${this.selectedRooms.hasOwnProperty(this.getSelectedCellRefName(t,i))?"selectedDay":""}`,onClick:()=>this.clickCell(t,i,e)})))}toggleCategory(t){t.expanded=!t.expanded;this.renderElement()}getRoomCategoryRow(t,e){if(this.getTotalPhysicalRooms(t)<=1){return null}return n("div",{class:"roomRow"},n("div",{class:`cellData text-left align-items-center roomHeaderCell categoryTitle ${"category_"+this.getCategoryId(t)}`,onClick:()=>this.toggleCategory(t)},n("div",{class:"categoryName"},this.getCategoryName(t)),t.expanded?n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:14,width:14},n("path",{fill:"#6b6f82",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"})):n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",height:14,width:14},n("path",{fill:"#6b6f82",d:"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"}))),this.getGeneralCategoryDayColumns("category_"+this.getCategoryId(t),true,e))}getRoomsByCategory(t){var e;if(!t.expanded){return[]}return(e=this.getCategoryRooms(t))===null||e===void 0?void 0:e.map((e=>n("div",{class:"roomRow"},n("div",{class:`cellData text-left align-items-center roomHeaderCell  roomTitle ${this.getTotalPhysicalRooms(t)<=1?"pl10":""} ${"room_"+this.getRoomId(e)}`,"data-room":this.getRoomId(e)},n("div",null,this.getTotalPhysicalRooms(t)<=1?this.getCategoryName(t):this.getRoomName(e))),this.getGeneralRoomDayColumns(this.getRoomId(e),t))))}getRoomRows(){return this.calendarData.roomsInfo.map(((t,e)=>{if(t.is_active){return[this.getRoomCategoryRow(t,e),this.getRoomsByCategory(t)]}else{return null}}))}render(){var t;return n(o,null,n("div",{class:"bodyContainer"},this.getRoomRows(),n("div",{class:"bookingEventsContainer preventPageScroll"},(t=this.getBookingData())===null||t===void 0?void 0:t.map((t=>n("igl-booking-event",{language:this.language,is_vacation_rental:this.calendarData.is_vacation_rental,countryNodeList:this.countryNodeList,currency:this.currency,"data-component-id":t.ID,bookingEvent:t,allBookingEvents:this.getBookingData()}))))))}};pc.style=fc;const gc=".sc-igl-cal-footer-h{display:block;position:sticky;bottom:0;width:max-content;z-index:3}.footerCell.sc-igl-cal-footer{display:-moz-inline-grid;display:-ms-inline-grid;display:inline-grid;position:-webkit-sticky;position:sticky;bottom:0;width:70px;height:40px;background:#fff;vertical-align:top;border-top:1px solid #e0e0e0}.bottomLeftCell.sc-igl-cal-footer{left:-1px;z-index:2;width:170px;text-align:left;padding-left:15px;color:#000000}.footerCell.sc-igl-cal-footer i.sc-igl-cal-footer{margin-right:5px}.legendBtn.sc-igl-cal-footer{color:#41bff3;cursor:pointer}.isOnline.sc-igl-cal-footer i.sc-igl-cal-footer{color:#2f9c3f;font-weight:bold}.isOffline.sc-igl-cal-footer i.sc-igl-cal-footer{font-weight:bold}.isOffline.sc-igl-cal-footer{color:#a40000}.dayTitle.sc-igl-cal-footer{font-size:0.8em;font-weight:600;display:grid;user-select:none}.currentDay.sc-igl-cal-footer .dayTitle.sc-igl-cal-footer{font-weight:bold}.currentDay.sc-igl-cal-footer{background-color:#e3f3fa}.dayCapacityPercent.sc-igl-cal-footer{font-size:0.75em}.badge-pill.sc-igl-cal-footer{padding-left:1em;padding-right:1em;font-size:0.7em;margin-bottom:2px}";const mc=class{constructor(t){i(this,t);this.optionEvent=s(this,"optionEvent",7);this.calendarData=undefined;this.today=undefined}handleOptionEvent(t,e=""){this.optionEvent.emit({key:t,data:e})}render(){return n(o,{class:"footerContainer"},n("div",{class:"footerCell bottomLeftCell align-items-center preventPageScroll"},n("div",{class:"legendBtn",onClick:()=>this.handleOptionEvent("showLegend")},n("i",{class:"la la-square"}),n("u",null,Vr.entries.Lcz_Legend))),this.calendarData.days.map((t=>n("div",{class:"footerCell align-items-center"},n("div",{class:`dayTitle full-height align-items-center ${t.day===this.today?"currentDay":""}`},t.dayDisplayName)))))}};mc.style=gc;class bc{async getUnassignedDates(t,e,i){try{const s=JSON.parse(sessionStorage.getItem("token"));if(s){const{data:n}=await yh.post(`/Get_UnAssigned_Dates?Ticket=${s}`,{propertyid:t,from_date:e,to_date:i});if(n.ExceptionMsg!==""){throw new Error(n.ExceptionMsg)}return this.convertUnassignedDates(n.My_Result)}else{throw new Error("Invalid Token")}}catch(t){console.error(t);throw new Error(t)}}async getUnassignedRooms(t,e,i,s){try{const n=JSON.parse(sessionStorage.getItem("token"));if(n){const{data:o}=await yh.post(`/Get_Aggregated_UnAssigned_Rooms?Ticket=${n}`,{propertyid:t,specific_date:e});if(o.ExceptionMsg!==""){throw new Error(o.ExceptionMsg)}return this.transformToAssignable(o,i,s)}else{throw new Error("Invalid Token")}}catch(t){console.error(t);throw new Error(t)}}async assignUnit(t,e,i){try{const s=JSON.parse(sessionStorage.getItem("token"));if(s){const{data:n}=await yh.post(`/Assign_Exposed_Room?Ticket=${s}`,{booking_nbr:t,identifier:e,pr_id:i});if(n.ExceptionMsg!==""){throw new Error(n.ExceptionMsg)}console.log(n);return n["My_Result"]}else{throw new Error("Invalid token")}}catch(t){console.error(t);throw new Error(t)}}cleanSpacesAndSpecialChars(t){const e=/[^a-zA-Z0-9]+/g;return t.replace(e,"")}transformToAssignable(t,e,i){const s=[];t.My_Result.forEach((t=>{t.unassigned_rooms.forEach((t=>{let n={roomTypeName:t.room_type_name,ID:t.identifier,NAME:t.guest_name,identifier:t.identifier,FROM_DATE:t.unassigned_date,TO_DATE:t.unassigned_date,BOOKING_NUMBER:t.book_nbr,STATUS:"IN-HOUSE",defaultDateRange:{fromDate:undefined,toDate:undefined,fromDateTimeStamp:0,toDateTimeStamp:0,fromDateStr:"",toDateStr:"",dateDifference:0},NO_OF_DAYS:1,roomsInfo:e,legendData:i,availableRooms:[],RT_ID:this.getRoomTypeId(t.room_type_name,e)};this.updateAvailableRooms(t,n,i,e);this.addDefaultDateRange(n);s.push(n)}))}));return s}addDefaultDateRange(t){t.defaultDateRange.fromDate=new Date(t.FROM_DATE+"T00:00:00");t.defaultDateRange.fromDateStr=xr(t.defaultDateRange.fromDate);t.defaultDateRange.fromDateTimeStamp=t.defaultDateRange.fromDate.getTime();t.defaultDateRange.toDate=new Date(t.TO_DATE+"T00:00:00");t.defaultDateRange.toDateStr=xr(t.defaultDateRange.toDate);t.defaultDateRange.toDateTimeStamp=t.defaultDateRange.toDate.getTime();t.defaultDateRange.dateDifference=t.NO_OF_DAYS}getRoomTypeId(t,e){return e.find((e=>this.cleanSpacesAndSpecialChars(e.name)===this.cleanSpacesAndSpecialChars(t))).id||null}updateAvailableRooms(t,e,i,s){const n=[];t.assignable_units.forEach((t=>{if(t.Is_Fully_Available&&!t.Is_Not_Available){const o=Dr(t.from_date,t.to_date);n.push({RT_ID:e.RT_ID,STATUS:"PENDING-CONFIRMATION",FROM_DATE:t.from_date,roomName:t.name,PR_ID:t.pr_id,TO_DATE:t.to_date,NO_OF_DAYS:o,ID:"NEW_TEMP_EVENT",NAME:"",NOTES:"",BALANCE:"",INTERNAL_NOTE:"",hideBubble:true,legendData:i,roomsInfo:s});e.TO_DATE=t.to_date;e.NO_OF_DAYS=o}}));e.availableRooms=n}convertUnassignedDates(t){let e={};t.forEach((t=>{let i=new Date(t.date);i.setHours(0,0,0,0);e[i.getTime()]={categories:{},dateStr:t.description}}));return e}}const wc=".sc-igl-cal-header-h{display:block;position:absolute;top:0;height:100%}.svg-icon.sc-igl-cal-header{height:20px;width:20px}.darkGrey.sc-igl-cal-header{background:#ececec}.btn.sc-igl-cal-header{pointer-events:auto}.stickyCell.sc-igl-cal-header{display:-ms-inline-grid;display:-moz-inline-grid;display:inline-grid;position:-webkit-sticky;position:sticky;top:0px;height:82px;display:inline-block;vertical-align:top;z-index:2}.headersContainer.sc-igl-cal-header{background-color:#ffffff}.headerCell.sc-igl-cal-header{display:inline-grid;width:70px;height:60px;vertical-align:top;background-color:#ffffff;border-bottom:1px solid #e0e0e0}.datePickerHidden.sc-igl-cal-header{position:absolute;top:0;left:0;width:100%;opacity:0}.monthsContainer.sc-igl-cal-header{height:20px;background-color:#ffffff;margin-bottom:0.2em}.monthCell.sc-igl-cal-header{display:inline-grid;height:20px;background-color:#ececec;border-right:1px solid #c7c7c7;vertical-align:top}.monthCell.sc-igl-cal-header:nth-child(odd){background-color:#dddddd}.monthTitle.sc-igl-cal-header{overflow:hidden;text-overflow:ellipsis;font-size:0.9em;text-transform:uppercase;font-weight:bold;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.topLeftCell.sc-igl-cal-header{left:0px;z-index:3;width:170px;background-color:#ffffff;display:-ms-inline-grid;display:-moz-inline-grid;display:inline-grid}.caledarBtns.sc-igl-cal-header{position:relative;cursor:pointer;font-size:1.75em;line-height:1em;padding:0.4rem;display:flex;align-items:center;justify-content:center}.caledarBtns.sc-igl-cal-header .la.sc-igl-cal-header{font-size:1.1em}.caledarBtns.sc-igl-cal-header:hover{background-color:#f6f6f6}.dayTitle.sc-igl-cal-header{font-size:0.8em;font-weight:600;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.currentDay.sc-igl-cal-header .dayTitle.sc-igl-cal-header{font-weight:bold}.currentDay.sc-igl-cal-header{background-color:#e3f3fa}.dayCapacityPercent.sc-igl-cal-header{font-size:0.75em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.badge-pill.sc-igl-cal-header{padding:3px 1em;font-size:0.8em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.pointer.sc-igl-cal-header{cursor:pointer}.searchContiner.sc-igl-cal-header{padding-left:10px;padding-right:10px}.searchListContainer.sc-igl-cal-header{background:#fff;border:1px solid #ccc;border-bottom:none}.searchListItem.sc-igl-cal-header{background:white;border-bottom:1px solid #ccc;padding-left:8px}.badge-light.sc-igl-cal-header{background-color:#999999;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.min-width-full.sc-igl-cal-header{min-width:100%}";const yc=class{constructor(t){i(this,t);this.optionEvent=s(this,"optionEvent",7);this.gotoRoomEvent=s(this,"gotoRoomEvent",7);this.gotoToBeAssignedDate=s(this,"gotoToBeAssignedDate",7);this.searchValue="";this.searchList=[];this.roomsList=[];this.toBeAssignedService=new bc;this.calendarData=undefined;this.today=undefined;this.propertyid=undefined;this.unassignedDates=undefined;this.to_date=undefined;this.renderAgain=false;this.unassignedRoomsNumber={}}componentWillLoad(){try{this.initializeRoomsList();if(!this.calendarData.is_vacation_rental&&Object.keys(this.unassignedDates).length>0){this.fetchAndAssignUnassignedRooms()}}catch(t){console.error("Error in componentWillLoad:",t)}}handleCalendarDataChanged(){this.fetchAndAssignUnassignedRooms()}initializeRoomsList(){this.roomsList=[];this.calendarData.roomsInfo.forEach((t=>{this.roomsList=this.roomsList.concat(...t.physicalrooms)}))}async fetchAndAssignUnassignedRooms(){await this.assignRoomsToDate()}async assignRoomsToDate(){try{const{fromDate:t,toDate:e,data:i}=this.unassignedDates;let s=new Date(t);s.setHours(0);s.setMinutes(0);s.setSeconds(0);let n=s.getTime();while(n<=new Date(e).getTime()){const t=c(n).format("D_M_YYYY");if(i[n]){const e=await this.toBeAssignedService.getUnassignedRooms(this.propertyid,xr(new Date(n)),this.calendarData.roomsInfo,this.calendarData.formattedLegendData);this.unassignedRoomsNumber[t]=e.length}else if(this.unassignedRoomsNumber[t]){this.unassignedRoomsNumber[t]=this.unassignedRoomsNumber[t]-1}n=c(n).add(1,"days").toDate().getTime();this.renderView()}}catch(t){console.error(t)}}handleReduceAvailableUnitEvent(t){t.stopImmediatePropagation();t.stopPropagation();const{fromDate:e,toDate:i}=t.detail;let s=new Date(e).getTime();while(s<new Date(i).getTime()){const t=c(s).format("D_M_YYYY");this.unassignedRoomsNumber[t]=this.unassignedRoomsNumber[t]-1;s=c(s).add(1,"days").toDate().getTime()}this.renderView()}showToBeAssigned(t){if(this.unassignedRoomsNumber[t.day]||0){this.handleOptionEvent("showAssigned");setTimeout((()=>{this.gotoToBeAssignedDate.emit({key:"gotoToBeAssignedDate",data:t.currentDate})}),100)}}handleOptionEvent(t,e=""){this.optionEvent.emit({key:t,data:e})}handleDateSelect(t){if(Object.keys(t.detail).length>0){this.handleOptionEvent("calendar",t.detail)}}handleClearSearch(){this.searchValue="";this.searchList=[];this.renderView()}handleFilterRooms(t){const e=t.target;let i=e.value.trim();this.searchValue=i;i=i.toLowerCase();if(i===""){this.handleClearSearch()}else{this.searchList=this.roomsList.filter((t=>t.name.toLocaleLowerCase().indexOf(i)!=-1))}this.renderView()}handleScrollToRoom(t){this.handleClearSearch();this.gotoRoomEvent.emit({key:"gotoRoom",roomId:t})}getStringDateFormat(t){return t.getFullYear()+"-"+(t.getMonth()<9?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<=9?"0":"")+t.getDate()}getNewBookingModel(){let t=new Date;t.setHours(0,0,0,0);let e=this.getStringDateFormat(t);t.setDate(t.getDate()+1);t.setHours(0,0,0,0);let i=this.getStringDateFormat(t);return{ID:"",NAME:"",EMAIL:"",PHONE:"",REFERENCE_TYPE:"PHONE",FROM_DATE:e,TO_DATE:i,roomsInfo:this.calendarData.roomsInfo,TITLE:Vr.entries.Lcz_NewBooking,event_type:"PLUS_BOOKING",legendData:this.calendarData.formattedLegendData,defaultDateRange:{fromDate:new Date(e),fromDateStr:"",toDate:new Date(i),toDateStr:"",dateDifference:0,editabled:true,message:""}}}renderView(){this.renderAgain=!this.renderAgain}render(){return n(o,null,n("div",{class:"stickyCell align-items-center topLeftCell preventPageScroll"},n("div",{class:"row justify-content-around no-gutters"},!this.calendarData.is_vacation_rental&&n("div",{class:"caledarBtns",onClick:()=>this.handleOptionEvent("showAssigned"),"data-toggle":"tooltip","data-placement":"bottom",title:Vr.entries.Lcz_UnassignedUnitsTooltip},n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"svg-icon"},n("path",{fill:"#6b6f82",d:"M448 160H320V128H448v32zM48 64C21.5 64 0 85.5 0 112v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zM448 352v32H192V352H448zM48 288c-26.5 0-48 21.5-48 48v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V336c0-26.5-21.5-48-48-48H48z"}))),n("div",{class:"caledarBtns",onClick:()=>this.handleOptionEvent("calendar"),"data-toggle":"tooltip","data-placement":"bottom",title:Vr.entries.Lcz_Navigate},n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"svg-icon"},n("path",{fill:"#6b6f82",d:"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z"})),n("ir-date-picker",{minDate:c().add(-2,"months").startOf("month").format("YYYY-MM-DD"),autoApply:true,singleDatePicker:true,onDateChanged:t=>{console.log("evt",t);this.handleDateSelect(t)},class:"datePickerHidden"})),n("div",{class:"caledarBtns",onClick:()=>this.handleOptionEvent("gotoToday"),"data-toggle":"tooltip","data-placement":"bottom",title:Vr.entries.Lcz_Today},n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"svg-icon"},n("path",{fill:"#6b6f82",d:"M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"}))),n("div",{class:"caledarBtns",onClick:()=>this.handleOptionEvent("add",this.getNewBookingModel()),"data-toggle":"tooltip","data-placement":"bottom",title:Vr.entries.Lcz_CreateNewBooking},n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"svg-icon"},n("path",{fill:"#6b6f82",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"})))),n("div",{class:"row justify-content-around no-gutters searchContiner"},n("fieldset",{class:`form-group position-relative ${this.searchValue!=""?"show":""}`},n("input",{type:"text",class:"form-control form-control-sm input-sm",id:"iconLeft7",value:this.searchValue,placeholder:Vr.entries.Lcz_FindUnit,onInput:t=>this.handleFilterRooms(t)}),this.searchValue!==""?n("div",{class:"form-control-position pointer",onClick:()=>this.handleClearSearch(),"data-toggle":"tooltip","data-placement":"top","data-original-title":"Clear Selection"},n("i",{class:"la la-close font-small-4"})):null,this.searchList.length?n("div",{class:"position-absolute searchListContainer dropdown-menu dropdown-menu-left min-width-full"},this.searchList.map((t=>n("div",{class:"searchListItem1 dropdown-item px-1 text-left pointer",onClick:()=>this.handleScrollToRoom(t.id)},t.name)))):null))),n("div",{class:"stickyCell headersContainer"},n("div",{class:"monthsContainer"},this.calendarData.monthsInfo.map((t=>n("div",{class:"monthCell",style:{width:t.daysCount*70+"px"}},n("div",{class:"monthTitle"},t.monthName))))),this.calendarData.days.map((t=>n("div",{class:`headerCell align-items-center ${"day-"+t.day} ${t.day===this.today?"currentDay":""}`,"data-day":t.day},!this.calendarData.is_vacation_rental&&n("div",{class:"preventPageScroll"},n("span",{class:`badge badge-${this.unassignedRoomsNumber[t.day]||t.unassigned_units_nbr!==0?"info pointer":"light"} badge-pill`,onClick:()=>this.showToBeAssigned(t)},this.unassignedRoomsNumber[t.day]||t.unassigned_units_nbr)),n("div",{class:"dayTitle"},t.dayDisplayName),n("div",{class:"dayCapacityPercent"},t.occupancy,"%"))))))}static get watchers(){return{unassignedDates:["handleCalendarDataChanged"]}}};yc.style=wc;const vc=".sc-igl-date-range-h{display:flex;text-align:left;align-items:center}.date-range-input.sc-igl-date-range{margin:0;padding:0;display:flex;flex:1}.iglRangeNights.sc-igl-date-range{margin:0;padding:0}.iglRangePicker[data-state='disabled'].sc-igl-date-range{border:0;padding-left:0;padding-right:0;width:180px;margin-right:0}.iglRangePicker.sc-igl-date-range{margin:0;border:1px solid #379ff2;box-sizing:border-box;width:220px;display:flex;align-items:center}.calendarPickerContainer.sc-igl-date-range{display:flex}";const kc=class{constructor(t){i(this,t);this.dateSelectEvent=s(this,"dateSelectEvent",7);this.toast=s(this,"toast",7);this.totalNights=0;this.fromDateStr="from";this.toDateStr="to";this.defaultData=undefined;this.disabled=false;this.minDate=undefined;this.dateLabel=undefined;this.maxDate=undefined;this.renderAgain=false}getStringDateFormat(t){return t.getFullYear()+"-"+(t.getMonth()<9?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<=9?"0":"")+t.getDate()}componentWillLoad(){let t=new Date;t.setHours(0,0,0,0);t.setDate(t.getDate()+1);if(this.defaultData){if(this.defaultData.fromDate){this.fromDate=new Date(this.defaultData.fromDate);this.fromDate.setHours(0,0,0,0);this.fromDateStr=this.getFormattedDateString(this.fromDate)}if(this.defaultData.toDate){this.toDate=new Date(this.defaultData.toDate);this.toDate.setHours(0,0,0,0);this.toDateStr=this.getFormattedDateString(this.toDate)}}if(this.fromDate&&this.toDate){this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:this.fromDateStr,toDateStr:this.toDateStr,dateDifference:this.totalNights})}}calculateTotalNights(){this.totalNights=Math.floor((this.toDate.getTime()-this.fromDate.getTime())/864e5)}getFormattedDateString(t){return t.getDate()+" "+t.toLocaleString("default",{month:"short"}).toLowerCase()+" "+t.getFullYear()}handleDateSelectEvent(t,e=""){this.dateSelectEvent.emit({key:t,data:e})}handleDateChange(t){const{start:e,end:i}=t.detail;this.fromDate=e.toDate();this.toDate=i.toDate();this.calculateTotalNights();this.handleDateSelectEvent("selectedDateRange",{fromDate:this.fromDate.getTime(),toDate:this.toDate.getTime(),fromDateStr:e.format("DD MMM YYYY"),toDateStr:i.format("DD MMM YYYY"),dateDifference:this.totalNights});this.renderAgain=!this.renderAgain}render(){return n(o,null,n("div",{class:"calendarPickerContainer ml-0 d-flex flex-column flex-lg-row align-items-lg-center "},n("span",{class:"mt-0 mb-1 mb-lg-0 mr-lg-1 text-left"},this.dateLabel,":"),n("div",{class:"d-flex align-items-center mr-lg-1"},n("div",{class:"iglRangePicker form-control input-sm ","data-state":this.disabled?"disabled":"active"},n("ir-date-picker",{maxDate:this.maxDate,class:"date-range-input",disabled:this.disabled,fromDate:this.fromDate,toDate:this.toDate,minDate:this.minDate,autoApply:true,onDateChanged:t=>{this.handleDateChange(t)}})),this.totalNights?n("span",{class:"iglRangeNights ml-1"},"(",this.totalNights+(this.totalNights>1?` ${Vr.entries.Lcz_Nights}`:` ${Vr.entries.Lcz_Night}`),")"):"")))}};kc.style=vc;const Dc=".sc-igl-legends-h{display:block}.legendHeader.sc-igl-legends{font-weight:500;letter-spacing:0.05rem;font-size:1.12rem;padding-top:5px;margin-bottom:1rem}.legendCloseBtn.sc-igl-legends{position:absolute;top:50%;right:0;cursor:pointer;font-size:1.75em;line-height:1em;padding:0.4rem;display:flex;align-items:center;justify-content:center;border-radius:3px;transform:translateY(-50%)}.legendCloseBtn.sc-igl-legends:hover{background-color:#f6f6f6}.stickyHeader.sc-igl-legends{position:-webkit-sticky;position:sticky;top:0;background-color:#ffffff;z-index:1}.legendRow.sc-igl-legends{position:relative;vertical-align:middle;margin-bottom:0.3rem}.legendRow.sc-igl-legends div.sc-igl-legends{display:inline-block;vertical-align:middle}.legend_skew.sc-igl-legends,.legend_skew-bordered.sc-igl-legends,.legend_skewsplit.sc-igl-legends{transform:skew(-30deg);width:15px;height:16px}.legend_skew-bordered.sc-igl-legends{border:1px solid black}.legend_circle.sc-igl-legends{border-radius:100%;width:10px;height:10px;margin:3px 3px 3px 2px}.legend_skewsplit.sc-igl-legends{border-right:2px solid #000000}.headerCell.sc-igl-legends .blueColor.sc-igl-legends{background-color:#31bef1}.greenColor.sc-igl-legends{background-color:#45b16d}.yellowColor.sc-igl-legends{background-color:#f4d552}.greyColor.sc-igl-legends{background-color:#a0a0a0}.redColor.sc-igl-legends{background-color:#f34752}.pinkColor.sc-igl-legends{background-color:#f9b4b7}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends{margin-bottom:0}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends:first-child .legendCal.sc-igl-legends{background-color:#ececec}.legendCalendar.sc-igl-legends .legendRow.sc-igl-legends div.sc-igl-legends{display:inline-block;vertical-align:middle;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.total-availability.sc-igl-legends{font-size:1em !important}.legendCalendar.sc-igl-legends .legendCal.sc-igl-legends{width:80px;height:25px;text-align:center;display:inline-grid !important;align-content:center;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legendCalendar.sc-igl-legends .legendCal.sc-igl-legends .badge.sc-igl-legends{margin-top:0.2rem;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.legendCalendar.sc-igl-legends .legendCal.legendCal-h2.sc-igl-legends{height:40px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.br-t.sc-igl-legends{border-top:1px solid #a0a0a0}.br-s.sc-igl-legends{border-left:1px solid #a0a0a0;border-right:1px solid #a0a0a0}.br-bt.sc-igl-legends{border-bottom:1px solid #a0a0a0}.highphenLegend.sc-igl-legends{font-size:0.9em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.highphenLegend.sc-igl-legends::before{width:12px;height:0.5px;content:' ';background-color:#000000;vertical-align:middle;display:inline-block;margin-left:5px;margin-right:5px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.badge-pill.sc-igl-legends{padding:3px 1em;font-size:0.8em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.headerCell.sc-igl-legends{width:70px;display:flex;align-items:center;justify-content:center}.dayTitle.sc-igl-legends{font-size:0.8em;font-weight:600;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.dayCapacityPercent.sc-igl-legends{font-size:0.75em;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}";const xc=class{constructor(t){i(this,t);this.optionEvent=s(this,"optionEvent",7);this.legendData=undefined}handleOptionEvent(t,e=""){this.optionEvent.emit({key:t,data:e})}render(){return n(o,{class:"legendContainer pr-1 text-left"},n("div",{class:"w-full"},n("div",{class:"w-full"},n("div",{class:"stickyHeader pt-1 "},n("p",{class:"legendHeader"},Vr.entries.Lcz_Legend),n("div",{class:"legendCloseBtn",onClick:()=>this.handleOptionEvent("closeSideMenu")},n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},n("path",{fill:"#6b6f82",d:"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"}))),n("hr",null)),n("div",{class:"mt-2 pl-1"},this.legendData.map((t=>n("div",{class:"legendRow "},n("div",{class:`legend_${t.design} mr-1`,style:{backgroundColor:t.color}}),n("span",{class:"font-small-3"},t.name))))),n("hr",null),n("div",{class:"mt-2"},n("div",{class:"legendCalendar"},n("div",{class:"legendRow align-items-center"},n("div",{class:"legendCal br-t br-s br-bt"},n("strong",null,"MAR 2022")),n("div",{class:"highphenLegend"},Vr.entries.Lcz_MonthAndYear)),n("div",{class:"legendRow"},n("div",{class:"legendCal headerCell align-items-center br-s"},n("span",{class:"badge badge-info  badge-pill"},"3")),n("div",{class:"highphenLegend"},n("div",null,Vr.entries.Lcz_UnassignedUnits))),n("div",{class:"legendRow"},n("div",{class:"legendCal dayTitle br-s"},"Fri 18"),n("div",{class:"highphenLegend"},Vr.entries.Lcz_Date)),n("div",{class:"legendRow"},n("div",{class:"legendCal br-s br-bt dayCapacityPercent"},"15%"),n("div",{class:"highphenLegend"},Vr.entries.Lcz_Occupancy)),n("div",{class:"legendRow"},n("div",{class:"legendCal br-s br-bt  font-weight-bold total-availability"},"20"),n("div",{class:"highphenLegend"},Vr.entries.Lcz_TotalAvailability)))))))}};xc.style=Dc;const _c=".sc-igl-pagetwo-h{display:block}.card-title.sc-igl-pagetwo{border-bottom:1px solid #e4e5ec}.scrollContent.sc-igl-pagetwo{height:calc(100% - 79px);overflow:auto;position:relative}.background-overlay.sc-igl-pagetwo{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.25)}.formContainer.sc-igl-pagetwo{height:calc(100% - 79px);overflow:auto}.sideWindow.sc-igl-pagetwo{position:absolute;top:0;right:0;height:100%;background-color:#ffffff}.close.sc-igl-pagetwo{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.close-icon.sc-igl-pagetwo{position:absolute;top:18px;right:33px;outline:none}button.sc-igl-pagetwo:not(:disabled),[type='button'].sc-igl-pagetwo:not(:disabled){cursor:pointer}.row.sc-igl-pagetwo{padding:0 0 0 15px;margin:0}";const Ec=class{constructor(t){i(this,t);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.buttonClicked=s(this,"buttonClicked",7);this.showPaymentDetails=undefined;this.currency=undefined;this.isEditOrAddRoomEvent=undefined;this.dateRangeData=undefined;this.bookingData=undefined;this.showSplitBookingOption=undefined;this.language=undefined;this.bookedByInfoData=undefined;this.propertyId=undefined;this.bedPreferenceType=undefined;this.selectedRooms=undefined;this.isLoading=undefined;this.countryNodeList=undefined;this.selectedGuestData=undefined;this.defaultGuestData=undefined;this.selectedBookedByData=undefined;this.guestData=undefined;this.selectedUnits={}}componentWillLoad(){this.initializeGuestData();this.selectedBookedByData=this.bookedByInfoData}initializeGuestData(){let t=0;const e=Object.assign({},this.selectedUnits);const i=(t,e,i,s)=>{if(i&&s===2){return t*e}return t};this.selectedUnits=e;this.guestData=[];this.selectedRooms.forEach(((s,n)=>{s.forEach((s=>{e[n]=s.selectedUnits;t+=s.totalRooms*i(s.rate,this.dateRangeData.dateDifference,s.isRateModified,s.rateType);for(let t=1;t<=s.totalRooms;t++){this.guestData.push(Object.assign({guestName:"",roomId:"",preference:""},s))}}))}));this.bookingData.TOTAL_PRICE=t}handleOnApplicationInfoDataUpdateEvent(t,e){const i=t.detail;const s=`c_${i.data.roomCategoryId}`;const n=[...this.selectedUnits[s]||[]];n[e]=i.data.roomId;this.selectedUnits=Object.assign(Object.assign({},this.selectedUnits),{[s]:n});this.dataUpdateEvent.emit({key:"applicationInfoUpdateEvent",value:t.detail})}handleEventData(t,e,i){if(e==="application-info"){this.handleOnApplicationInfoDataUpdateEvent(t,i)}else{this.selectedBookedByData=t.detail.data;this.dataUpdateEvent.emit({key:"propertyBookedBy",value:t.detail})}}isGuestDataIncomplete(){if(this.selectedGuestData.length!==this.guestData.length){return true}for(const t of this.selectedGuestData){if(t.guestName===""||t.preference===""||t.roomId===""){return true}}return false}isButtonDisabled(t){const e=(t,e,i)=>{if(!t){return true}if(t===this.selectedGuestData){return this.isGuestDataIncomplete()}if(e==="selectedArrivalTime"){if(t[e]!==undefined){return t[e].code===""}else{return true}}return t[e]===i||t[e]===undefined};return this.isLoading===t||e(this.selectedGuestData,"guestName","")||e(this.selectedBookedByData,"isdCode","")||e(this.selectedBookedByData,"contactNumber","")||e(this.selectedBookedByData,"firstName","")||e(this.selectedBookedByData,"lastName","")||e(this.selectedBookedByData,"countryId",-1)||e(this.selectedBookedByData,"selectedArrivalTime","")||e(this.selectedBookedByData,"email","")}render(){return n(o,null,n("div",{class:"d-flex flex-wrap"},n("div",{class:"flex-fill text-left p-0"},n("span",{class:"mr-1 font-weight-bold font-medium-1"},Ir(this.dateRangeData.fromDateStr)," - ",Ir(this.dateRangeData.toDateStr)),this.dateRangeData.dateDifference," ",+this.dateRangeData.dateDifference>1?` ${Vr.entries.Lcz_Nights}`:` ${Vr.entries.Lcz_Night}`),this.guestData.length>1&&n("div",{class:"mt-1 mt-md-0 text-right"},Vr.entries.Lcz_TotalPrice," ",n("span",{class:"font-weight-bold font-medium-1"},Or(this.currency.code)+this.bookingData.TOTAL_PRICE||"$0.00"))),this.guestData.map(((t,e)=>n("igl-application-info",{dateDifference:this.dateRangeData.dateDifference,defaultGuestPreference:this.defaultGuestData.bed_preference,defaultGuestRoomId:this.defaultGuestData.PR_ID,currency:this.currency,bedPreferenceType:this.bedPreferenceType,index:e,selectedUnits:this.selectedUnits[`c_${t.roomCategoryId}`],guestInfo:t,guestRefKey:e,bookingType:this.bookingData.event_type,roomsList:t.physicalRooms,onDataUpdateEvent:t=>this.handleEventData(t,"application-info",e)}))),this.isEditOrAddRoomEvent||this.showSplitBookingOption?null:n("igl-property-booked-by",{propertyId:this.propertyId,countryNodeList:this.countryNodeList,language:this.language,showPaymentDetails:this.showPaymentDetails,defaultData:this.bookedByInfoData,onDataUpdateEvent:t=>this.handleEventData(t,"propertyBookedBy",0)}),this.isEditOrAddRoomEvent?n("div",{class:"d-flex p-0 mb-1 mt-2"},n("div",{class:"flex-fill mr-2"},n("ir-button",{icon:"",text:Vr.entries.Lcz_Back,class:"full-width",btn_color:"secondary",btn_styles:"justify-content-center",onClickHanlder:()=>this.buttonClicked.emit({key:"back"})})),n("div",{class:"flex-fill"},n("button",{disabled:this.isLoading==="save",type:"button",class:"btn btn-primary full-width",onClick:()=>{console.log("save button clicked");this.buttonClicked.emit({key:"save"})}},this.isLoading==="save"&&n("i",{class:"la la-circle-o-notch spinner mx-1"}),Vr.entries.Lcz_Save))):n("div",{class:"d-flex flex-column flex-md-row p-0 mb-1 mt-2 justify-content-md-between align-items-md-center"},n("div",{class:"flex-fill mr-md-1"},n("button",{type:"button",class:"btn btn-secondary full-width",onClick:()=>this.buttonClicked.emit({key:"back"})},n("span",{class:"d-none d-md-inline-flex"}," <<")," ",Vr.entries.Lcz_Back)),n("div",{class:"mt-1 mt-md-0 flex-fill"},n("button",{disabled:this.isLoading==="book",type:"button",class:"btn btn-primary full-width",onClick:()=>this.buttonClicked.emit({key:"book"})},this.isLoading==="book"&&n("i",{class:"la la-circle-o-notch spinner mx-1"}),Vr.entries.Lcz_Book))))}};Ec.style=_c;const Oc=".sc-igl-property-booked-by-h{display:block}.row.sc-igl-property-booked-by{padding:0 0 0 15px;margin:0}.bookedByEmailContainer.sc-igl-property-booked-by{flex:auto;max-width:350px}.bookedDetailsForm.sc-igl-property-booked-by label.sc-igl-property-booked-by{min-width:125px;max-width:125px}.bookedDetailsForm.sc-igl-property-booked-by .form-group.sc-igl-property-booked-by{margin-bottom:10px !important}.bookedDetailsForm.sc-igl-property-booked-by .checkBoxContainer.sc-igl-property-booked-by input.sc-igl-property-booked-by{height:1.2rem !important;width:30px}.controlContainer.sc-igl-property-booked-by textarea.sc-igl-property-booked-by{height:60px !important}.margin3.sc-igl-property-booked-by{margin-bottom:5px !important}@media (min-width: 768px){.bookedByEmailContainer.sc-igl-property-booked-by{margin-left:37px}}";const Tc=class{constructor(t){i(this,t);this.dataUpdateEvent=s(this,"dataUpdateEvent",7);this.bookingService=new Ah;this.arrivalTimeList=[];this.expiryMonths=["01","02","03","04","05","06","07","08","09","10","11","12"];this.expiryYears=[];this.currentMonth="01";this.language=undefined;this.showPaymentDetails=false;this.defaultData=undefined;this.countryNodeList=[];this.propertyId=undefined;this.isButtonPressed=false;this.bookedByData={id:undefined,email:"",firstName:"",lastName:"",countryId:"",isdCode:"",contactNumber:"",selectedArrivalTime:{code:"",description:""},emailGuest:true,message:"",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:""}}async componentWillLoad(){this.assignCountryCode();this.initializeExpiryYears();this.initializeDateData();this.populateBookedByData()}initializeExpiryYears(){const t=(new Date).getFullYear();this.expiryYears=Array.from({length:4},((e,i)=>(t+i).toString()))}async assignCountryCode(){const t=await this.bookingService.getUserDefaultCountry();const e=t["COUNTRY_ID"];this.country=e;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.toString(),countryId:e})}initializeDateData(){const t=new Date;const e=t.getMonth()+1;this.currentMonth=e<10?`0${e}`:e.toString()}populateBookedByData(){var t;this.bookedByData=this.defaultData?Object.assign(Object.assign({},this.bookedByData),this.defaultData):{};this.arrivalTimeList=((t=this.defaultData)===null||t===void 0?void 0:t.arrivalTime)||[];this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{selectedArrivalTime:{code:this.arrivalTimeList[0].CODE_NAME,description:this.arrivalTimeList[0].CODE_VALUE_EN}});if(!this.bookedByData.expiryMonth){this.bookedByData.expiryMonth=this.currentMonth}if(!this.bookedByData.expiryYear){this.bookedByData.expiryYear=(new Date).getFullYear()}}handleDataChange(t,e){const i=this.arrivalTimeList.find((t=>t.CODE_NAME===e.target.value));this.bookedByData[t]=t==="emailGuest"?e.target.checked:t==="arrivalTime"?{code:e.target.value,description:i&&i.CODE_VALUE_EN||""}:e.target.value;this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)});if(t==="countryId"){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{isdCode:e.target.value})}}handleNumberInput(t,e){const i=e.target;const s=i.value;const n=/^[0-9]+$/;if(!n.test(s)){i.value=s.replace(/[^0-9]/g,"")}if(s===i.value){this.handleDataChange(t,e)}}async handleEmailInput(t,e){const i=e.target;const s=i.value;if(this.isValidEmail(s)){this.handleDataChange(t,e)}}async checkUser(){try{const t=this.bookedByData.email;if(this.isValidEmail(t)){const e=await this.bookingService.getUserInfo(t);if(e!==null){this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:e.id,firstName:e.first_name,lastName:e.last_name,contactNumber:e.mobile,countryId:e.country_id,isdCode:e.country_id.toString()})}else{this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:undefined,firstName:"",lastName:"",contactNumber:"",countryId:"",isdCode:""})}this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}}catch(t){}}isValidEmail(t){const e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return e.test(t)}handleComboboxChange(t){t.stopImmediatePropagation();t.stopPropagation();const{key:e,data:i}=t.detail;switch(e){case"blur":if(i!==""){this.bookedByData.email=i;this.checkUser()}break;case"select":this.bookedByData.email=i.email;this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:i.id,firstName:i.first_name,lastName:i.last_name,contactNumber:i.mobile,countryId:i.country_id,isdCode:i.country_id.toString()});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:this.bookedByData});break}}clearEvent(){this.bookedByData.email="";this.bookedByData=Object.assign(Object.assign({},this.bookedByData),{id:"",firstName:"",lastName:"",contactNumber:"",isdCode:this.country.toString(),countryId:this.country});this.dataUpdateEvent.emit({key:"bookedByInfoUpdated",data:Object.assign({},this.bookedByData)})}handleButtonClicked(t){switch(t.detail.key){case"book":case"bookAndCheckIn":this.isButtonPressed=true;break}}render(){return n(o,null,n("div",{class:"text-left mt-3"},n("div",{class:"form-group d-flex flex-column flex-md-row align-items-md-center text-left "},n("label",{class:"p-0 m-0 label-control mr-1 font-weight-bold"},Vr.entries.Lcz_BookedBy),n("div",{class:"bookedByEmailContainer mt-1 mt-md-0"},n("ir-autocomplete",{danger_border:this.isButtonPressed&&this.bookedByData.email==="",onComboboxValue:this.handleComboboxChange.bind(this),propertyId:this.propertyId,type:"email",value:this.bookedByData.email,required:true,placeholder:Vr.entries.Lcz_EmailAddress,onInputCleared:()=>this.clearEvent()})))),n("div",{class:"bookedDetailsForm text-left mt-2 font-small-3 "},n("div",{class:"d-flex flex-column flex-md-row  justify-content-md-between "},n("div",{class:"p-0 flex-fill "},n("div",{class:"form-group d-flex flex-column flex-md-row align-items-md-center p-0 flex-fill "},n("label",{class:"p-0 m-0 margin3"},Vr.entries.Lcz_FirstName),n("div",{class:"p-0 m-0  controlContainer flex-fill  "},n("input",{class:`form-control flex-fill ${this.isButtonPressed&&this.bookedByData.firstName===""&&"border-danger"}`,type:"text",placeholder:Vr.entries.Lcz_FirstName,id:l(),value:this.bookedByData.firstName,onInput:t=>this.handleDataChange("firstName",t),required:true}))),n("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},n("label",{class:"p-0 m-0 margin3"},Vr.entries.Lcz_LastName),n("div",{class:"p-0 m-0  controlContainer flex-fill"},n("input",{class:`form-control ${this.isButtonPressed&&this.bookedByData.lastName===""&&"border-danger"}`,type:"text",placeholder:Vr.entries.Lcz_LastName,id:l(),value:this.bookedByData.lastName,onInput:t=>this.handleDataChange("lastName",t)}))),n("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},n("label",{class:"p-0 m-0 margin3"},Vr.entries.Lcz_Country),n("div",{class:"p-0 m-0  controlContainer flex-fill"},n("select",{class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.countryId===""&&"border-danger"}`,id:l(),onChange:t=>this.handleDataChange("countryId",t)},n("option",{value:"",selected:this.bookedByData.countryId===""},Vr.entries.Lcz_Select),this.countryNodeList.map((t=>n("option",{value:t.id,selected:this.bookedByData.countryId===t.id},t.name)))))),n("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},n("label",{class:"p-0 m-0 margin3"},Vr.entries.Lcz_MobilePhone),n("div",{class:"p-0 m-0  d-flex  controlContainer flex-fill"},n("div",{class:" p-0 m-0"},n("select",{class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.isdCode===""&&"border-danger"}`,id:l(),onChange:t=>this.handleDataChange("isdCode",t)},n("option",{value:"",selected:this.bookedByData.isdCode===""},Vr.entries.Lcz_Isd),this.countryNodeList.map((t=>n("option",{value:t.id,selected:this.bookedByData.isdCode===t.id.toString()},t.phone_prefix))))),n("div",{class:"flex-fill p-0 m-0"},n("input",{class:`form-control ${this.isButtonPressed&&this.bookedByData.contactNumber===""&&"border-danger"}`,type:"tel",placeholder:Vr.entries.Lcz_ContactNumber,id:l(),value:this.bookedByData.contactNumber,onInput:t=>this.handleNumberInput("contactNumber",t)})))),n("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},n("label",{class:"p-0 m-0 margin3"},Vr.entries.Lcz_YourArrivalTime),n("div",{class:"p-0 m-0  controlContainer flex-fill"},n("select",{class:`form-control input-sm pr-0 ${this.isButtonPressed&&this.bookedByData.selectedArrivalTime.code===""&&"border-danger"}`,id:l(),onChange:t=>this.handleDataChange("selectedArrivalTime",t)},this.arrivalTimeList.map((t=>n("option",{value:t.CODE_NAME,selected:this.bookedByData.selectedArrivalTime.code===t.CODE_NAME},t.CODE_VALUE_EN))))))),n("div",{class:"p-0 flex-fill  ml-md-3"},n("div",{class:"  p-0 d-flex flex-column flex-md-row align-items-md-center "},n("label",{class:"p-0 m-0 margin3"},Vr.entries.Lcz_AnyMessageForUs),n("div",{class:"p-0 m-0  controlContainer flex-fill "},n("textarea",{id:l(),rows:4,class:"form-control ",name:"message",value:this.bookedByData.message,onInput:t=>this.handleDataChange("message",t)}))),this.showPaymentDetails&&n(r,null,n("div",{class:"form-group mt-md-1  p-0 d-flex flex-column flex-md-row align-items-md-center"},n("label",{class:"p-0 m-0 margin3"},Vr.entries.Lcz_CardNumber),n("div",{class:"p-0 m-0  controlContainer flex-fill"},n("input",{class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:l(),value:this.bookedByData.cardNumber,onInput:t=>this.handleNumberInput("cardNumber",t)}))),n("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},n("label",{class:"p-0 m-0 margin3"},Vr.entries.Lcz_CardHolderName),n("div",{class:"p-0 m-0  controlContainer flex-fill"},n("input",{class:"form-control",type:"text",placeholder:"",pattern:"0-9 ",id:l(),value:this.bookedByData.cardHolderName,onInput:t=>this.handleDataChange("cardHolderName",t)}))),n("div",{class:"form-group  p-0 d-flex flex-column flex-md-row align-items-md-center"},n("label",{class:"p-0 m-0 margin3"},Vr.entries.Lcz_ExpiryDate),n("div",{class:"p-0 m-0 row  controlContainer flex-fill"},n("div",{class:"p-0 m-0"},n("select",{class:"form-control input-sm pr-0",id:l(),onChange:t=>this.handleDataChange("expiryMonth",t)},this.expiryMonths.map((t=>n("option",{value:t,selected:t===this.bookedByData.expiryMonth},t))))),n("div",{class:"p-0 m-0 ml-1"},n("select",{class:"form-control input-sm pr-0",id:l(),onChange:t=>this.handleDataChange("expiryYear",t)},this.expiryYears.map(((t,e)=>n("option",{value:t,selected:e===this.bookedByData.expiryYear},t)))))))),n("div",{class:"form-group mt-1 p-0 d-flex flex-row align-items-center"},n("label",{class:"p-0 m-0",htmlFor:"emailTheGuestId"},Vr.entries.Lcz_EmailTheGuest),n("div",{class:"p-0 m-0  controlContainer flex-fill checkBoxContainer"},n("input",{class:"form-control",type:"checkbox",checked:this.bookedByData.emailGuest,id:"emailTheGuestId",onChange:t=>this.handleDataChange("emailGuest",t)})))))))}};Tc.style=Oc;const Cc=".sc-igl-tba-booking-view-h{display:block}.guestTitle.sc-igl-tba-booking-view{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:2px;margin-bottom:5px;margin-top:5px;padding-left:5px;padding-right:5px}.guestTitle.selectedOrder.sc-igl-tba-booking-view{background-color:#f9f9c9}.pointer.sc-igl-tba-booking-view{cursor:pointer}hr.sc-igl-tba-booking-view{margin-top:8px;margin-bottom:0px}.bookingContainer.sc-igl-tba-booking-view{background-color:#ececec}.actionsContainer.sc-igl-tba-booking-view{padding:5px !important;padding-right:0px !important}.selectContainer.sc-igl-tba-booking-view{width:195px;margin-right:8px}.buttonsContainer.sc-igl-tba-booking-view{width:100px}.btn-secondary.sc-igl-tba-booking-view{margin-right:8px !important}";const Sc=class{constructor(t){i(this,t);this.highlightToBeAssignedBookingEvent=s(this,"highlightToBeAssignedBookingEvent",7);this.addToBeAssignedEvent=s(this,"addToBeAssignedEvent",7);this.scrollPageToRoom=s(this,"scrollPageToRoom",7);this.assignRoomEvent=s(this,"assignRoomEvent",7);this.highlightSection=false;this.allRoomsList=[];this.toBeAssignedService=new bc;this.calendarData=undefined;this.selectedDate=undefined;this.eventData={};this.categoriesData={};this.categoryId=undefined;this.categoryIndex=undefined;this.eventIndex=undefined;this.renderAgain=false;this.selectedRoom=-1}onSelectRoom(t){if(t.stopImmediatePropagation){t.stopImmediatePropagation();t.stopPropagation()}this.selectedRoom=parseInt(t.target.value)}componentShouldUpdate(t,e,i){if(i==="selectedDate"&&t!==e){this.highlightSection=false;this.selectedRoom=-1;return true}else if(i==="eventData"&&t!==e){this.selectedRoom=-1;return true}return true}componentWillLoad(){if(this.categoryIndex===0&&this.eventIndex===0){setTimeout((()=>{this.handleHighlightAvailability()}),100)}}async handleAssignUnit(t){try{t.stopImmediatePropagation();t.stopPropagation();if(this.selectedRoom){await this.toBeAssignedService.assignUnit(this.eventData.BOOKING_NUMBER,this.eventData.ID,this.selectedRoom);let t=Object.assign(Object.assign({},this.eventData),{PR_ID:this.selectedRoom});this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[t]});this.assignRoomEvent.emit({key:"assignRoom",data:t})}}catch(t){}}handleHighlightAvailability(){this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:this.eventData.ID}});if(!this.selectedDate){return}let t=[];let e=[];t=this.eventData.availableRooms.map((t=>{e.push({calendar_cell:null,id:t.PR_ID,name:t.roomName});return Object.assign(Object.assign({},t),{defaultDateRange:this.eventData.defaultDateRange,identifier:this.eventData.identifier})}));this.allRoomsList=e;this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:t});this.scrollPageToRoom.emit({key:"scrollPageToRoom",id:this.categoryId,refClass:"category_"+this.categoryId});this.renderView()}handleCloseAssignment(t){t.stopImmediatePropagation();t.stopPropagation();this.highlightSection=false;this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:"----"}});this.onSelectRoom({target:{value:""}});this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.renderView()}highlightBookingEvent(t){let e=t.detail.data;if(e.bookingId!=this.eventData.ID){this.highlightSection=false;this.selectedRoom=-1;this.renderView()}else{this.highlightSection=true;this.renderView()}}renderView(){this.renderAgain=!this.renderAgain}render(){return n(o,null,n("div",{class:"bookingContainer",onClick:()=>this.handleHighlightAvailability()},n("div",{class:`guestTitle ${this.highlightSection?"selectedOrder":""} pointer font-small-3`,"data-toggle":"tooltip","data-placement":"top","data-original-title":"Click to assign unit"},`Book# ${this.eventData.BOOKING_NUMBER} - ${this.eventData.NAME}`),n("div",{class:"row m-0 p-0 actionsContainer"},n("div",{class:"d-inline-block p-0 selectContainer"},n("select",{class:"form-control input-sm",id:l(),onChange:t=>this.onSelectRoom(t)},n("option",{value:"",selected:this.selectedRoom==-1},Vr.entries.Lcz_AssignUnit),this.allRoomsList.map((t=>n("option",{value:t.id,selected:this.selectedRoom==t.id},t.name))))),this.highlightSection?n("div",{class:"d-inline-block text-right buttonsContainer"},n("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:t=>this.handleCloseAssignment(t)},"X"),n("button",{type:"button",class:"btn btn-primary btn-sm",onClick:t=>this.handleAssignUnit(t),disabled:this.selectedRoom===-1},Vr.entries.Lcz_Assign)):null),n("hr",null)))}};Sc.style=Cc;const Nc=".sc-igl-tba-category-view-h{display:block}";const Mc=class{constructor(t){i(this,t);this.assignUnitEvent=s(this,"assignUnitEvent",7);this.calendarData=undefined;this.selectedDate=undefined;this.categoriesData={};this.categoryId=undefined;this.eventDatas=undefined;this.categoryIndex=undefined;this.renderAgain=false}componentWillLoad(){}handleAssignRoomEvent(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;this.eventDatas=this.eventDatas.filter((t=>t.ID!=e.data.ID));this.calendarData.bookingEvents.push(e.data);this.assignUnitEvent.emit({key:"assignUnit",data:{RT_ID:this.categoryId,selectedDate:this.selectedDate,assignEvent:e.data,calendarData:this.calendarData}});this.renderView()}getEventView(t,e){return e.map(((e,i)=>n("igl-tba-booking-view",{calendarData:this.calendarData,selectedDate:this.selectedDate,eventData:e,categoriesData:this.categoriesData,categoryId:t,categoryIndex:this.categoryIndex,eventIndex:i,onAssignRoomEvent:t=>this.handleAssignRoomEvent(t)})))}renderView(){this.renderAgain=!this.renderAgain}render(){return n(o,null,n("div",{class:"sectionContainer"},n("div",{class:"font-weight-bold mt-1 font-small-3"},this.categoriesData[this.categoryId].name),this.getEventView(this.categoryId,this.eventDatas)))}};Mc.style=Nc;const Ic=".sc-igl-to-be-assigned-h{display:block}.custom-dropdown.sc-igl-to-be-assigned{cursor:pointer;padding:5px 10px;width:min-content;margin-left:auto;margin-right:auto}.dropdown-toggle.sc-igl-to-be-assigned{all:unset;display:flex;width:max-content;align-items:center;gap:10px}.dropdown-menu.sc-igl-to-be-assigned{max-height:250px;overflow-y:auto}.tobeAssignedHeader.sc-igl-to-be-assigned{font-weight:500;letter-spacing:0.05rem;font-size:1.12rem;padding-top:5px;margin-bottom:1rem}.closeBtn.sc-igl-to-be-assigned{position:absolute;top:0;right:0;cursor:pointer;line-height:1em;padding:0.4rem}.closeBtn.sc-igl-to-be-assigned:hover{background-color:#f6f6f6}.dropdown-toggle.sc-igl-to-be-assigned::after{content:none;display:none}.dropdown-toggle.sc-igl-to-be-assigned .caret-icon.sc-igl-to-be-assigned{transition:transform 0.2s ease}.show.sc-igl-to-be-assigned .caret-icon.sc-igl-to-be-assigned{transform:rotate(-180deg)}.stickyHeader.sc-igl-to-be-assigned{position:-webkit-sticky;position:sticky;top:0;background-color:#ffffff;z-index:1}.pointer.sc-igl-to-be-assigned{cursor:pointer}";const Ac=class{constructor(t){i(this,t);this.optionEvent=s(this,"optionEvent",7);this.reduceAvailableUnitEvent=s(this,"reduceAvailableUnitEvent",7);this.showBookingPopup=s(this,"showBookingPopup",7);this.addToBeAssignedEvent=s(this,"addToBeAssignedEvent",7);this.highlightToBeAssignedBookingEvent=s(this,"highlightToBeAssignedBookingEvent",7);this.isGotoToBeAssignedDate=false;this.isLoading=true;this.selectedDate=null;this.data={};this.today=new Date;this.categoriesData={};this.toBeAssignedService=new bc;this.unassignedDatesProp=undefined;this.propertyid=undefined;this.from_date=undefined;this.to_date=undefined;this.loadingMessage=undefined;this.calendarData=undefined;this.showDatesList=false;this.renderAgain=false;this.orderedDatesList=[]}componentWillLoad(){this.reArrangeData();this.loadingMessage=Vr.entries.Lcz_FetchingUnAssignedUnits}handleUnassignedDatesToBeAssignedChange(t){const{fromDate:e,toDate:i,data:s}=t;let n=new Date(e);n.setHours(0);n.setMinutes(0);n.setSeconds(0);let o=n.getTime();while(o<=new Date(i).getTime()){if(s&&!s[o]&&this.unassignedDates.hasOwnProperty(o)){delete this.unassignedDates[o]}else if(s&&s[o]){this.unassignedDates[o]=s[o]}o=c(o).add(1,"days").toDate().getTime()}this.data=Object.assign({},this.unassignedDates);this.orderedDatesList=Object.keys(this.data).sort(((t,e)=>parseInt(t)-parseInt(e)));if(this.orderedDatesList.length){if(!this.data.hasOwnProperty(this.selectedDate)){this.selectedDate=this.orderedDatesList.length?this.orderedDatesList[0]:null}this.showForDate(this.selectedDate,false);this.renderView()}else{this.selectedDate=null}}handleAssignUnit(t){const e=t.detail;const i=e.data;t.stopImmediatePropagation();t.stopPropagation();if(e.key==="assignUnit"){if(Object.keys(this.data[i.selectedDate].categories).length===1){this.isLoading=true}this.data[i.selectedDate].categories[i.RT_ID]=this.data[i.selectedDate].categories[i.RT_ID].filter((t=>t.ID!=i.assignEvent.ID));this.calendarData=i.calendarData;this.renderView()}}async updateCategories(t,e){try{let i={};const s=await this.toBeAssignedService.getUnassignedRooms(this.propertyid,xr(new Date(+t)),e.roomsInfo,e.formattedLegendData);s.forEach((t=>{if(!i.hasOwnProperty(t.RT_ID)){i[t.RT_ID]=[t]}else{i[t.RT_ID].push(t)}}));this.unassignedDates[t].categories=i}catch(t){}}async reArrangeData(){try{this.today.setHours(0,0,0,0);this.calendarData.roomsInfo.forEach((t=>{this.categoriesData[t.id]={name:t.name,roomsList:t.physicalrooms,roomIds:t.physicalrooms.map((t=>t.id))}}));this.selectedDate=null;this.unassignedDates=this.calendarData.unassignedDates;this.data=this.unassignedDates;this.orderedDatesList=Object.keys(this.data).sort(((t,e)=>parseInt(t)-parseInt(e)));if(!this.selectedDate&&this.orderedDatesList.length){this.selectedDate=this.orderedDatesList[0]}}catch(t){console.error("Error fetching unassigned dates:",t)}}async componentDidLoad(){setTimeout((()=>{if(!this.isGotoToBeAssignedDate&&Object.keys(this.unassignedDates).length>0){const t=Object.keys(this.unassignedDates)[0];this.showForDate(t)}}),100)}async gotoDate(t){this.isGotoToBeAssignedDate=true;this.showForDate(t.detail.data);this.showDatesList=false;this.renderView()}async showForDate(t,e=true){try{if(e){this.isLoading=true}if(this.showDatesList){this.showUnassignedDate()}await this.updateCategories(t,this.calendarData);this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.showBookingPopup.emit({key:"calendar",data:parseInt(t)-864e5});if(this.isGotoToBeAssignedDate){this.isGotoToBeAssignedDate=false}this.isLoading=false;this.selectedDate=t;this.renderView()}catch(t){}}getDay(t){const e=new Date(t);const i="default";const s=this.getLocalizedDayOfWeek(e,i);return s+" "+e.getDate()+", "+e.getFullYear()}getLocalizedDayOfWeek(t,e){const i={weekday:"short"};return t.toLocaleDateString(e,i)}handleOptionEvent(t,e=""){this.highlightToBeAssignedBookingEvent.emit({key:"highlightBookingId",data:{bookingId:"----"}});this.addToBeAssignedEvent.emit({key:"tobeAssignedEvents",data:[]});this.optionEvent.emit({key:t,data:e})}showUnassignedDate(){this.showDatesList=!this.showDatesList}getToBeAssignedEntities(){}getCategoryView(){if(this.orderedDatesList.length&&this.selectedDate&&this.data[this.selectedDate]){return Object.entries(this.data[this.selectedDate].categories).map((([t,e],i)=>n("igl-tba-category-view",{calendarData:this.calendarData,selectedDate:this.selectedDate,categoryId:t,categoryIndex:i,categoriesData:this.categoriesData,eventDatas:e,onAssignUnitEvent:t=>this.handleAssignUnit(t)})))}else{return null}}renderView(){this.renderAgain=!this.renderAgain}render(){var t;return n(o,{class:"tobeAssignedContainer pr-1 text-left"},n("div",null,n("div",null,n("div",{class:"stickyHeader pt-1"},n("p",{class:"tobeAssignedHeader "},Vr.entries.Lcz_Assignments),n("ir-icon",{class:"closeBtn pt-2",onIconClickHandler:()=>this.handleOptionEvent("closeSideMenu")},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:18,width:18},n("path",{fill:"#6b6f82",d:"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"}))),n("hr",null),Object.keys(this.data).length===0?n("p",null,Vr.entries.Lcz_AllBookingsAreAssigned):this.isLoading?n("p",null,this.loadingMessage):n(r,null,this.orderedDatesList.length?n("div",{class:`custom-dropdown border border-light rounded text-center `+(this.showDatesList?"show":""),id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n("div",{class:"dropdown-toggle"},n("span",{class:"font-weight-bold"},this.data[this.selectedDate].dateStr),n("svg",{class:"caret-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:14,width:14},n("path",{fill:"#6b6f82",d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"}))),n("div",{class:"dropdown-menu dropdown-menu-right full-width","aria-labelledby":"dropdownMenuButton"},(t=this.orderedDatesList)===null||t===void 0?void 0:t.map((t=>n("div",{class:"dropdown-item pointer",onClick:()=>this.showForDate(t)},this.data[t].dateStr))))):Vr.entries.Lcz_AllBookingsAreAssigned)),!this.isLoading&&n("div",{class:"scrollabledArea"},this.orderedDatesList.length?Object.keys(this.data[this.selectedDate].categories).length?this.getCategoryView():n("div",{class:"mt-1"},Vr.entries.Lcz_AllAssignForThisDay):null))))}static get watchers(){return{unassignedDatesProp:["handleUnassignedDatesToBeAssignedChange"]}}};Ac.style=Ic;class Rc{async fetchData(t,e){try{const i=JSON.parse(sessionStorage.getItem("token"));if(i!==null){const{data:s}=await yh.post(`/Get_Exposed_Property?Ticket=${i}`,{id:t,language:e});if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}const n=s.My_Result;Gh.adultChildConstraints=n.adult_child_constraints;Gh.allowedBookingSources=n.allowed_booking_sources;Gh.allowed_payment_methods=n.allowed_booking_methods;Gh.currency=n.currency;Gh.is_vacation_rental=n.is_vacation_rental;Gh.pickup_service=n.pickup_service;Gh.max_nights=n.max_nights;return s}}catch(t){console.log(t);throw new Error(t)}}async fetchLanguage(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e!==null){const{data:i}=await yh.post(`/Get_Exposed_Language?Ticket=${e}`,{code:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}let s=this.transformArrayToObject(i.My_Result.entries);Vr.entries=s;Vr.direction=i.My_Result.direction;return{entries:s,direction:i.My_Result.direction}}}catch(t){console.log(t);throw new Error(t)}}transformArrayToObject(t){let e={};for(const i of t){e[i.code]=i.description}return e}}const Yc=Object.create(null);Yc["open"]="0";Yc["close"]="1";Yc["ping"]="2";Yc["pong"]="3";Yc["message"]="4";Yc["upgrade"]="5";Yc["noop"]="6";const Bc=Object.create(null);Object.keys(Yc).forEach((t=>{Bc[Yc[t]]=t}));const Lc={type:"error",data:"parser error"};const jc=typeof Blob==="function"||typeof Blob!=="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]";const Pc=typeof ArrayBuffer==="function";const $c=t=>typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer;const Hc=({type:t,data:e},i,s)=>{if(jc&&e instanceof Blob){if(i){return s(e)}else{return Uc(e,s)}}else if(Pc&&(e instanceof ArrayBuffer||$c(e))){if(i){return s(e)}else{return Uc(new Blob([e]),s)}}return s(Yc[t]+(e||""))};const Uc=(t,e)=>{const i=new FileReader;i.onload=function(){const t=i.result.split(",")[1];e("b"+(t||""))};return i.readAsDataURL(t)};function Gc(t){if(t instanceof Uint8Array){return t}else if(t instanceof ArrayBuffer){return new Uint8Array(t)}else{return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}}let Fc;function zc(t,e){if(jc&&t.data instanceof Blob){return t.data.arrayBuffer().then(Gc).then(e)}else if(Pc&&(t.data instanceof ArrayBuffer||$c(t.data))){return e(Gc(t.data))}Hc(t,false,(t=>{if(!Fc){Fc=new TextEncoder}e(Fc.encode(t))}))}const Vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";const Kc=typeof Uint8Array==="undefined"?[]:new Uint8Array(256);for(let t=0;t<Vc.length;t++){Kc[Vc.charCodeAt(t)]=t}const Wc=t=>{let e=t.length*.75,i=t.length,s,n=0,o,r,a,l;if(t[t.length-1]==="="){e--;if(t[t.length-2]==="="){e--}}const h=new ArrayBuffer(e),c=new Uint8Array(h);for(s=0;s<i;s+=4){o=Kc[t.charCodeAt(s)];r=Kc[t.charCodeAt(s+1)];a=Kc[t.charCodeAt(s+2)];l=Kc[t.charCodeAt(s+3)];c[n++]=o<<2|r>>4;c[n++]=(r&15)<<4|a>>2;c[n++]=(a&3)<<6|l&63}return h};const Jc=typeof ArrayBuffer==="function";const qc=(t,e)=>{if(typeof t!=="string"){return{type:"message",data:Xc(t,e)}}const i=t.charAt(0);if(i==="b"){return{type:"message",data:Zc(t.substring(1),e)}}const s=Bc[i];if(!s){return Lc}return t.length>1?{type:Bc[i],data:t.substring(1)}:{type:Bc[i]}};const Zc=(t,e)=>{if(Jc){const i=Wc(t);return Xc(i,e)}else{return{base64:true,data:t}}};const Xc=(t,e)=>{switch(e){case"blob":if(t instanceof Blob){return t}else{return new Blob([t])}case"arraybuffer":default:if(t instanceof ArrayBuffer){return t}else{return t.buffer}}};const Qc=String.fromCharCode(30);const td=(t,e)=>{const i=t.length;const s=new Array(i);let n=0;t.forEach(((t,o)=>{Hc(t,false,(t=>{s[o]=t;if(++n===i){e(s.join(Qc))}}))}))};const ed=(t,e)=>{const i=t.split(Qc);const s=[];for(let t=0;t<i.length;t++){const n=qc(i[t],e);s.push(n);if(n.type==="error"){break}}return s};function id(){return new TransformStream({transform(t,e){zc(t,(i=>{const s=i.length;let n;if(s<126){n=new Uint8Array(1);new DataView(n.buffer).setUint8(0,s)}else if(s<65536){n=new Uint8Array(3);const t=new DataView(n.buffer);t.setUint8(0,126);t.setUint16(1,s)}else{n=new Uint8Array(9);const t=new DataView(n.buffer);t.setUint8(0,127);t.setBigUint64(1,BigInt(s))}if(t.data&&typeof t.data!=="string"){n[0]|=128}e.enqueue(n);e.enqueue(i)}))}})}let sd;function nd(t){return t.reduce(((t,e)=>t+e.length),0)}function od(t,e){if(t[0].length===e){return t.shift()}const i=new Uint8Array(e);let s=0;for(let n=0;n<e;n++){i[n]=t[0][s++];if(s===t[0].length){t.shift();s=0}}if(t.length&&s<t[0].length){t[0]=t[0].slice(s)}return i}function rd(t,e){if(!sd){sd=new TextDecoder}const i=[];let s=0;let n=-1;let o=false;return new TransformStream({transform(r,a){i.push(r);while(true){if(s===0){if(nd(i)<1){break}const t=od(i,1);o=(t[0]&128)===128;n=t[0]&127;if(n<126){s=3}else if(n===126){s=1}else{s=2}}else if(s===1){if(nd(i)<2){break}const t=od(i,2);n=new DataView(t.buffer,t.byteOffset,t.length).getUint16(0);s=3}else if(s===2){if(nd(i)<8){break}const t=od(i,8);const e=new DataView(t.buffer,t.byteOffset,t.length);const o=e.getUint32(0);if(o>Math.pow(2,53-32)-1){a.enqueue(Lc);break}n=o*Math.pow(2,32)+e.getUint32(4);s=3}else{if(nd(i)<n){break}const t=od(i,n);a.enqueue(qc(o?t:sd.decode(t),e));s=0}if(n===0||n>t){a.enqueue(Lc);break}}}})}const ad=4;function ld(t){if(t)return hd(t)}function hd(t){for(var e in ld.prototype){t[e]=ld.prototype[e]}return t}ld.prototype.on=ld.prototype.addEventListener=function(t,e){this._callbacks=this._callbacks||{};(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e);return this};ld.prototype.once=function(t,e){function i(){this.off(t,i);e.apply(this,arguments)}i.fn=e;this.on(t,i);return this};ld.prototype.off=ld.prototype.removeListener=ld.prototype.removeAllListeners=ld.prototype.removeEventListener=function(t,e){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length){delete this._callbacks["$"+t];return this}var s;for(var n=0;n<i.length;n++){s=i[n];if(s===e||s.fn===e){i.splice(n,1);break}}if(i.length===0){delete this._callbacks["$"+t]}return this};ld.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=new Array(arguments.length-1),i=this._callbacks["$"+t];for(var s=1;s<arguments.length;s++){e[s-1]=arguments[s]}if(i){i=i.slice(0);for(var s=0,n=i.length;s<n;++s){i[s].apply(this,e)}}return this};ld.prototype.emitReserved=ld.prototype.emit;ld.prototype.listeners=function(t){this._callbacks=this._callbacks||{};return this._callbacks["$"+t]||[]};ld.prototype.hasListeners=function(t){return!!this.listeners(t).length};const cd=(()=>{if(typeof self!=="undefined"){return self}else if(typeof window!=="undefined"){return window}else{return Function("return this")()}})();function dd(t,...e){return e.reduce(((e,i)=>{if(t.hasOwnProperty(i)){e[i]=t[i]}return e}),{})}const ud=cd.setTimeout;const fd=cd.clearTimeout;function pd(t,e){if(e.useNativeTimers){t.setTimeoutFn=ud.bind(cd);t.clearTimeoutFn=fd.bind(cd)}else{t.setTimeoutFn=cd.setTimeout.bind(cd);t.clearTimeoutFn=cd.clearTimeout.bind(cd)}}const gd=1.33;function md(t){if(typeof t==="string"){return bd(t)}return Math.ceil((t.byteLength||t.size)*gd)}function bd(t){let e=0,i=0;for(let s=0,n=t.length;s<n;s++){e=t.charCodeAt(s);if(e<128){i+=1}else if(e<2048){i+=2}else if(e<55296||e>=57344){i+=3}else{s++;i+=4}}return i}function wd(t){let e="";for(let i in t){if(t.hasOwnProperty(i)){if(e.length)e+="&";e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i])}}return e}function yd(t){let e={};let i=t.split("&");for(let t=0,s=i.length;t<s;t++){let s=i[t].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class vd extends Error{constructor(t,e,i){super(t);this.description=e;this.context=i;this.type="TransportError"}}class kd extends ld{constructor(t){super();this.writable=false;pd(this,t);this.opts=t;this.query=t.query;this.socket=t.socket}onError(t,e,i){super.emitReserved("error",new vd(t,e,i));return this}open(){this.readyState="opening";this.doOpen();return this}close(){if(this.readyState==="opening"||this.readyState==="open"){this.doClose();this.onClose()}return this}send(t){if(this.readyState==="open"){this.write(t)}}onOpen(){this.readyState="open";this.writable=true;super.emitReserved("open")}onData(t){const e=qc(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed";super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){if(this.opts.port&&(this.opts.secure&&Number(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)){return":"+this.opts.port}else{return""}}_query(t){const e=wd(t);return e.length?"?"+e:""}}const Dd="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),xd=64;let _d=0,Ed;function Od(t){let e="";do{e=Dd[t%xd]+e;t=Math.floor(t/xd)}while(t>0);return e}function Td(){const t=Od(+new Date);if(t!==Ed)return _d=0,Ed=t;return t+"."+Od(_d++)}let Cd=false;try{Cd=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){}const Sd=Cd;function Nd(t){const e=t.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!e||Sd)){return new XMLHttpRequest}}catch(t){}if(!e){try{return new(cd[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}function Md(){}function Id(){}const Ad=function(){const t=new Nd({xdomain:false});return null!=t.responseType}();class Rd extends kd{constructor(t){super(t);this.polling=false;if(typeof location!=="undefined"){const e="https:"===location.protocol;let i=location.port;if(!i){i=e?"443":"80"}this.xd=typeof location!=="undefined"&&t.hostname!==location.hostname||i!==t.port}const e=t&&t.forceBase64;this.supportsBinary=Ad&&!e;if(this.opts.withCredentials){this.cookieJar=Md()}}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused";t()};if(this.polling||!this.writable){let t=0;if(this.polling){t++;this.once("pollComplete",(function(){--t||e()}))}if(!this.writable){t++;this.once("drain",(function(){--t||e()}))}}else{e()}}poll(){this.polling=true;this.doPoll();this.emitReserved("poll")}onData(t){const e=t=>{if("opening"===this.readyState&&t.type==="open"){this.onOpen()}if("close"===t.type){this.onClose({description:"transport closed by the server"});return false}this.onPacket(t)};ed(t,this.socket.binaryType).forEach(e);if("closed"!==this.readyState){this.polling=false;this.emitReserved("pollComplete");if("open"===this.readyState){this.poll()}}}doClose(){const t=()=>{this.write([{type:"close"}])};if("open"===this.readyState){t()}else{this.once("open",t)}}write(t){this.writable=false;td(t,(t=>{this.doWrite(t,(()=>{this.writable=true;this.emitReserved("drain")}))}))}uri(){const t=this.opts.secure?"https":"http";const e=this.query||{};if(false!==this.opts.timestampRequests){e[this.opts.timestampParam]=Td()}if(!this.supportsBinary&&!e.sid){e.b64=1}return this.createUri(t,e)}request(t={}){Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts);return new Yd(this.uri(),t)}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e);i.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this));t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)}));this.pollXhr=t}}class Yd extends ld{constructor(t,e){super();pd(this,e);this.opts=e;this.method=e.method||"GET";this.uri=t;this.data=undefined!==e.data?e.data:null;this.create()}create(){var t;const e=dd(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;const i=this.xhr=new Nd(e);try{i.open(this.method,this.uri,true);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(true);for(let t in this.opts.extraHeaders){if(this.opts.extraHeaders.hasOwnProperty(t)){i.setRequestHeader(t,this.opts.extraHeaders[t])}}}}catch(t){}if("POST"===this.method){try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}}try{i.setRequestHeader("Accept","*/*")}catch(t){}(t=this.opts.cookieJar)===null||t===void 0?void 0:t.addCookies(i);if("withCredentials"in i){i.withCredentials=this.opts.withCredentials}if(this.opts.requestTimeout){i.timeout=this.opts.requestTimeout}i.onreadystatechange=()=>{var t;if(i.readyState===3){(t=this.opts.cookieJar)===null||t===void 0?void 0:t.parseCookies(i)}if(4!==i.readyState)return;if(200===i.status||1223===i.status){this.onLoad()}else{this.setTimeoutFn((()=>{this.onError(typeof i.status==="number"?i.status:0)}),0)}};i.send(this.data)}catch(t){this.setTimeoutFn((()=>{this.onError(t)}),0);return}if(typeof document!=="undefined"){this.index=Yd.requestsCount++;Yd.requests[this.index]=this}}onError(t){this.emitReserved("error",t,this.xhr);this.cleanup(true)}cleanup(t){if("undefined"===typeof this.xhr||null===this.xhr){return}this.xhr.onreadystatechange=Id;if(t){try{this.xhr.abort()}catch(t){}}if(typeof document!=="undefined"){delete Yd.requests[this.index]}this.xhr=null}onLoad(){const t=this.xhr.responseText;if(t!==null){this.emitReserved("data",t);this.emitReserved("success");this.cleanup()}}abort(){this.cleanup()}}Yd.requestsCount=0;Yd.requests={};if(typeof document!=="undefined"){if(typeof attachEvent==="function"){attachEvent("onunload",Bd)}else if(typeof addEventListener==="function"){const t="onpagehide"in cd?"pagehide":"unload";addEventListener(t,Bd,false)}}function Bd(){for(let t in Yd.requests){if(Yd.requests.hasOwnProperty(t)){Yd.requests[t].abort()}}}const Ld=(()=>{const t=typeof Promise==="function"&&typeof Promise.resolve==="function";if(t){return t=>Promise.resolve().then(t)}else{return(t,e)=>e(t,0)}})();const jd=cd.WebSocket||cd.MozWebSocket;const Pd="arraybuffer";const $d=typeof navigator!=="undefined"&&typeof navigator.product==="string"&&navigator.product.toLowerCase()==="reactnative";class Hd extends kd{constructor(t){super(t);this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check()){return}const t=this.uri();const e=this.opts.protocols;const i=$d?{}:dd(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");if(this.opts.extraHeaders){i.headers=this.opts.extraHeaders}try{this.ws=!$d?e?new jd(t,e):new jd(t):new jd(t,e,i)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType;this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{if(this.opts.autoUnref){this.ws._socket.unref()}this.onOpen()};this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t});this.ws.onmessage=t=>this.onData(t.data);this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=false;for(let e=0;e<t.length;e++){const i=t[e];const s=e===t.length-1;Hc(i,this.supportsBinary,(t=>{try{{this.ws.send(t)}}catch(t){}if(s){Ld((()=>{this.writable=true;this.emitReserved("drain")}),this.setTimeoutFn)}}))}}doClose(){if(typeof this.ws!=="undefined"){this.ws.close();this.ws=null}}uri(){const t=this.opts.secure?"wss":"ws";const e=this.query||{};if(this.opts.timestampRequests){e[this.opts.timestampParam]=Td()}if(!this.supportsBinary){e.b64=1}return this.createUri(t,e)}check(){return!!jd}}class Ud extends kd{get name(){return"webtransport"}doOpen(){if(typeof WebTransport!=="function"){return}this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]);this.transport.closed.then((()=>{this.onClose()})).catch((t=>{this.onError("webtransport error",t)}));this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((t=>{const e=rd(Number.MAX_SAFE_INTEGER,this.socket.binaryType);const i=t.readable.pipeThrough(e).getReader();const s=id();s.readable.pipeTo(t.writable);this.writer=s.writable.getWriter();const n=()=>{i.read().then((({done:t,value:e})=>{if(t){return}this.onPacket(e);n()})).catch((t=>{}))};n();const o={type:"open"};if(this.query.sid){o.data=`{"sid":"${this.query.sid}"}`}this.writer.write(o).then((()=>this.onOpen()))}))}))}write(t){this.writable=false;for(let e=0;e<t.length;e++){const i=t[e];const s=e===t.length-1;this.writer.write(i).then((()=>{if(s){Ld((()=>{this.writable=true;this.emitReserved("drain")}),this.setTimeoutFn)}}))}}doClose(){var t;(t=this.transport)===null||t===void 0?void 0:t.close()}}const Gd={websocket:Hd,webtransport:Ud,polling:Rd};const Fd=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;const zd=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Vd(t){if(t.length>2e3){throw"URI too long"}const e=t,i=t.indexOf("["),s=t.indexOf("]");if(i!=-1&&s!=-1){t=t.substring(0,i)+t.substring(i,s).replace(/:/g,";")+t.substring(s,t.length)}let n=Fd.exec(t||""),o={},r=14;while(r--){o[zd[r]]=n[r]||""}if(i!=-1&&s!=-1){o.source=e;o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":");o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":");o.ipv6uri=true}o.pathNames=Kd(o,o["path"]);o.queryKey=Wd(o,o["query"]);return o}function Kd(t,e){const i=/\/{2,9}/g,s=e.replace(i,"/").split("/");if(e.slice(0,1)=="/"||e.length===0){s.splice(0,1)}if(e.slice(-1)=="/"){s.splice(s.length-1,1)}return s}function Wd(t,e){const i={};e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,s){if(e){i[e]=s}}));return i}class Jd extends ld{constructor(t,e={}){super();this.binaryType=Pd;this.writeBuffer=[];if(t&&"object"===typeof t){e=t;t=null}if(t){t=Vd(t);e.hostname=t.host;e.secure=t.protocol==="https"||t.protocol==="wss";e.port=t.port;if(t.query)e.query=t.query}else if(e.host){e.hostname=Vd(e.host).host}pd(this,e);this.secure=null!=e.secure?e.secure:typeof location!=="undefined"&&"https:"===location.protocol;if(e.hostname&&!e.port){e.port=this.secure?"443":"80"}this.hostname=e.hostname||(typeof location!=="undefined"?location.hostname:"localhost");this.port=e.port||(typeof location!=="undefined"&&location.port?location.port:this.secure?"443":"80");this.transports=e.transports||["polling","websocket","webtransport"];this.writeBuffer=[];this.prevBufferLen=0;this.opts=Object.assign({path:"/engine.io",agent:false,withCredentials:false,upgrade:true,timestampParam:"t",rememberUpgrade:false,addTrailingSlash:true,rejectUnauthorized:true,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:false},e);this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":"");if(typeof this.opts.query==="string"){this.opts.query=yd(this.opts.query)}this.id=null;this.upgrades=null;this.pingInterval=null;this.pingTimeout=null;this.pingTimeoutTimer=null;if(typeof addEventListener==="function"){if(this.opts.closeOnBeforeunload){this.beforeunloadEventListener=()=>{if(this.transport){this.transport.removeAllListeners();this.transport.close()}};addEventListener("beforeunload",this.beforeunloadEventListener,false)}if(this.hostname!=="localhost"){this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})};addEventListener("offline",this.offlineEventListener,false)}}this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=ad;e.transport=t;if(this.id)e.sid=this.id;const i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new Gd[t](i)}open(){let t;if(this.opts.rememberUpgrade&&Jd.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1){t="websocket"}else if(0===this.transports.length){this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);return}else{t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){this.transports.shift();this.open();return}t.open();this.setTransport(t)}setTransport(t){if(this.transport){this.transport.removeAllListeners()}this.transport=t;t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t);let i=false;Jd.priorWebsocketSuccess=false;const s=()=>{if(i)return;e.send([{type:"ping",data:"probe"}]);e.once("packet",(t=>{if(i)return;if("pong"===t.type&&"probe"===t.data){this.upgrading=true;this.emitReserved("upgrading",e);if(!e)return;Jd.priorWebsocketSuccess="websocket"===e.name;this.transport.pause((()=>{if(i)return;if("closed"===this.readyState)return;h();this.setTransport(e);e.send([{type:"upgrade"}]);this.emitReserved("upgrade",e);e=null;this.upgrading=false;this.flush()}))}else{const t=new Error("probe error");t.transport=e.name;this.emitReserved("upgradeError",t)}}))};function n(){if(i)return;i=true;h();e.close();e=null}const o=t=>{const i=new Error("probe error: "+t);i.transport=e.name;n();this.emitReserved("upgradeError",i)};function r(){o("transport closed")}function a(){o("socket closed")}function l(t){if(e&&t.name!==e.name){n()}}const h=()=>{e.removeListener("open",s);e.removeListener("error",o);e.removeListener("close",r);this.off("close",a);this.off("upgrading",l)};e.once("open",s);e.once("error",o);e.once("close",r);this.once("close",a);this.once("upgrading",l);if(this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"){this.setTimeoutFn((()=>{if(!i){e.open()}}),200)}else{e.open()}}onOpen(){this.readyState="open";Jd.priorWebsocketSuccess="websocket"===this.transport.name;this.emitReserved("open");this.flush();if("open"===this.readyState&&this.opts.upgrade){let t=0;const e=this.upgrades.length;for(;t<e;t++){this.probe(this.upgrades[t])}}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){this.emitReserved("packet",t);this.emitReserved("heartbeat");this.resetPingTimeout();switch(t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong");this.emitReserved("ping");this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data;this.onError(e);break;case"message":this.emitReserved("data",t.data);this.emitReserved("message",t.data);break}}}onHandshake(t){this.emitReserved("handshake",t);this.id=t.sid;this.transport.query.sid=t.sid;this.upgrades=this.filterUpgrades(t.upgrades);this.pingInterval=t.pingInterval;this.pingTimeout=t.pingTimeout;this.maxPayload=t.maxPayload;this.onOpen();if("closed"===this.readyState)return;this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer);this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout);if(this.opts.autoUnref){this.pingTimeoutTimer.unref()}}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(0===this.writeBuffer.length){this.emitReserved("drain")}else{this.flush()}}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t);this.prevBufferLen=t.length;this.emitReserved("flush")}}getWritablePackets(){const t=this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1;if(!t){return this.writeBuffer}let e=1;for(let t=0;t<this.writeBuffer.length;t++){const i=this.writeBuffer[t].data;if(i){e+=md(i)}if(t>0&&e>this.maxPayload){return this.writeBuffer.slice(0,t)}e+=2}return this.writeBuffer}write(t,e,i){this.sendPacket("message",t,e,i);return this}send(t,e,i){this.sendPacket("message",t,e,i);return this}sendPacket(t,e,i,s){if("function"===typeof e){s=e;e=undefined}if("function"===typeof i){s=i;i=null}if("closing"===this.readyState||"closed"===this.readyState){return}i=i||{};i.compress=false!==i.compress;const n={type:t,data:e,options:i};this.emitReserved("packetCreate",n);this.writeBuffer.push(n);if(s)this.once("flush",s);this.flush()}close(){const t=()=>{this.onClose("forced close");this.transport.close()};const e=()=>{this.off("upgrade",e);this.off("upgradeError",e);t()};const i=()=>{this.once("upgrade",e);this.once("upgradeError",e)};if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";if(this.writeBuffer.length){this.once("drain",(()=>{if(this.upgrading){i()}else{t()}}))}else if(this.upgrading){i()}else{t()}}return this}onError(t){Jd.priorWebsocketSuccess=false;this.emitReserved("error",t);this.onClose("transport error",t)}onClose(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){this.clearTimeoutFn(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();if(typeof removeEventListener==="function"){removeEventListener("beforeunload",this.beforeunloadEventListener,false);removeEventListener("offline",this.offlineEventListener,false)}this.readyState="closed";this.id=null;this.emitReserved("close",t,e);this.writeBuffer=[];this.prevBufferLen=0}}filterUpgrades(t){const e=[];let i=0;const s=t.length;for(;i<s;i++){if(~this.transports.indexOf(t[i]))e.push(t[i])}return e}}Jd.protocol=ad;function qd(t,e="",i){let s=t;i=i||typeof location!=="undefined"&&location;if(null==t)t=i.protocol+"//"+i.host;if(typeof t==="string"){if("/"===t.charAt(0)){if("/"===t.charAt(1)){t=i.protocol+t}else{t=i.host+t}}if(!/^(https?|wss?):\/\//.test(t)){if("undefined"!==typeof i){t=i.protocol+"//"+t}else{t="https://"+t}}s=Vd(t)}if(!s.port){if(/^(http|ws)$/.test(s.protocol)){s.port="80"}else if(/^(http|ws)s$/.test(s.protocol)){s.port="443"}}s.path=s.path||"/";const n=s.host.indexOf(":")!==-1;const o=n?"["+s.host+"]":s.host;s.id=s.protocol+"://"+o+":"+s.port+e;s.href=s.protocol+"://"+o+(i&&i.port===s.port?"":":"+s.port);return s}const Zd=typeof ArrayBuffer==="function";const Xd=t=>typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer;const Qd=Object.prototype.toString;const tu=typeof Blob==="function"||typeof Blob!=="undefined"&&Qd.call(Blob)==="[object BlobConstructor]";const eu=typeof File==="function"||typeof File!=="undefined"&&Qd.call(File)==="[object FileConstructor]";function iu(t){return Zd&&(t instanceof ArrayBuffer||Xd(t))||tu&&t instanceof Blob||eu&&t instanceof File}function su(t,e){if(!t||typeof t!=="object"){return false}if(Array.isArray(t)){for(let e=0,i=t.length;e<i;e++){if(su(t[e])){return true}}return false}if(iu(t)){return true}if(t.toJSON&&typeof t.toJSON==="function"&&arguments.length===1){return su(t.toJSON(),true)}for(const e in t){if(Object.prototype.hasOwnProperty.call(t,e)&&su(t[e])){return true}}return false}function nu(t){const e=[];const i=t.data;const s=t;s.data=ou(i,e);s.attachments=e.length;return{packet:s,buffers:e}}function ou(t,e){if(!t)return t;if(iu(t)){const i={_placeholder:true,num:e.length};e.push(t);return i}else if(Array.isArray(t)){const i=new Array(t.length);for(let s=0;s<t.length;s++){i[s]=ou(t[s],e)}return i}else if(typeof t==="object"&&!(t instanceof Date)){const i={};for(const s in t){if(Object.prototype.hasOwnProperty.call(t,s)){i[s]=ou(t[s],e)}}return i}return t}function ru(t,e){t.data=au(t.data,e);delete t.attachments;return t}function au(t,e){if(!t)return t;if(t&&t._placeholder===true){const i=typeof t.num==="number"&&t.num>=0&&t.num<e.length;if(i){return e[t.num]}else{throw new Error("illegal attachments")}}else if(Array.isArray(t)){for(let i=0;i<t.length;i++){t[i]=au(t[i],e)}}else if(typeof t==="object"){for(const i in t){if(Object.prototype.hasOwnProperty.call(t,i)){t[i]=au(t[i],e)}}}return t}const lu=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];const hu=5;var cu;(function(t){t[t["CONNECT"]=0]="CONNECT";t[t["DISCONNECT"]=1]="DISCONNECT";t[t["EVENT"]=2]="EVENT";t[t["ACK"]=3]="ACK";t[t["CONNECT_ERROR"]=4]="CONNECT_ERROR";t[t["BINARY_EVENT"]=5]="BINARY_EVENT";t[t["BINARY_ACK"]=6]="BINARY_ACK"})(cu||(cu={}));class du{constructor(t){this.replacer=t}encode(t){if(t.type===cu.EVENT||t.type===cu.ACK){if(su(t)){return this.encodeAsBinary({type:t.type===cu.EVENT?cu.BINARY_EVENT:cu.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}}return[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;if(t.type===cu.BINARY_EVENT||t.type===cu.BINARY_ACK){e+=t.attachments+"-"}if(t.nsp&&"/"!==t.nsp){e+=t.nsp+","}if(null!=t.id){e+=t.id}if(null!=t.data){e+=JSON.stringify(t.data,this.replacer)}return e}encodeAsBinary(t){const e=nu(t);const i=this.encodeAsString(e.packet);const s=e.buffers;s.unshift(i);return s}}function uu(t){return Object.prototype.toString.call(t)==="[object Object]"}class fu extends ld{constructor(t){super();this.reviver=t}add(t){let e;if(typeof t==="string"){if(this.reconstructor){throw new Error("got plaintext data when reconstructing a packet")}e=this.decodeString(t);const i=e.type===cu.BINARY_EVENT;if(i||e.type===cu.BINARY_ACK){e.type=i?cu.EVENT:cu.ACK;this.reconstructor=new pu(e);if(e.attachments===0){super.emitReserved("decoded",e)}}else{super.emitReserved("decoded",e)}}else if(iu(t)||t.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{e=this.reconstructor.takeBinaryData(t);if(e){this.reconstructor=null;super.emitReserved("decoded",e)}}}else{throw new Error("Unknown type: "+t)}}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(cu[i.type]===undefined){throw new Error("unknown packet type "+i.type)}if(i.type===cu.BINARY_EVENT||i.type===cu.BINARY_ACK){const s=e+1;while(t.charAt(++e)!=="-"&&e!=t.length){}const n=t.substring(s,e);if(n!=Number(n)||t.charAt(e)!=="-"){throw new Error("Illegal attachments")}i.attachments=Number(n)}if("/"===t.charAt(e+1)){const s=e+1;while(++e){const i=t.charAt(e);if(","===i)break;if(e===t.length)break}i.nsp=t.substring(s,e)}else{i.nsp="/"}const s=t.charAt(e+1);if(""!==s&&Number(s)==s){const s=e+1;while(++e){const i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(e===t.length)break}i.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){const s=this.tryParse(t.substr(e));if(fu.isPayloadValid(i.type,s)){i.data=s}else{throw new Error("invalid payload")}}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return false}}static isPayloadValid(t,e){switch(t){case cu.CONNECT:return uu(e);case cu.DISCONNECT:return e===undefined;case cu.CONNECT_ERROR:return typeof e==="string"||uu(e);case cu.EVENT:case cu.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]==="number"||typeof e[0]==="string"&&lu.indexOf(e[0])===-1);case cu.ACK:case cu.BINARY_ACK:return Array.isArray(e)}}destroy(){if(this.reconstructor){this.reconstructor.finishedReconstruction();this.reconstructor=null}}}class pu{constructor(t){this.packet=t;this.buffers=[];this.reconPack=t}takeBinaryData(t){this.buffers.push(t);if(this.buffers.length===this.reconPack.attachments){const t=ru(this.reconPack,this.buffers);this.finishedReconstruction();return t}return null}finishedReconstruction(){this.reconPack=null;this.buffers=[]}}const gu=Object.freeze({__proto__:null,protocol:hu,get PacketType(){return cu},Encoder:du,Decoder:fu});function mu(t,e,i){t.on(e,i);return function s(){t.off(e,i)}}const bu=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class wu extends ld{constructor(t,e,i){super();this.connected=false;this.recovered=false;this.receiveBuffer=[];this.sendBuffer=[];this._queue=[];this._queueSeq=0;this.ids=0;this.acks={};this.flags={};this.io=t;this.nsp=e;if(i&&i.auth){this.auth=i.auth}this._opts=Object.assign({},i);if(this.io._autoConnect)this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[mu(t,"open",this.onopen.bind(this)),mu(t,"packet",this.onpacket.bind(this)),mu(t,"error",this.onerror.bind(this)),mu(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){if(this.connected)return this;this.subEvents();if(!this.io["_reconnecting"])this.io.open();if("open"===this.io._readyState)this.onopen();return this}open(){return this.connect()}send(...t){t.unshift("message");this.emit.apply(this,t);return this}emit(t,...e){if(bu.hasOwnProperty(t)){throw new Error('"'+t.toString()+'" is a reserved event name')}e.unshift(t);if(this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile){this._addToQueue(e);return this}const i={type:cu.EVENT,data:e};i.options={};i.options.compress=this.flags.compress!==false;if("function"===typeof e[e.length-1]){const t=this.ids++;const s=e.pop();this._registerAckCallback(t,s);i.id=t}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;const n=this.flags.volatile&&(!s||!this.connected);if(n);else if(this.connected){this.notifyOutgoingListeners(i);this.packet(i)}else{this.sendBuffer.push(i)}this.flags={};return this}_registerAckCallback(t,e){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===undefined){this.acks[t]=e;return}const n=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++){if(this.sendBuffer[e].id===t){this.sendBuffer.splice(e,1)}}e.call(this,new Error("operation has timed out"))}),s);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(n);e.apply(this,[null,...t])}}emitWithAck(t,...e){const i=this.flags.timeout!==undefined||this._opts.ackTimeout!==undefined;return new Promise(((s,n)=>{e.push(((t,e)=>{if(i){return t?n(t):s(e)}else{return s(t)}}));this.emit(t,...e)}))}_addToQueue(t){let e;if(typeof t[t.length-1]==="function"){e=t.pop()}const i={id:this._queueSeq++,tryCount:0,pending:false,args:t,flags:Object.assign({fromQueue:true},this.flags)};t.push(((t,...s)=>{if(i!==this._queue[0]){return}const n=t!==null;if(n){if(i.tryCount>this._opts.retries){this._queue.shift();if(e){e(t)}}}else{this._queue.shift();if(e){e(null,...s)}}i.pending=false;return this._drainQueue()}));this._queue.push(i);this._drainQueue()}_drainQueue(t=false){if(!this.connected||this._queue.length===0){return}const e=this._queue[0];if(e.pending&&!t){return}e.pending=true;e.tryCount++;this.flags=e.flags;this.emit.apply(this,e.args)}packet(t){t.nsp=this.nsp;this.io._packet(t)}onopen(){if(typeof this.auth=="function"){this.auth((t=>{this._sendConnectPacket(t)}))}else{this._sendConnectPacket(this.auth)}}_sendConnectPacket(t){this.packet({type:cu.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){if(!this.connected){this.emitReserved("connect_error",t)}}onclose(t,e){this.connected=false;delete this.id;this.emitReserved("disconnect",t,e)}onpacket(t){const e=t.nsp===this.nsp;if(!e)return;switch(t.type){case cu.CONNECT:if(t.data&&t.data.sid){this.onconnect(t.data.sid,t.data.pid)}else{this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"))}break;case cu.EVENT:case cu.BINARY_EVENT:this.onevent(t);break;case cu.ACK:case cu.BINARY_ACK:this.onack(t);break;case cu.DISCONNECT:this.ondisconnect();break;case cu.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data;this.emitReserved("connect_error",e);break}}onevent(t){const e=t.data||[];if(null!=t.id){e.push(this.ack(t.id))}if(this.connected){this.emitEvent(e)}else{this.receiveBuffer.push(Object.freeze(e))}}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e){i.apply(this,t)}}super.emit.apply(this,t);if(this._pid&&t.length&&typeof t[t.length-1]==="string"){this._lastOffset=t[t.length-1]}}ack(t){const e=this;let i=false;return function(...s){if(i)return;i=true;e.packet({type:cu.ACK,id:t,data:s})}}onack(t){const e=this.acks[t.id];if("function"===typeof e){e.apply(this,t.data);delete this.acks[t.id]}}onconnect(t,e){this.id=t;this.recovered=e&&this._pid===e;this._pid=e;this.connected=true;this.emitBuffered();this.emitReserved("connect");this._drainQueue(true)}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t)));this.receiveBuffer=[];this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t);this.packet(t)}));this.sendBuffer=[]}ondisconnect(){this.destroy();this.onclose("io server disconnect")}destroy(){if(this.subs){this.subs.forEach((t=>t()));this.subs=undefined}this.io["_destroy"](this)}disconnect(){if(this.connected){this.packet({type:cu.DISCONNECT})}this.destroy();if(this.connected){this.onclose("io client disconnect")}return this}close(){return this.disconnect()}compress(t){this.flags.compress=t;return this}get volatile(){this.flags.volatile=true;return this}timeout(t){this.flags.timeout=t;return this}onAny(t){this._anyListeners=this._anyListeners||[];this._anyListeners.push(t);return this}prependAny(t){this._anyListeners=this._anyListeners||[];this._anyListeners.unshift(t);return this}offAny(t){if(!this._anyListeners){return this}if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++){if(t===e[i]){e.splice(i,1);return this}}}else{this._anyListeners=[]}return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){this._anyOutgoingListeners=this._anyOutgoingListeners||[];this._anyOutgoingListeners.push(t);return this}prependAnyOutgoing(t){this._anyOutgoingListeners=this._anyOutgoingListeners||[];this._anyOutgoingListeners.unshift(t);return this}offAnyOutgoing(t){if(!this._anyOutgoingListeners){return this}if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++){if(t===e[i]){e.splice(i,1);return this}}}else{this._anyOutgoingListeners=[]}return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e){i.apply(this,t.data)}}}}function yu(t){t=t||{};this.ms=t.min||100;this.max=t.max||1e4;this.factor=t.factor||2;this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0;this.attempts=0}yu.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random();var i=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-i:t+i}return Math.min(t,this.max)|0};yu.prototype.reset=function(){this.attempts=0};yu.prototype.setMin=function(t){this.ms=t};yu.prototype.setMax=function(t){this.max=t};yu.prototype.setJitter=function(t){this.jitter=t};class vu extends ld{constructor(t,e){var i;super();this.nsps={};this.subs=[];if(t&&"object"===typeof t){e=t;t=undefined}e=e||{};e.path=e.path||"/socket.io";this.opts=e;pd(this,e);this.reconnection(e.reconnection!==false);this.reconnectionAttempts(e.reconnectionAttempts||Infinity);this.reconnectionDelay(e.reconnectionDelay||1e3);this.reconnectionDelayMax(e.reconnectionDelayMax||5e3);this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5);this.backoff=new yu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==e.timeout?2e4:e.timeout);this._readyState="closed";this.uri=t;const s=e.parser||gu;this.encoder=new s.Encoder;this.decoder=new s.Decoder;this._autoConnect=e.autoConnect!==false;if(this._autoConnect)this.open()}reconnection(t){if(!arguments.length)return this._reconnection;this._reconnection=!!t;return this}reconnectionAttempts(t){if(t===undefined)return this._reconnectionAttempts;this._reconnectionAttempts=t;return this}reconnectionDelay(t){var e;if(t===undefined)return this._reconnectionDelay;this._reconnectionDelay=t;(e=this.backoff)===null||e===void 0?void 0:e.setMin(t);return this}randomizationFactor(t){var e;if(t===undefined)return this._randomizationFactor;this._randomizationFactor=t;(e=this.backoff)===null||e===void 0?void 0:e.setJitter(t);return this}reconnectionDelayMax(t){var e;if(t===undefined)return this._reconnectionDelayMax;this._reconnectionDelayMax=t;(e=this.backoff)===null||e===void 0?void 0:e.setMax(t);return this}timeout(t){if(!arguments.length)return this._timeout;this._timeout=t;return this}maybeReconnectOnOpen(){if(!this._reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect()}}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Jd(this.uri,this.opts);const e=this.engine;const i=this;this._readyState="opening";this.skipReconnect=false;const s=mu(e,"open",(function(){i.onopen();t&&t()}));const n=e=>{this.cleanup();this._readyState="closed";this.emitReserved("error",e);if(t){t(e)}else{this.maybeReconnectOnOpen()}};const o=mu(e,"error",n);if(false!==this._timeout){const t=this._timeout;const i=this.setTimeoutFn((()=>{s();n(new Error("timeout"));e.close()}),t);if(this.opts.autoUnref){i.unref()}this.subs.push((()=>{this.clearTimeoutFn(i)}))}this.subs.push(s);this.subs.push(o);return this}connect(t){return this.open(t)}onopen(){this.cleanup();this._readyState="open";this.emitReserved("open");const t=this.engine;this.subs.push(mu(t,"ping",this.onping.bind(this)),mu(t,"data",this.ondata.bind(this)),mu(t,"error",this.onerror.bind(this)),mu(t,"close",this.onclose.bind(this)),mu(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){Ld((()=>{this.emitReserved("packet",t)}),this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];if(!i){i=new wu(this,t,e);this.nsps[t]=i}else if(this._autoConnect&&!i.active){i.connect()}return i}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){const e=this.nsps[t];if(e.active){return}}this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i<e.length;i++){this.engine.write(e[i],t.options)}}cleanup(){this.subs.forEach((t=>t()));this.subs.length=0;this.decoder.destroy()}_close(){this.skipReconnect=true;this._reconnecting=false;this.onclose("forced close");if(this.engine)this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup();this.backoff.reset();this._readyState="closed";this.emitReserved("close",t,e);if(this._reconnection&&!this.skipReconnect){this.reconnect()}}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts){this.backoff.reset();this.emitReserved("reconnect_failed");this._reconnecting=false}else{const e=this.backoff.duration();this._reconnecting=true;const i=this.setTimeoutFn((()=>{if(t.skipReconnect)return;this.emitReserved("reconnect_attempt",t.backoff.attempts);if(t.skipReconnect)return;t.open((e=>{if(e){t._reconnecting=false;t.reconnect();this.emitReserved("reconnect_error",e)}else{t.onreconnect()}}))}),e);if(this.opts.autoUnref){i.unref()}this.subs.push((()=>{this.clearTimeoutFn(i)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=false;this.backoff.reset();this.emitReserved("reconnect",t)}}const ku={};function Du(t,e){if(typeof t==="object"){e=t;t=undefined}e=e||{};const i=qd(t,e.path||"/socket.io");const s=i.source;const n=i.id;const o=i.path;const r=ku[n]&&o in ku[n]["nsps"];const a=e.forceNew||e["force new connection"]||false===e.multiplex||r;let l;if(a){l=new vu(s,e)}else{if(!ku[n]){ku[n]=new vu(s,e)}l=ku[n]}if(i.query&&!e.query){e.query=i.queryKey}return l.socket(i.path,e)}Object.assign(Du,{Manager:vu,Socket:wu,io:Du,connect:Du});const xu=".sc-igloo-calendar-h{display:block;position:relative;background-color:#ffffff;height:100%;text-align:center}.igl-calendar.sc-igloo-calendar{display:grid;grid-template-columns:1fr;height:100%}.calendarScrollContainer.sc-igloo-calendar div.sc-igloo-calendar{position:relative}.calendarScrollContainer.sc-igloo-calendar{width:100%;height:100%;overflow:auto;position:relative;white-space:nowrap;border-left:2px solid grey}.showToBeAssigned.sc-igloo-calendar,.showLegend.sc-igloo-calendar{grid-template-columns:330px 1fr}#calendarContainer.sc-igloo-calendar{position:absolute}div.sc-igloo-calendar{position:relative}.legendContainer.sc-igloo-calendar,.tobeAssignedContainer.sc-igloo-calendar{display:none;height:100%;overflow-y:auto;padding-left:0.5em !important;padding-right:0.5em !important}.showToBeAssigned.sc-igloo-calendar .tobeAssignedContainer.sc-igloo-calendar{display:block}.showLegend.sc-igloo-calendar .legendContainer.sc-igloo-calendar{display:block}.tobeBooked.sc-igloo-calendar{padding-top:8px;padding-bottom:8px;text-align:left}";const _u=class{constructor(t){i(this,t);this.dragOverHighlightElement=s(this,"dragOverHighlightElement",7);this.moveBookingTo=s(this,"moveBookingTo",7);this.calculateUnassignedDates=s(this,"calculateUnassignedDates",7);this.reduceAvailableUnitEvent=s(this,"reduceAvailableUnitEvent",7);this.revertBooking=s(this,"revertBooking",7);this.bookingService=new Ah;this.countryNodeList=[];this.visibleCalendarCells={x:[],y:[]};this.today="";this.roomService=new Rc;this.eventsService=new Lh;this.toBeAssignedService=new bc;this.reachedEndOfCalendar=false;this.scrollViewDragPos={top:0,left:0,x:0,y:0};this.onScrollContentMoveHandler=t=>{const e=t.clientX-this.scrollViewDragPos.x;const i=t.clientY-this.scrollViewDragPos.y;this.scrollContainer.scrollTop=this.scrollViewDragPos.top-i;this.scrollContainer.scrollLeft=this.scrollViewDragPos.left-e;if(Math.abs(e)>5||Math.abs(i)>5){this.scrollViewDragging=true}};this.onScrollContentMoveEndHandler=()=>{document.removeEventListener("mousemove",this.onScrollContentMoveHandler);document.removeEventListener("mouseup",this.onScrollContentMoveEndHandler)};this.propertyid=undefined;this.from_date=undefined;this.to_date=undefined;this.language=undefined;this.baseurl=undefined;this.loadingMessage=undefined;this.currencyName=undefined;this.ticket="";this.calendarData=new Object;this.days=new Array;this.scrollViewDragging=false;this.dialogData=null;this.bookingItem=null;this.editBookingItem=null;this.showLegend=false;this.showPaymentDetails=false;this.showToBeAssigned=false;this.unassignedDates={};this.roomNightsData=null;this.renderAgain=false;this.showBookProperty=false;this.totalAvailabilityQueue=[]}ticketChanged(){sessionStorage.setItem("token",JSON.stringify(this.ticket));this.initializeApp()}componentWillLoad(){if(this.baseurl){yh.defaults.baseURL=this.baseurl}if(this.ticket!==""){this.initializeApp()}}setUpCalendarData(t,e){this.calendarData.currency=t["My_Result"].currency;this.calendarData.allowedBookingSources=t["My_Result"].allowed_booking_sources;this.calendarData.adultChildConstraints=t["My_Result"].adult_child_constraints;this.calendarData.legendData=this.getLegendData(t);this.calendarData.is_vacation_rental=t["My_Result"].is_vacation_rental;this.calendarData.startingDate=new Date(e.My_Params_Get_Rooming_Data.FROM).getTime();this.calendarData.endingDate=new Date(e.My_Params_Get_Rooming_Data.TO).getTime();this.calendarData.formattedLegendData=_r(this.calendarData.legendData);let i=e.myBookings||[];i=i.filter((t=>{const e=c(t.TO_DATE,"YYYY-MM-DD");const i=c(t.FROM_DATE,"YYYY-MM-DD");return!e.isSame(i)}));this.calendarData.bookingEvents=i;this.calendarData.toBeAssignedEvents=[]}async initializeApp(){try{const[t,e,i,s]=await Promise.all([this.roomService.fetchLanguage(this.language),this.roomService.fetchData(this.propertyid,this.language),this.bookingService.getCalendarData(this.propertyid,this.from_date,this.to_date),this.bookingService.getCountries(this.language)]);dc.days=i.days;dc.months=i.months;this.setRoomsData(e);this.countryNodeList=s;this.setUpCalendarData(e,i);let n=e["My_Result"]["allowed_payment_methods"];this.showPaymentDetails=n.some((t=>t.code==="001"||t.code==="004"));this.updateBookingEventsDateRange(this.calendarData.bookingEvents);this.updateBookingEventsDateRange(this.calendarData.toBeAssignedEvents);this.today=this.transformDateForScroll(new Date);let o=new Date(this.calendarData.startingDate);o.setHours(0,0,0,0);this.days=i.days;this.calendarData.days=this.days;this.calendarData.monthsInfo=i.months;setTimeout((()=>{this.scrollToElement(this.today)}),200);if(!this.calendarData.is_vacation_rental){const t=await this.toBeAssignedService.getUnassignedDates(this.propertyid,xr(new Date),this.to_date);this.unassignedDates={fromDate:this.from_date,toDate:this.to_date,data:Object.assign(Object.assign({},this.unassignedDates),t)};this.calendarData=Object.assign(Object.assign({},this.calendarData),{unassignedDates:t})}this.socket=Du("https://realtime.igloorooms.com/");this.socket.on("MSG",(async t=>{let e=JSON.parse(t);if(e){const{REASON:i,KEY:s,PAYLOAD:n}=e;if(s.toString()===this.propertyid.toString()){let o;if(i==="DELETE_CALENDAR_POOL"||i==="GET_UNASSIGNED_DATES"){o=n}else{o=JSON.parse(n)}console.log(o,i);const r=["DORESERVATION","BLOCK_EXPOSED_UNIT","ASSIGN_EXPOSED_ROOM","REALLOCATE_EXPOSED_ROOM_BLOCK"];if(r.includes(i)){let a;if(i==="BLOCK_EXPOSED_UNIT"||i==="REALLOCATE_EXPOSED_ROOM_BLOCK"){a=[await Mh(o)]}else{a=Nh(o)}this.AddOrUpdateRoomBookings(a,undefined)}else if(i==="DELETE_CALENDAR_POOL"){this.calendarData=Object.assign(Object.assign({},this.calendarData),{bookingEvents:this.calendarData.bookingEvents.filter((t=>t.POOL!==o))})}else if(i==="GET_UNASSIGNED_DATES"){function l(t){const e={};const i=t.split("|");i.forEach((t=>{const i=t.split(":");e[i[0]]=i[1]}));return e}const h=l(o);if(!this.calendarData.is_vacation_rental&&new Date(h.FROM_DATE).getTime()>=this.calendarData.startingDate&&new Date(h.TO_DATE).getTime()<=this.calendarData.endingDate){const c=await this.toBeAssignedService.getUnassignedDates(this.propertyid,xr(new Date(h.FROM_DATE)),xr(new Date(h.TO_DATE)));this.calendarData.unassignedDates=Object.assign(Object.assign({},this.calendarData.unassignedDates),c);this.unassignedDates={fromDate:xr(new Date(h.FROM_DATE)),toDate:xr(new Date(h.TO_DATE)),data:c};if(Object.keys(c).length===0){this.reduceAvailableUnitEvent.emit({fromDate:xr(new Date(h.FROM_DATE)),toDate:xr(new Date(h.TO_DATE))})}}}else if(i==="UPDATE_CALENDAR_AVAILABILITY"){this.totalAvailabilityQueue.push(o);if(this.totalAvailabilityQueue.length>0){clearTimeout(this.availabilityTimeout)}this.availabilityTimeout=setTimeout((()=>{this.updateTotalAvailability()}),1e3);console.log(o)}else if(i==="CHANGE_IN_DUE_AMOUNT"){this.calendarData=Object.assign(Object.assign({},this.calendarData),{bookingEvents:[...this.calendarData.bookingEvents.map((t=>{if(o.pools.includes(t.ID)){return Object.assign(Object.assign({},t),{BALANCE:o.due_amount})}return t}))]})}else if(i==="CHANGE_IN_BOOK_STATUS"){this.calendarData=Object.assign(Object.assign({},this.calendarData),{bookingEvents:[...this.calendarData.bookingEvents.map((t=>{if(o.pools.includes(t.ID)){return Object.assign(Object.assign({},t),{STATUS:t.STATUS!=="IN-HOUSE"?xh[o.status_code]:o.status_code==="001"?xh[o.status_code]:"IN-HOUSE"})}return t}))]})}else{return}}}}))}catch(t){console.log("Initializing Calendar Error",t)}}updateTotalAvailability(){let t=[...dc.days];this.totalAvailabilityQueue.forEach((e=>{let i=new Date(e.date);i.setMilliseconds(0);i.setSeconds(0);i.setMinutes(0);i.setHours(0);const s=t.findIndex((t=>t.currentDate===i.getTime()));if(s>0){const i=t[s].rate.findIndex((t=>t.id===e.room_type_id));if(i>0){t[s].rate[i].exposed_inventory.rts=e.availability}}}));dc.days=[...t]}componentDidLoad(){this.scrollToElement(this.today)}async handleDeleteEvent(t){try{t.stopImmediatePropagation();t.preventDefault();await this.eventsService.deleteEvent(t.detail)}catch(t){}}checkBookingAvailability(t){return this.calendarData.bookingEvents.some((e=>e.ID===t.ID||e.FROM_DATE===t.FROM_DATE&&e.TO_DATE===t.TO_DATE&&e.PR_ID===t.PR_ID))}updateBookingEventsDateRange(t){const e=c();t.forEach((t=>{t.legendData=this.calendarData.formattedLegendData;t.defaultDateRange={};t.defaultDateRange.fromDate=new Date(t.FROM_DATE+"T00:00:00");t.defaultDateRange.fromDateStr=this.getDateStr(t.defaultDateRange.fromDate);t.defaultDateRange.fromDateTimeStamp=t.defaultDateRange.fromDate.getTime();t.defaultDateRange.toDate=new Date(t.TO_DATE+"T00:00:00");t.defaultDateRange.toDateStr=this.getDateStr(t.defaultDateRange.toDate);t.defaultDateRange.toDateTimeStamp=t.defaultDateRange.toDate.getTime();t.defaultDateRange.dateDifference=t.NO_OF_DAYS;t.roomsInfo=[...this.calendarData.roomsInfo];if(!Er(t.STATUS_CODE)){const i=c(t.TO_DATE,"YYYY-MM-DD");const s=c(t.FROM_DATE,"YYYY-MM-DD");if(t.STATUS!=="PENDING"){if(s.isSame(e,"day")&&e.hour()>=12){t.STATUS=xh["000"]}else if(e.isAfter(s,"day")&&e.isBefore(i,"day")){t.STATUS=xh["000"]}else if(i.isSame(e,"day")&&e.hour()<12){t.STATUS=xh["000"]}else if(i.isSame(e,"day")&&e.hour()>=12||i.isBefore(e,"day")){t.STATUS=xh["003"]}}}}))}setRoomsData(t){var e,i;let s=new Array;if((i=(e=t.My_Result)===null||e===void 0?void 0:e.roomtypes)===null||i===void 0?void 0:i.length){s=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}Gh.roomsInfo=s;this.calendarData.roomsInfo=s}getLegendData(t){return t["My_Result"].calendar_legends}getDateStr(t,e="default"){return t.getDate()+" "+t.toLocaleString(e,{month:"short"})+" "+t.getFullYear()}scrollToElement(t){this.scrollContainer=this.scrollContainer||this.element.querySelector(".calendarScrollContainer");const e=this.element.querySelector(".topLeftCell");const i=this.element.querySelector(".day-"+t);if(i){this.scrollContainer.scrollTo({left:0});const t=i.getBoundingClientRect();const s=this.scrollContainer.getBoundingClientRect();const n=e.getBoundingClientRect();this.scrollContainer.scrollTo({left:t.left-s.left-n.width-t.width})}}AddOrUpdateRoomBookings(t,e){let i=[...this.calendarData.bookingEvents];t.forEach((t=>{if(!this.checkBookingAvailability(t)){i=i.filter((e=>e.ID!==t.ID))}}));this.updateBookingEventsDateRange(t);if(e){i=i.filter((t=>t.POOL===e))}t.forEach((t=>{if(!i.some((e=>e.ID===t.ID))){i.push(t)}}));this.calendarData=Object.assign(Object.assign({},this.calendarData),{bookingEvents:i})}transformDateForScroll(t){return c(t).format("D_M_YYYY")}scrollPageToRoom(t){let e=t.detail.refClass;this.scrollContainer=this.scrollContainer||this.element.querySelector(".calendarScrollContainer");const i=this.element.querySelector(".topLeftCell");const s=this.element.querySelector("."+e);if(s){this.scrollContainer.scrollTo({top:0});const t=s.getBoundingClientRect();const e=this.scrollContainer.getBoundingClientRect();const n=i.getBoundingClientRect();this.scrollContainer.scrollTo({top:t.top-e.top-n.height-t.height})}}handleShowDialog(t){this.dialogData=t.detail;let e=this.element.querySelector("ir-modal");if(e){e.openModal()}}handleShowRoomNightsDialog(t){this.roomNightsData=t.detail}handleBookingDatasChange(t){t.stopPropagation();t.stopImmediatePropagation();let e=[...this.calendarData.bookingEvents];e=e.filter((t=>t.ID!=="NEW_TEMP_EVENT"));e.push(...t.detail.filter((t=>t.STATUS==="PENDING-CONFIRMATION")));this.updateBookingEventsDateRange(t.detail);this.calendarData=Object.assign(Object.assign({},this.calendarData),{bookingEvents:e})}shouldRenderCalendarView(){return this.calendarData&&this.calendarData.days&&this.calendarData.days.length}onOptionSelect(t){const e=t.detail;const i=this.element.querySelector("#iglooCalendar");switch(e.key){case"showAssigned":i.classList.remove("showLegend");i.classList.remove("showToBeAssigned");i.classList.toggle("showToBeAssigned");this.showLegend=false;this.showToBeAssigned=true;break;case"showLegend":i.classList.remove("showToBeAssigned");i.classList.remove("showLegend");i.classList.toggle("showLegend");this.showLegend=true;this.showToBeAssigned=false;break;case"calendar":if(e.data.start!==undefined&&e.data.end!==undefined){this.handleDateSearch(e.data)}else{let t=new Date(e.data);this.scrollToElement(t.getDate()+"_"+(t.getMonth()+1)+"_"+t.getFullYear())}break;case"search":break;case"add":if(e.data.event_type!=="EDIT_BOOKING"){this.bookingItem=e.data}else{this.editBookingItem=e.data}break;case"gotoToday":this.scrollToElement(this.today);break;case"closeSideMenu":this.closeSideMenu();this.showBookProperty=false;break}}async addDatesToCalendar(t,e){const i=await this.bookingService.getCalendarData(this.propertyid,t,e);const s=i.myBookings||[];this.updateBookingEventsDateRange(s);if(new Date(t).getTime()<new Date(this.calendarData.startingDate).getTime()){this.calendarData.startingDate=new Date(t).getTime();this.days=[...i.days,...this.days];let e=[...i.months];if(this.calendarData.monthsInfo[0].monthName===i.months[i.months.length-1].monthName){this.calendarData.monthsInfo[0].daysCount=this.calendarData.monthsInfo[0].daysCount+i.months[i.months.length-1].daysCount;e.pop()}let n=JSON.parse(JSON.stringify(s));n=n.filter((t=>{const e=this.calendarData.bookingEvents.findIndex((e=>e.ID===t.ID));if(e!==-1){this.calendarData.bookingEvents[e].FROM_DATE=t.FROM_DATE;this.calendarData.bookingEvents[e].NO_OF_DAYS=Ih(t.FROM_DATE,this.calendarData.bookingEvents[e].TO_DATE);return false}return true}));dc.days=this.days;this.calendarData=Object.assign(Object.assign({},this.calendarData),{days:this.days,monthsInfo:[...e,...this.calendarData.monthsInfo],bookingEvents:[...this.calendarData.bookingEvents,...n]})}else{this.calendarData.endingDate=new Date(e).getTime();let t=[...i.months];this.days=[...this.days,...i.days];if(this.calendarData.monthsInfo[this.calendarData.monthsInfo.length-1].monthName===i.months[0].monthName){this.calendarData.monthsInfo[this.calendarData.monthsInfo.length-1].daysCount=this.calendarData.monthsInfo[this.calendarData.monthsInfo.length-1].daysCount+i.months[0].daysCount;t.shift()}let n=JSON.parse(JSON.stringify(s));n=n.filter((t=>{const e=this.calendarData.bookingEvents.findIndex((e=>e.ID===t.ID));if(e!==-1){this.calendarData.bookingEvents[e].TO_DATE=t.TO_DATE;this.calendarData.bookingEvents[e].NO_OF_DAYS=Ih(this.calendarData.bookingEvents[e].FROM_DATE,t.TO_DATE);return false}return true}));dc.days=this.days;this.calendarData=Object.assign(Object.assign({},this.calendarData),{days:this.days,monthsInfo:[...this.calendarData.monthsInfo,...t],bookingEvents:[...this.calendarData.bookingEvents,...s]})}const n=await this.toBeAssignedService.getUnassignedDates(this.propertyid,t,e);this.calendarData.unassignedDates=Object.assign(Object.assign({},this.calendarData.unassignedDates),n);this.unassignedDates={fromDate:t,toDate:e,data:n}}async handleDateSearch(t){const e=c(t.start).toDate();const i=c(this.from_date).toDate();const s=t.end.toDate();const n=this.calendarData.endingDate;if(e.getTime()<new Date(this.from_date).getTime()){await this.addDatesToCalendar(c(e).add(-1,"days").format("YYYY-MM-DD"),c(this.from_date).add(-1,"days").format("YYYY-MM-DD"));this.scrollToElement(this.transformDateForScroll(e))}else if(e.getTime()>i.getTime()&&e.getTime()<n&&s.getTime()<n){this.scrollToElement(this.transformDateForScroll(e))}else if(e.getTime()>n){const t=Ar(new Date(this.calendarData.endingDate));await this.addDatesToCalendar(t,c(s).add(2,"months").format("YYYY-MM-DD"));this.scrollToElement(this.transformDateForScroll(e))}}closeSideMenu(){const t=this.element.querySelector("#iglooCalendar");t.classList.remove("showToBeAssigned");t.classList.remove("showLegend");this.showLegend=false;this.showToBeAssigned=false}dragScrollContent(t){this.scrollViewDragging=false;let e=t&&t.target?this.hasAncestorWithClass(t.target,"preventPageScroll"):false;if(!e){this.scrollViewDragPos={left:this.scrollContainer.scrollLeft,top:this.scrollContainer.scrollTop,x:t.clientX,y:t.clientY};document.addEventListener("mousemove",this.onScrollContentMoveHandler);document.addEventListener("mouseup",this.onScrollContentMoveEndHandler)}}calendarScrolling(){if(this.scrollContainer){const t=this.scrollContainer.getBoundingClientRect();let e=170;let i=t.width-e;let s=t.x+e;let n=t.x+t.width;let o=Array.from(this.element.querySelectorAll(".monthCell"));if(o.length){o.map((async t=>{let e=t.getBoundingClientRect();if(o.indexOf(t)===o.length-1){if(e.x+e.width<=n&&!this.reachedEndOfCalendar){this.reachedEndOfCalendar=true;const t=Mr(new Date(this.calendarData.endingDate));const e=Ar(new Date(this.calendarData.endingDate));await this.addDatesToCalendar(e,t);this.reachedEndOfCalendar=false}}if(e.x+e.width<s);else if(e.x>n);else{let o=t.querySelector(".monthTitle");let r=0;let a=e.width;if(e.x<s){r=Math.abs(e.x)-s;r=e.x<0?Math.abs(e.x)+s:Math.abs(r);a=e.x+e.width>n?i:e.x+e.width-s}else{a=i-a>a?a:i-e.x+s}o.style.marginLeft=r+"px";o.style.width=a+"px"}}))}}}hasAncestorWithClass(t,e){let i=t;while(i!==null){if(i.matches(`.${e}`)){return true}i=i.parentElement}return false}showBookingPopupEventDataHandler(t){t.preventDefault();t.stopImmediatePropagation();this.onOptionSelect(t)}updateEventDataHandler(t){let e=this.calendarData.bookingEvents.find((e=>e.id===t.detail.id));if(e&&t.detail&&t.detail.data){Object.entries(t.detail.data).forEach((([t,i])=>{e[t]=i}))}}dragOverEventDataHandler(t){if(t.detail.id==="CALCULATE_DRAG_OVER_BOUNDS"){let e=document.querySelector("igl-cal-header .topLeftCell");let i=document.querySelectorAll(".headersContainer .headerCell");let s=document.querySelectorAll(".bodyContainer .roomRow .roomTitle");this.visibleCalendarCells={x:[],y:[]};i.forEach((t=>{const i=t;this.visibleCalendarCells.x.push({left:i.offsetLeft+e.offsetWidth,width:i.offsetWidth,id:i.getAttribute("data-day")})}));s.forEach((t=>{const e=t;this.visibleCalendarCells.y.push({top:e.offsetTop,height:e.offsetHeight,id:e.getAttribute("data-room")})}));this.highlightDragOver(true,t.detail.data)}else if(t.detail.id==="DRAG_OVER"){this.highlightDragOver(true,t.detail.data)}else if(t.detail.id==="DRAG_OVER_END"){this.highlightDragOver(false,t.detail.data)}else if(t.detail.id==="STRETCH_OVER_END"){this.highlightDragOver(false,t.detail.data)}}async highlightDragOver(t,e){let i,s;if(e){i=this.visibleCalendarCells.x.find((t=>t.left<e.x&&e.x<=t.left+t.width));s=this.visibleCalendarCells.y.find((t=>t.top<e.y&&e.y<=t.top+t.height))}if(t&&i&&s){this.dragOverHighlightElement.emit({dragOverElement:s.id+"_"+i.id})}else{this.dragOverHighlightElement.emit({dragOverElement:""})}if(!t){this.moveBookingTo.emit({bookingId:e.id,fromRoomId:e.fromRoomId,toRoomId:s&&s.id||"revert",moveToDay:i&&i.id||"revert",pool:e.pool,from_date:Nr(i&&i.id),to_date:Sr(i&&i.id,e.nbOfDays)})}}handleModalConfirm(){const{pool:t,toRoomId:e,from_date:i,to_date:s}=this.dialogData;this.eventsService.reallocateEvent(t,e,i,s).then((()=>{this.dialogData=null})).catch((()=>{this.revertBooking.emit(t)}))}handleModalCancel(){this.revertBooking.emit(this.dialogData.pool);this.dialogData=null}handleRoomNightsDialogClose(t){if(t.detail.type==="cancel"){this.revertBooking.emit(this.roomNightsData.pool)}this.roomNightsData=null}handleSideBarToggle(t){if(t.detail){if(this.editBookingItem){this.editBookingItem=null}if(this.roomNightsData){this.revertBooking.emit(this.roomNightsData.pool);this.roomNightsData=null}if(this.dialogData){this.revertBooking.emit(this.dialogData.pool);this.dialogData=null}}}handleCloseBookingWindow(){this.bookingItem=null}render(){var t,e;return n(o,null,n("ir-toast",null),n("ir-interceptor",null),n("div",{id:"iglooCalendar",class:"igl-calendar"},this.shouldRenderCalendarView()?[this.showToBeAssigned?n("igl-to-be-assigned",{unassignedDatesProp:this.unassignedDates,to_date:this.to_date,from_date:this.from_date,propertyid:this.propertyid,class:"tobeAssignedContainer",calendarData:this.calendarData,onOptionEvent:t=>this.onOptionSelect(t)}):null,this.showLegend?n("igl-legends",{class:"legendContainer",legendData:this.calendarData.legendData,onOptionEvent:t=>this.onOptionSelect(t)}):null,n("div",{class:"calendarScrollContainer",onMouseDown:t=>this.dragScrollContent(t),onScroll:()=>this.calendarScrolling()},n("div",{id:"calendarContainer"},n("igl-cal-header",{unassignedDates:this.unassignedDates,to_date:this.to_date,propertyid:this.propertyid,today:this.today,calendarData:this.calendarData,onOptionEvent:t=>this.onOptionSelect(t)}),n("igl-cal-body",{language:this.language,countryNodeList:this.countryNodeList,currency:this.calendarData.currency,today:this.today,isScrollViewDragging:this.scrollViewDragging,calendarData:this.calendarData}),n("igl-cal-footer",{today:this.today,calendarData:this.calendarData,onOptionEvent:t=>this.onOptionSelect(t)})))]:n("ir-loading-screen",{message:"Preparing Calendar Data"})),this.bookingItem&&n("igl-book-property",{allowedBookingSources:this.calendarData.allowedBookingSources,adultChildConstraints:this.calendarData.adultChildConstraints,showPaymentDetails:this.showPaymentDetails,countryNodeList:this.countryNodeList,currency:this.calendarData.currency,language:this.language,propertyid:this.propertyid,bookingData:this.bookingItem,onCloseBookingWindow:()=>this.handleCloseBookingWindow()}),n("ir-sidebar",{onIrSidebarToggle:this.handleSideBarToggle.bind(this),open:this.roomNightsData!==null||this.editBookingItem&&this.editBookingItem.event_type==="EDIT_BOOKING",showCloseButton:this.editBookingItem!==null,sidebarStyles:{width:this.editBookingItem?"80rem":"var(--sidebar-width,40rem)",background:this.roomNightsData?"white":"#F2F3F8"}},this.roomNightsData&&n("ir-room-nights",{pool:this.roomNightsData.pool,onCloseRoomNightsDialog:this.handleRoomNightsDialogClose.bind(this),language:this.language,bookingNumber:this.roomNightsData.bookingNumber,identifier:this.roomNightsData.identifier,toDate:this.roomNightsData.to_date,fromDate:this.roomNightsData.from_date,ticket:this.ticket,propertyId:this.propertyid}),this.editBookingItem&&this.editBookingItem.event_type==="EDIT_BOOKING"&&n("ir-booking-details",{hasPrint:true,hasReceipt:true,propertyid:this.propertyid,hasRoomEdit:true,hasRoomDelete:true,bookingNumber:this.editBookingItem.BOOKING_NUMBER,ticket:this.ticket,baseurl:this.baseurl,language:this.language,hasRoomAdd:true})),n("ir-modal",{modalTitle:"",rightBtnActive:this.dialogData?!this.dialogData.hideConfirmButton:true,leftBtnText:(t=Vr===null||Vr===void 0?void 0:Vr.entries)===null||t===void 0?void 0:t.Lcz_Cancel,rightBtnText:(e=Vr===null||Vr===void 0?void 0:Vr.entries)===null||e===void 0?void 0:e.Lcz_Confirm,modalBody:this.dialogData?this.dialogData.description:"",onConfirmModal:this.handleModalConfirm.bind(this),onCancelModal:this.handleModalCancel.bind(this)}))}get element(){return a(this)}static get watchers(){return{ticket:["ticketChanged"]}}};_u.style=xu;const Eu=".sc-ir-autocomplete-h{display:block;position:relative}.selected.sc-ir-autocomplete{color:#fff;text-decoration:none;background-color:#666ee8}input.sc-ir-autocomplete{width:100%;position:relative}.combobox.sc-ir-autocomplete{margin:0;top:30px;min-width:100%;width:max-content;display:block;z-index:10000;padding:1px;background:white;box-shadow:0px 8px 16px 0px rgba(0, 0, 0, 0.2);padding:5px 0;max-height:250px;overflow-y:auto}.dropdown-item.sc-ir-autocomplete{cursor:pointer}button.sc-ir-autocomplete{all:unset;right:4px}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete,span.sc-ir-autocomplete,loader-container.sc-ir-autocomplete{padding:5px 16px;margin:0px;margin-top:2px;width:100%}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete{cursor:pointer}.combobox.sc-ir-autocomplete p.sc-ir-autocomplete:hover{background:#f4f5fa}.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete,.combobox.sc-ir-autocomplete p[data-selected].sc-ir-autocomplete:hover{color:#fff;text-decoration:none;background-color:#666ee8}.loader.sc-ir-autocomplete{width:14px;height:14px;border:2px solid #0f0f0f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Ou=class{constructor(t){i(this,t);this.comboboxValue=s(this,"comboboxValue",7);this.inputCleared=s(this,"inputCleared",7);this.toast=s(this,"toast",7);this.bookingService=new Ah;this.no_result_found="";this.duration=300;this.placeholder="";this.propertyId=undefined;this.isSplitBooking=false;this.type="text";this.name="";this.inputId=l();this.required=false;this.disabled=false;this.value=undefined;this.from_date="";this.to_date="";this.danger_border=undefined;this.inputValue="";this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false;this.isLoading=true;this.isItemSelected=undefined}componentWillLoad(){this.no_result_found=Vr.entries.Lcz_NoResultsFound}handleKeyDown(t){var e;const i=this.data.length;const s=this.getHeightOfPElement();if(i>0){switch(t.key){case"ArrowUp":t.preventDefault();this.selectedIndex=(this.selectedIndex-1+i)%i;this.adjustScrollPosition(s);break;case"ArrowDown":t.preventDefault();this.selectedIndex=(this.selectedIndex+1)%i;this.adjustScrollPosition(s);break;case"Enter":case" ":case"ArrowRight":t.preventDefault();this.selectItem(this.selectedIndex);break;case"Escape":(e=this.inputRef)===null||e===void 0?void 0:e.blur();this.isComboBoxVisible=false;break}}}getHeightOfPElement(){const t=this.el.querySelector(".combobox");if(t){const e=t.querySelector("p");return e?e.offsetHeight:0}return 0}adjustScrollPosition(t,e=250){const i=this.el.querySelector(".combobox");if(i){const s=2;const n=t+s;const o=n*this.selectedIndex;let r=o-e/2+t/2;r=Math.max(0,Math.min(r,i.scrollHeight-e));i.scrollTo({top:r,behavior:"auto"})}}selectItem(t){if(this.data[t]){this.isItemSelected=true;this.comboboxValue.emit({key:"select",data:this.data[t]});this.inputValue="";this.resetCombobox()}}debounceFetchData(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout((()=>{this.fetchData()}),this.duration)}async fetchData(){try{this.isLoading=true;let t=[];if(!this.isSplitBooking){t=await this.bookingService.fetchExposedGuest(this.inputValue,this.propertyId)}else{if(this.inputValue.split(" ").length===1){t=await this.bookingService.fetchExposedBookings(this.inputValue,this.propertyId,this.from_date,this.to_date)}}this.data=t;if(!this.isComboBoxVisible){this.isComboBoxVisible=true}}catch(t){console.log("error",t)}finally{this.isLoading=false}}handleInputChange(t){this.inputValue=t.target.value;if(this.inputValue){this.debounceFetchData()}else{clearTimeout(this.debounceTimer);this.resetCombobox(false)}}handleDocumentClick(t){const e=t.target;if(!this.el.contains(e)){this.isComboBoxVisible=false}}handleBlur(){setTimeout((()=>{if(this.isDropdownItem(document.activeElement)){return}if(this.isSplitBooking){if(!this.isItemSelected){if(this.data.length>0){this.comboboxValue.emit({key:"blur",data:this.inputValue})}else{if(this.inputValue!==""){this.toast.emit({type:"error",description:"",title:`The Booking #${this.inputValue} is not Available`,position:"top-right"});this.inputCleared.emit()}}this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}else{if(!this.isItemSelected){this.comboboxValue.emit({key:"blur",data:this.inputValue});this.inputValue="";this.resetCombobox()}else{this.isItemSelected=false}}}),200)}isDropdownItem(t){return t&&t.closest(".combobox")}disconnectedCallback(){var t,e,i,s;clearTimeout(this.debounceTimer);(t=this.inputRef)===null||t===void 0?void 0:t.removeEventListener("blur",this.handleBlur);(e=this.inputRef)===null||e===void 0?void 0:e.removeEventListener("click",this.selectItem);(i=this.inputRef)===null||i===void 0?void 0:i.removeEventListener("keydown",this.handleKeyDown);(s=this.inputRef)===null||s===void 0?void 0:s.removeEventListener("focus",this.handleFocus)}handleItemKeyDown(t,e){var i;if(t.key==="Enter"||t.key===" "||t.key==="ArrowRight"){this.selectItem(e);t.preventDefault()}else if(t.key==="Escape"){this.isComboBoxVisible=false;(i=this.inputRef)===null||i===void 0?void 0:i.blur();t.preventDefault()}else{return}}renderDropdown(){var t;if(this.inputValue!==""){return n("div",{class:`position-absolute border rounded combobox`},(t=this.data)===null||t===void 0?void 0:t.map(((t,e)=>n("p",{role:"button",onKeyDown:t=>this.handleItemKeyDown(t,e),"data-selected":this.selectedIndex===e,tabIndex:0,onClick:()=>this.selectItem(e)},this.isSplitBooking?n(r,null,`${t.booking_nbr} ${t.guest.first_name} ${t.guest.last_name}`):n("div",{class:"d-flex align-items-center flex-fill"},n("p",{class:"p-0 m-0"},`${t.email}`," ",n("span",{class:"p-0 m-0"},` - ${t.first_name} ${t.last_name}`)))))),this.isLoading&&n("div",{class:"loader-container d-flex align-items-center justify-content-center"},n("div",{class:"loader"})),this.data.length===0&&!this.isLoading&&n("span",{class:"text-center"},this.no_result_found))}}handleFocus(){this.isComboBoxVisible=true}clearInput(){this.inputValue="";this.resetCombobox();this.inputCleared.emit(null)}resetCombobox(t=true){var e;if(t){(e=this.inputRef)===null||e===void 0?void 0:e.blur()}this.data=[];this.selectedIndex=-1;this.isComboBoxVisible=false}render(){return n(o,null,n("div",{class:"d-flex align-items-center "},n("input",{required:this.required,disabled:this.disabled,id:this.inputId,onKeyDown:this.handleKeyDown.bind(this),class:`form-control input-sm flex-full ${this.danger_border&&"border-danger"}`,type:this.type,name:this.name,value:this.value||this.inputValue,placeholder:this.placeholder,onBlur:this.handleBlur.bind(this),onInput:this.handleInputChange.bind(this),onFocus:this.handleFocus.bind(this),ref:t=>this.inputRef=t}),this.inputValue&&n("button",{type:"button",class:"position-absolute d-flex align-items-center justify-content-center ",onClick:this.clearInput.bind(this)},n("p",{class:"sr-only"},"clear input"),n("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})))),this.isComboBoxVisible&&this.renderDropdown())}get el(){return a(this)}};Ou.style=Eu;const Tu=t=>c(t).format("MMM DD, YYYY");const Cu=(t,e="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(t);const Su=t=>c(t).format("DD/MM ddd");const Nu=(t,e)=>c(`${t}:${e}`,"HH:mm").format("hh:mm A");const Mu=".sc-ir-booking-details-h{overflow-x:hidden}.confirmed.sc-ir-booking-details{color:#fff;display:flex;align-items:center}.bg-ir-green.sc-ir-booking-details{background:#629a4c;height:28px;padding-top:0 !important;padding-bottom:0 !important}.h-28.sc-ir-booking-details{height:2rem}.bg-ir-red.sc-ir-booking-details{background:#ff4961;height:28px;padding-top:0 !important;padding-bottom:0 !important}.bg-ir-orange.sc-ir-booking-details{background:#ff9149;height:28px;padding-top:0 !important;padding-bottom:0 !important}.pickup-margin.sc-ir-booking-details{margin-bottom:7px !important}.pointer.sc-ir-booking-details{cursor:pointer}.sc-ir-booking-details:root{--sidebar-width:50rem}.sm-padding-right.sc-ir-booking-details{padding-right:0.2rem}.sm-padding-left.sc-ir-booking-details{padding-left:0.2rem}.sm-padding-top.sc-ir-booking-details{padding-top:0.2rem}.sm-padding-bottom.sc-ir-booking-details{padding-bottom:0.2rem}.info-notes.sc-ir-booking-details{list-style:none;padding-left:0}.light-blue-bg.sc-ir-booking-details{background-color:#acecff;padding:0rem 0.1rem}.iframeHeight.sc-ir-booking-details{height:17.5rem}";const Iu=class{constructor(t){i(this,t);this.toast=s(this,"toast",7);this.bookingService=new Ah;this.roomService=new Rc;this.language="";this.ticket="";this.bookingNumber="";this.baseurl="";this.propertyid=undefined;this.hasPrint=false;this.hasReceipt=false;this.hasDelete=false;this.hasMenu=false;this.hasRoomEdit=false;this.hasRoomDelete=false;this.hasRoomAdd=false;this.hasCheckIn=false;this.hasCheckOut=false;this.bookingItem=null;this.statusData=[];this.tempStatus=null;this.showPaymentDetails=undefined;this.bookingData=undefined;this.countryNodeList=undefined;this.calendarData={};this.guestData=null;this.defaultTexts=undefined;this.rerenderFlag=false;this.sidebarState=null;this.isUpdateClicked=false}componentDidLoad(){if(this.baseurl){yh.defaults.baseURL=this.baseurl}if(this.ticket!==""){this.initializeApp()}}async ticketChanged(){sessionStorage.setItem("token",JSON.stringify(this.ticket));this.initializeApp()}setRoomsData(t){var e,i;let s=new Array;if((i=(e=t.My_Result)===null||e===void 0?void 0:e.roomtypes)===null||i===void 0?void 0:i.length){s=t.My_Result.roomtypes;t.My_Result.roomtypes.forEach((t=>{t.expanded=true}))}this.calendarData.roomsInfo=s}async initializeApp(){try{const[t,e,i,s]=await Promise.all([this.roomService.fetchData(this.propertyid,this.language),this.roomService.fetchLanguage(this.language),this.bookingService.getCountries(this.language),this.bookingService.getExposedBooking(this.bookingNumber,this.language)]);console.log(e);if(!Vr.entries){Vr.entries=e.entries;Vr.direction=e.direction}this.defaultTexts=e;console.log(this.defaultTexts);this.countryNodeList=i;const{allowed_payment_methods:n,currency:o,allowed_booking_sources:r,adult_child_constraints:a,calendar_legends:l}=t["My_Result"];this.calendarData={currency:o,allowed_booking_sources:r,adult_child_constraints:a,legendData:l};console.log(this.calendarData);this.setRoomsData(t);const h=["001","004"];this.showPaymentDetails=n.some((t=>h.includes(t.code)));this.guestData=s.guest;this.bookingData=s;this.rerenderFlag=!this.rerenderFlag}catch(t){console.error("Error initializing app:",t)}}handleIconClick(t){const e=t.target;switch(e.id){case"pickup":this.sidebarState="pickup";return;case"print":window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.bookingData.system_id}&&PM=B&TK=${this.ticket}`);return;case"receipt":window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.bookingData.system_id}&&PM=I&TK=${this.ticket}`);return;case"book-delete":return;case"menu":window.location.href="https://x.igloorooms.com/manage/acbookinglist.aspx";return;case"room-add":this.bookingItem={ID:"",NAME:this.bookingData.guest.last_name,EMAIL:this.bookingData.guest.email,PHONE:this.bookingData.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.bookingData.from_date,ARRIVAL:this.bookingData.arrival,TO_DATE:this.bookingData.to_date,TITLE:`${Vr.entries.Lcz_AddingUnitToBooking}# ${this.bookingData.booking_nbr}`,defaultDateRange:{fromDate:new Date(this.bookingData.from_date),fromDateStr:"",toDate:new Date(this.bookingData.to_date),toDateStr:"",dateDifference:0,message:""},event_type:"ADD_ROOM",BOOKING_NUMBER:this.bookingData.booking_nbr,ADD_ROOM_TO_BOOKING:this.bookingData.booking_nbr,GUEST:this.bookingData.guest,message:this.bookingData.remark,SOURCE:this.bookingData.source,ROOMS:this.bookingData.rooms};return;case"add-payment":return}}handleEditSidebar(){this.sidebarState="guest"}handleSelectChange(t){t.stopPropagation();t.stopImmediatePropagation();const e=t.target;this.tempStatus=e.selectedValue}async handleClick(t){const e=t.target;const i=e.id;switch(i){case"update-status-btn":await this.updateStatus();await this.resetBookingData();break}}openEditSidebar(){const t=document.querySelector("ir-sidebar#editGuestInfo");t.open=true}_calculateNights(t,e){const i=c(e).diff(c(t),"days");return i}async updateStatus(){if(this.tempStatus!=="Select"&&this.tempStatus!==null){try{this.isUpdateClicked=true;await yh.post(`/Change_Exposed_Booking_Status?Ticket=${this.ticket}`,{book_nbr:this.bookingNumber,status:this.tempStatus});this.toast.emit({type:"success",description:"",title:Vr.entries.Lcz_StatusUpdatedSuccessfully,position:"top-right"})}catch(t){console.log(t)}finally{this.isUpdateClicked=false}}else{this.toast.emit({type:"error",description:"",title:Vr.entries.Lcz_SelectStatus,position:"top-right"})}}handleEditInitiated(t){this.bookingItem=t.detail}handleCloseBookingWindow(){this.bookingItem=null}handleDeleteFinish(t){this.bookingData=Object.assign(Object.assign({},this.bookingData),{rooms:this.bookingData.rooms.filter((e=>e.identifier!==t.detail))})}async resetBookingData(){try{const t=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);this.bookingData=Object.assign({},t)}catch(t){console.log(t)}}async handleResetBookingData(t){t.stopPropagation();t.stopImmediatePropagation();await this.resetBookingData()}render(){var t;if(!this.bookingData){return null}let e="";switch(this.bookingData.status.code){case"001":e="bg-ir-orange";break;case"002":e="bg-ir-green";break;case"003":e="bg-ir-red";break;case"004":e="bg-ir-red";break}return[n("div",{class:"fluid-container p-1"},n("div",{class:"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between mt-1"},n("div",{class:"m-0 p-0 mb-1 mb-lg-0 mt-md-0  d-flex justify-content-start align-items-end"},n("p",{class:"font-size-large m-0 p-0"},`${this.defaultTexts.entries.Lcz_Booking}#${this.bookingNumber}`),n("p",{class:"m-0 p-0"},"@ ",Tu(this.bookingData.booked_on.date)," ",Nu(this.bookingData.booked_on.hour.toString(),+" "+this.bookingData.booked_on.minute.toString()))),n("div",{class:"d-flex justify-content-end align-items-center"},n("span",{class:`confirmed btn-sm m-0 mr-2 ${e}`},this.bookingData.status.description),this.bookingData.allowed_actions.length>0&&n(r,null,n("ir-select",{selectContainerStyle:"h-28",selectStyles:"d-flex align-items-center h-28",firstOption:Vr.entries.Lcz_Select,id:"update-status",size:"sm","label-available":"false",data:this.bookingData.allowed_actions.map((t=>({text:t.description,value:t.code}))),textSize:"sm",class:"sm-padding-right m-0"}),n("ir-button",{btn_styles:"h-28",isLoading:this.isUpdateClicked,btn_disabled:this.isUpdateClicked,id:"update-status-btn",size:"sm",text:"Update"})),this.hasReceipt&&n("ir-icon",{id:"receipt",class:"mx-1"},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",stroke:"#104064",height:"24",width:"19",viewBox:"0 0 384 512"},n("path",{fill:"#104064",d:"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM80 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm16 96H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V256c0-17.7 14.3-32 32-32zm0 32v64H288V256H96zM240 416h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H240c-8.8 0-16-7.2-16-16s7.2-16 16-16z"}))),this.hasPrint&&n("ir-icon",{id:"print",icon:"ft-printer h1 color-ir-dark-blue-hover m-0 ml-1  pointer"},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 512 512"},n("path",{fill:"#104064",d:"M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"}))),this.hasDelete&&n("ir-icon",{id:"book-delete",icon:"ft-trash-2 h1 danger m-0 ml-1 pointer"}),this.hasMenu&&n("ir-icon",{id:"menu",icon:"ft-list h1 color-ir-dark-blue-hover m-0 ml-1 pointer"})))),n("div",{class:"fluid-container p-1 text-left mx-0"},n("div",{class:"row m-0"},n("div",{class:"col-12 p-0 mx-0 pr-lg-1 col-lg-6"},n("div",{class:"card"},n("div",{class:"p-1"},this.bookingData.property.name||"",n("ir-label",{label:`${this.defaultTexts.entries.Lcz_Source}:`,value:this.bookingData.origin.Label,imageSrc:this.bookingData.origin.Icon}),n("ir-label",{label:`${this.defaultTexts.entries.Lcz_BookedBy}:`,value:`${this.bookingData.guest.first_name} ${this.bookingData.guest.last_name}`,iconShown:true}),n("ir-label",{label:`${this.defaultTexts.entries.Lcz_Phone}:`,value:this.bookingData.guest.mobile}),n("ir-label",{label:`${this.defaultTexts.entries.Lcz_Email}:`,value:this.bookingData.guest.email}),this.bookingData.guest.alternative_email&&n("ir-label",{label:`${this.defaultTexts.entries.Lcz_AlternativeEmail}:`,value:this.bookingData.guest.alternative_email}),n("ir-label",{label:`${this.defaultTexts.entries.Lcz_Address}:`,value:this.bookingData.guest.address}),n("ir-label",{label:`${this.defaultTexts.entries.Lcz_ArrivalTime}:`,value:this.bookingData.arrival.description}),n("ir-label",{label:`${this.defaultTexts.entries.Lcz_Note}:`,value:this.bookingData.remark}))),n("p",{class:"font-size-large d-flex justify-content-between align-items-center mb-1"},`${Tu(this.bookingData.from_date)} - ${Tu(this.bookingData.to_date)} (${this._calculateNights(this.bookingData.from_date,this.bookingData.to_date)} ${this._calculateNights(this.bookingData.from_date,this.bookingData.to_date)>1?` ${this.defaultTexts.entries.Lcz_Nights}`:` ${this.defaultTexts.entries.Lcz_Night}`})`,this.hasRoomAdd&&n("ir-icon",{id:"room-add",icon:"ft-plus h3 color-ir-dark-blue-hover pointer"})),n("div",{class:"card p-0 mx-0"},this.bookingData.rooms.map(((t,e)=>{const i=t.rateplan.name;const s=t.roomtype.name;return[n("ir-room",{defaultTexts:this.defaultTexts,legendData:this.calendarData.legendData,roomsInfo:this.calendarData.roomsInfo,myRoomTypeFoodCat:s,mealCodeName:i,currency:this.bookingData.currency.code,hasRoomEdit:this.hasRoomEdit,hasRoomDelete:this.hasRoomDelete,hasCheckIn:this.hasCheckIn,hasCheckOut:this.hasCheckOut,bookingEvent:this.bookingData,bookingIndex:e,ticket:this.ticket,onDeleteFinished:this.handleDeleteFinish.bind(this)}),e!==this.bookingData.rooms.length-1&&n("hr",{class:"mr-2 ml-2 my-0 p-0"})]}))),Gh.pickup_service.is_enabled&&n("div",{class:"mb-1"},n("div",{class:"d-flex w-100 mb-1 align-items-center justify-content-between"},n("p",{class:"font-size-large p-0 m-0 "},Vr.entries.Lcz_Pickup),n("ir-icon",{class:"pointer mr-1",id:"pickup"},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20",viewBox:"0 0 512 512"},n("path",{fill:"#6b6f82",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"})))),this.bookingData.pickup_info&&n("div",{class:"card"},n("div",{class:"p-1"},n("div",{class:"d-flex align-items-center py-0 my-0 pickup-margin"},n("p",{class:"font-weight-bold mr-1 py-0 my-0"},Vr.entries.Lcz_Date,": ",n("span",{class:"font-weight-normal"},c(this.bookingData.pickup_info.date,"YYYY-MM-DD").format("ddd, DD MM YYYY"))),n("p",{class:"font-weight-bold flex-fill py-0 my-0"},Vr.entries.Lcz_Time,":",n("span",{class:"font-weight-normal"}," ",`${this.bookingData.pickup_info.hour}:${this.bookingData.pickup_info.minute}`)),n("p",{class:"font-weight-bold py-0 my-0"},Vr.entries.Lcz_DueUponBooking,":"," ",n("span",{class:"font-weight-normal"},this.bookingData.pickup_info.currency.symbol,this.bookingData.pickup_info.total))),n("p",{class:"font-weight-bold py-0 my-0"},Vr.entries.Lcz_FlightDetails,":",n("span",{class:"font-weight-normal"}," ",`${this.bookingData.pickup_info.details}`)),n("p",{class:"py-0 my-0 pickup-margin"},`${this.bookingData.pickup_info.selected_option.vehicle.description}`),n("p",{class:"font-weight-bold py-0 my-0 pickup-margin"},Vr.entries.Lcz_NbrOfVehicles,":",n("span",{class:"font-weight-normal"}," ",`${this.bookingData.pickup_info.nbr_of_units}`)),n("p",{class:"small py-0 my-0 pickup-margin"},Gh.pickup_service.pickup_instruction.description,Gh.pickup_service.pickup_cancelation_prepayment.description))))),n("div",{class:"col-12 p-0 m-0 pl-lg-1 col-lg-6"},n("ir-payment-details",{defaultTexts:this.defaultTexts,bookingDetails:this.bookingData})))),n("ir-sidebar",{open:this.sidebarState!==null,side:"right",id:"editGuestInfo",onIrSidebarToggle:t=>{t.stopImmediatePropagation();t.stopPropagation();this.sidebarState=null},showCloseButton:this.sidebarState==="pickup"?false:true},this.sidebarState==="guest"&&n("ir-guest-info",{booking_nbr:this.bookingNumber,defaultTexts:this.defaultTexts,email:(t=this.bookingData)===null||t===void 0?void 0:t.guest.email,language:this.language,onCloseSideBar:()=>this.sidebarState=null}),this.sidebarState==="pickup"&&n("ir-pickup",{defaultPickupData:this.bookingData.pickup_info,bookingNumber:this.bookingData.booking_nbr,numberOfPersons:this.bookingData.occupancy.adult_nbr+this.bookingData.occupancy.children_nbr,onCloseModal:()=>this.sidebarState=null})),n(r,null,this.bookingItem&&n("igl-book-property",{allowedBookingSources:this.calendarData.allowed_booking_sources,adultChildConstraints:this.calendarData.adult_child_constraints,showPaymentDetails:this.showPaymentDetails,countryNodeList:this.countryNodeList,currency:this.calendarData.currency,language:this.language,propertyid:this.propertyid,bookingData:this.bookingItem,onCloseBookingWindow:()=>this.handleCloseBookingWindow()}))]}get element(){return a(this)}static get watchers(){return{ticket:["ticketChanged"]}}};Iu.style=Mu;const Au=".loader{width:11px;height:11px;border:2px solid #fff;border-bottom-color:transparent;border-radius:50%;margin:0;padding:0;display:inline-flex;box-sizing:border-box;animation:rotation 1s linear infinite}.button-icon{padding:0;margin-top:0}.button-icon[data-state='loading']{display:none}.button-text{padding:0 5px}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Ru=class{constructor(t){i(this,t);this.clickHanlder=s(this,"clickHanlder",7);this.name=undefined;this.text=undefined;this.icon="ft-save";this.btn_color="primary";this.size="md";this.textSize="md";this.btn_block=true;this.btn_disabled=false;this.btn_type="button";this.isLoading=false;this.btn_styles=undefined}connectedCallback(){}disconnectedCallback(){}render(){let t=this.btn_block?"btn-block":"";return n("button",{onClick:()=>this.clickHanlder.emit(),class:`btn btn-${this.btn_color} ${this.btn_styles} d-flex align-items-center btn-${this.size} text-${this.textSize} ${t}`,type:this.btn_type,disabled:this.btn_disabled},n("span",{class:"button-icon","data-state":this.isLoading?"loading":""},n("slot",{name:"icon"})),this.isLoading&&n("span",{class:"loader m-0 p-0"}),this.text&&n("span",{class:"button-text m-0"},this.text))}};Ru.style=Au;const Yu=[{isCSS:true,link:"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/bootstrap-extended.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/colors.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/menu/menu-types/horizontal-menu.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/core/colors/palette-gradient.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/components.css"},{isCSS:true,link:"https://x.igloorooms.com/assets/css/style.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/icheck.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/vendors/css/forms/icheck/custom.css"},{isCSS:true,link:"https://x.igloorooms.com/app-assets/css/pages/login-register.css"}];const Bu=class{constructor(t){i(this,t);this.extraResources="";this.resources=Yu}componentWillLoad(){this.parseRefs()}componentDidLoad(){this.initializeStyles()}hrefsChanged(){this.parseRefs();this.initializeStyles()}parseRefs(){if(this.extraResources!=="")this.resources.push(JSON.parse(this.extraResources))}appendTag(t,e){const i=document.createElement(t);const s=[];Object.keys(e).forEach((t=>{i.setAttribute(t,e[t]);s.push(`[${t}="${e[t]}"]`)}));const n=`${t}${s.join("")}`;const o=document.querySelector(n);if(!o){document.head.appendChild(i)}}initializeStyles(){this.resources.forEach((t=>{if(t.isCSS){this.appendTag("link",{href:t.link,rel:"stylesheet",type:"text/css"})}if(t.isJS){this.appendTag("script",{src:t.link})}}))}render(){return n(o,null,n("slot",null))}static get watchers(){return{extraResources:["hrefsChanged"]}}};const Lu="input.sc-ir-date-picker{all:unset;box-sizing:border-box;padding:0;margin:0;width:100%;text-align:center}input.sc-ir-date-picker:disabled{text-align:start;font-size:14px}";const ju=class{constructor(t){i(this,t);this.dateChanged=s(this,"dateChanged",7);this.fromDate=undefined;this.toDate=undefined;this.opens=undefined;this.autoApply=undefined;this.firstDay=1;this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];this.daysOfWeek=["Su","Mo","Tu","We","Th","Fr","Sa"];this.format="MMM DD, YYYY";this.separator=" - ";this.applyLabel="Apply";this.cancelLabel="Cancel";this.fromLabel="Form";this.toLabel="To";this.customRangeLabel="Custom";this.weekLabel="W";this.disabled=false;this.singleDatePicker=false;this.minDate=undefined;this.maxDate=undefined;this.maxSpan={days:240}}componentDidLoad(){this.dateRangeInput=this.element.querySelector(".date-range-input");$(this.dateRangeInput).daterangepicker({singleDatePicker:this.singleDatePicker,opens:this.opens,startDate:c(this.fromDate),endDate:c(this.toDate),minDate:c(this.minDate||c(new Date).format("YYYY-MM-DD")),maxDate:this.maxDate?c(this.maxDate):undefined,maxSpan:this.maxSpan,autoApply:this.autoApply,locale:{format:this.format,separator:this.separator,applyLabel:this.applyLabel,cancelLabel:this.cancelLabel,fromLabel:this.fromLabel,toLabel:this.toLabel,customRangeLabel:this.customRangeLabel,weekLabel:this.weekLabel,daysOfWeek:this.daysOfWeek,monthNames:this.monthNames,firstDay:this.firstDay}},((t,e)=>{this.dateChanged.emit({start:t,end:e})}))}render(){return n("input",{class:"date-range-input",type:"text",disabled:this.disabled})}get element(){return a(this)}};ju.style=Lu;const Pu=".input-group-text.sc-ir-guest-info{min-width:10rem;text-align:left}.mobilePrefixSelect.sc-ir-guest-info{border-right-width:0;border-top-right-radius:0;border-bottom-right-radius:0}.mobilePrefixInput.sc-ir-guest-info{border-top-left-radius:0;border-bottom-left-radius:0}.check-container.sc-ir-guest-info{position:relative;cursor:pointer;font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;align-items:center}.check-container.sc-ir-guest-info input.sc-ir-guest-info{position:relative;opacity:0;cursor:pointer;height:0;width:0}.check-container.sc-ir-guest-info .checkmark.sc-ir-guest-info{position:relative;top:0;left:0;height:20px;width:20px;border:1px solid #cacfe7;border-radius:4px;transition:all 0.3s ease}.check-container.sc-ir-guest-info input.sc-ir-guest-info:checked~.checkmark.sc-ir-guest-info{background-color:#1e9ff2;border-color:#1e9ff2}.checkmark.sc-ir-guest-info:after{content:'';position:absolute;display:none}.check-container.sc-ir-guest-info input.sc-ir-guest-info:checked~.checkmark.sc-ir-guest-info:after{display:block}.check-label.sc-ir-guest-info{margin-left:10px !important}.check-container.sc-ir-guest-info .checkmark.sc-ir-guest-info:after{left:6px;top:3px;width:6px;height:10px;border:solid white;border-width:0 2px 2px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}";const $u=class{constructor(t){i(this,t);this.closeSideBar=s(this,"closeSideBar",7);this.bookingService=new Kh;this.setupDataCountries=null;this.setupDataCountriesCode=null;this.defaultTexts=undefined;this.language=undefined;this.email=undefined;this.booking_nbr=undefined;this.countries=undefined;this.submit=false;this.guest=null;this.isLoading=false}async componentWillLoad(){await this.init()}async init(){try{const[t,e]=await Promise.all([this.bookingService.fetchGuest(this.email),this.bookingService.getCountries(this.language)]);this.countries=e;this.guest=t}catch(t){console.log(t)}}handleInputChange(t,e){this.guest=Object.assign(Object.assign({},this.guest),{[t]:e})}async editGuest(){try{this.isLoading=true;await this.bookingService.editExposedGuest(this.guest,this.booking_nbr);this.closeSideBar.emit(null)}catch(t){console.log(t)}finally{this.isLoading=false;console.log("done")}}render(){if(!this.guest){return null}return[n("h3",null,n("strong",null,this.defaultTexts.entries.Lcz_GuestDetails)),n("div",{class:"card p-1"},n("div",{class:"card-content collapse show"},n("div",{class:"card-body pt-0"},n("ir-input-text",{placeholder:"",label:this.defaultTexts.entries.Lcz_FirstName,name:"firstName",submited:this.submit,value:this.guest.first_name,required:true,onTextChange:t=>this.handleInputChange("first_name",t.detail)}),n("ir-input-text",{placeholder:"",label:this.defaultTexts.entries.Lcz_LastName,name:"lastName",submited:this.submit,value:this.guest.last_name,required:true,onTextChange:t=>this.handleInputChange("last_name",t.detail)}),n("ir-input-text",{placeholder:"",label:this.defaultTexts.entries.Lcz_Email,name:"email",submited:this.submit,value:this.guest.email,required:true,onTextChange:t=>this.handleInputChange("email",t.detail)}),n("ir-input-text",{placeholder:"",label:this.defaultTexts.entries.Lcz_AlternativeEmail,name:"altEmail",value:this.guest.alternative_email,onTextChange:t=>this.handleInputChange("alternative_email",t.detail)}),n("ir-select",{selectContainerStyle:"mb-1",required:true,name:"country",submited:this.submit,label:this.defaultTexts.entries.Lcz_Country,selectedValue:this.guest.country_id.toString(),data:this.countries.map((t=>({value:t.id.toString(),text:t.name}))),firstOption:"...",onSelectChange:t=>this.handleInputChange("country_id",t.detail)}),n("ir-input-text",{placeholder:"",label:this.defaultTexts.entries.Lcz_City,name:"city",value:this.guest.city,onTextChange:t=>this.handleInputChange("city",t.detail)}),n("ir-input-text",{placeholder:"",label:this.defaultTexts.entries.Lcz_Address,name:"address",value:this.guest.address,onTextChange:t=>this.handleInputChange("address",t.detail)}),n("div",{class:"form-group mr-0"},n("div",{class:"input-group row m-0 p-0"},n("div",{class:`input-group-prepend col-3 p-0 text-dark border-none`},n("label",{class:`input-group-text  border-light flex-grow-1 text-dark  `},this.defaultTexts.entries.Lcz_MobilePhone,"*")),n("select",{class:` form-control text-md  col-2 py-0 mobilePrefixSelect`,onInput:t=>this.handleInputChange("country_id",t.target.value),required:true},n("option",{value:null},"..."),this.countries.map((t=>n("option",{selected:this.guest.country_id.toString()===t.id.toString(),value:t.id},t.phone_prefix)))),n("input",{type:"text",required:true,value:this.guest.mobile,class:"form-control flex-fill mobilePrefixInput",onInput:t=>this.handleInputChange("mobile",t.target.value)}))),n("div",{class:"p-0 m-0"},n("label",{class:`check-container m-0 p-0`},n("input",{class:"m-0 p-0",type:"checkbox",name:"newsletter",checked:this.guest.subscribe_to_news_letter,onInput:t=>this.handleInputChange("subscribe_to_news_letter",t.target.checked)}),n("span",{class:"checkmark m-0 p-0"}),n("span",{class:"m-0 p-0  check-label"},this.defaultTexts.entries.Lcz_Newsletter))),n("hr",null),n("ir-button",{isLoading:this.isLoading,btn_disabled:this.isLoading,btn_styles:"d-flex align-items-center justify-content-center",text:this.defaultTexts.entries.Lcz_Save,onClickHanlder:this.editGuest.bind(this),color:"btn-primary"}))))]}};$u.style=Pu;const Hu=".sc-ir-icon-h{margin:0;padding:0}.icon-button.sc-ir-icon{all:unset;margin:0;padding:0}.icon-button.sc-ir-icon:hover{cursor:pointer}";const Uu=class{constructor(t){i(this,t);this.iconClickHandler=s(this,"iconClickHandler",7);this.icon="ft-check"}render(){return n("button",{class:"icon-button",onClick:()=>this.iconClickHandler.emit()},n("slot",{name:"icon"}))}};Uu.style=Hu;const Gu=class{constructor(t){i(this,t);this.textChange=s(this,"textChange",7);this.name=undefined;this.value=undefined;this.label="<label>";this.placeholder="<placeholder>";this.inputStyles="";this.required=undefined;this.LabelAvailable=true;this.readonly=false;this.type="text";this.submited=false;this.inputStyle=true;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="light";this.labelWidth=3;this.valid=undefined;this.initial=true}connectedCallback(){}disconnectedCallback(){}watchHandler(t){if(t!==""&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}handleInputChange(t){this.initial=false;if(this.required){this.valid=t.target.checkValidity();const e=t.target.value;this.textChange.emit(e)}else{this.textChange.emit(t.target.value)}}render(){let t="form-control";let e=n("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},n("label",{class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(!this.LabelAvailable){e=""}if(this.inputStyle===false){t=""}if(this.required&&!this.valid&&!this.initial){t=`${t} border-danger`}return n("div",{class:"form-group"},n("div",{class:"input-group row m-0"},e,n("input",{readOnly:this.readonly,type:this.type,class:`${t} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable?12-this.labelWidth:12} ${this.readonly&&"bg-white"} ${this.inputStyles}`,placeholder:this.placeholder,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required})))}static get watchers(){return{value:["watchHandler"],submited:["watchHandler2"]}}};const Fu=".sc-ir-interceptor-h{--viewport-padding:25px;position:fixed;top:0;right:0;display:flex;flex-direction:column;padding:var(--viewport-padding);gap:10px;max-width:60vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none}.toast-container.sc-ir-interceptor{background-color:white;border-radius:6px;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px 30px;display:grid;grid-template-areas:'title action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;overflow:hidden}.toast-container[data-state='open'].sc-ir-interceptor{animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards}.toast-container[data-state='closed'].sc-ir-interceptor{pointer-events:none;animation:fadeOut 150ms ease-in forwards}p.sc-ir-interceptor{margin:0;padding:0;grid-area:title;font-weight:500;color:#1c2024;font-size:15px}.x-mark-container.sc-ir-interceptor,.check-mark-container.sc-ir-interceptor{display:flex;align-items:center;justify-content:center;height:1.5rem;width:1.5rem;border-radius:50%}.x-mark-container.sc-ir-interceptor{background:red}.check-mark-container.sc-ir-interceptor{background:rgb(9, 153, 9)}.loadingScreenContainer.sc-ir-interceptor{position:fixed;top:0;left:0;height:100vh;width:100vw;z-index:100000;background:rgba(0, 0, 0, 0.2);pointer-events:all}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes slideIn{0%{transform:translateX(calc(100% + var(--viewport-padding)));opacity:0}100%{transform:translateX(0);opacity:1}}";const zu=class{constructor(t){i(this,t);this.toast=s(this,"toast",7);this.fetchingIrInterceptorDataStatus=s(this,"fetchingIrInterceptorDataStatus",7);this.isShown=false;this.isLoading=false;this.isUnassignedUnit=false;this.defaultMessage={loadingMessage:"Fetching Data",errorMessage:"Something Went Wrong"};this.handledEndpoints=["/Get_Exposed_Booking_Availability","/ReAllocate_Exposed_Room"]}componentWillLoad(){this.setupAxiosInterceptors()}setupAxiosInterceptors(){yh.interceptors.request.use(this.handleRequest.bind(this),this.handleError.bind(this));yh.interceptors.response.use(this.handleResponse.bind(this),this.handleError.bind(this))}extractEndpoint(t){return t.split("?")[0]}isHandledEndpoint(t){return this.handledEndpoints.includes(this.extractEndpoint(t))}handleRequest(t){if(this.isHandledEndpoint(t.url)){this.isLoading=true;this.fetchingIrInterceptorDataStatus.emit("pending");if(this.extractEndpoint(t.url)==="/ReAllocate_Exposed_Room"){this.defaultMessage.loadingMessage="Updating Event"}else if(this.extractEndpoint(t.url)==="/Get_Aggregated_UnAssigned_Rooms"){this.isUnassignedUnit=true}else{this.defaultMessage.loadingMessage="Fetching Data"}this.showToast()}return t}handleResponse(t){var e;this.isLoading=false;this.fetchingIrInterceptorDataStatus.emit("done");if((e=t.data.ExceptionMsg)===null||e===void 0?void 0:e.trim()){this.handleError(t.data.ExceptionMsg);throw new Error(t.data.ExceptionMsg)}else{this.hideToastAfterDelay(true)}return t}handleError(t){if(this.isUnassignedUnit){this.isUnassignedUnit=false}this.hideToastAfterDelay(true);this.toast.emit({type:"error",title:t,description:"",position:"top-right"});return Promise.reject(t)}showToast(){this.isShown=true}hideToastAfterDelay(t){if(this.isUnassignedUnit){this.isShown=false;this.isUnassignedUnit=false}else{const e=t?0:5e3;setTimeout((()=>{this.isShown=false}),e)}}renderMessage(){return this.defaultMessage.errorMessage}render(){return n(o,null,this.isLoading&&this.isShown&&n("div",{class:"loadingScreenContainer"},n("div",{class:"loadingContainer"},n("ir-loading-screen",null))))}};zu.style=Fu;const Vu="*.sc-ir-label{margin:0;padding:0}.sc-ir-label-h{display:flex;align-items:center;margin-bottom:5px}.icon.sc-ir-label{margin-left:3px;padding:0;margin-top:0;display:flex;align-items:center}p.sc-ir-label{margin:0 3px;padding:0}.icon-container.sc-ir-label{margin:0;padding:0}svg.sc-ir-label{margin:0;padding:0}";const Ku=class{constructor(t){i(this,t);this.editSidebar=s(this,"editSidebar",7);this.label=undefined;this.value=undefined;this.iconShown=false;this.imageSrc=undefined}openEditSidebar(){this.editSidebar.emit()}render(){if(!this.value){return null}return n(o,null,n("strong",null,this.label),this.imageSrc&&n("img",{src:this.imageSrc}),n("p",null,this.value),this.iconShown&&n("div",{class:"icon-container"},n("ir-icon",{class:"pointer icon",id:"pickup",onIconClickHandler:t=>{t.stopImmediatePropagation();t.stopPropagation();this.openEditSidebar()}},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"15",width:"15",viewBox:"0 0 512 550"},n("path",{fill:"#6b6f82",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"})))))}};Ku.style=Vu;const Wu=".sc-ir-loading-screen-h{display:fix;height:100vh;width:100vw;z-index:1000;top:0;left:0}.loader.sc-ir-loading-screen{width:1.25rem;height:1.25rem;border:2.5px solid #3f3f3f;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}.backdrop.sc-ir-loading-screen{height:100vh;width:100vw;background:rgba(0, 0, 0, 0.4);position:absolute;top:0;left:0}.loaderContainer.sc-ir-loading-screen{position:absolute;z-index:100001;padding:20px;top:50%;left:50%;transform:translate(-50%, -50%);background:white;display:flex;align-items:center;justify-content:center;gap:20px;border-radius:5px}@keyframes rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Ju=class{constructor(t){i(this,t);this.message=""}render(){return n(o,null,n("div",{class:"loaderContainer"},n("span",{class:"loader"})))}};Ju.style=Wu;const qu=".backdropModal.sc-ir-modal{background-color:rgba(0, 0, 0, 0.5);z-index:1000;position:fixed;top:0;left:0;height:100vh;width:100%;opacity:0;transition:opacity 0.3s ease-in-out;pointer-events:none}.backdropModal.active.sc-ir-modal{cursor:pointer;opacity:1 !important;pointer-events:all}.ir-modal[data-state='opened'].sc-ir-modal{opacity:1;visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}.ir-alert-content.sc-ir-modal{padding:10px;background:white;border-radius:5px}.modal.sc-ir-modal{z-index:1001 !important}.modal-dialog.sc-ir-modal{height:100vh;display:flex;align-items:center}.ir-alert-footer.sc-ir-modal{gap:10px}.ir-modal.sc-ir-modal{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1050;width:32rem;overflow:hidden;outline:0;opacity:0;transition:transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;visibility:hidden;pointer-events:none}.ir-modal.active.sc-ir-modal{opacity:1;transform:translate(-50%, 0);visibility:visible;pointer-events:all;transition:all 0.3s ease-in-out}";const Zu=class{constructor(t){i(this,t);this.confirmModal=s(this,"confirmModal",7);this.cancelModal=s(this,"cancelModal",7);this.modalTitle="Modal Title";this.modalBody="Modal Body";this.rightBtnActive=true;this.leftBtnActive=true;this.rightBtnText="Confirm";this.leftBtnText="Close";this.rightBtnColor="primary";this.leftBtnColor="secondary";this.btnPosition="right";this.iconAvailable=false;this.icon="";this.isOpen=false;this.item={}}async closeModal(){this.isOpen=false}async openModal(){this.isOpen=true}btnClickHandler(t){let e=t.target;let i=e.name;if(i===this.leftBtnText){this.cancelModal.emit();this.item={};this.closeModal()}else if(i===this.rightBtnText){this.confirmModal.emit(this.item);this.item={};this.closeModal()}}render(){return[n("div",{class:`backdropModal ${this.isOpen?"active":""}`,onClick:()=>{this.closeModal()}}),n("div",{"data-state":this.isOpen?"opened":"closed",class:`ir-modal`,tabindex:"-1"},n("div",{class:`ir-alert-content`},n("div",{class:`ir-alert-header align-items-center border-0 `},n("div",{class:"font-weight-bold d-flex align-items-center"},this.iconAvailable&&n("ir-icon",{class:"mr-1",icon:this.icon}),this.modalBody),n("div",{class:"font-weight-bold d-flex align-items-center font-size-large"},n("ir-icon",{icon:"ft-x",style:{cursor:"pointer"},onClick:()=>{this.closeModal();this.cancelModal.emit()}}))),n("div",{class:`ir-alert-footer border-0 d-flex justify-content-${this.btnPosition==="center"?"center":this.btnPosition==="left"?"start":"end"}`},this.leftBtnActive&&n("ir-button",{icon:"",btn_color:this.leftBtnColor,btn_block:true,text:this.leftBtnText,name:this.leftBtnText}),this.rightBtnActive&&n("ir-button",{icon:"",btn_color:this.rightBtnColor,btn_block:true,text:this.rightBtnText,name:this.rightBtnText}))))]}};Zu.style=qu;class Xu{async AddPayment(t,e){try{const i=JSON.parse(sessionStorage.getItem("token"));if(i!==null){const{data:s}=await yh.post(`/Do_Payment?Ticket=${i}`,{payment:Object.assign(Object.assign({},t),{book_nbr:e})});if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}return s.My_Result}}catch(t){console.log(t);throw new Error(t)}}async CancelPayment(t){try{const e=JSON.parse(sessionStorage.getItem("token"));if(e!==null){const{data:i}=await yh.post(`/Cancel_Payment?Ticket=${e}`,{id:t});if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}return i.My_Result}}catch(t){console.log(t);throw new Error(t)}}}const Qu=".sm-margin-right.sc-ir-payment-details{margin-right:5px !important;background:#000}.action_icons.sc-ir-payment-details{width:60px}.w-60.sc-ir-payment-details{width:100px;padding:0 5px}.payments-height.sc-ir-payment-details{height:30px}.payment_date.sc-ir-payment-details{width:100px}.iframeHeight.sc-ir-payment-details{height:max-content;height:22.5rem}.designation.sc-ir-payment-details{width:120px}";const tf=class{constructor(t){i(this,t);this.resetBookingData=s(this,"resetBookingData",7);this.paymentService=new Xu;this.bookingDetails=undefined;this.defaultTexts=undefined;this.newTableRow=false;this.collapsedPayment=false;this.collapsedGuarantee=false;this.flag=false;this.confirmModal=false;this.toBeDeletedItem=undefined;this.paymentDetailsUrl="";this.paymentExceptionMessage=""}async componentWillLoad(){try{this.initializeItemToBeAdded()}catch(t){if(!this.bookingDetails.is_direct&&this.bookingDetails.channel_booking_nbr){this.paymentExceptionMessage=t}}}initializeItemToBeAdded(){this.itemToBeAdded={id:-1,date:c().format("YYYY-MM-DD"),amount:0,currency:this.bookingDetails.currency,designation:"",reference:""}}async _handleSave(){try{await this.paymentService.AddPayment(this.itemToBeAdded,this.bookingDetails.booking_nbr);this.initializeItemToBeAdded();this.resetBookingData.emit(null)}catch(t){console.log(t)}}handlePaymentInputChange(t,e,i){if(t==="amount"){if(!isNaN(e)){this.itemToBeAdded=Object.assign(Object.assign({},this.itemToBeAdded),{[t]:e})}else{let e=i.target;let s=e.value;s=s.replace(/[^0-9]/g,"");e.value=s;if(s===""){this.itemToBeAdded=Object.assign(Object.assign({},this.itemToBeAdded),{[t]:0})}}}else{this.itemToBeAdded=Object.assign(Object.assign({},this.itemToBeAdded),{[t]:e})}}async handleConfirmModal(t){t.stopImmediatePropagation();t.stopPropagation();try{await this.paymentService.CancelPayment(this.toBeDeletedItem.id);const t=this.bookingDetails.financial.payments.filter((t=>t.id!==this.toBeDeletedItem.id));this.bookingDetails=Object.assign(Object.assign({},this.bookingDetails),{financial:Object.assign(Object.assign({},this.bookingDetails.financial),{payments:t})});this.confirmModal=!this.confirmModal;this.resetBookingData.emit(null);this.toBeDeletedItem=null}catch(t){console.log(t)}}handleDateChange(t){this.handlePaymentInputChange("date",t.detail.end.format("YYYY-MM-DD"))}_renderTableRow(t,e="normal"){return n(r,null,n("tr",null,n("td",{class:"border payments-height border-light border-bottom-0 text-center"},e==="normal"?n("span",{class:"sm-padding-left"},Tu(t.date)):n("ir-date-picker",{minDate:c().add(-2,"months").startOf("month").format("YYYY-MM-DD"),singleDatePicker:true,autoApply:true,onDateChanged:this.handleDateChange.bind(this)})),n("td",{class:"border payments-height border-light border-bottom-0 text-center "},e==="normal"?n("span",{class:"sm-padding-right"},"$",Number(t.amount).toFixed(2)):n("input",{class:"border-0  form-control py-0 m-0 w-100",value:this.itemToBeAdded.amount===0?"":Number(this.itemToBeAdded.amount).toFixed(2),onInput:t=>this.handlePaymentInputChange("amount",+t.target.value,t),type:"text"})),n("td",{class:"border payments-height border-light border-bottom-0 text-center"},e==="normal"?n("span",{class:"sm-padding-left"},t.designation):n("input",{class:"border-0 w-100 form-control py-0 m-0",onInput:t=>this.handlePaymentInputChange("designation",t.target.value),type:"text"})),n("td",{rowSpan:2,class:"border payments-height border-light border-bottom-0 text-center"},n("ir-icon",{icon:"ft-save color-ir-light-blue-hover h5 pointer sm-margin-right",onClick:e==="add"?()=>{this.newTableRow=false;this._handleSave()}:()=>{}},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512"},n("path",{fill:"#6b6f82",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"}))),n("span",null,"  "),n("ir-icon",{icon:"ft-trash-2 danger h5 pointer",onClick:e==="add"?()=>{this.newTableRow=false;this.initializeItemToBeAdded()}:()=>{this.toBeDeletedItem=t;const e=document.querySelector(".delete-record-modal");e.openModal()}},n("svg",{slot:"icon",fill:"#ff2441",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"14.25",viewBox:"0 0 448 512"},n("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"}))))),n("tr",null,n("td",{colSpan:3,class:"border border-light payments-height border-bottom-0 text-center"},e==="normal"?n("span",{class:"sm-padding-left "},t.reference):n("input",{class:"border-0 w-100  form-control py-0 m-0",onKeyPress:t=>{if(t.key==="Enter"){this.newTableRow=false;this._handleSave()}},onInput:t=>this.handlePaymentInputChange("reference",t.target.value),type:"text"}))))}bookingGuarantee(){var t,e,i,s,o,r,a,l,h,c,d,u,f,p,g,m,b,w,y,v,k,D,x,_,E,O,T,C;if(this.bookingDetails.is_direct&&!this.bookingDetails.guest.cci){return null}return n("div",null,n("div",{class:"d-flex align-items-center"},n("strong",{class:"mr-1"},this.defaultTexts.entries.Lcz_BookingGuarantee),n("ir-icon",{id:"drawer-icon","data-toggle":"collapse","data-target":`.guarrantee`,"aria-expanded":"false","aria-controls":"myCollapse",class:"sm-padding-right pointer",onClick:async()=>{if(!this.bookingDetails.is_direct&&this.bookingDetails.channel_booking_nbr){this.paymentDetailsUrl=await(new Kh).getPCICardInfoURL(this.bookingDetails.booking_nbr)}this.collapsedGuarantee=!this.collapsedGuarantee}},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"20",width:"22.5",viewBox:"0 0 576 512"},n("path",{fill:"#104064",d:"M512 80c8.8 0 16 7.2 16 16v32H48V96c0-8.8 7.2-16 16-16H512zm16 144V416c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V224H528zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm56 304c-13.3 0-24 10.7-24 24s10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H120zm128 0c-13.3 0-24 10.7-24 24s10.7 24 24 24H360c13.3 0 24-10.7 24-24s-10.7-24-24-24H248z"})))),n("div",{class:"collapse guarrantee "},this.bookingDetails.is_direct?[n("div",null,((e=(t=this.bookingDetails)===null||t===void 0?void 0:t.guest)===null||e===void 0?void 0:e.cci)&&"Card:"," ",n("span",null,((o=(s=(i=this.bookingDetails)===null||i===void 0?void 0:i.guest)===null||s===void 0?void 0:s.cci)===null||o===void 0?void 0:o.nbr)||"")," ",((l=(a=(r=this.bookingDetails)===null||r===void 0?void 0:r.guest)===null||a===void 0?void 0:a.cci)===null||l===void 0?void 0:l.expiry_month)&&"Expiry: ",n("span",null," ",((d=(c=(h=this.bookingDetails)===null||h===void 0?void 0:h.guest)===null||c===void 0?void 0:c.cci)===null||d===void 0?void 0:d.expiry_month)||""," ",((p=(f=(u=this.bookingDetails)===null||u===void 0?void 0:u.guest)===null||f===void 0?void 0:f.cci)===null||p===void 0?void 0:p.expiry_year)&&"/"+((b=(m=(g=this.bookingDetails)===null||g===void 0?void 0:g.guest)===null||m===void 0?void 0:m.cci)===null||b===void 0?void 0:b.expiry_year))),n("div",null,((y=(w=this.bookingDetails)===null||w===void 0?void 0:w.guest)===null||y===void 0?void 0:y.cci.holder_name)&&"Name:"," ",n("span",null,((D=(k=(v=this.bookingDetails)===null||v===void 0?void 0:v.guest)===null||k===void 0?void 0:k.cci)===null||D===void 0?void 0:D.holder_name)||"")," ",((E=(_=(x=this.bookingDetails)===null||x===void 0?void 0:x.guest)===null||_===void 0?void 0:_.cci)===null||E===void 0?void 0:E.cvc)&&"- CVC:"," ",n("span",null," ",((C=(T=(O=this.bookingDetails)===null||O===void 0?void 0:O.guest)===null||T===void 0?void 0:T.cci)===null||C===void 0?void 0:C.cvc)||""))]:this.paymentDetailsUrl?n("iframe",{src:this.paymentDetailsUrl,width:"100%",class:"iframeHeight",frameborder:"0",name:"payment"}):n("div",{class:"text-center"},this.paymentExceptionMessage)))}_renderDueDate(t){return n("tr",null,n("td",{class:"pr-1"},Tu(t.date)),n("td",{class:"pr-1"},Cu(t.amount,this.bookingDetails.currency.code)),n("td",{class:"pr-1"},t.description),n("td",{class:"collapse font-size-small roomName"},t.room))}render(){var t,e,i,s;if(!this.bookingDetails.financial){return null}return[n("div",{class:"card m-0"},n("div",{class:"p-1"},n("div",{class:"mb-2 h4"},this.defaultTexts.entries.Lcz_DueBalance,":"," ",n("span",{class:"danger font-weight-bold"},Cu(this.bookingDetails.financial.due_amount,this.bookingDetails.currency.code))),this.bookingGuarantee(),n("div",{class:"mt-2"},n("div",null,((e=(t=this.bookingDetails.financial)===null||t===void 0?void 0:t.due_dates)===null||e===void 0?void 0:e.length)>0&&n(r,null,n("div",{class:"d-flex align-items-center"},n("strong",{class:"mr-1"},this.defaultTexts.entries.Lcz_PaymentDueDates),n("ir-icon",{id:"drawer-icon","data-toggle":"collapse","data-target":`.roomName`,"aria-expanded":"false","aria-controls":"myCollapse",class:"sm-padding-right pointer",onClick:()=>{this.collapsedPayment=!this.collapsedPayment}},!this.collapsedPayment?n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"#104064",height:20,width:20,slot:"icon"},n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})):n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"#104064",height:20,width:20,slot:"icon"},n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})))),n("table",null,(i=this.bookingDetails.financial.due_dates)===null||i===void 0?void 0:i.map((t=>this._renderDueDate(t))))))),n("div",{class:"mt-2 d-flex  flex-column rounded payment-container"},n("strong",null,this.defaultTexts.entries.Lcz_Payments),n("table",{class:"mt-1"},n("thead",null,n("tr",null,n("th",{class:"border border-light border-bottom-0 text-center payment_date"},this.defaultTexts.entries.Lcz_Dates),n("th",{class:"border border-light border-bottom-0 text-center w-60"},this.defaultTexts.entries.Lcz_Amount),n("th",{class:"border border-light border-bottom-0 text-center designation"},this.defaultTexts.entries.Lcz_Designation),n("th",{class:"border border-light border-bottom-0 text-center action_icons"},n("span",{class:"sr-only"},"payment actions"),n("ir-icon",{id:"add-payment",icon:"font-weight-bold p-0",onClick:()=>{this.newTableRow=true}},n("svg",{height:14,width:14,slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},n("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"})))))),n("tbody",null,(s=this.bookingDetails.financial.payments)===null||s===void 0?void 0:s.map((t=>this._renderTableRow(t))),this.newTableRow?this._renderTableRow(null,"add"):null))))),n("ir-modal",{item:this.toBeDeletedItem,class:"delete-record-modal",modalTitle:this.defaultTexts.entries.Lcz_Confirmation,modalBody:"If deleted it will be permnantly lost!",iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:this.defaultTexts.entries.Lcz_Cancel,rightBtnText:this.defaultTexts.entries.Lcz_Delete,leftBtnColor:"secondary",rightBtnColor:"danger",onConfirmModal:this.handleConfirmModal.bind(this)})]}};tf.style=Qu;class ef{constructor(){this.token=JSON.parse(sessionStorage.getItem("token"))}async savePickup(t,e,i){try{const s=t.arrival_time.split(":");await yh.post(`/Do_Pickup?Ticket=${this.token}`,{booking_nbr:e,is_remove:i,currency:t.currency,date:t.arrival_date,details:t.flight_details,hour:s[0],minute:s[1],nbr_of_units:t.number_of_vehicles,selected_option:t.selected_option,total:+t.due_upon_booking})}catch(t){console.log(t)}}transformDefaultPickupData(t){return{arrival_date:t.date,arrival_time:t.hour+":"+t.minute,currency:t.currency,due_upon_booking:t.total.toFixed(2),flight_details:t.details,location:t.selected_option.location.id,number_of_vehicles:t.nbr_of_units,selected_option:t.selected_option,vehicle_type_code:t.selected_option.vehicle.code}}getAvailableLocations(t){let e=[];Gh.pickup_service.allowed_options.forEach((i=>{if(e.filter((t=>t.value===i.location.id)).length===0){e.push({text:t+" "+i.location.description,value:i.location.id})}}));return e}validateForm(t){if(t.arrival_time.split(":").length!==2){return{error:true,cause:"arrival_time"}}if(t.flight_details===""){return{error:true,cause:"flight_details"}}if(t.vehicle_type_code===""){return{error:true,cause:"vehicle_type_code"}}if(t.number_of_vehicles===0){return{error:true,cause:"number_of_vehicles"}}return{error:false}}getNumberOfVehicles(t,e){let i=Math.ceil(e/t);let s=i>1?i:1;let n=i>1?2:3;return Array.from({length:i+n},((t,e)=>s+e))}getPickUpPersonStatus(t){const e=Gh.pickup_service.allowed_pricing_models.find((e=>e.code===t));if(!e){return null}return e.description}updateDue(t){const e=this.getPickUpPersonStatus(t.code);if(!e){return}if(e==="Person"){return t.amount*t.numberOfPersons}else{return t.amount*t.number_of_vehicles}}}const sf=".sc-ir-pickup-h{display:block}.card-title.sc-ir-pickup{border-bottom:1px solid #e4e5ec;width:100%}";const nf=class{constructor(t){i(this,t);this.closeModal=s(this,"closeModal",7);this.resetBookingData=s(this,"resetBookingData",7);this.pickupService=new ef;this.defaultPickupData=undefined;this.numberOfPersons=0;this.bookingNumber=undefined;this.isLoading=false;this.allowedOptionsByLocation=[];this.pickupData={location:-1,flight_details:"",due_upon_booking:"",number_of_vehicles:1,vehicle_type_code:"",currency:undefined,arrival_time:"",arrival_date:c().format("YYYY-MM-DD"),selected_option:undefined};this.vehicleCapacity=[];this.cause=null}componentWillLoad(){if(this.defaultPickupData){const t=this.pickupService.transformDefaultPickupData(this.defaultPickupData);this.vehicleCapacity=this.pickupService.getNumberOfVehicles(t.selected_option.vehicle.capacity,this.numberOfPersons);this.allowedOptionsByLocation=Gh.pickup_service.allowed_options.filter((e=>e.location.id===t.location));this.pickupData=Object.assign({},t)}}handleLocationChange(t){t.stopImmediatePropagation();t.stopPropagation();const e=t.detail;if(e===""){this.updatePickupData("location",-1)}if(e!==""){this.allowedOptionsByLocation=Gh.pickup_service.allowed_options.filter((t=>t.location.id.toString()===e));let t=this.allowedOptionsByLocation[0];if(!t){return}this.vehicleCapacity=this.pickupService.getNumberOfVehicles(t.vehicle.capacity,this.numberOfPersons);this.pickupData=Object.assign(Object.assign({},this.pickupData),{location:e,selected_option:t,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:this.pickupService.updateDue({amount:t.amount,code:t.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:this.vehicleCapacity[0]}).toFixed(2),vehicle_type_code:t.vehicle.code,currency:t.currency});const i=this.el.querySelector("#pickup-time");if(!i){setTimeout((()=>{this.initializeInputMask()}),100)}}}initializeInputMask(){const t=this.el.querySelector("#pickup-time");if(t){Inputmask("Hh:mm",{placeholder:"HH:mm",definitions:{H:{validator:"[0-1]"},h:{validator:"[0-9]"},M:{validator:"[0-5]"},m:{validator:"[0-9]"}},insertMode:true,showMaskOnHover:false,inputmode:"numeric",alias:"datetime",oncomplete:()=>{this.updatePickupData("arrival_time",t.value)},oncleared:function(){this.updatePickupData("arrival_time","")},onincomplete:function(){this.updatePickupData("arrival_time",t.value)}}).mask(t)}}handleVehicleQuantityChange(t){if(t.detail===""){return}const e=+t.detail;this.pickupData=Object.assign(Object.assign({},this.pickupData),{number_of_vehicles:e,due_upon_booking:this.pickupService.updateDue({amount:this.pickupData.selected_option.amount,code:this.pickupData.selected_option.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:e}).toFixed(2)})}handleVehicleTypeChange(t){if(t.detail===""){this.pickupData=Object.assign(Object.assign({},this.pickupData),{due_upon_booking:"",vehicle_type_code:""});return}let e=Gh.pickup_service.allowed_options.find((e=>e.location.id===+this.pickupData.location&&e.vehicle.code===t.detail));if(!e){return}this.vehicleCapacity=[...this.pickupService.getNumberOfVehicles(e.vehicle.capacity,this.numberOfPersons)];this.pickupData=Object.assign(Object.assign({},this.pickupData),{selected_option:e,number_of_vehicles:this.vehicleCapacity[0],due_upon_booking:this.pickupService.updateDue({amount:e.amount,code:e.pricing_model.code,numberOfPersons:this.numberOfPersons,number_of_vehicles:this.vehicleCapacity[0]}).toFixed(2),vehicle_type_code:e.vehicle.code})}updatePickupData(t,e){this.pickupData=Object.assign(Object.assign({},this.pickupData),{[t]:e})}async savePickup(){try{this.isLoading=true;const t=this.pickupService.validateForm(this.pickupData);if(t.error){this.cause=t.cause;return}if(this.cause){this.cause=null}await this.pickupService.savePickup(this.pickupData,this.bookingNumber,this.defaultPickupData!==null&&this.pickupData.location===-1);this.resetBookingData.emit(null);this.closeModal.emit(null)}catch(t){console.error(t)}finally{this.isLoading=false}}render(){return n(o,{class:"p-0"},n("div",{class:"position-sticky mb-0 shadow-none p-0"},n("div",{class:"d-flex mt-2 align-items-center justify-content-between"},n("h3",{class:"card-title text-left pb-1 font-medium-2 px-1"},Vr.entries.Lcz_Pickup))),n("section",{class:"px-1"},n("ir-select",{selectedValue:this.pickupData.location,selectContainerStyle:"mb-1",onSelectChange:this.handleLocationChange.bind(this),firstOption:Vr.entries.Lcz_Pickup_NoThankYou,class:"m-0 mb-1",LabelAvailable:false,data:this.pickupService.getAvailableLocations(Vr.entries.Lcz_Pickup_YesFrom)}),this.pickupData.location>0&&n(r,null,n("div",{class:"d-flex"},n("div",{class:"form-group  mr-1"},n("div",{class:"input-group row m-0"},n("div",{class:`input-group-prepend col-5 p-0 text-dark border-0`},n("label",{class:`input-group-text  flex-grow-1 text-dark border-light `},Vr.entries.Lcz_ArrivalDate)),n("div",{class:"form-control form-control-md col-7 d-flex align-items-center pl-0"},n("ir-date-picker",{minDate:c().format("YYYY-MM-DD"),autoApply:true,format:"ddd, DD M YYYY",singleDatePicker:true,onDateChanged:t=>{this.updatePickupData("arrival_date",t.detail.start.format("YYYY-MM-DD"))}})))),n("div",{class:"form-group"},n("div",{class:"input-group  row m-0"},n("div",{class:`input-group-prepend col-4 col-sm-3 p-0 text-dark border-0`},n("label",{htmlFor:"pickup",class:`input-group-text flex-grow-1 text-dark border-light`},Vr.entries.Lcz_Time)),n("input",{value:this.pickupData.arrival_time,type:"text",id:"pickup-time",class:`form-control col-8 col-sm-4 ${this.cause==="arrival_time"&&"border-danger"}`})))),n("ir-input-text",{value:this.pickupData.flight_details,label:Vr.entries.Lcz_FlightDetails,onTextChange:t=>this.updatePickupData("flight_details",t.detail),placeholder:"",inputStyles:this.cause==="flight_details"?"border-danger":""}),n("ir-select",{selectContainerStyle:"mb-1",selectStyles:this.cause==="vehicle_type_code"?"border-danger":"",onSelectChange:this.handleVehicleTypeChange.bind(this),firstOption:Vr.entries.Lcz_Select,selectedValue:this.pickupData.vehicle_type_code,class:"m-0",LabelAvailable:false,data:this.allowedOptionsByLocation.map((t=>({text:t.vehicle.description,value:t.vehicle.code})))}),n("div",{class:"d-flex flex-column flex-md-row"},n("ir-select",{labelBorder:"light",selectContainerStyle:"mb-1",onSelectChange:this.handleVehicleQuantityChange.bind(this),selectStyles:this.cause==="number_of_vehicles"?"border-danger":"",selectedValue:this.pickupData.number_of_vehicles,labelWidth:7,class:"m-0  mb-md-0 mr-md-1 flex-fill",label:Vr.entries.Lcz_NbrOfVehicles,data:this.vehicleCapacity.map((t=>({text:t,value:t})))}),n("ir-input-text",{labelBorder:"light",readonly:true,value:this.pickupData.due_upon_booking,labelWidth:7,label:`${Vr.entries.Lcz_DueUponBooking}  ${this.pickupData.currency.symbol}`,placeholder:"",class:""}))),n("div",{class:"d-flex flex-column flex-sm-row mt-3"},n("ir-button",{onClick:()=>this.closeModal.emit(null),btn_styles:"justify-content-center",class:`mb-1 mb-sm-0 flex-fill  ${this.defaultPickupData||this.pickupData.location!==-1?"mr-sm-1":""}`,icon:"",text:Vr.entries.Lcz_Cancel,btn_color:"secondary"}),(this.defaultPickupData||this.pickupData.location!==-1)&&n("ir-button",{btn_styles:"justify-content-center align-items-center",class:"m-0 flex-fill text-center",icon:"",isLoading:this.isLoading,text:Vr.entries.Lcz_Save,btn_color:"primary",onClick:this.savePickup.bind(this)}))))}get el(){return a(this)}};nf.style=sf;const of=".light-blue-bg.sc-ir-room{background:#acecff;padding:0rem 0.1rem}";const rf=class{constructor(t){i(this,t);this.deleteFinished=s(this,"deleteFinished",7);this.pressCheckIn=s(this,"pressCheckIn",7);this.pressCheckOut=s(this,"pressCheckOut",7);this.editInitiated=s(this,"editInitiated",7);this.bookingEvent=undefined;this.bookingIndex=undefined;this.mealCodeName=undefined;this.myRoomTypeFoodCat=undefined;this.currency="USD";this.legendData=undefined;this.roomsInfo=undefined;this.collapsed=false;this.defaultTexts=undefined;this.ticket=undefined;this.hasRoomEdit=false;this.hasRoomDelete=false;this.hasRoomAdd=false;this.hasCheckIn=false;this.hasCheckOut=false;this.item=undefined;this.isLoading=false;this.isModelOpen=false}componentWillLoad(){if(this.bookingEvent){this.item=this.bookingEvent.rooms[this.bookingIndex]}}handleBookingEventChange(){this.item=this.bookingEvent.rooms[this.bookingIndex]}componentDidLoad(){this.modal=this.element.querySelector("ir-modal")}handleClick(t){let e=t.target;if(e.id=="checkin"){this.pressCheckIn.emit(this.item)}else if(e.id=="checkout"){this.pressCheckOut.emit(this.item)}}getDateStr(t,e="default"){return t.getDate()+" "+t.toLocaleString(e,{month:"short"})+" "+t.getFullYear()}handleEditClick(){this.editInitiated.emit({event_type:"EDIT_BOOKING",ID:this.item["assigned_units_pool"],NAME:_h(this.item.guest.first_name,this.item.guest.last_name),EMAIL:this.bookingEvent.guest.email,PHONE:this.bookingEvent.guest.mobile,REFERENCE_TYPE:"",FROM_DATE:this.bookingEvent.from_date,TO_DATE:this.bookingEvent.to_date,TITLE:`${this.defaultTexts.entries.Lcz_EditBookingFor} ${this.item.roomtype.name} ${this.item.unit.name}`,defaultDateRange:{dateDifference:this.item.days.length,fromDate:new Date(this.item.from_date+"T00:00:00"),fromDateStr:this.getDateStr(new Date(this.item.from_date+"T00:00:00")),toDate:new Date(this.item.to_date+"T00:00:00"),toDateStr:this.getDateStr(new Date(this.item.to_date+"T00:00:00")),message:""},bed_preference:this.item.bed_preference,adult_child_offering:this.item.rateplan.selected_variation.adult_child_offering,ADULTS_COUNT:this.item.rateplan.selected_variation.adult_nbr,ARRIVAL:this.bookingEvent.arrival,ARRIVAL_TIME:this.bookingEvent.arrival.description,BOOKING_NUMBER:this.bookingEvent.booking_nbr,cancelation:this.item.rateplan.cancelation,channel_booking_nbr:this.bookingEvent.channel_booking_nbr,CHILDREN_COUNT:this.item.rateplan.selected_variation.child_nbr,COUNTRY:this.bookingEvent.guest.country_id,ENTRY_DATE:this.bookingEvent.from_date,FROM_DATE_STR:this.bookingEvent.format.from_date,guarantee:this.item.rateplan.guarantee,GUEST:this.bookingEvent.guest,IDENTIFIER:this.item.identifier,is_direct:this.bookingEvent.is_direct,IS_EDITABLE:this.bookingEvent.is_editable,NO_OF_DAYS:this.item.days.length,NOTES:this.bookingEvent.remark,origin:this.bookingEvent.origin,POOL:this.item["assigned_units_pool"],PR_ID:this.item.unit.id,RATE:this.item.total,RATE_PLAN:this.item.rateplan.name,RATE_PLAN_ID:this.item.rateplan.id,RATE_TYPE:this.item.roomtype.id,ROOMS:this.bookingEvent.rooms,SOURCE:this.bookingEvent.source,SPLIT_BOOKING:false,STATUS:"IN-HOUSE",TO_DATE_STR:this.bookingEvent.format.to_date,TOTAL_PRICE:this.bookingEvent.total,legendData:this.legendData,roomsInfo:this.roomsInfo,roomName:this.item.unit.name})}handleDeleteClick(){this.modal.openModal()}async deleteRoom(){try{this.isLoading=true;let t=[...this.bookingEvent.rooms];t=t.filter((t=>t.identifier!==this.item.identifier));const e={assign_units:true,check_in:true,is_pms:true,is_direct:true,booking:{booking_nbr:this.bookingEvent.booking_nbr,from_date:this.bookingEvent.from_date,to_date:this.bookingEvent.to_date,remark:this.bookingEvent.remark,property:this.bookingEvent.property,source:this.bookingEvent.source,currency:this.bookingEvent.currency,arrival:this.bookingEvent.arrival,guest:this.bookingEvent.guest,rooms:t}};console.log("body:",e);const{data:i}=await yh.post(`/DoReservation?Ticket=${this.ticket}`,e);if(i.ExceptionMsg!==""){throw new Error(i.ExceptionMsg)}this.deleteFinished.emit(this.item.identifier)}catch(t){}finally{this.isLoading=false}}render(){return n("div",{class:"p-1 d-flex m-0"},n("ir-icon",{id:"drawer-icon","data-toggle":"collapse","data-target":`#roomCollapse-${this.item.identifier.split(" ").join("")}`,"aria-expanded":"false","aria-controls":"collapseExample",class:"pointer mr-1",onClick:()=>{this.collapsed=!this.collapsed}},!this.collapsed?n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"#104064",height:20,width:20,slot:"icon"},n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})):n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"#104064",height:20,width:20,slot:"icon"},n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))),n("div",{class:"w-100 m-0"},n("div",{class:"d-flex align-items-end justify-content-between"},n("div",null,n("strong",null,this.myRoomTypeFoodCat||""," ")," ",this.mealCodeName," ",this.item.rateplan.is_non_refundable&&` - ${this.defaultTexts.entries.Lcz_NonRefundable}`," "),n("div",{class:"d-flex"},n("p",{class:"mr-1 p-0 m-0 "},Cu(this.item.total,this.currency)),this.hasRoomEdit&&n("ir-icon",{id:`roomEdit-${this.item.identifier}`,class:"pointer mr-1",onClick:this.handleEditClick.bind(this)},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512"},n("path",{fill:"#6b6f82",d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"}))),this.hasRoomDelete&&n("ir-icon",{onClick:this.handleDeleteClick.bind(this),id:`roomDelete-${this.item.identifier}`,class:"pointer mr-1"},n("svg",{slot:"icon",fill:"#ff2441",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"14.25",viewBox:"0 0 448 512"},n("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"}))))),n("div",null,n("span",{class:"mr-1"},`${this.item.guest.first_name||""} ${this.item.guest.last_name||""}`),this.item.rateplan.selected_variation.adult_nbr>0&&n("span",null," ",this.item.rateplan.selected_variation.adult_child_offering)),n("div",{class:"d-flex align-items-center"},n("span",{class:" mr-1"},Tu(this.item.from_date)," - ",Tu(this.item.to_date)),this.item.unit&&n("span",{class:"light-blue-bg mr-2 "},this.item.unit.name),this.hasCheckIn&&n("ir-button",{id:"checkin",icon:"",class:"mr-1",btn_color:"info",size:"sm",text:"Check in"}),this.hasCheckOut&&n("ir-button",{id:"checkout",icon:"",btn_color:"info",size:"sm",text:"Check out"})),n("div",{class:"collapse",id:`roomCollapse-${this.item.identifier.split(" ").join("")}`},n("div",{class:"d-flex"},n("div",{class:" sm-padding-top"},n("strong",{class:"sm-padding-right"},`${this.defaultTexts.entries.Lcz_Breakdown}:`)),n("div",{class:"flex-fill"},n("table",null,this.item.days.length>0&&this.item.days.map((t=>n("tr",null,n("td",{class:"pr-2"},Su(t.date))," ",n("td",null,Cu(t.amount,this.currency)))))))),n("div",{innerHTML:this.item.rateplan.cancelation||""}),n("ir-label",{label:`${this.defaultTexts.entries.Lcz_MealPlan}:`,value:this.mealCodeName}))),n("ir-modal",{onConfirmModal:this.deleteRoom.bind(this),iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:this.defaultTexts.entries.Lcz_Cancel,rightBtnText:this.defaultTexts.entries.Lcz_Delete,leftBtnColor:"secondary",rightBtnColor:"danger",modalTitle:this.defaultTexts.entries.Lcz_Confirmation,modalBody:`${this.defaultTexts.entries["Lcz_AreYouSureDoYouWantToRemove "]} ${this.item.roomtype.name} ${this.item.unit&&this.item.unit.name} ${this.defaultTexts.entries.Lcz_FromThisBooking}`}))}get element(){return a(this)}static get watchers(){return{bookingEvent:["handleBookingEventChange"]}}};rf.style=of;const af=".sc-ir-room-nights-h{display:block;box-sizing:border-box;margin:0}.close-icon.sc-ir-room-nights{position:absolute;top:18px;right:33px;outline:none}.close.sc-ir-room-nights{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:0.5;padding:0;background-color:transparent;border:0;appearance:none}.card.sc-ir-room-nights{top:0;z-index:1000}.card-title.sc-ir-room-nights{border-bottom:1px solid #e4e5ec;width:100%}.irfontgreen.sc-ir-room-nights{color:#0e930e}.currency.sc-ir-room-nights{display:block;position:absolute;margin:0;padding:0;height:auto;left:10px}.rate-input.sc-ir-room-nights{font-size:14px;line-height:0;padding:0;height:0}.rate-input-container.sc-ir-room-nights{display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;flex:1}";const lf=class{constructor(t){i(this,t);this.closeRoomNightsDialog=s(this,"closeRoomNightsDialog",7);this.bookingService=new Ah;this.bookingNumber=undefined;this.baseUrl=undefined;this.propertyId=undefined;this.language=undefined;this.identifier=undefined;this.toDate=undefined;this.fromDate=undefined;this.pool=undefined;this.ticket=undefined;this.bookingEvent=undefined;this.selectedRoom=undefined;this.rates=[];this.isLoading=false;this.initialLoading=false;this.inventory=null;this.isEndDateBeforeFromDate=false;this.defaultTotalNights=0}componentWillLoad(){if(this.baseUrl){yh.defaults.baseURL=this.baseUrl}this.init()}isButtonDisabled(){return this.isLoading||this.rates.some((t=>t.amount===-1))||this.inventory===0||this.inventory===null}async init(){var t;try{this.bookingEvent=await this.bookingService.getExposedBooking(this.bookingNumber,this.language);if(this.bookingEvent){const e=this.bookingEvent.rooms.filter((t=>t.identifier===this.identifier));this.selectedRoom=e[0];const i=(t=this.selectedRoom)===null||t===void 0?void 0:t.days[this.selectedRoom.days.length-1];if(c(this.toDate).add(-1,"days").isSame(c(i.date))){const t=await this.fetchBookingAvailability(this.fromDate,this.selectedRoom.days[0].date,this.selectedRoom.rateplan.id,this.selectedRoom.rateplan.selected_variation.adult_child_offering);const e=Yr(this.selectedRoom.days[0].date,this.fromDate);this.isEndDateBeforeFromDate=true;this.rates=[...e.map((e=>({amount:t,date:e}))),...this.selectedRoom.days]}else{const t=await this.fetchBookingAvailability(i.date,c(this.toDate,"YYYY-MM-DD").add(-1,"days").format("YYYY-MM-DD"),this.selectedRoom.rateplan.id,this.selectedRoom.rateplan.selected_variation.adult_child_offering);const e=Yr(i.date,this.toDate);this.rates=[...this.selectedRoom.days,...e.map((e=>({amount:t,date:e})))]}this.defaultTotalNights=this.rates.length-this.selectedRoom.days.length}}catch(t){console.log(t)}}handleInput(t,e){let i=t.target;let s=i.value;let n=[...this.rates];s=s.replace(/[^0-9.]/g,"");if(s===""){n[e].amount=-1}else{const t=s.split(".");if(t.length>2){s=s.substring(0,s.length-1);i.value=s}else if(t.length===2&&t[1].length>2){s=`${t[0]}.${t[1].substring(0,2)}`;i.value=s}if(!isNaN(Number(s))){n[e].amount=Number(s)}}this.rates=n;console.log(this.rates)}async fetchBookingAvailability(t,e,i,s){try{this.initialLoading=true;const n=await this.bookingService.getBookingAvailability(t,e,this.propertyId,{adult:this.selectedRoom.rateplan.selected_variation.adult_nbr,child:this.selectedRoom.rateplan.selected_variation.child_nbr},this.language,[this.selectedRoom.roomtype.id],this.bookingEvent.currency);this.inventory=n.roomtypes[0].inventory;const o=n.roomtypes[0].rateplans.find((t=>t.id===i));const{amount:r}=o.variations.find((t=>t.adult_child_offering===s));return r}catch(t){console.log(t)}finally{this.initialLoading=false}}renderInputField(t,e,i){return n("fieldset",{class:"col-2 ml-1 position-relative has-icon-left m-0 p-0 rate-input-container"},n("input",{disabled:this.inventory===0||this.inventory===null,type:"text",class:"form-control input-sm rate-input py-0 m-0 rateInputBorder",id:l(),value:i.amount>0?i.amount:"",placeholder:Vr.entries.Lcz_Rate||"Rate",onInput:e=>this.handleInput(e,t)}),n("span",{class:"currency"},e))}renderReadOnlyField(t,e){return n("p",{class:"col-9 ml-1 m-0 p-0"},`${t}${Number(e.amount).toFixed(2)}`)}renderRateFields(t,e,i){if(this.isEndDateBeforeFromDate){if(t<this.defaultTotalNights){return this.renderInputField(t,e,i)}else{return this.renderReadOnlyField(e,i)}}else{return t<this.selectedRoom.days.length?this.renderReadOnlyField(e,i):this.renderInputField(t,e,i)}}renderDates(){var t;const e=Or(this.bookingEvent.currency.code);return n("div",{class:"mt-2 m-0"},(t=this.rates)===null||t===void 0?void 0:t.map(((t,i)=>n("div",{class:"row m-0 mt-1 align-items-center"},n("p",{class:"col-2 m-0 p-0"},Rr(t.date)),this.renderRateFields(i,e,t)))))}async handleRoomConfirmation(){try{this.isLoading=true;let t=[...this.bookingEvent.rooms];let e=t.findIndex((t=>t.identifier===this.identifier));if(e===-1){throw new Error("Invalid Pool")}t[e]=Object.assign(Object.assign({},t[e]),{days:this.rates,to_date:this.toDate,from_date:this.fromDate});const i={assign_units:true,check_in:true,is_pms:true,is_direct:true,booking:{booking_nbr:this.bookingNumber,from_date:this.fromDate,to_date:this.toDate,remark:this.bookingEvent.remark,property:this.bookingEvent.property,source:this.bookingEvent.source,currency:this.bookingEvent.currency,arrival:this.bookingEvent.arrival,guest:this.bookingEvent.guest,rooms:t}};const{data:s}=await yh.post(`/DoReservation?Ticket=${this.ticket}`,i);if(s.ExceptionMsg!==""){throw new Error(s.ExceptionMsg)}this.closeRoomNightsDialog.emit({type:"confirm",pool:this.pool})}catch(t){}finally{this.isLoading=false}}render(){var t,e,i;if(!this.bookingEvent){return n("p",null,Vr.entries.Lcz_Loading)}return n(o,null,n("div",{class:"card position-sticky mb-0 shadow-none p-0 "},n("div",{class:"d-flex mt-2 align-items-center justify-content-between "},n("h3",{class:"card-title text-left pb-1 font-medium-2 px-2"},Vr.entries.Lcz_AddingRoomNightsTo," ",(e=(t=this.selectedRoom)===null||t===void 0?void 0:t.roomtype)===null||e===void 0?void 0:e.name," ",((i=this.selectedRoom)===null||i===void 0?void 0:i.unit).name),n("button",{type:"button",class:"close close-icon",onClick:()=>this.closeRoomNightsDialog.emit({type:"cancel",pool:this.pool})},n("ir-icon",{icon:"ft-x",class:"m-0"})))),n("section",{class:"text-left px-2"},n("p",{class:"font-medium-1"},`${Vr.entries.Lcz_Booking}#`," ",this.bookingNumber),n("p",{class:"font-weight-bold font-medium-1"},`${Ir(this.fromDate,"YYYY-MM-DD")} - ${Ir(this.toDate,"YYYY-MM-DD")}`),this.initialLoading?n("p",{class:"mt-2 text-secondary"},Vr.entries["Lcz_CheckingRoomAvailability "]):n(r,null,n("p",{class:"font-medium-1 mb-0"},`${this.selectedRoom.rateplan.name}`," ",this.selectedRoom.rateplan.is_non_refundable&&n("span",{class:"irfontgreen"},Vr.entries.Lcz_NonRefundable)),(this.inventory===0||this.inventory===null)&&n("p",{class:"font-medium-1 text danger"},Vr.entries.Lcz_NoAvailabilityForAdditionalNights),this.selectedRoom.rateplan.custom_text&&n("p",{class:"text-secondary mt-0"},this.selectedRoom.rateplan.custom_text),this.renderDates())),n("section",{class:"d-flex align-items-center mt-2 px-2"},n("button",{disabled:this.isLoading,type:"button",class:"btn btn-secondary full-width",onClick:()=>this.closeRoomNightsDialog.emit({type:"cancel",pool:this.pool})},Vr===null||Vr===void 0?void 0:Vr.entries.Lcz_Cancel),this.inventory>0&&this.inventory!==null&&n("button",{disabled:this.isButtonDisabled(),type:"button",class:"btn btn-primary ml-2 full-width",onClick:this.handleRoomConfirmation.bind(this)},this.isLoading&&n("i",{class:"la la-circle-o-notch spinner mx-1"}),Vr===null||Vr===void 0?void 0:Vr.entries.Lcz_Confirm)))}};lf.style=af;const hf=class{constructor(t){i(this,t);this.selectChange=s(this,"selectChange",7);this.count=0;this.name=undefined;this.data=undefined;this.label="<label>";this.selectStyles=undefined;this.selectContainerStyle=undefined;this.selectedValue=null;this.required=undefined;this.LabelAvailable=true;this.firstOption="Select";this.selectStyle=true;this.submited=false;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground=null;this.labelColor="dark";this.labelBorder="light";this.labelWidth=3;this.initial=true;this.valid=false}watchHandler(t){if(t!==null&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}componentwillload(){}disconnectedCallback(){}handleSelectChange(t){if(this.required){this.initial=false;this.valid=t.target.checkValidity();this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}else{this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}}render(){let t="form-control";let e=n("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor}`},n("label",{class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} ${this.labelBackground?"bg-"+this.labelBackground:""} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(this.selectStyle===false){t=""}if(this.required&&!this.valid&&!this.initial){t=`${t} border-danger`}if(!this.LabelAvailable){e=""}return n("div",{class:`form-group m-0 ${this.selectContainerStyle}`},n("div",{class:"input-group row m-0"},e,n("select",{class:`${this.selectStyles} ${t} form-control-${this.size} text-${this.textSize} col-${this.LabelAvailable?12-this.labelWidth:12}`,onInput:this.handleSelectChange.bind(this),required:this.required},n("option",{value:""},this.firstOption),this.data.map((t=>{if(this.selectedValue===t.value){return n("option",{selected:true,value:t.value},t.text)}else{return n("option",{value:t.value},t.text)}})))))}static get watchers(){return{selectedValue:["watchHandler"],submited:["watchHandler2"]}}};const cf=".backdrop{position:fixed;top:0;left:0;width:100%;height:100vh;cursor:pointer;background:rgba(0, 0, 0, 0.5);z-index:99;transition:all 0.5s;opacity:0;pointer-events:none;transition:all 0.5s}.backdrop.active{opacity:1;pointer-events:all}.sidebar-right{position:fixed;top:0;right:-100%;bottom:0;width:var(--sidebar-width, 40rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:100;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding:0.5rem}.sidebar-right.active{right:0;overflow-y:auto}.sidebar-left{position:fixed;top:0;left:-100%;bottom:0;width:var(--sidebar-width, 30rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:200;overflow-y:hidden;color:var(--sidebar-color, #000);background:var(--sidebar-backgound, #fff);padding:0.5rem}.sidebar-left.active{left:0;overflow-y:scroll}.close{position:absolute;top:0.5rem;right:1rem;width:1rem;height:1rem;cursor:pointer}";const df=class{constructor(t){i(this,t);this.irSidebarToggle=s(this,"irSidebarToggle",7);this.name=undefined;this.side="right";this.showCloseButton=true;this.open=false;this.sidebarStyles=undefined}applyStyles(){for(const t in this.sidebarStyles){if(this.sidebarStyles.hasOwnProperty(t)){this.sidebarRef.style[t]=this.sidebarStyles[t]}}}handleSidebarStylesChange(){this.applyStyles()}componentWillLoad(){this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidLoad(){this.applyStyles();document.addEventListener("keydown",this.handleKeyDown)}handleKeyDown(t){if(t.key==="Escape"){return this.toggleSidebar()}else{return}}disconnectedCallback(){document.removeEventListener("keydown",this.handleKeyDown)}async toggleSidebar(){this.irSidebarToggle.emit(this.open)}render(){let t="";if(this.open){t="active"}else{t=""}return[n("div",{class:`backdrop ${t}`,onClick:()=>{this.toggleSidebar()}}),n("div",{ref:t=>this.sidebarRef=t,class:`sidebar-${this.side} ${t}`},this.showCloseButton&&n("ir-icon",{class:"close",onIconClickHandler:()=>{this.toggleSidebar()}},n("svg",{slot:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",height:20,width:20},n("path",{fill:"#6b6f82",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}))),n("slot",null))]}static get watchers(){return{sidebarStyles:["handleSidebarStylesChange"]}}};df.style=cf;const uf="button.sc-ir-toast,p.sc-ir-toast,h3.sc-ir-toast,div.sc-ir-toast{all:unset}.sc-ir-toast-h{--rd-viewport-padding:25px;--rd-success:#2b9a66;position:fixed;bottom:0;right:0;display:flex;flex-direction:column;padding:var(--rd-viewport-padding);gap:10px;max-width:100vw;margin:0;list-style:none;z-index:2147483647;outline:none;pointer-events:none;-webkit-user-select:none;user-select:none}@media (prefers-color-scheme: dark){.sc-ir-toast-h{--rd-success:#33b074}}p.sc-ir-toast{color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3}h1.sc-ir-toast,h2.sc-ir-toast,h3.sc-ir-toast,h4.sc-ir-toast,h5.sc-ir-toast,h6.sc-ir-toast{font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}[position='top-left'].sc-ir-toast-h{top:0;left:0}[position='top-right'].sc-ir-toast-h{top:0;right:0}[position='bottom-left'].sc-ir-toast-h{bottom:0;left:0}[position='bottom-right'].sc-ir-toast-h{bottom:0;right:0}.icon-container.sc-ir-toast{height:25px;width:25px;border-radius:25px;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.icon-container.sc-ir-toast>svg.sc-ir-toast{margin:0;color:white;stroke-width:5px}.success.sc-ir-toast{background-color:var(--rd-success)}.error.sc-ir-toast{background-color:red}.ToastRoot.sc-ir-toast{background-color:hsl(0, 0%, 100%);border-radius:0.5rem;box-shadow:hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;padding:15px;display:grid;grid-template-areas:'title action' 'description action';grid-template-columns:auto max-content;column-gap:15px;align-items:center;pointer-events:none;opacity:0;border:1px solid hsl(214.3, 31.8%, 91.4%);position:relative}.ToastRoot[data-state='open'].sc-ir-toast{pointer-events:all;animation:slideIn 150ms cubic-bezier(0.16, 1, 0.3, 1)}.ToastRoot[data-state='closed'].sc-ir-toast{pointer-events:none;animation:hide 100ms ease-in}@-webkit-keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}@keyframes slideIn{from{transform:translateX(var(--rd-offset-width))}to{transform:translateX(0)}}.ToastTitle.sc-ir-toast{grid-area:title;font-weight:500;color:hsl(222.2, 84%, 4.9%);font-size:15px}.ToastDescription.sc-ir-toast{grid-area:description;margin:0;margin-top:5px;color:hsla(222.2, 84%, 4.9%, 0.8);font-size:13px;line-height:1.3;overflow:hidden;text-overflow:ellipsis}.ToastAction.sc-ir-toast{grid-area:action}";const ff=class{constructor(t){i(this,t);this.duration=5e3;this.toastBody={description:"",type:"success"};this.position="bottom-left";this.isVisible=false;this.isFocused=false}applyStyles(t){for(const e in t){if(t.hasOwnProperty(e)){this.toastRef.style[e]=t[e]}}}onToast(t){t.stopImmediatePropagation();t.stopPropagation();const{duration:e,position:i,style:s}=t.detail;this.toastBody=t.detail;if(i){this.position=i}if(e){this.duration=e}if(s){this.applyStyles(s)}this.showToast();this.setToastTimeout()}setToastTimeout(){this.showToastTimeOut=setTimeout((()=>{this.hideToast()}),this.duration)}clearToastTimeout(){if(this.showToastTimeOut){clearTimeout(this.showToastTimeOut);this.showToastTimeOut=undefined}}async hideToast(){this.clearToastTimeout();this.toastRef.setAttribute("data-state","close");this.toastRef.style.opacity="0";this.isVisible=false}async showToast(){this.clearToastTimeout();this.toastRef.style.opacity="1";this.toastRef.setAttribute("data-state","open");this.isVisible=true}disconnectedCallback(){this.clearToastTimeout()}renderIcon(){switch(this.toastBody.type){case"success":return n("div",{class:"icon-container success"},n("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})));case"error":return n("div",{class:"icon-container error"},n("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})));default:return null}}render(){return n(o,null,n("section",{"aria-live":"off",role:"status","aria-atomic":"true",ref:t=>this.toastRef=t,class:`ToastRoot`},this.isVisible&&n(r,null,this.toastBody.type==="custom"?this.toastBody.body:n(r,null,this.toastBody.title!==""&&n("h3",{class:"ToastTitle"},this.toastBody.title),this.toastBody.description!==""&&n("p",{class:"ToastDescription"},this.toastBody.description),this.renderIcon()))))}get element(){return a(this)}};ff.style=uf;const pf=".sc-ir-tooltip-h{position:relative}";const gf=class{constructor(t){i(this,t);this.message=undefined;this.open=undefined}toggleOpen(t){if(this.tooltipTimeout){clearTimeout(this.tooltipTimeout)}if(t){this.tooltipTimeout=setTimeout((()=>{this.open=true}),300)}else{this.open=false}}render(){return n(o,null,n("span",{onMouseEnter:()=>this.toggleOpen(true),onMouseLeave:()=>this.toggleOpen(false)},n("i",{class:"ml-1 ft-info","data-toggle":"tooltip","data-placement":"top","data-original-title":"Info popup"})),this.open&&n("div",{class:"tooltip bottom show position-absolute",role:"tooltip"},n("div",{class:"tooltip-arrow"}),n("div",{class:"tooltip-inner fit"},n("i",{class:"tooltip-top-demo"}),n("span",{innerHTML:this.message}))))}};gf.style=pf;export{Jr as igl_application_info,Yh as igl_block_dates_view,Ph as igl_book_property,Hh as igl_book_property_footer,Vh as igl_book_property_header,ec as igl_booking_event,sc as igl_booking_event_hover,oc as igl_booking_overview_page,ac as igl_booking_room_rate_plan,hc as igl_booking_rooms,pc as igl_cal_body,mc as igl_cal_footer,yc as igl_cal_header,kc as igl_date_range,xc as igl_legends,Ec as igl_pagetwo,Tc as igl_property_booked_by,Sc as igl_tba_booking_view,Mc as igl_tba_category_view,Ac as igl_to_be_assigned,_u as igloo_calendar,Ou as ir_autocomplete,Iu as ir_booking_details,Ru as ir_button,Bu as ir_common,ju as ir_date_picker,$u as ir_guest_info,Uu as ir_icon,Gu as ir_input_text,zu as ir_interceptor,Ku as ir_label,Ju as ir_loading_screen,Zu as ir_modal,tf as ir_payment_details,nf as ir_pickup,rf as ir_room,lf as ir_room_nights,hf as ir_select,df as ir_sidebar,ff as ir_toast,gf as ir_tooltip};
//# sourceMappingURL=p-754c0240.entry.js.map