{"version":3,"names":["irChannelCss","IrChannel","this","roomService","RoomService","componentWillLoad","baseurl","axios","defaults","baseURL","ticket","initializeApp","languageTexts","Promise","all","fetchData","propertyid","language","getExposedChannels","fetchLanguage","console","log","locales","entries","direction","error","ticketChanged","sessionStorage","setItem","JSON","stringify","render","h","Host","class","text","size","onClickHanlder","channel_status","scope","_a","channels_data","connected_channels","map","channel","key","id","title","name","type","checked","is_active","xmlns","viewBox","height","width","fill","d","showCloseButton","onIrSidebarToggle","e","stopImmediatePropagation","stopPropagation","open","onCloseSideBar"],"sources":["src/components/ir-channel/ir-channel.css?tag=ir-channel&encapsulation=scoped","src/components/ir-channel/ir-channel.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n.dropdown-toggle {\r\n  color: var(--blue);\r\n}\r\n.dropdown-toggle::after {\r\n  content: none;\r\n  display: none;\r\n}\r\n.dropdown-toggle .caret-icon {\r\n  transition: transform 0.15s ease-in-out, color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,\r\n    -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.btn:hover .caret-icon path {\r\n  fill: #6b6f82;\r\n}\r\n.show .caret-icon {\r\n  transform: rotate(-180deg);\r\n}\r\n","import { RoomService } from '@/services/room.service';\r\nimport channels_data from '@/stores/channel.store';\r\nimport locales from '@/stores/locales.store';\r\nimport { Component, Host, Prop, Watch, h, Element, State } from '@stencil/core';\r\nimport axios from 'axios';\r\n\r\n@Component({\r\n  tag: 'ir-channel',\r\n  styleUrl: 'ir-channel.css',\r\n  scoped: true,\r\n})\r\nexport class IrChannel {\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop() ticket: string = '';\r\n  @Prop() propertyid: number;\r\n  @Prop() language: string;\r\n  @Prop() baseurl: string;\r\n\r\n  @State() channel_status: 'create' | 'edit' | null = null;\r\n\r\n  private roomService = new RoomService();\r\n\r\n  componentWillLoad() {\r\n    if (this.baseurl) {\r\n      axios.defaults.baseURL = this.baseurl;\r\n    }\r\n    if (this.ticket !== '') {\r\n      this.initializeApp();\r\n    }\r\n  }\r\n  async initializeApp() {\r\n    try {\r\n      const [, , languageTexts] = await Promise.all([\r\n        this.roomService.fetchData(this.propertyid, this.language),\r\n        this.roomService.getExposedChannels(),\r\n        this.roomService.fetchLanguage(this.language),\r\n      ]);\r\n      console.log(languageTexts);\r\n      if (!locales.entries) {\r\n        locales.entries = languageTexts.entries;\r\n        locales.direction = languageTexts.direction;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  @Watch('ticket')\r\n  async ticketChanged() {\r\n    sessionStorage.setItem('token', JSON.stringify(this.ticket));\r\n    this.initializeApp();\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <section class=\"p-2\">\r\n          <div class=\"d-flex w-100 justify-content-end mb-2\">\r\n            <ir-button text={'Create'} size=\"sm\" onClickHanlder={() => (this.channel_status = 'create')}></ir-button>\r\n          </div>\r\n          <div>\r\n            <table class=\"table\">\r\n              <thead class=\"\">\r\n                <tr>\r\n                  <th scope=\"col\" class=\"text-left\">\r\n                    Title\r\n                  </th>\r\n                  <th scope=\"col\">Channel</th>\r\n                  <th scope=\"col\">Status</th>\r\n                  <th scope=\"col\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {channels_data.connected_channels?.map(channel => (\r\n                  <tr key={channel.channel.id}>\r\n                    <th scope=\"row\" class=\"text-left\">\r\n                      {channel.title}\r\n                    </th>\r\n                    <th scope=\"row\">{channel.channel.name}</th>\r\n                    <td>\r\n                      <input data-switchery=\"true\" type=\"checkbox\" class=\"\" checked={channel.is_active} />\r\n                    </td>\r\n                    <th>\r\n                      <div class=\"btn-group\">\r\n                        <button type=\"button\" class=\"btn  dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                          <span class=\"mr-1\">Actions</span>\r\n                          <svg class={'caret-icon'} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" height={14} width={14}>\r\n                            <path\r\n                              fill=\"var(--blue)\"\r\n                              d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"\r\n                            />\r\n                          </svg>\r\n                        </button>\r\n                        <div class=\"dropdown-menu dropdown-menu-right\">\r\n                          <button class=\"dropdown-item\" type=\"button\">\r\n                            Action\r\n                          </button>\r\n                          <button class=\"dropdown-item\" type=\"button\">\r\n                            Another action\r\n                          </button>\r\n                          <button class=\"dropdown-item\" type=\"button\">\r\n                            Something else here\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </th>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </section>\r\n        <ir-sidebar\r\n          showCloseButton={false}\r\n          onIrSidebarToggle={e => {\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n            this.channel_status = null;\r\n          }}\r\n          open={this.channel_status !== null}\r\n        >\r\n          {this.channel_status && <ir-channel-editor onCloseSideBar={() => (this.channel_status = null)}></ir-channel-editor>}\r\n        </ir-sidebar>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"0PAAA,MAAMA,EAAe,sjB,MCWRC,EAAS,M,yBAUZC,KAAAC,YAAc,IAAIC,E,YAPD,G,6FAK2B,I,CAIpD,iBAAAC,GACE,GAAIH,KAAKI,QAAS,CAChBC,EAAMC,SAASC,QAAUP,KAAKI,O,CAEhC,GAAIJ,KAAKQ,SAAW,GAAI,CACtBR,KAAKS,e,EAGT,mBAAMA,GACJ,IACE,MAAM,EAAKC,SAAuBC,QAAQC,IAAI,CAC5CZ,KAAKC,YAAYY,UAAUb,KAAKc,WAAYd,KAAKe,UACjDf,KAAKC,YAAYe,qBACjBhB,KAAKC,YAAYgB,cAAcjB,KAAKe,YAEtCG,QAAQC,IAAIT,GACZ,IAAKU,EAAQC,QAAS,CACpBD,EAAQC,QAAUX,EAAcW,QAChCD,EAAQE,UAAYZ,EAAcY,S,EAEpC,MAAOC,GACPL,QAAQK,MAAMA,E,EAKlB,mBAAMC,GACJC,eAAeC,QAAQ,QAASC,KAAKC,UAAU5B,KAAKQ,SACpDR,KAAKS,e,CAEP,MAAAoB,G,MACE,OACEC,EAACC,EAAI,KACHD,EAAA,WAASE,MAAM,OACbF,EAAA,OAAKE,MAAM,yCACTF,EAAA,aAAWG,KAAM,SAAUC,KAAK,KAAKC,eAAgB,IAAOnC,KAAKoC,eAAiB,YAEpFN,EAAA,WACEA,EAAA,SAAOE,MAAM,SACXF,EAAA,SAAOE,MAAM,IACXF,EAAA,UACEA,EAAA,MAAIO,MAAM,MAAML,MAAM,aAAW,SAGjCF,EAAA,MAAIO,MAAM,OAAK,WACfP,EAAA,MAAIO,MAAM,OAAK,UACfP,EAAA,MAAIO,MAAM,OAAK,aAGnBP,EAAA,cACGQ,EAAAC,EAAcC,sBAAkB,MAAAF,SAAA,SAAAA,EAAEG,KAAIC,GACrCZ,EAAA,MAAIa,IAAKD,EAAQA,QAAQE,IACvBd,EAAA,MAAIO,MAAM,MAAML,MAAM,aACnBU,EAAQG,OAEXf,EAAA,MAAIO,MAAM,OAAOK,EAAQA,QAAQI,MACjChB,EAAA,UACEA,EAAA,0BAAsB,OAAOiB,KAAK,WAAWf,MAAM,GAAGgB,QAASN,EAAQO,aAEzEnB,EAAA,UACEA,EAAA,OAAKE,MAAM,aACTF,EAAA,UAAQiB,KAAK,SAASf,MAAM,uBAAsB,cAAa,WAAU,gBAAe,OAAM,gBAAe,SAC3GF,EAAA,QAAME,MAAM,QAAM,WAClBF,EAAA,OAAKE,MAAO,aAAckB,MAAM,6BAA6BC,QAAQ,cAAcC,OAAQ,GAAIC,MAAO,IACpGvB,EAAA,QACEwB,KAAK,cACLC,EAAE,+KAIRzB,EAAA,OAAKE,MAAM,qCACTF,EAAA,UAAQE,MAAM,gBAAgBe,KAAK,UAAQ,UAG3CjB,EAAA,UAAQE,MAAM,gBAAgBe,KAAK,UAAQ,kBAG3CjB,EAAA,UAAQE,MAAM,gBAAgBe,KAAK,UAAQ,iCAY7DjB,EAAA,cACE0B,gBAAiB,MACjBC,kBAAmBC,IACjBA,EAAEC,2BACFD,EAAEE,kBACF5D,KAAKoC,eAAiB,IAAI,EAE5ByB,KAAM7D,KAAKoC,iBAAmB,MAE7BpC,KAAKoC,gBAAkBN,EAAA,qBAAmBgC,eAAgB,IAAO9D,KAAKoC,eAAiB,Q"}