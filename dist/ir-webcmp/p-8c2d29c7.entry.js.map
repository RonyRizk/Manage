{"version":3,"names":["irChannelGeneralCss","IrChannelGeneral","render","h","Host","value","_a","channels_data","selectedChannel","name","onComboboxValueChange","e","selectChannel","detail","data","toString","placeholder","channels","map","channel","id","irChannelHeaderCss","IrChannelHeader","componentDidLoad","this","updateActiveIndicator","disconnectedCallback","animationFrameId","cancelAnimationFrame","handleTabSelection","index","selectedIndex","tabChanged","emit","headerTitles","requestAnimationFrame","selectedTab","el","querySelector","left","width","getBoundingClientRect","parentLeft","position","activeIndicator","style","transform","title","class","disabled","key","onClick","ref","IrMappingService","checkMappingExists","mappedChannel","find","m","channel_id","getAppropriateRooms","isRoomType","roomTypeId","filteredRoomTypes","calendar_data","roomsInfo","filter","room","ir_id","undefined","is_active","Error","selectedRoomType","console","log","irChannelMappingCss","IrChannelMapping","mappingService","setActiveField","availableRooms","activeMapField","renderMappingStatus","mappedField","autoFocus","addMapping","xmlns","height","viewBox","d","property","room_types","room_type","rate_plans","rate_plan","fill"],"sources":["src/components/ir-channel/ir-channel-general/ir-channel-general.css?tag=ir-channel-general&encapsulation=scoped","src/components/ir-channel/ir-channel-general/ir-channel-general.tsx","src/components/ir-channel/ir-channel-header/ir-channel-header.css?tag=ir-channel-header&encapsulation=scoped","src/components/ir-channel/ir-channel-header/ir-channel-header.tsx","src/components/ir-channel/ir-channel-mapping/ir-mapping.service.ts","src/components/ir-channel/ir-channel-mapping/ir-channel-mapping.css?tag=ir-channel-mapping&encapsulation=scoped","src/components/ir-channel/ir-channel-mapping/ir-channel-mapping.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n","import channels_data, { selectChannel } from '@/stores/channel.store';\r\nimport { Component, Host, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-channel-general',\r\n  styleUrl: 'ir-channel-general.css',\r\n  scoped: true,\r\n})\r\nexport class IrChannelGeneral {\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <p>Channel</p>\r\n        <ir-combobox\r\n          value={channels_data.selectedChannel?.name}\r\n          onComboboxValueChange={(e: CustomEvent) => {\r\n            selectChannel(e.detail.data.toString());\r\n          }}\r\n          placeholder=\"Choose channel from list\"\r\n          data={\r\n            channels_data.channels.map(channel => ({\r\n              id: channel.id,\r\n              name: channel.name,\r\n            })) as any\r\n          }\r\n        ></ir-combobox>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  position: relative;\r\n  padding: 0;\r\n  margin: 0;\r\n  border-bottom: 1px solid #e4e5ec;\r\n}\r\nul {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 2rem;\r\n  padding: 0;\r\n}\r\n.tab {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  position: relative;\r\n  margin: 0;\r\n  padding: 0;\r\n  transition: color 0.3s ease;\r\n  user-select: none;\r\n}\r\n.tab[data-disabled] {\r\n  cursor: auto;\r\n}\r\n.tab:hover {\r\n  opacity: 80%;\r\n}\r\n\r\n.tab[data-state='selected'],\r\n.tab[data-state='selected']:hover {\r\n  color: var(--blue);\r\n  opacity: 100%;\r\n}\r\n.active-indicator {\r\n  padding: 0;\r\n  bottom: 0px;\r\n  position: absolute;\r\n  height: 3px;\r\n  border-radius: 4px;\r\n  transition: transform 0.3s ease, width 0.3s ease;\r\n  background: var(--blue);\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'ir-channel-header',\r\n  styleUrl: 'ir-channel-header.css',\r\n  scoped: true,\r\n})\r\nexport class IrChannelHeader {\r\n  @Element() el: HTMLElement;\r\n  @Prop() headerTitles: { id: string; name: string; disabled: boolean }[] = [];\r\n  @State() selectedIndex: number = 0;\r\n  @Event() tabChanged: EventEmitter<string>;\r\n\r\n  private activeIndicator: HTMLSpanElement;\r\n  private animationFrameId: number;\r\n\r\n  componentDidLoad() {\r\n    this.updateActiveIndicator();\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.animationFrameId) {\r\n      cancelAnimationFrame(this.animationFrameId);\r\n    }\r\n  }\r\n\r\n  handleTabSelection(index: number) {\r\n    this.selectedIndex = index;\r\n    this.updateActiveIndicator();\r\n    this.tabChanged.emit(this.headerTitles[this.selectedIndex].id);\r\n  }\r\n\r\n  updateActiveIndicator() {\r\n    if (this.animationFrameId) {\r\n      cancelAnimationFrame(this.animationFrameId);\r\n    }\r\n    requestAnimationFrame(() => {\r\n      const selectedTab = this.el.querySelector(`li.tab[data-state=\"selected\"]`);\r\n      if (selectedTab) {\r\n        const { left, width } = selectedTab.getBoundingClientRect();\r\n        const parentLeft = this.el.getBoundingClientRect().left;\r\n        const position = left - parentLeft;\r\n        this.activeIndicator.style.width = `${width}px`;\r\n        this.activeIndicator.style.transform = `translateX(${position}px)`;\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ul>\r\n          {this.headerTitles.map((title, index) => (\r\n            <li\r\n              class={`tab ${title.disabled ? 'text-light' : ''}`}\r\n              key={title.id}\r\n              onClick={() => {\r\n                if (!title.disabled) this.handleTabSelection(index);\r\n              }}\r\n              data-disabled={title.disabled}\r\n              data-state={this.selectedIndex === index ? 'selected' : ''}\r\n            >\r\n              {title.name}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <span class=\"active-indicator\" ref={el => (this.activeIndicator = el)}></span>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import calendar_data from '@/stores/calendar-data';\r\nimport channels_data from '@/stores/channel.store';\r\n\r\nexport class IrMappingService {\r\n  public checkMappingExists(id: string) {\r\n    return channels_data.mappedChannel.find(m => m.channel_id === id);\r\n  }\r\n  public getAppropriateRooms(isRoomType: boolean, roomTypeId?: string) {\r\n    if (isRoomType) {\r\n      const filteredRoomTypes = calendar_data.roomsInfo.filter(\r\n        room => channels_data.mappedChannel.find(m => m.ir_id.toString() === room.id.toString()) === undefined && room.is_active,\r\n      );\r\n      return filteredRoomTypes.map(room => ({ id: room.id.toString(), name: room.name }));\r\n    }\r\n    if (!roomTypeId) {\r\n      throw new Error('Missing roomType id');\r\n    }\r\n    //find the selected roomType\r\n    const selectedRoomType = calendar_data.roomsInfo.filter(room => channels_data.mappedChannel.find(m => m.channel_id.toString() === roomTypeId) && room.is_active);\r\n    console.log(selectedRoomType);\r\n\r\n    // console.log(filteredRoomTypes);\r\n    //filter all the room types that are taken\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  box-sizing: border-box;\r\n}\r\n.map-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n.map-row span {\r\n  width: 49%;\r\n}\r\n\r\n.submap-text {\r\n  padding-left: 10px;\r\n}\r\n.text-blue {\r\n  color: var(--blue);\r\n}\r\n.text-red {\r\n  color: var(--red);\r\n}\r\n","import { Component, Host, State, h } from '@stencil/core';\r\nimport { IrMappingService } from './ir-mapping.service';\r\nimport channels_data, { addMapping } from '@/stores/channel.store';\r\n\r\n@Component({\r\n  tag: 'ir-channel-mapping',\r\n  styleUrl: 'ir-channel-mapping.css',\r\n  scoped: true,\r\n})\r\nexport class IrChannelMapping {\r\n  @State() activeMapField = '';\r\n  @State() availableRooms: { id: string; name: string }[] = [];\r\n\r\n  private mappingService = new IrMappingService();\r\n\r\n  setActiveField(id: string, isRoomType: boolean, roomTypeId?: string) {\r\n    const availableRooms = this.mappingService.getAppropriateRooms(isRoomType, roomTypeId);\r\n    if (availableRooms) {\r\n      this.availableRooms = availableRooms;\r\n    }\r\n    this.activeMapField = id;\r\n  }\r\n\r\n  renderMappingStatus(id: string, isRoomType: boolean, roomTypeId?: string) {\r\n    const mappedField = this.mappingService.checkMappingExists(id);\r\n    if (mappedField) {\r\n      return <span class=\"px-2\">{mappedField.ir_id}</span>;\r\n    }\r\n    return (\r\n      <span class=\"px-2\">\r\n        {this.activeMapField === id ? (\r\n          <ir-combobox\r\n            autoFocus\r\n            placeholder=\"Not mapped\"\r\n            data={this.availableRooms}\r\n            onComboboxValueChange={e => {\r\n              addMapping(e.detail.data as string, this.activeMapField);\r\n              this.activeMapField = '';\r\n            }}\r\n          ></ir-combobox>\r\n        ) : (\r\n          <span class=\"cursor-pointer text-red\" onClick={() => this.setActiveField(id, isRoomType, roomTypeId)}>\r\n            Not mapped\r\n          </span>\r\n        )}\r\n      </span>\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <ul class=\"m-0 p-0\">\r\n          <li class=\"map-row my-2\">\r\n            <span class=\"font-weight-bold\">{channels_data.selectedChannel.name}</span>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n              <path d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\" />\r\n            </svg>\r\n            <span class=\"font-weight-bold px-2\">Channel manager</span>\r\n          </li>\r\n          {channels_data.selectedChannel.property.room_types.map(room_type => (\r\n            <li key={room_type.id} class=\"mb-1\">\r\n              <div class=\"map-row\">\r\n                <span>{room_type.name}</span>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                  <path d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\" />\r\n                </svg>\r\n                {this.renderMappingStatus(room_type.id, true)}\r\n              </div>\r\n              <ul class=\"m-0 p-0\">\r\n                {room_type.rate_plans.map(rate_plan => (\r\n                  <li class=\"map-row\" key={rate_plan.id}>\r\n                    <span class=\"submap-text\">{rate_plan.name}</span>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"14\" width=\"12.25\" viewBox=\"0 0 448 512\">\r\n                      <path\r\n                        fill=\"currentColor\"\r\n                        d=\"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z\"\r\n                      />\r\n                    </svg>\r\n                    {this.renderMappingStatus(rate_plan.id, false, room_type.id)}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"8KAAA,MAAMA,EAAsB,0C,MCQfC,EAAgB,M,yBAC3B,MAAAC,G,MACE,OACEC,EAACC,EAAI,KACHD,EAAA,oBACAA,EAAA,eACEE,OAAOC,EAAAC,EAAcC,mBAAe,MAAAF,SAAA,SAAAA,EAAEG,KACtCC,sBAAwBC,IACtBC,EAAcD,EAAEE,OAAOC,KAAKC,WAAW,EAEzCC,YAAY,2BACZF,KACEP,EAAcU,SAASC,KAAIC,IAAO,CAChCC,GAAID,EAAQC,GACZX,KAAMU,EAAQV,W,aCtB5B,MAAMY,EAAqB,+uB,MCOdC,EAAe,M,kFAEgD,G,mBACzC,C,CAMjC,gBAAAC,GACEC,KAAKC,uB,CAGP,oBAAAC,GACE,GAAIF,KAAKG,iBAAkB,CACzBC,qBAAqBJ,KAAKG,iB,EAI9B,kBAAAE,CAAmBC,GACjBN,KAAKO,cAAgBD,EACrBN,KAAKC,wBACLD,KAAKQ,WAAWC,KAAKT,KAAKU,aAAaV,KAAKO,eAAeX,G,CAG7D,qBAAAK,GACE,GAAID,KAAKG,iBAAkB,CACzBC,qBAAqBJ,KAAKG,iB,CAE5BQ,uBAAsB,KACpB,MAAMC,EAAcZ,KAAKa,GAAGC,cAAc,iCAC1C,GAAIF,EAAa,CACf,MAAMG,KAAEA,EAAIC,MAAEA,GAAUJ,EAAYK,wBACpC,MAAMC,EAAalB,KAAKa,GAAGI,wBAAwBF,KACnD,MAAMI,EAAWJ,EAAOG,EACxBlB,KAAKoB,gBAAgBC,MAAML,MAAQ,GAAGA,MACtChB,KAAKoB,gBAAgBC,MAAMC,UAAY,cAAcH,M,KAK3D,MAAAzC,GACE,OACEC,EAACC,EAAI,KACHD,EAAA,UACGqB,KAAKU,aAAahB,KAAI,CAAC6B,EAAOjB,IAC7B3B,EAAA,MACE6C,MAAO,OAAOD,EAAME,SAAW,aAAe,KAC9CC,IAAKH,EAAM3B,GACX+B,QAAS,KACP,IAAKJ,EAAME,SAAUzB,KAAKK,mBAAmBC,EAAM,EACpD,gBACciB,EAAME,SAAQ,aACjBzB,KAAKO,gBAAkBD,EAAQ,WAAa,IAEvDiB,EAAMtC,SAIbN,EAAA,QAAM6C,MAAM,mBAAmBI,IAAKf,GAAOb,KAAKoB,gBAAkBP,I,2CC/D7DgB,EACJ,kBAAAC,CAAmBlC,GACxB,OAAOb,EAAcgD,cAAcC,MAAKC,GAAKA,EAAEC,aAAetC,G,CAEzD,mBAAAuC,CAAoBC,EAAqBC,GAC9C,GAAID,EAAY,CACd,MAAME,EAAoBC,EAAcC,UAAUC,QAChDC,GAAQ3D,EAAcgD,cAAcC,MAAKC,GAAKA,EAAEU,MAAMpD,aAAemD,EAAK9C,GAAGL,eAAgBqD,WAAaF,EAAKG,YAEjH,OAAOP,EAAkB5C,KAAIgD,IAAI,CAAO9C,GAAI8C,EAAK9C,GAAGL,WAAYN,KAAMyD,EAAKzD,Q,CAE7E,IAAKoD,EAAY,CACf,MAAM,IAAIS,MAAM,sB,CAGlB,MAAMC,EAAmBR,EAAcC,UAAUC,QAAOC,GAAQ3D,EAAcgD,cAAcC,MAAKC,GAAKA,EAAEC,WAAW3C,aAAe8C,KAAeK,EAAKG,YACtJG,QAAQC,IAAIF,E,ECnBhB,MAAMG,EAAsB,0X,MCSfC,EAAgB,M,yBAInBnD,KAAAoD,eAAiB,IAAIvB,E,oBAHH,G,oBACgC,E,CAI1D,cAAAwB,CAAezD,EAAYwC,EAAqBC,GAC9C,MAAMiB,EAAiBtD,KAAKoD,eAAejB,oBAAoBC,EAAYC,GAC3E,GAAIiB,EAAgB,CAClBtD,KAAKsD,eAAiBA,C,CAExBtD,KAAKuD,eAAiB3D,C,CAGxB,mBAAA4D,CAAoB5D,EAAYwC,EAAqBC,GACnD,MAAMoB,EAAczD,KAAKoD,eAAetB,mBAAmBlC,GAC3D,GAAI6D,EAAa,CACf,OAAO9E,EAAA,QAAM6C,MAAM,QAAQiC,EAAYd,M,CAEzC,OACEhE,EAAA,QAAM6C,MAAM,QACTxB,KAAKuD,iBAAmB3D,EACvBjB,EAAA,eACE+E,UAAS,KACTlE,YAAY,aACZF,KAAMU,KAAKsD,eACXpE,sBAAuBC,IACrBwE,EAAWxE,EAAEE,OAAOC,KAAgBU,KAAKuD,gBACzCvD,KAAKuD,eAAiB,EAAE,IAI5B5E,EAAA,QAAM6C,MAAM,0BAA0BG,QAAS,IAAM3B,KAAKqD,eAAezD,EAAIwC,EAAYC,IAAW,c,CAO5G,MAAA3D,GACE,OACEC,EAACC,EAAI,KACHD,EAAA,MAAI6C,MAAM,WACR7C,EAAA,MAAI6C,MAAM,gBACR7C,EAAA,QAAM6C,MAAM,oBAAoBzC,EAAcC,gBAAgBC,MAC9DN,EAAA,OAAKiF,MAAM,6BAA6BC,OAAO,KAAK7C,MAAM,QAAQ8C,QAAQ,eACxEnF,EAAA,QAAMoF,EAAE,mOAEVpF,EAAA,QAAM6C,MAAM,yBAAuB,oBAEpCzC,EAAcC,gBAAgBgF,SAASC,WAAWvE,KAAIwE,GACrDvF,EAAA,MAAI+C,IAAKwC,EAAUtE,GAAI4B,MAAM,QAC3B7C,EAAA,OAAK6C,MAAM,WACT7C,EAAA,YAAOuF,EAAUjF,MACjBN,EAAA,OAAKiF,MAAM,6BAA6BC,OAAO,KAAK7C,MAAM,QAAQ8C,QAAQ,eACxEnF,EAAA,QAAMoF,EAAE,mOAET/D,KAAKwD,oBAAoBU,EAAUtE,GAAI,OAE1CjB,EAAA,MAAI6C,MAAM,WACP0C,EAAUC,WAAWzE,KAAI0E,GACxBzF,EAAA,MAAI6C,MAAM,UAAUE,IAAK0C,EAAUxE,IACjCjB,EAAA,QAAM6C,MAAM,eAAe4C,EAAUnF,MACrCN,EAAA,OAAKiF,MAAM,6BAA6BC,OAAO,KAAK7C,MAAM,QAAQ8C,QAAQ,eACxEnF,EAAA,QACE0F,KAAK,eACLN,EAAE,mOAGL/D,KAAKwD,oBAAoBY,EAAUxE,GAAI,MAAOsE,EAAUtE,Y"}