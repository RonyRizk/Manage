{"file":"igl-cal-body.igl-cal-footer.igl-cal-header.igl-legends.igl-to-be-assigned.ir-booking-details.ir-room-nights.entry.js","mappings":"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","names":["moment"],"sources":["src/components/igloo-calendar/igl-cal-body/igl-cal-body.css?tag=igl-cal-body&encapsulation=scoped","src/components/igloo-calendar/igl-cal-body/igl-cal-body.tsx","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.css?tag=igl-cal-footer&encapsulation=scoped","src/components/igloo-calendar/igl-cal-footer/igl-cal-footer.tsx","src/components/igloo-calendar/igl-cal-header/igl-cal-header.css?tag=igl-cal-header&encapsulation=scoped","src/components/igloo-calendar/igl-cal-header/igl-cal-header.tsx","src/components/igloo-calendar/igl-legends/igl-legends.css?tag=igl-legends&encapsulation=scoped","src/components/igloo-calendar/igl-legends/igl-legends.tsx","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.css?tag=igl-to-be-assigned&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.tsx","src/components/ir-booking-details/ir-booking-details.css?tag=ir-booking-details&encapsulation=scoped","src/components/ir-booking-details/ir-booking-details.tsx","src/components/ir-room-nights/ir-room-nights.css?tag=ir-room-nights&encapsulation=scoped","src/components/ir-room-nights/ir-room-nights.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n\r\n.bodyContainer {\r\n  position: relative;\r\n}\r\n\r\n.roomRow {\r\n  width: max-content;\r\n}\r\n\r\n.roomRow:first-child {\r\n  margin-top: 80px;\r\n}\r\n.categoryName {\r\n  font-weight: bold;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.cellData {\r\n  width: 70px;\r\n  height: 30px;\r\n  display: inline-grid;\r\n  border-top: 1px solid #e0e0e0;\r\n  border-left: 1px solid #e0e0e0;\r\n  vertical-align: top;\r\n}\r\n\r\n.cellData:nth-child(2) {\r\n  border-left: 0px;\r\n}\r\n\r\n.cellData:last-child {\r\n  border-right: 1px solid #e0e0e0;\r\n}\r\n\r\n.roomHeaderCell {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  left: 0;\r\n  background: #fff;\r\n  border-right: 1px solid #ccc;\r\n  width: 170px;\r\n  z-index: 1;\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dragOverHighlight {\r\n  background-color: #f5f5dc !important;\r\n}\r\n\r\n.selectedDay {\r\n  background-color: #f9f9c9 !important;\r\n}\r\n\r\n.categoryTitle {\r\n  grid-template-columns: 1fr 20px;\r\n  padding-left: 10px;\r\n  cursor: pointer;\r\n  height: 40px;\r\n  font-size: 0.9em;\r\n}\r\n.categoryTitle > :nth-child(1) {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.roomTitle {\r\n  padding-left: 20px;\r\n  font-size: 0.9em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.roomTitle > :nth-child(1) {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.roomTitle.pl10 {\r\n  padding-left: 10px;\r\n}\r\n\r\n.categoryPriceColumn {\r\n  align-items: center;\r\n  height: 40px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n/* BOOKING EVENT */\r\n.bookingEventsContainer {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n","import { Component, Host, Listen, Prop, State, h, Event, EventEmitter } from '@stencil/core';\r\nimport calendar_dates from '@/stores/calendar-dates.store';\r\nimport locales from '@/stores/locales.store';\r\n@Component({\r\n  tag: 'igl-cal-body',\r\n  styleUrl: 'igl-cal-body.css',\r\n  scoped: true,\r\n})\r\nexport class IglCalBody {\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) scrollPageToRoom: EventEmitter;\r\n  @Prop() isScrollViewDragging: boolean;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @Prop() currency;\r\n  @Prop() language: string;\r\n  @Prop() countryNodeList;\r\n  @State() dragOverElement: string = '';\r\n  @State() renderAgain: boolean = false;\r\n  @Event() addBookingDatasEvent: EventEmitter<any[]>;\r\n\r\n  private selectedRooms: { [key: string]: any } = {};\r\n  private fromRoomId: number = -1;\r\n  private newEvent: { [key: string]: any };\r\n  private currentDate = new Date();\r\n\r\n  componentWillLoad() {\r\n    this.currentDate.setHours(0, 0, 0, 0);\r\n  }\r\n\r\n  @Listen('dragOverHighlightElement', { target: 'window' })\r\n  dragOverHighlightElementHandler(event: CustomEvent) {\r\n    this.dragOverElement = event.detail.dragOverElement;\r\n  }\r\n\r\n  @Listen('gotoRoomEvent', { target: 'window' })\r\n  gotoRoom(event: CustomEvent) {\r\n    let roomId = event.detail.roomId;\r\n    let category = this.getRoomCategoryByRoomId(roomId);\r\n    if (!category.expanded) {\r\n      this.toggleCategory(category);\r\n      setTimeout(() => {\r\n        this.scrollToRoom(roomId);\r\n      }, 10);\r\n    } else {\r\n      this.scrollToRoom(roomId);\r\n    }\r\n  }\r\n\r\n  @Listen('addToBeAssignedEvent', { target: 'window' })\r\n  addToBeAssignedEvents(event: CustomEvent) {\r\n    // let roomId = event.detail.roomId;\r\n    this.addBookingDatas(event.detail.data);\r\n    this.renderElement();\r\n  }\r\n\r\n  scrollToRoom(roomId) {\r\n    this.scrollPageToRoom.emit({\r\n      key: 'scrollPageToRoom',\r\n      id: roomId,\r\n      refClass: 'room_' + roomId,\r\n    });\r\n  }\r\n\r\n  getRoomCategoryByRoomId(roomId) {\r\n    return this.calendarData.roomsInfo.find(roomCategory => {\r\n      return this.getCategoryRooms(roomCategory).find(room => this.getRoomId(room) === roomId);\r\n    });\r\n  }\r\n\r\n  getCategoryName(roomCategory) {\r\n    return roomCategory.name;\r\n  }\r\n\r\n  getCategoryId(roomCategory) {\r\n    return roomCategory.id;\r\n  }\r\n\r\n  getTotalPhysicalRooms(roomCategory) {\r\n    return this.getCategoryRooms(roomCategory).length;\r\n  }\r\n\r\n  getCategoryRooms(roomCategory) {\r\n    return (roomCategory && roomCategory.physicalrooms) || [];\r\n  }\r\n\r\n  getRoomName(roomInfo) {\r\n    return roomInfo.name;\r\n  }\r\n\r\n  getRoomId(roomInfo) {\r\n    return roomInfo.id;\r\n  }\r\n\r\n  getRoomById(physicalRooms, roomId) {\r\n    return physicalRooms.find(physical_room => this.getRoomId(physical_room) === roomId);\r\n  }\r\n\r\n  getBookingData() {\r\n    return this.calendarData.bookingEvents;\r\n  }\r\n\r\n  addBookingDatas(aData) {\r\n    this.addBookingDatasEvent.emit(aData);\r\n  }\r\n\r\n  getSelectedCellRefName(roomId, selectedDay) {\r\n    return 'room_' + roomId + '_' + selectedDay.currentDate;\r\n  }\r\n\r\n  // getSplitBookingEvents(newEvent) {\r\n  //   return this.getBookingData().some(bookingEvent => !['003', '002', '004'].includes(bookingEvent.STATUS_CODE) && newEvent.FROM_DATE === bookingEvent.FROM_DATE);\r\n  // }\r\n  getSplitBookingEvents(newEvent) {\r\n    console.log(newEvent.FROM_DATE);\r\n    return this.getBookingData().some(bookingEvent => {\r\n      if (!['003', '002', '004'].includes(bookingEvent.STATUS_CODE)) {\r\n        if (\r\n          new Date(newEvent.FROM_DATE).getTime() >= new Date(bookingEvent.FROM_DATE).getTime() &&\r\n          new Date(newEvent.FROM_DATE).getTime() <= new Date(bookingEvent.TO_DATE).getTime()\r\n        ) {\r\n          return bookingEvent;\r\n        }\r\n      }\r\n    });\r\n  }\r\n  @Listen('closeBookingWindow', { target: 'window' })\r\n  closeWindow() {\r\n    let ind = this.getBookingData().findIndex(ev => ev.ID === 'NEW_TEMP_EVENT');\r\n    if (ind !== -1) {\r\n      this.getBookingData().splice(ind, 1);\r\n      console.log('removed item..');\r\n      this.renderElement();\r\n    }\r\n  }\r\n\r\n  addNewEvent(roomCategory) {\r\n    let keys = Object.keys(this.selectedRooms);\r\n    let startDate, endDate;\r\n\r\n    if (this.selectedRooms[keys[0]].currentDate < this.selectedRooms[keys[1]].currentDate) {\r\n      startDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n    } else {\r\n      startDate = new Date(this.selectedRooms[keys[1]].currentDate);\r\n      endDate = new Date(this.selectedRooms[keys[0]].currentDate);\r\n    }\r\n\r\n    this.newEvent = {\r\n      ID: 'NEW_TEMP_EVENT',\r\n      NAME: <span>&nbsp;</span>,\r\n      EMAIL: '',\r\n      PHONE: '',\r\n      convertBooking: false,\r\n      REFERENCE_TYPE: 'PHONE',\r\n      FROM_DATE: startDate.getFullYear() + '-' + this.getTwoDigitNumStr(startDate.getMonth() + 1) + '-' + this.getTwoDigitNumStr(startDate.getDate()),\r\n      TO_DATE: endDate.getFullYear() + '-' + this.getTwoDigitNumStr(endDate.getMonth() + 1) + '-' + this.getTwoDigitNumStr(endDate.getDate()),\r\n      BALANCE: '',\r\n      NOTES: '',\r\n      RELEASE_AFTER_HOURS: 0,\r\n      PR_ID: this.selectedRooms[keys[0]].roomId,\r\n      ENTRY_DATE: '',\r\n      NO_OF_DAYS: (endDate - startDate) / 86400000,\r\n      ADULTS_COUNT: 1,\r\n      COUNTRY: '',\r\n      INTERNAL_NOTE: '',\r\n      RATE: '',\r\n      TOTAL_PRICE: '',\r\n      RATE_PLAN: '',\r\n      ARRIVAL_TIME: '',\r\n      TITLE: locales.entries.Lcz_NewBookingFor,\r\n      roomsInfo: [roomCategory],\r\n      CATEGORY: roomCategory.name,\r\n      event_type: 'BAR_BOOKING',\r\n      STATUS: 'TEMP-EVENT',\r\n      defaultDateRange: {\r\n        fromDate: null,\r\n        fromDateStr: '',\r\n        toDate: null,\r\n        toDateStr: '',\r\n        dateDifference: (endDate - startDate) / 86400000,\r\n        editable: false,\r\n        message: 'Including 5.00% City Tax - Excluding 11.00% VAT',\r\n      },\r\n    };\r\n\r\n    let popupTitle = roomCategory.name + ' ' + this.getRoomName(this.getRoomById(this.getCategoryRooms(roomCategory), this.selectedRooms[keys[0]].roomId));\r\n    this.newEvent.BLOCK_DATES_TITLE = locales.entries.Lcz_BlockDatesFor + popupTitle;\r\n    this.newEvent.TITLE += popupTitle;\r\n    this.newEvent.defaultDateRange.toDate = new Date(this.newEvent.TO_DATE + 'T00:00:00');\r\n    this.newEvent.defaultDateRange.fromDate = new Date(this.newEvent.FROM_DATE + 'T00:00:00');\r\n    this.newEvent.defaultDateRange.fromDateStr = this.getDateStr(this.newEvent.defaultDateRange.fromDate);\r\n    this.newEvent.defaultDateRange.toDateStr = this.getDateStr(this.newEvent.defaultDateRange.toDate);\r\n    this.newEvent.ENTRY_DATE = new Date().toISOString();\r\n    this.newEvent.legendData = this.calendarData.formattedLegendData;\r\n\r\n    let splitBookingEvents = this.getSplitBookingEvents(this.newEvent);\r\n    if (splitBookingEvents) {\r\n      this.newEvent.splitBookingEvents = splitBookingEvents;\r\n    }\r\n\r\n    this.getBookingData().push(this.newEvent);\r\n    return this.newEvent;\r\n  }\r\n\r\n  getTwoDigitNumStr(num) {\r\n    return num <= 9 ? '0' + num : num;\r\n  }\r\n\r\n  getDateStr(date, locale = 'default') {\r\n    return date.getDate() + ' ' + date.toLocaleString(locale, { month: 'short' }) + ' ' + date.getFullYear();\r\n  }\r\n\r\n  removeNewEvent() {\r\n    this.calendarData.bookingEvents = this.calendarData.bookingEvents.filter(events => events.ID !== 'NEW_TEMP_EVENT');\r\n    this.newEvent = null;\r\n  }\r\n\r\n  clickCell(roomId, selectedDay, roomCategory) {\r\n    if (!this.isScrollViewDragging && selectedDay.currentDate >= this.currentDate.getTime()) {\r\n      let refKey = this.getSelectedCellRefName(roomId, selectedDay);\r\n      if (this.selectedRooms.hasOwnProperty(refKey)) {\r\n        this.removeNewEvent();\r\n        delete this.selectedRooms[refKey];\r\n        this.renderElement();\r\n        return;\r\n      } else if (Object.keys(this.selectedRooms).length != 1 || this.fromRoomId != roomId) {\r\n        this.removeNewEvent();\r\n        this.selectedRooms = {};\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.fromRoomId = roomId;\r\n        this.renderElement();\r\n      } else {\r\n        // create bar;\r\n        this.selectedRooms[refKey] = { ...selectedDay, roomId };\r\n        this.addNewEvent(roomCategory);\r\n        this.selectedRooms = {};\r\n        this.renderElement();\r\n        this.showNewBookingPopup(this.newEvent);\r\n      }\r\n    }\r\n  }\r\n\r\n  showNewBookingPopup(data) {\r\n    console.log(data);\r\n    // this.showBookingPopup.emit({key: \"add\", data});\r\n  }\r\n\r\n  renderElement() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  getGeneralCategoryDayColumns(addClass: string, isCategory: boolean = false, index: number) {\r\n    return calendar_dates.days.map(dayInfo => {\r\n      return (\r\n        <div class={`cellData  font-weight-bold categoryPriceColumn ${addClass + '_' + dayInfo.day} ${dayInfo.day === this.today ? 'currentDay' : ''}`}>\r\n          {isCategory ? (\r\n            <span class={'categoryName'}>\r\n              {dayInfo.rate[index].exposed_inventory.rts}\r\n              {/* <br />\r\n              {dayInfo.rate[index].exposed_inventory.offline} */}\r\n            </span>\r\n          ) : (\r\n            ''\r\n          )}\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  getGeneralRoomDayColumns(roomId: string, roomCategory) {\r\n    // onDragOver={event => this.handleDragOver(event)} onDrop={event => this.handleDrop(event, addClass+\"_\"+dayInfo.day)}\r\n    return this.calendarData.days.map(dayInfo => (\r\n      <div\r\n        class={`cellData ${'room_' + roomId + '_' + dayInfo.day} ${dayInfo.day === this.today ? 'currentDay' : ''} ${\r\n          this.dragOverElement === roomId + '_' + dayInfo.day ? 'dragOverHighlight' : ''\r\n        } ${this.selectedRooms.hasOwnProperty(this.getSelectedCellRefName(roomId, dayInfo)) ? 'selectedDay' : ''}`}\r\n        onClick={() => this.clickCell(roomId, dayInfo, roomCategory)}\r\n      ></div>\r\n    ));\r\n  }\r\n\r\n  toggleCategory(roomCategory) {\r\n    roomCategory.expanded = !roomCategory.expanded;\r\n    this.renderElement();\r\n  }\r\n\r\n  getRoomCategoryRow(roomCategory, index) {\r\n    if (this.getTotalPhysicalRooms(roomCategory) <= 1) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div class=\"roomRow\">\r\n        <div\r\n          class={`cellData text-left align-items-center roomHeaderCell categoryTitle ${'category_' + this.getCategoryId(roomCategory)}`}\r\n          onClick={() => this.toggleCategory(roomCategory)}\r\n        >\r\n          <div class={'categoryName'}>{this.getCategoryName(roomCategory)}</div>\r\n\r\n          {roomCategory.expanded ? (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" height={14} width={14}>\r\n              <path\r\n                fill=\"#6b6f82\"\r\n                d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"\r\n              />\r\n            </svg>\r\n          ) : (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" height={14} width={14}>\r\n              <path\r\n                fill=\"#6b6f82\"\r\n                d=\"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z\"\r\n              />\r\n            </svg>\r\n          )}\r\n          {/* <i class={`la la-angle-${roomCategory.expanded ? 'down' : 'right'}`}></i> */}\r\n        </div>\r\n        {this.getGeneralCategoryDayColumns('category_' + this.getCategoryId(roomCategory), true, index)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getRoomsByCategory(roomCategory) {\r\n    // Check accordion is expanded.\r\n    if (!roomCategory.expanded) {\r\n      return [];\r\n    }\r\n\r\n    return this.getCategoryRooms(roomCategory)?.map(room => (\r\n      <div class=\"roomRow\">\r\n        <div\r\n          class={`cellData text-left align-items-center roomHeaderCell  roomTitle ${this.getTotalPhysicalRooms(roomCategory) <= 1 ? 'pl10' : ''} ${'room_' + this.getRoomId(room)}`}\r\n          data-room={this.getRoomId(room)}\r\n        >\r\n          <div>{this.getTotalPhysicalRooms(roomCategory) <= 1 ? this.getCategoryName(roomCategory) : this.getRoomName(room)}</div>\r\n        </div>\r\n        {this.getGeneralRoomDayColumns(this.getRoomId(room), roomCategory)}\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  getRoomRows() {\r\n    return this.calendarData.roomsInfo.map((roomCategory, index) => {\r\n      if (roomCategory.is_active) {\r\n        return [this.getRoomCategoryRow(roomCategory, index), this.getRoomsByCategory(roomCategory)];\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // onDragStart={event => this.handleDragStart(event)} draggable={true}\r\n    return (\r\n      <Host>\r\n        <div class=\"bodyContainer\">\r\n          {this.getRoomRows()}\r\n          <div class=\"bookingEventsContainer preventPageScroll\">\r\n            {this.getBookingData()?.map(bookingEvent => (\r\n              <igl-booking-event\r\n                language={this.language}\r\n                is_vacation_rental={this.calendarData.is_vacation_rental}\r\n                countryNodeList={this.countryNodeList}\r\n                currency={this.currency}\r\n                data-component-id={bookingEvent.ID}\r\n                bookingEvent={bookingEvent}\r\n                allBookingEvents={this.getBookingData()}\r\n              ></igl-booking-event>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: max-content;\r\n  z-index: 3;\r\n}\r\n\r\n.footerCell {\r\n  display: -moz-inline-grid;\r\n  display: -ms-inline-grid;\r\n  display: inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  bottom: 0;\r\n  width: 70px;\r\n  height: 40px;\r\n  /* color: #b8b6b7; */\r\n  background: #fff;\r\n  vertical-align: top;\r\n  border-top: 1px solid #e0e0e0;\r\n}\r\n\r\n.bottomLeftCell {\r\n  left: -1px;\r\n  z-index: 2;\r\n  width: 170px;\r\n  text-align: left;\r\n  padding-left: 15px;\r\n  color: #000000;\r\n}\r\n\r\n.footerCell i {\r\n  margin-right: 5px;\r\n}\r\n\r\n.legendBtn {\r\n  color: #41bff3;\r\n  cursor: pointer;\r\n}\r\n\r\n.isOnline i {\r\n  color: #2f9c3f;\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline i {\r\n  font-weight: bold;\r\n}\r\n\r\n.isOffline {\r\n  color: #a40000;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  display: grid;\r\n  user-select: none;\r\n  /* height: 100%;\r\n  \r\n  align-items: center;\r\n  text-align: center;\r\n  width: 100%; */\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n  /* color: #262b31; */\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n}\r\n\r\n.badge-pill {\r\n  padding-left: 1em;\r\n  padding-right: 1em;\r\n  font-size: 0.7em;\r\n  margin-bottom: 2px;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-cal-footer',\r\n  styleUrl: 'igl-cal-footer.css',\r\n  scoped: true,\r\n})\r\nexport class IglCalFooter {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n\r\n  // private isOnline:boolean = false;\r\n\r\n  handleOptionEvent(key, data = '') {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"footerContainer\">\r\n        <div class=\"footerCell bottomLeftCell align-items-center preventPageScroll\">\r\n          <div class=\"legendBtn\" onClick={() => this.handleOptionEvent('showLegend')}>\r\n            <i class=\"la la-square\"></i>\r\n            <u>{locales.entries.Lcz_Legend}</u>\r\n          </div>\r\n          {/* <div class={`${this.isOnline ? 'isOnline' : 'isOffline'}`}>\r\n            <i class=\"la la-share-alt isOffline\"></i><span>{this.isOnline ? \"Connected\": \"Offline\"}</span>\r\n          </div> */}\r\n        </div>\r\n        {this.calendarData.days.map(dayInfo => (\r\n          <div class=\"footerCell align-items-center\">\r\n            <div class={`dayTitle full-height align-items-center ${dayInfo.day === this.today ? 'currentDay' : ''}`}>{dayInfo.dayDisplayName}</div>\r\n\r\n            {/* <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\r\n              <div class=\"dayCapacityPercent\">28.57%</div>\r\n              <div class=\"preventPageScroll\">\r\n                <span class=\"badge badge-primary badge-pill\">\r\n                  {index}\r\n                </span>\r\n              </div> */}\r\n          </div>\r\n        ))}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  height: 100%;\r\n}\r\n.svg-icon {\r\n  height: 20px;\r\n  width: 20px;\r\n}\r\n.darkGrey {\r\n  background: #ececec;\r\n}\r\n.btn {\r\n  pointer-events: auto;\r\n}\r\n\r\n.stickyCell {\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n  display: inline-grid;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0px;\r\n  height: 82px;\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  z-index: 2;\r\n}\r\n\r\n.headersContainer {\r\n  background-color: #ffffff;\r\n}\r\n\r\n.headerCell {\r\n  display: inline-grid;\r\n  width: 70px;\r\n  height: 60px;\r\n  vertical-align: top;\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.datePickerHidden {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  opacity: 0;\r\n}\r\n\r\n.monthsContainer {\r\n  height: 20px;\r\n  background-color: #ffffff;\r\n  margin-bottom: 0.2em;\r\n}\r\n\r\n.monthCell {\r\n  display: inline-grid;\r\n  height: 20px;\r\n  background-color: #ececec;\r\n  border-right: 1px solid #c7c7c7;\r\n  vertical-align: top;\r\n}\r\n\r\n.monthCell:nth-child(odd) {\r\n  background-color: #dddddd;\r\n}\r\n\r\n.monthTitle {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 0.9em;\r\n  text-transform: uppercase;\r\n  font-weight: bold;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.topLeftCell {\r\n  left: 0px;\r\n  z-index: 3;\r\n  width: 170px;\r\n  background-color: #ffffff;\r\n  display: -ms-inline-grid;\r\n  display: -moz-inline-grid;\r\n  display: inline-grid;\r\n}\r\n\r\n.caledarBtns {\r\n  position: relative;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.caledarBtns .la {\r\n  font-size: 1.1em;\r\n}\r\n\r\n.caledarBtns:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.currentDay .dayTitle {\r\n  font-weight: bold;\r\n}\r\n\r\n.currentDay {\r\n  background-color: #e3f3fa;\r\n}\r\n\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.badge-pill {\r\n  padding: 3px 1em;\r\n  font-size: 0.8em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.searchContiner {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.searchListContainer {\r\n  background: #fff;\r\n  border: 1px solid #ccc;\r\n  border-bottom: none;\r\n}\r\n\r\n.searchListItem {\r\n  background: white;\r\n  border-bottom: 1px solid #ccc;\r\n  padding-left: 8px;\r\n}\r\n\r\n.badge-light {\r\n  background-color: #999999;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.min-width-full {\r\n  min-width: 100%;\r\n}\r\n","import { Component, Event, EventEmitter, Host, Prop, h, State, Listen, Watch } from '@stencil/core';\r\nimport { ToBeAssignedService } from '../../../services/toBeAssigned.service';\r\nimport { dateToFormattedString } from '../../../utils/utils';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'igl-cal-header',\r\n  styleUrl: 'igl-cal-header.css',\r\n  scoped: true,\r\n})\r\nexport class IglCalHeader {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true }) gotoRoomEvent: EventEmitter<{\r\n    [key: string]: any;\r\n  }>;\r\n  @Event({ bubbles: true, composed: true }) gotoToBeAssignedDate: EventEmitter<{\r\n    [key: string]: any;\r\n  }>;\r\n  @Prop() calendarData: { [key: string]: any };\r\n  @Prop() today: String;\r\n  @Prop() propertyid: number;\r\n  @Prop() unassignedDates;\r\n  @Prop() to_date: string;\r\n  @State() renderAgain: boolean = false;\r\n  @State() unassignedRoomsNumber: any = {};\r\n  private searchValue: string = '';\r\n  private searchList: { [key: string]: any }[] = [];\r\n  private roomsList: { [key: string]: any }[] = [];\r\n  private toBeAssignedService = new ToBeAssignedService();\r\n  componentWillLoad() {\r\n    try {\r\n      this.initializeRoomsList();\r\n\r\n      if (!this.calendarData.is_vacation_rental && Object.keys(this.unassignedDates).length > 0) {\r\n        this.fetchAndAssignUnassignedRooms();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in componentWillLoad:', error);\r\n    }\r\n  }\r\n  @Watch('unassignedDates')\r\n  handleCalendarDataChanged() {\r\n    this.fetchAndAssignUnassignedRooms();\r\n  }\r\n  private initializeRoomsList() {\r\n    this.roomsList = [];\r\n    this.calendarData.roomsInfo.forEach(category => {\r\n      this.roomsList = this.roomsList.concat(...category.physicalrooms);\r\n    });\r\n  }\r\n\r\n  private async fetchAndAssignUnassignedRooms() {\r\n    await this.assignRoomsToDate();\r\n  }\r\n\r\n  private async assignRoomsToDate() {\r\n    try {\r\n      const { fromDate, toDate, data } = this.unassignedDates;\r\n      let dt = new Date(fromDate);\r\n      dt.setHours(0);\r\n      dt.setMinutes(0);\r\n      dt.setSeconds(0);\r\n      let endDate = dt.getTime();\r\n      while (endDate <= new Date(toDate).getTime()) {\r\n        const selectedDate = moment(endDate).format('D_M_YYYY');\r\n        if (data[endDate]) {\r\n          const result = await this.toBeAssignedService.getUnassignedRooms(\r\n            this.propertyid,\r\n            dateToFormattedString(new Date(endDate)),\r\n            this.calendarData.roomsInfo,\r\n            this.calendarData.formattedLegendData,\r\n          );\r\n          this.unassignedRoomsNumber[selectedDate] = result.length;\r\n        } else if (this.unassignedRoomsNumber[selectedDate]) {\r\n          this.unassignedRoomsNumber[selectedDate] = this.unassignedRoomsNumber[selectedDate] - 1;\r\n        }\r\n        endDate = moment(endDate).add(1, 'days').toDate().getTime();\r\n        this.renderView();\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  @Listen('reduceAvailableUnitEvent', { target: 'window' })\r\n  handleReduceAvailableUnitEvent(event: CustomEvent<{ fromDate: string; toDate: string }>) {\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n    const { fromDate, toDate } = event.detail;\r\n    let endDate = new Date(fromDate).getTime();\r\n    while (endDate < new Date(toDate).getTime()) {\r\n      const selectedDate = moment(endDate).format('D_M_YYYY');\r\n      this.unassignedRoomsNumber[selectedDate] = this.unassignedRoomsNumber[selectedDate] - 1;\r\n      endDate = moment(endDate).add(1, 'days').toDate().getTime();\r\n    }\r\n    this.renderView();\r\n  }\r\n\r\n  showToBeAssigned(dayInfo) {\r\n    if (this.unassignedRoomsNumber[dayInfo.day] || 0) {\r\n      this.handleOptionEvent('showAssigned');\r\n      setTimeout(() => {\r\n        this.gotoToBeAssignedDate.emit({\r\n          key: 'gotoToBeAssignedDate',\r\n          data: dayInfo.currentDate,\r\n        });\r\n      }, 100);\r\n    } else {\r\n      // do nothing as the value is 0;\r\n    }\r\n  }\r\n\r\n  handleOptionEvent(key, data: any = '') {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  handleDateSelect(event: CustomEvent) {\r\n    if (Object.keys(event.detail).length > 0) {\r\n      this.handleOptionEvent('calendar', event.detail);\r\n    }\r\n  }\r\n\r\n  handleClearSearch() {\r\n    this.searchValue = '';\r\n    this.searchList = [];\r\n    this.renderView();\r\n  }\r\n\r\n  handleFilterRooms(event: Event) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    let value = inputElement.value.trim();\r\n    this.searchValue = value;\r\n    value = value.toLowerCase();\r\n    if (value === '') {\r\n      this.handleClearSearch();\r\n    } else {\r\n      this.searchList = this.roomsList.filter(room => room.name.toLocaleLowerCase().indexOf(value) != -1);\r\n    }\r\n    this.renderView();\r\n  }\r\n\r\n  handleScrollToRoom(roomId) {\r\n    this.handleClearSearch();\r\n    this.gotoRoomEvent.emit({ key: 'gotoRoom', roomId });\r\n  }\r\n\r\n  getStringDateFormat(dt) {\r\n    return dt.getFullYear() + '-' + (dt.getMonth() < 9 ? '0' : '') + (dt.getMonth() + 1) + '-' + (dt.getDate() <= 9 ? '0' : '') + dt.getDate();\r\n  }\r\n\r\n  getNewBookingModel() {\r\n    let today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    let from_date = this.getStringDateFormat(today);\r\n    today.setDate(today.getDate() + 1);\r\n    today.setHours(0, 0, 0, 0);\r\n    let to_date = this.getStringDateFormat(today);\r\n    return {\r\n      ID: '',\r\n      NAME: '',\r\n      EMAIL: '',\r\n      PHONE: '',\r\n      REFERENCE_TYPE: 'PHONE',\r\n      FROM_DATE: from_date, // \"2023-07-09\",\r\n      TO_DATE: to_date, // \"2023-07-11\",\r\n      roomsInfo: this.calendarData.roomsInfo,\r\n      TITLE: locales.entries.Lcz_NewBooking,\r\n      event_type: 'PLUS_BOOKING',\r\n      legendData: this.calendarData.formattedLegendData,\r\n      defaultDateRange: {\r\n        fromDate: new Date(from_date), //new Date(\"2023-09-10\"),\r\n        fromDateStr: '', //\"10 Sep 2023\",\r\n        toDate: new Date(to_date), //new Date(\"2023-09-15\"),\r\n        toDateStr: '', // \"15 Sep 2023\",\r\n        dateDifference: 0,\r\n        editabled: true,\r\n        message: '',\r\n      },\r\n    };\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"stickyCell align-items-center topLeftCell preventPageScroll\">\r\n          <div class=\"row justify-content-around no-gutters\">\r\n            {!this.calendarData.is_vacation_rental && (\r\n              <div\r\n                class=\"caledarBtns\"\r\n                onClick={() => this.handleOptionEvent('showAssigned')}\r\n                data-toggle=\"tooltip\"\r\n                data-placement=\"bottom\"\r\n                title={locales.entries.Lcz_UnassignedUnitsTooltip}\r\n              >\r\n                {/* <i class=\"la la-tasks\"></i> */}\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class=\"svg-icon\">\r\n                  <path\r\n                    fill=\"#6b6f82\"\r\n                    d=\"M448 160H320V128H448v32zM48 64C21.5 64 0 85.5 0 112v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zM448 352v32H192V352H448zM48 288c-26.5 0-48 21.5-48 48v64c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V336c0-26.5-21.5-48-48-48H48z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n            )}\r\n            <div class=\"caledarBtns\" onClick={() => this.handleOptionEvent('calendar')} data-toggle=\"tooltip\" data-placement=\"bottom\" title={locales.entries.Lcz_Navigate}>\r\n              {/* <i class=\"la la-calendar-o\"></i> */}\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" class={'svg-icon'}>\r\n                <path\r\n                  fill=\"#6b6f82\"\r\n                  d=\"M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H64C28.7 64 0 92.7 0 128v16 48V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 144 128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H152V24zM48 192H400V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192z\"\r\n                />\r\n              </svg>\r\n              {/* <input  type=\"date\" onChange={this.handleDateSelect.bind(this)} title=\"\" /> */}\r\n              <ir-date-picker\r\n                minDate={moment().add(-2, 'months').startOf('month').format('YYYY-MM-DD')}\r\n                autoApply\r\n                singleDatePicker\r\n                onDateChanged={evt => {\r\n                  console.log('evt', evt);\r\n                  this.handleDateSelect(evt);\r\n                }}\r\n                class=\"datePickerHidden\"\r\n              ></ir-date-picker>\r\n            </div>\r\n            <div class=\"caledarBtns\" onClick={() => this.handleOptionEvent('gotoToday')} data-toggle=\"tooltip\" data-placement=\"bottom\" title={locales.entries.Lcz_Today}>\r\n              {/* <i class=\"la la-clock-o\"></i> */}\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class=\"svg-icon\">\r\n                <path\r\n                  fill=\"#6b6f82\"\r\n                  d=\"M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z\"\r\n                />\r\n              </svg>\r\n            </div>\r\n            <div\r\n              class=\"caledarBtns\"\r\n              onClick={() => this.handleOptionEvent('add', this.getNewBookingModel())}\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              title={locales.entries.Lcz_CreateNewBooking}\r\n            >\r\n              {/* <i class=\"la la-plus\"></i> */}\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" class=\"svg-icon\">\r\n                <path\r\n                  fill=\"#6b6f82\"\r\n                  d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div class=\"row justify-content-around no-gutters searchContiner\">\r\n            <fieldset class={`form-group position-relative ${this.searchValue != '' ? 'show' : ''}`}>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control form-control-sm input-sm\"\r\n                id=\"iconLeft7\"\r\n                value={this.searchValue}\r\n                placeholder={locales.entries.Lcz_FindUnit}\r\n                onInput={event => this.handleFilterRooms(event)}\r\n              />\r\n              {this.searchValue !== '' ? (\r\n                <div\r\n                  class=\"form-control-position pointer\"\r\n                  onClick={() => this.handleClearSearch()}\r\n                  data-toggle=\"tooltip\"\r\n                  data-placement=\"top\"\r\n                  data-original-title=\"Clear Selection\"\r\n                >\r\n                  <i class=\"la la-close font-small-4\"></i>\r\n                </div>\r\n              ) : null}\r\n\r\n              {this.searchList.length ? (\r\n                <div class=\"position-absolute searchListContainer dropdown-menu dropdown-menu-left min-width-full\">\r\n                  {this.searchList.map(room => (\r\n                    <div class=\"searchListItem1 dropdown-item px-1 text-left pointer\" onClick={() => this.handleScrollToRoom(room.id)}>\r\n                      {room.name}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : null}\r\n            </fieldset>\r\n          </div>\r\n        </div>\r\n        <div class=\"stickyCell headersContainer\">\r\n          <div class=\"monthsContainer\">\r\n            {this.calendarData.monthsInfo.map(monthInfo => (\r\n              <div class=\"monthCell\" style={{ width: monthInfo.daysCount * 70 + 'px' }}>\r\n                <div class=\"monthTitle\">{monthInfo.monthName}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {this.calendarData.days.map(dayInfo => (\r\n            <div class={`headerCell align-items-center ${'day-' + dayInfo.day} ${dayInfo.day === this.today ? 'currentDay' : ''}`} data-day={dayInfo.day}>\r\n              {!this.calendarData.is_vacation_rental && (\r\n                <div class=\"preventPageScroll\">\r\n                  <span\r\n                    class={`badge badge-${this.unassignedRoomsNumber[dayInfo.day] || dayInfo.unassigned_units_nbr !== 0 ? 'info pointer' : 'light'} badge-pill`}\r\n                    onClick={() => this.showToBeAssigned(dayInfo)}\r\n                  >\r\n                    {this.unassignedRoomsNumber[dayInfo.day] || dayInfo.unassigned_units_nbr}\r\n                  </span>\r\n                </div>\r\n              )}\r\n              <div class=\"dayTitle\">{dayInfo.dayDisplayName}</div>\r\n              <div class=\"dayCapacityPercent\">{dayInfo.occupancy}%</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n/* Legend */\r\n\r\n.legendHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.legendCloseBtn {\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 0;\r\n  cursor: pointer;\r\n  font-size: 1.75em;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 3px;\r\n  transform: translateY(-50%);\r\n}\r\n\r\n.legendCloseBtn:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n\r\n.legendRow {\r\n  position: relative;\r\n  vertical-align: middle;\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\n.legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n.legend_skew,\r\n.legend_skew-bordered,\r\n.legend_skewsplit {\r\n  transform: skew(-30deg);\r\n  width: 15px;\r\n  height: 16px;\r\n}\r\n.legend_skew-bordered {\r\n  border: 1px solid black;\r\n}\r\n\r\n.legend_circle {\r\n  border-radius: 100%;\r\n  width: 10px;\r\n  height: 10px;\r\n  margin: 3px 3px 3px 2px;\r\n}\r\n\r\n.legend_skewsplit {\r\n  border-right: 2px solid #000000;\r\n}\r\n.headerCell .blueColor {\r\n  background-color: #31bef1;\r\n}\r\n.greenColor {\r\n  background-color: #45b16d;\r\n}\r\n.yellowColor {\r\n  background-color: #f4d552;\r\n}\r\n.greyColor {\r\n  background-color: #a0a0a0;\r\n}\r\n.redColor {\r\n  background-color: #f34752;\r\n}\r\n.pinkColor {\r\n  background-color: #f9b4b7;\r\n}\r\n\r\n/* Legend Calendar */\r\n\r\n.legendCalendar .legendRow {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.legendCalendar .legendRow:first-child .legendCal {\r\n  background-color: #ececec;\r\n}\r\n\r\n.legendCalendar .legendRow div {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.total-availability {\r\n  font-size: 1em !important;\r\n}\r\n.legendCalendar .legendCal {\r\n  width: 80px;\r\n  height: 25px;\r\n  text-align: center;\r\n  display: inline-grid !important;\r\n  align-content: center;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.legendCalendar .legendCal .badge {\r\n  margin-top: 0.2rem;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.legendCalendar .legendCal.legendCal-h2 {\r\n  height: 40px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.br-t {\r\n  border-top: 1px solid #a0a0a0;\r\n}\r\n.br-s {\r\n  border-left: 1px solid #a0a0a0;\r\n  border-right: 1px solid #a0a0a0;\r\n}\r\n.br-bt {\r\n  border-bottom: 1px solid #a0a0a0;\r\n}\r\n\r\n.highphenLegend {\r\n  font-size: 0.9em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.highphenLegend::before {\r\n  width: 12px;\r\n  height: 0.5px;\r\n  content: ' ';\r\n  background-color: #000000;\r\n  vertical-align: middle;\r\n  display: inline-block;\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n/* .badge-pill {\r\n  padding: 4px 1.1em;\r\n  font-size: 0.9em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n} */\r\n.badge-pill {\r\n  padding: 3px 1em;\r\n  font-size: 0.8em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.headerCell {\r\n  width: 70px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.dayTitle {\r\n  font-size: 0.8em;\r\n  font-weight: 600;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n.dayCapacityPercent {\r\n  font-size: 0.75em;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -webkit-user-drag: none;\r\n}\r\n","import locales from '@/stores/locales.store';\r\nimport { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'igl-legends',\r\n  styleUrl: 'igl-legends.css',\r\n  scoped: true,\r\n})\r\nexport class IglLegends {\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Prop() legendData: { [key: string]: any };\r\n  handleOptionEvent(key, data = '') {\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"legendContainer pr-1 text-left\">\r\n        <div class={'w-full'}>\r\n          <div class={'w-full'}>\r\n            <div class=\"stickyHeader pt-1 \">\r\n              <p class=\"legendHeader\">{locales.entries.Lcz_Legend}</p>\r\n              <div class=\"legendCloseBtn\" onClick={() => this.handleOptionEvent('closeSideMenu')}>\r\n                {/* <i class=\"ft-chevrons-left\"></i> */}\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n                  <path\r\n                    fill=\"#6b6f82\"\r\n                    d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <hr />\r\n            </div>\r\n            <div class=\"mt-2 pl-1\">\r\n              {this.legendData.map(legendInfo => (\r\n                <div class=\"legendRow \">\r\n                  <div class={`legend_${legendInfo.design} mr-1`} style={{ backgroundColor: legendInfo.color }}></div>\r\n                  <span class=\"font-small-3\">{legendInfo.name}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <hr />\r\n            <div class=\"mt-2\">\r\n              <div class=\"legendCalendar\">\r\n                <div class=\"legendRow align-items-center\">\r\n                  <div class=\"legendCal br-t br-s br-bt\">\r\n                    <strong>MAR 2022</strong>\r\n                  </div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_MonthAndYear}</div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal headerCell align-items-center br-s\">\r\n                    <span class=\"badge badge-info  badge-pill\">3</span>\r\n                  </div>\r\n                  <div class=\"highphenLegend\">\r\n                    <div>{locales.entries.Lcz_UnassignedUnits}</div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal dayTitle br-s\">Fri 18</div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_Date}</div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal br-s br-bt dayCapacityPercent\">15%</div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_Occupancy}</div>\r\n                </div>\r\n                <div class=\"legendRow\">\r\n                  <div class=\"legendCal br-s br-bt  font-weight-bold total-availability\">20</div>\r\n                  <div class=\"highphenLegend\">{locales.entries.Lcz_TotalAvailability}</div>\r\n                </div>\r\n                {/* <div class=\"legendRow align-items-center\">\r\n                  <div class=\"legendCal br-s br-bt font-small-2\">15</div>\r\n                  <div class=\"highphenLegend\">\r\n                    <div>{locales.entries.Lcz_OfflineAvailability}</div>\r\n                  </div>\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.custom-dropdown {\r\n  cursor: pointer;\r\n  padding: 5px 10px;\r\n  width: min-content;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n.dropdown-toggle {\r\n  all: unset;\r\n  display: flex;\r\n  width: max-content;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.dropdown-menu {\r\n  max-height: 250px;\r\n  overflow-y: auto;\r\n}\r\n.tobeAssignedHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.closeBtn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.closeBtn:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n.dropdown-toggle::after {\r\n  content: none;\r\n  display: none;\r\n}\r\n.dropdown-toggle .caret-icon {\r\n  transition: transform 0.2s ease;\r\n}\r\n.show .caret-icon {\r\n  transform: rotate(-180deg);\r\n}\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Listen, Fragment, Watch } from '@stencil/core';\r\nimport { ToBeAssignedService } from '../../../services/toBeAssigned.service';\r\nimport { dateToFormattedString } from '../../../utils/utils';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { getUnassignedDates } from '@/stores/unassigned_dates.store';\r\n//import { updateCategories } from '../../../utils/events.utils';\r\n\r\n@Component({\r\n  tag: 'igl-to-be-assigned',\r\n  styleUrl: 'igl-to-be-assigned.css',\r\n  scoped: true,\r\n})\r\nexport class IglToBeAssigned {\r\n  @Prop() unassignedDatesProp: any;\r\n  @Prop() propertyid: number;\r\n  @Prop() from_date: string;\r\n  @Prop() to_date: string;\r\n  @State() loadingMessage: string;\r\n  @Prop({ mutable: true }) calendarData: { [key: string]: any };\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true })\r\n  reduceAvailableUnitEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) addToBeAssignedEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true })\r\n  highlightToBeAssignedBookingEvent: EventEmitter;\r\n  @State() showDatesList: boolean = false;\r\n  @State() renderAgain: boolean = false;\r\n  @State() orderedDatesList: any[] = [];\r\n  private isGotoToBeAssignedDate: boolean = false;\r\n  private isLoading: boolean = true;\r\n  private selectedDate = null;\r\n  private data: { [key: string]: any } = {};\r\n  private today = new Date();\r\n  private categoriesData: { [key: string]: any } = {};\r\n  private toBeAssignedService: ToBeAssignedService = new ToBeAssignedService();\r\n  private unassignedDates: any;\r\n  componentWillLoad() {\r\n    this.reArrangeData();\r\n    this.loadingMessage = locales.entries.Lcz_FetchingUnAssignedUnits;\r\n  }\r\n\r\n  @Watch('unassignedDatesProp')\r\n  handleUnassignedDatesToBeAssignedChange(newValue: any) {\r\n    const { fromDate, toDate, data } = newValue;\r\n    let dt = new Date(fromDate);\r\n    dt.setHours(0);\r\n    dt.setMinutes(0);\r\n    dt.setSeconds(0);\r\n    let endDate = dt.getTime();\r\n    while (endDate <= new Date(toDate).getTime()) {\r\n      if (data && !data[endDate] && this.unassignedDates.hasOwnProperty(endDate)) {\r\n        delete this.unassignedDates[endDate];\r\n      } else if (data && data[endDate]) {\r\n        this.unassignedDates[endDate] = data[endDate];\r\n      }\r\n      endDate = moment(endDate).add(1, 'days').toDate().getTime();\r\n    }\r\n    this.data = { ...this.unassignedDates };\r\n    this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\r\n\r\n    if (this.orderedDatesList.length) {\r\n      if (!this.data.hasOwnProperty(this.selectedDate)) {\r\n        this.selectedDate = this.orderedDatesList.length ? this.orderedDatesList[0] : null;\r\n      }\r\n      this.showForDate(this.selectedDate, false);\r\n      this.renderView();\r\n    } else {\r\n      this.selectedDate = null;\r\n    }\r\n  }\r\n  handleAssignUnit(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const data = opt.data;\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    if (opt.key === 'assignUnit') {\r\n      if (Object.keys(this.data[data.selectedDate].categories).length === 1) {\r\n        this.isLoading = true;\r\n      }\r\n      this.data[data.selectedDate].categories[data.RT_ID] = this.data[data.selectedDate].categories[data.RT_ID].filter(eventData => eventData.ID != data.assignEvent.ID);\r\n      this.calendarData = data.calendarData;\r\n      // this.calendarData.bookingEvents.push(data.assignEvent);\r\n\r\n      // if (!this.data[data.selectedDate].categories[data.RT_ID].length) {\r\n      //   delete this.data[data.selectedDate].categories[data.RT_ID];\r\n\r\n      //   if (!Object.keys(this.data[data.selectedDate].categories).length) {\r\n      //     delete this.data[data.selectedDate];\r\n      //     //this.orderedDatesList = this.orderedDatesList.filter(dateStamp => dateStamp != data.selectedDate);\r\n      //     //this.selectedDate = this.orderedDatesList.length ? this.orderedDatesList[0] : null;\r\n      //   }\r\n      // }\r\n      this.renderView();\r\n\r\n      // this.reduceAvailableUnitEvent.emit({key: \"reduceAvailableDays\", data: {selectedDate: data.selectedDate}});\r\n    }\r\n  }\r\n\r\n  async updateCategories(key, calendarData) {\r\n    try {\r\n      //console.log(\"called\")\r\n      let categorisedRooms = {};\r\n      const result = await this.toBeAssignedService.getUnassignedRooms(\r\n        this.propertyid,\r\n        dateToFormattedString(new Date(+key)),\r\n        calendarData.roomsInfo,\r\n        calendarData.formattedLegendData,\r\n      );\r\n      result.forEach(room => {\r\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\r\n          categorisedRooms[room.RT_ID] = [room];\r\n        } else {\r\n          categorisedRooms[room.RT_ID].push(room);\r\n        }\r\n      });\r\n      this.unassignedDates[key].categories = categorisedRooms;\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n\r\n  async reArrangeData() {\r\n    try {\r\n      this.today.setHours(0, 0, 0, 0);\r\n      this.calendarData.roomsInfo.forEach(category => {\r\n        this.categoriesData[category.id] = {\r\n          name: category.name,\r\n          roomsList: category.physicalrooms,\r\n          roomIds: category.physicalrooms.map(room => {\r\n            return room.id;\r\n          }),\r\n        };\r\n      });\r\n\r\n      this.selectedDate = null;\r\n      //this.unassignedDates = await this.toBeAssignedService.getUnassignedDates(this.propertyid, dateToFormattedString(new Date()), this.to_date);\r\n      this.unassignedDates = getUnassignedDates();\r\n      console.log(this.unassignedDates);\r\n\r\n      this.data = this.unassignedDates;\r\n      this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\r\n\r\n      if (!this.selectedDate && this.orderedDatesList.length) {\r\n        this.selectedDate = this.orderedDatesList[0];\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching unassigned dates:', error);\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n  async componentDidLoad() {\r\n    setTimeout(() => {\r\n      if (!this.isGotoToBeAssignedDate && Object.keys(this.unassignedDates).length > 0) {\r\n        //console.log(this.isGotoToBeAssignedDate);\r\n        const firstKey = Object.keys(this.unassignedDates)[0];\r\n\r\n        this.showForDate(firstKey);\r\n      }\r\n    }, 100);\r\n  }\r\n  @Listen('gotoToBeAssignedDate', { target: 'window' })\r\n  async gotoDate(event: CustomEvent) {\r\n    this.isGotoToBeAssignedDate = true;\r\n    this.showForDate(event.detail.data);\r\n    this.showDatesList = false;\r\n    this.renderView();\r\n  }\r\n\r\n  async showForDate(dateStamp, withLoading = true) {\r\n    try {\r\n      if (withLoading) {\r\n        this.isLoading = true;\r\n      }\r\n      if (this.showDatesList) {\r\n        this.showUnassignedDate();\r\n      }\r\n      await this.updateCategories(dateStamp, this.calendarData);\r\n      this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\r\n      this.showBookingPopup.emit({\r\n        key: 'calendar',\r\n        data: parseInt(dateStamp) - 86400000,\r\n      });\r\n      if (this.isGotoToBeAssignedDate) {\r\n        this.isGotoToBeAssignedDate = false;\r\n      }\r\n      this.isLoading = false;\r\n      this.selectedDate = dateStamp;\r\n      this.renderView();\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  getDay(dt) {\r\n    const currentDate = new Date(dt);\r\n    const locale = 'default'; //'en-US';\r\n    const dayOfWeek = this.getLocalizedDayOfWeek(currentDate, locale);\r\n    // const monthName = currentDate.toLocaleString(\"default\", { month: 'short' })\r\n    return dayOfWeek + ' ' + currentDate.getDate() + ', ' + currentDate.getFullYear();\r\n  }\r\n\r\n  getLocalizedDayOfWeek(date, locale) {\r\n    const options = { weekday: 'short' };\r\n    return date.toLocaleDateString(locale, options);\r\n  }\r\n\r\n  handleOptionEvent(key, data = '') {\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: 'highlightBookingId',\r\n      data: { bookingId: '----' },\r\n    });\r\n    this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  showUnassignedDate() {\r\n    this.showDatesList = !this.showDatesList;\r\n  }\r\n\r\n  getToBeAssignedEntities() {\r\n    // toBeAssignedEvents\r\n  }\r\n\r\n  getCategoryView() {\r\n    if (this.orderedDatesList.length && this.selectedDate && this.data[this.selectedDate]) {\r\n      return Object.entries(this.data[this.selectedDate].categories).map(([id, eventDatas], ind) => (\r\n        <igl-tba-category-view\r\n          calendarData={this.calendarData}\r\n          selectedDate={this.selectedDate}\r\n          categoryId={id}\r\n          categoryIndex={ind}\r\n          categoriesData={this.categoriesData}\r\n          eventDatas={eventDatas}\r\n          onAssignUnitEvent={evt => this.handleAssignUnit(evt)}\r\n        ></igl-tba-category-view>\r\n      ));\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"tobeAssignedContainer pr-1 text-left\">\r\n        <div>\r\n          <div>\r\n            <div class=\"stickyHeader pt-1\">\r\n              <p class=\"tobeAssignedHeader \">{locales.entries.Lcz_Assignments}</p>\r\n              {/* <div class=\"closeBtn pt-1\" onClick={() => this.handleOptionEvent('closeSideMenu')}>\r\n                <i class=\"ft-chevrons-left\"></i>\r\n              </div> */}\r\n              <ir-icon class=\"closeBtn pt-2\" onIconClickHandler={() => this.handleOptionEvent('closeSideMenu')}>\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n                  <path\r\n                    fill=\"#6b6f82\"\r\n                    d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n              <hr />\r\n              {Object.keys(this.data).length === 0 ? (\r\n                <p>{locales.entries.Lcz_AllBookingsAreAssigned}</p>\r\n              ) : this.isLoading ? (\r\n                <p>{this.loadingMessage}</p>\r\n              ) : (\r\n                <Fragment>\r\n                  {this.orderedDatesList.length ? (\r\n                    <div\r\n                      class={`custom-dropdown border border-light rounded text-center ` + (this.showDatesList ? 'show' : '')}\r\n                      id=\"dropdownMenuButton\"\r\n                      data-toggle=\"dropdown\"\r\n                      aria-haspopup=\"true\"\r\n                      aria-expanded=\"false\"\r\n                    >\r\n                      <div\r\n                        class={'dropdown-toggle'}\r\n                        //onClick={() => this.showUnassignedDate()}\r\n                      >\r\n                        <span class=\"font-weight-bold\">{this.data[this.selectedDate].dateStr}</span>\r\n                        <svg class={'caret-icon'} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" height={14} width={14}>\r\n                          <path\r\n                            fill=\"#6b6f82\"\r\n                            d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"\r\n                          />\r\n                        </svg>\r\n                      </div>\r\n                      <div class=\"dropdown-menu dropdown-menu-right full-width\" aria-labelledby=\"dropdownMenuButton\">\r\n                        {this.orderedDatesList?.map(ordDate => (\r\n                          <div class=\"dropdown-item pointer\" onClick={() => this.showForDate(ordDate)}>\r\n                            {this.data[ordDate].dateStr}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    locales.entries.Lcz_AllBookingsAreAssigned\r\n                  )}\r\n                </Fragment>\r\n              )}\r\n            </div>\r\n            {!this.isLoading && (\r\n              <div class=\"scrollabledArea\">\r\n                {this.orderedDatesList.length ? (\r\n                  Object.keys(this.data[this.selectedDate].categories).length ? (\r\n                    this.getCategoryView()\r\n                  ) : (\r\n                    <div class=\"mt-1\">{locales.entries.Lcz_AllAssignForThisDay}</div>\r\n                  )\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  overflow-x: hidden;\r\n}\r\n.confirmed {\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.bg-ir-green {\r\n  background: #629a4c;\r\n  height: 28px;\r\n  padding-top: 0 !important;\r\n  padding-bottom: 0 !important ;\r\n}\r\n.h-28 {\r\n  height: 2rem;\r\n}\r\n.bg-ir-red {\r\n  background: #ff4961;\r\n  height: 28px;\r\n  padding-top: 0 !important;\r\n  padding-bottom: 0 !important ;\r\n}\r\n.bg-ir-orange {\r\n  background: #ff9149;\r\n  height: 28px;\r\n  padding-top: 0 !important;\r\n  padding-bottom: 0 !important ;\r\n}\r\n.date-margin {\r\n  margin-right: 5px;\r\n}\r\n.pickup-margin {\r\n  margin-bottom: 7px !important;\r\n}\r\n.header-date {\r\n  padding-left: 5px !important;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n:root {\r\n  --sidebar-width: 50rem;\r\n}\r\n\r\n.sm-padding-right {\r\n  padding-right: 0.2rem;\r\n}\r\n.sm-padding-left {\r\n  padding-left: 0.2rem;\r\n}\r\n.sm-padding-top {\r\n  padding-top: 0.2rem;\r\n}\r\n.sm-padding-bottom {\r\n  padding-bottom: 0.2rem;\r\n}\r\n\r\n.info-notes {\r\n  list-style: none;\r\n  padding-left: 0;\r\n}\r\n.light-blue-bg {\r\n  background-color: #acecff;\r\n  padding: 0rem 0.1rem;\r\n}\r\n.iframeHeight {\r\n  height: 17.5rem;\r\n}\r\n","import { Component, Listen, h, Prop, Watch, State, Event, EventEmitter, Element, Fragment } from '@stencil/core';\r\nimport moment from 'moment';\r\nimport { _formatDate, _formatTime } from './functions';\r\nimport { Booking, Guest, Room } from '../../models/booking.dto';\r\nimport axios from 'axios';\r\nimport { BookingService } from '../../services/booking.service';\r\nimport { IglBookPropertyPayloadAddRoom, TIglBookPropertyPayload } from '../../models/igl-book-property';\r\nimport { RoomService } from '../../services/room.service';\r\nimport locales, { ILocale } from '@/stores/locales.store';\r\nimport { IToast } from '../ir-toast/toast';\r\nimport calendar_data from '@/stores/calendar-data';\r\n\r\n@Component({\r\n  tag: 'ir-booking-details',\r\n  styleUrl: 'ir-booking-details.css',\r\n  scoped: true,\r\n})\r\nexport class IrBookingDetails {\r\n  @Element() element: HTMLElement;\r\n  // Setup Data\r\n  @Prop() language: string = '';\r\n  @Prop() ticket: string = '';\r\n  @Prop() bookingNumber: string = '';\r\n  @Prop() baseurl: string = '';\r\n  @Prop() propertyid: number;\r\n  @Prop() is_from_front_desk = false;\r\n  // Booleans Conditions\r\n  @Prop() hasPrint: boolean = false;\r\n  @Prop() hasReceipt: boolean = false;\r\n  @Prop() hasDelete: boolean = false;\r\n  @Prop() hasMenu: boolean = false;\r\n\r\n  // Room Booleans\r\n  @Prop() hasRoomEdit: boolean = false;\r\n  @Prop() hasRoomDelete: boolean = false;\r\n  @Prop() hasRoomAdd: boolean = false;\r\n  @Prop() hasCheckIn: boolean = false;\r\n  @Prop() hasCheckOut: boolean = false;\r\n\r\n  @State() bookingItem: TIglBookPropertyPayload | null = null;\r\n  @State() statusData = [];\r\n  // Temp Status Before Save\r\n  @State() tempStatus: string = null;\r\n\r\n  @State() showPaymentDetails: any;\r\n  @State() bookingData: Booking;\r\n  @State() countryNodeList: any;\r\n  @State() calendarData: any = {};\r\n  // Guest Data\r\n  @State() guestData: Guest = null;\r\n  @State() defaultTexts: ILocale;\r\n  // Rerender Flag\r\n  @State() rerenderFlag = false;\r\n  @State() sidebarState: 'guest' | 'pickup' | null = null;\r\n  @State() isUpdateClicked = false;\r\n\r\n  // Payment Event\r\n  @Event() toast: EventEmitter<IToast>;\r\n  private bookingService = new BookingService();\r\n  private roomService = new RoomService();\r\n  componentDidLoad() {\r\n    if (this.baseurl) {\r\n      axios.defaults.baseURL = this.baseurl;\r\n    }\r\n    if (this.ticket !== '') {\r\n      this.initializeApp();\r\n    }\r\n  }\r\n  @Watch('ticket')\r\n  async ticketChanged() {\r\n    sessionStorage.setItem('token', JSON.stringify(this.ticket));\r\n    this.initializeApp();\r\n  }\r\n  setRoomsData(roomServiceResp) {\r\n    let roomsData: { [key: string]: any }[] = new Array();\r\n    if (roomServiceResp.My_Result?.roomtypes?.length) {\r\n      roomsData = roomServiceResp.My_Result.roomtypes;\r\n      roomServiceResp.My_Result.roomtypes.forEach(roomCategory => {\r\n        roomCategory.expanded = true;\r\n      });\r\n    }\r\n    this.calendarData.roomsInfo = roomsData;\r\n  }\r\n  async initializeApp() {\r\n    try {\r\n      const [roomResponse, languageTexts, countriesList, bookingDetails] = await Promise.all([\r\n        this.roomService.fetchData(this.propertyid, this.language),\r\n        this.roomService.fetchLanguage(this.language),\r\n        this.bookingService.getCountries(this.language),\r\n        this.bookingService.getExposedBooking(this.bookingNumber, this.language),\r\n      ]);\r\n      console.log(languageTexts);\r\n      if (!locales.entries) {\r\n        locales.entries = languageTexts.entries;\r\n        locales.direction = languageTexts.direction;\r\n      }\r\n      this.defaultTexts = languageTexts;\r\n      console.log(this.defaultTexts);\r\n      this.countryNodeList = countriesList;\r\n\r\n      const { allowed_payment_methods: paymentMethods, currency, allowed_booking_sources, adult_child_constraints, calendar_legends } = roomResponse['My_Result'];\r\n      this.calendarData = { currency, allowed_booking_sources, adult_child_constraints, legendData: calendar_legends };\r\n      console.log(this.calendarData);\r\n      this.setRoomsData(roomResponse);\r\n      // console.log(this.calendarData);\r\n      const paymentCodesToShow = ['001', '004'];\r\n      this.showPaymentDetails = paymentMethods.some(method => paymentCodesToShow.includes(method.code));\r\n\r\n      this.guestData = bookingDetails.guest;\r\n      this.bookingData = bookingDetails;\r\n      this.rerenderFlag = !this.rerenderFlag;\r\n    } catch (error) {\r\n      console.error('Error initializing app:', error);\r\n    }\r\n  }\r\n\r\n  @Listen('iconClickHandler')\r\n  handleIconClick(e) {\r\n    const target = e.target;\r\n    switch (target.id) {\r\n      case 'pickup':\r\n        this.sidebarState = 'pickup';\r\n        return;\r\n      case 'print':\r\n        window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.bookingData.system_id}&&PM=B&TK=${this.ticket}`);\r\n        return;\r\n      case 'receipt':\r\n        window.open(`https://x.igloorooms.com/manage/AcBookingEdit.aspx?IRID=${this.bookingData.system_id}&&PM=I&TK=${this.ticket}`);\r\n        return;\r\n      case 'book-delete':\r\n        return;\r\n      case 'menu':\r\n        window.location.href = 'https://x.igloorooms.com/manage/acbookinglist.aspx';\r\n        return;\r\n      case 'room-add':\r\n        (this.bookingItem as IglBookPropertyPayloadAddRoom) = {\r\n          ID: '',\r\n          NAME: this.bookingData.guest.last_name,\r\n          EMAIL: this.bookingData.guest.email,\r\n          PHONE: this.bookingData.guest.mobile,\r\n          REFERENCE_TYPE: '',\r\n          FROM_DATE: this.bookingData.from_date,\r\n          ARRIVAL: this.bookingData.arrival,\r\n          TO_DATE: this.bookingData.to_date,\r\n          TITLE: `${locales.entries.Lcz_AddingUnitToBooking}# ${this.bookingData.booking_nbr}`,\r\n          defaultDateRange: {\r\n            fromDate: new Date(this.bookingData.from_date),\r\n            fromDateStr: '',\r\n            toDate: new Date(this.bookingData.to_date),\r\n            toDateStr: '',\r\n            dateDifference: 0,\r\n            message: '',\r\n          },\r\n          event_type: 'ADD_ROOM',\r\n          BOOKING_NUMBER: this.bookingData.booking_nbr,\r\n          ADD_ROOM_TO_BOOKING: this.bookingData.booking_nbr,\r\n          GUEST: this.bookingData.guest,\r\n          message: this.bookingData.remark,\r\n          SOURCE: this.bookingData.source,\r\n          ROOMS: this.bookingData.rooms,\r\n        };\r\n        return;\r\n      case 'add-payment':\r\n        return;\r\n    }\r\n  }\r\n\r\n  @Listen('editSidebar')\r\n  handleEditSidebar() {\r\n    this.sidebarState = 'guest';\r\n  }\r\n  @Listen('selectChange')\r\n  handleSelectChange(e: CustomEvent<any>) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    const target = e.target;\r\n    this.tempStatus = (target as any).selectedValue;\r\n  }\r\n\r\n  openEditSidebar() {\r\n    const sidebar: any = document.querySelector('ir-sidebar#editGuestInfo');\r\n    sidebar.open = true;\r\n  }\r\n\r\n  _calculateNights(fromDate: string, toDate: string) {\r\n    // calculate the difference between the two dates\r\n    const diff = moment(toDate).diff(moment(fromDate), 'days');\r\n    // return the difference\r\n    return diff;\r\n  }\r\n\r\n  async updateStatus() {\r\n    if (this.tempStatus !== '' && this.tempStatus !== null) {\r\n      try {\r\n        this.isUpdateClicked = true;\r\n        await axios.post(`/Change_Exposed_Booking_Status?Ticket=${this.ticket}`, {\r\n          book_nbr: this.bookingNumber,\r\n          status: this.tempStatus,\r\n        });\r\n        this.toast.emit({\r\n          type: 'success',\r\n          description: '',\r\n          title: locales.entries.Lcz_StatusUpdatedSuccessfully,\r\n          position: 'top-right',\r\n        });\r\n        await this.resetBookingData();\r\n      } catch (error) {\r\n        console.log(error);\r\n      } finally {\r\n        this.isUpdateClicked = false;\r\n      }\r\n    } else {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        description: '',\r\n        title: locales.entries.Lcz_SelectStatus,\r\n        position: 'top-right',\r\n      });\r\n    }\r\n  }\r\n  @Listen('editInitiated')\r\n  handleEditInitiated(e: CustomEvent<TIglBookPropertyPayload>) {\r\n    this.bookingItem = e.detail;\r\n  }\r\n  handleCloseBookingWindow() {\r\n    this.bookingItem = null;\r\n  }\r\n  handleDeleteFinish(e: CustomEvent) {\r\n    this.bookingData = { ...this.bookingData, rooms: this.bookingData.rooms.filter(room => room.identifier !== e.detail) };\r\n  }\r\n  async resetBookingData() {\r\n    try {\r\n      const booking = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\r\n      this.bookingData = { ...booking };\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  @Listen('resetBookingData')\r\n  async handleResetBookingData(e: CustomEvent) {\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n    await this.resetBookingData();\r\n  }\r\n  render() {\r\n    if (!this.bookingData) {\r\n      return null;\r\n    }\r\n\r\n    let confirmationBG: string = '';\r\n    switch (this.bookingData.status.code) {\r\n      case '001':\r\n        confirmationBG = 'bg-ir-orange';\r\n        break;\r\n      case '002':\r\n        confirmationBG = 'bg-ir-green';\r\n        break;\r\n      case '003':\r\n        confirmationBG = 'bg-ir-red';\r\n        break;\r\n      case '004':\r\n        confirmationBG = 'bg-ir-red';\r\n        break;\r\n    }\r\n\r\n    return [\r\n      <Fragment>\r\n        {!this.is_from_front_desk && (\r\n          <Fragment>\r\n            <ir-toast></ir-toast>\r\n            <ir-interceptor></ir-interceptor>\r\n          </Fragment>\r\n        )}\r\n      </Fragment>,\r\n      <div class=\"fluid-container p-1\">\r\n        <div class=\"d-flex flex-column p-0 mx-0 flex-lg-row align-items-md-center justify-content-between mt-1\">\r\n          <div class=\"m-0 p-0 mb-1 mb-lg-0 mt-md-0  d-flex justify-content-start align-items-center\">\r\n            <p class=\"font-size-large m-0 p-0\">{`${this.defaultTexts.entries.Lcz_Booking}#${this.bookingNumber}`}</p>\r\n            <p class=\"m-0 p-0 ml-1\">\r\n              {!this.bookingData.is_direct && (\r\n                <span class=\"mr-1 m-0\">\r\n                  {this.bookingData.channel_booking_nbr} {/* format time */}\r\n                </span>\r\n              )}\r\n              <span class=\"date-margin\">{_formatDate(this.bookingData.booked_on.date)}</span>\r\n\r\n              {_formatTime(this.bookingData.booked_on.hour.toString(), +' ' + this.bookingData.booked_on.minute.toString())}\r\n            </p>\r\n          </div>\r\n\r\n          <div class=\"d-flex justify-content-end align-items-center\">\r\n            <span class={`confirmed btn-sm m-0 mr-2 ${confirmationBG}`}>{this.bookingData.status.description}</span>\r\n            {this.bookingData.allowed_actions.length > 0 && (\r\n              <Fragment>\r\n                <ir-select\r\n                  selectContainerStyle=\"h-28\"\r\n                  selectStyles=\"d-flex align-items-center h-28\"\r\n                  firstOption={locales.entries.Lcz_Select}\r\n                  id=\"update-status\"\r\n                  size=\"sm\"\r\n                  label-available=\"false\"\r\n                  data={this.bookingData.allowed_actions.map(b => ({ text: b.description, value: b.code }))}\r\n                  textSize=\"sm\"\r\n                  class=\"sm-padding-right m-0\"\r\n                ></ir-select>\r\n                <ir-button\r\n                  onClickHanlder={this.updateStatus.bind(this)}\r\n                  btn_styles=\"h-28\"\r\n                  isLoading={this.isUpdateClicked}\r\n                  btn_disabled={this.isUpdateClicked}\r\n                  id=\"update-status-btn\"\r\n                  size=\"sm\"\r\n                  text=\"Update\"\r\n                ></ir-button>\r\n              </Fragment>\r\n            )}\r\n            {this.hasReceipt && (\r\n              <ir-icon id=\"receipt\" class=\"mx-1\">\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" stroke=\"#104064\" height=\"24\" width=\"19\" viewBox=\"0 0 384 512\">\r\n                  <path\r\n                    fill=\"#104064\"\r\n                    d=\"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM80 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm16 96H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V256c0-17.7 14.3-32 32-32zm0 32v64H288V256H96zM240 416h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H240c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            )}\r\n            {this.hasPrint && (\r\n              <ir-icon id=\"print\" icon=\"ft-printer h1 color-ir-dark-blue-hover m-0 ml-1  pointer\">\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" width=\"24\" viewBox=\"0 0 512 512\">\r\n                  <path\r\n                    fill=\"#104064\"\r\n                    d=\"M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            )}\r\n            {this.hasDelete && <ir-icon id=\"book-delete\" icon=\"ft-trash-2 h1 danger m-0 ml-1 pointer\"></ir-icon>}\r\n            {this.hasMenu && (\r\n              <ir-icon id=\"menu\" class=\"m-0 ml-1 pointer\">\r\n                <svg slot=\"icon\" height={24} width={24} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\r\n                  <path\r\n                    fill=\"#104064\"\r\n                    d=\"M40 48C26.7 48 16 58.7 16 72v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V232c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V392c0-13.3-10.7-24-24-24H40z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      <div class=\"fluid-container p-1 text-left mx-0\">\r\n        <div class=\"row m-0\">\r\n          <div class=\"col-12 p-0 mx-0 pr-lg-1 col-lg-6\">\r\n            <div class=\"card\">\r\n              <div class=\"p-1\">\r\n                {this.bookingData.property.name || ''}\r\n                <ir-label label={`${this.defaultTexts.entries.Lcz_Source}:`} value={this.bookingData.origin.Label} imageSrc={this.bookingData.origin.Icon}></ir-label>\r\n                <ir-label\r\n                  label={`${this.defaultTexts.entries.Lcz_BookedBy}:`}\r\n                  value={`${this.bookingData.guest.first_name} ${this.bookingData.guest.last_name}`}\r\n                  iconShown={true}\r\n                ></ir-label>\r\n                <ir-label label={`${this.defaultTexts.entries.Lcz_Phone}:`} value={this.bookingData.guest.mobile}></ir-label>\r\n                <ir-label label={`${this.defaultTexts.entries.Lcz_Email}:`} value={this.bookingData.guest.email}></ir-label>\r\n                {this.bookingData.guest.alternative_email && (\r\n                  <ir-label label={`${this.defaultTexts.entries.Lcz_AlternativeEmail}:`} value={this.bookingData.guest.alternative_email}></ir-label>\r\n                )}\r\n                <ir-label label={`${this.defaultTexts.entries.Lcz_Address}:`} value={this.bookingData.guest.address}></ir-label>\r\n                <ir-label label={`${this.defaultTexts.entries.Lcz_ArrivalTime}:`} value={this.bookingData.arrival.description}></ir-label>\r\n                <ir-label label={`${this.defaultTexts.entries.Lcz_Note}:`} value={this.bookingData.remark}></ir-label>\r\n              </div>\r\n            </div>\r\n            <p class=\"font-size-large d-flex justify-content-between align-items-center mb-1\">\r\n              {`${_formatDate(this.bookingData.from_date)} - ${_formatDate(this.bookingData.to_date)} (${this._calculateNights(\r\n                this.bookingData.from_date,\r\n                this.bookingData.to_date,\r\n              )} ${\r\n                this._calculateNights(this.bookingData.from_date, this.bookingData.to_date) > 1\r\n                  ? ` ${this.defaultTexts.entries.Lcz_Nights}`\r\n                  : ` ${this.defaultTexts.entries.Lcz_Night}`\r\n              })`}\r\n              {this.hasRoomAdd && this.bookingData.is_direct && (\r\n                <ir-icon id=\"room-add\">\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"17.5\" viewBox=\"0 0 448 512\" slot=\"icon\">\r\n                    <path\r\n                      fill=\"#6b6f82\"\r\n                      d=\"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z\"\r\n                    />\r\n                  </svg>\r\n                </ir-icon>\r\n              )}\r\n            </p>\r\n            <div class=\"card p-0 mx-0\">\r\n              {this.bookingData.rooms.map((room: Room, index: number) => {\r\n                const mealCodeName = room.rateplan.name;\r\n                const myRoomTypeFoodCat = room.roomtype.name;\r\n\r\n                return [\r\n                  <ir-room\r\n                    defaultTexts={this.defaultTexts}\r\n                    legendData={this.calendarData.legendData}\r\n                    roomsInfo={this.calendarData.roomsInfo}\r\n                    myRoomTypeFoodCat={myRoomTypeFoodCat}\r\n                    mealCodeName={mealCodeName}\r\n                    currency={this.bookingData.currency.code}\r\n                    hasRoomEdit={this.hasRoomEdit && this.bookingData.status.code !== '003' && this.bookingData.is_direct}\r\n                    hasRoomDelete={this.hasRoomDelete && this.bookingData.status.code !== '003' && this.bookingData.is_direct}\r\n                    hasCheckIn={this.hasCheckIn}\r\n                    hasCheckOut={this.hasCheckOut}\r\n                    bookingEvent={this.bookingData}\r\n                    bookingIndex={index}\r\n                    ticket={this.ticket}\r\n                    onDeleteFinished={this.handleDeleteFinish.bind(this)}\r\n                  />,\r\n                  // add separator if not last item with marginHorizontal and alignCenter\r\n                  index !== this.bookingData.rooms.length - 1 && <hr class=\"mr-2 ml-2 my-0 p-0\" />,\r\n                ];\r\n              })}\r\n            </div>\r\n            {calendar_data.pickup_service.is_enabled && this.bookingData.is_direct && (\r\n              <div class=\"mb-1\">\r\n                <div class={'d-flex w-100 mb-1 align-items-center justify-content-between'}>\r\n                  <p class={'font-size-large p-0 m-0 '}>{locales.entries.Lcz_Pickup}</p>\r\n                  <ir-icon class=\"pointer \" id=\"pickup\">\r\n                    <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" width=\"20\" viewBox=\"0 0 512 512\">\r\n                      <path\r\n                        fill=\"#6b6f82\"\r\n                        d=\"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z\"\r\n                      />\r\n                    </svg>\r\n                  </ir-icon>\r\n                </div>\r\n                {this.bookingData.pickup_info && (\r\n                  <div class={'card'}>\r\n                    <div class={'p-1'}>\r\n                      <div class={'d-flex align-items-center py-0 my-0 pickup-margin'}>\r\n                        <p class={'font-weight-bold mr-1 py-0 my-0'}>\r\n                          {locales.entries.Lcz_Date}: <span class={'font-weight-normal'}>{moment(this.bookingData.pickup_info.date, 'YYYY-MM-DD').format('ddd, DD MM YYYY')}</span>\r\n                        </p>\r\n                        <p class={'font-weight-bold flex-fill py-0 my-0'}>\r\n                          {locales.entries.Lcz_Time}:<span class={'font-weight-normal'}> {`${this.bookingData.pickup_info.hour}:${this.bookingData.pickup_info.minute}`}</span>\r\n                        </p>\r\n                        <p class={'font-weight-bold py-0 my-0'}>\r\n                          {locales.entries.Lcz_DueUponBooking}:{' '}\r\n                          <span class={'font-weight-normal'}>\r\n                            {this.bookingData.pickup_info.currency.symbol}\r\n                            {this.bookingData.pickup_info.total}\r\n                          </span>\r\n                        </p>\r\n                      </div>\r\n                      <p class={'font-weight-bold py-0 my-0'}>\r\n                        {locales.entries.Lcz_FlightDetails}:<span class={'font-weight-normal'}> {`${this.bookingData.pickup_info.details}`}</span>\r\n                      </p>\r\n                      <p class={'py-0 my-0 pickup-margin'}>{`${this.bookingData.pickup_info.selected_option.vehicle.description}`}</p>\r\n                      <p class={'font-weight-bold py-0 my-0 pickup-margin'}>\r\n                        {locales.entries.Lcz_NbrOfVehicles}:<span class={'font-weight-normal'}> {`${this.bookingData.pickup_info.nbr_of_units}`}</span>\r\n                      </p>\r\n                      <p class={'small py-0 my-0 pickup-margin'}>\r\n                        {calendar_data.pickup_service.pickup_instruction.description}\r\n                        {calendar_data.pickup_service.pickup_cancelation_prepayment.description}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div class=\"col-12 p-0 m-0 pl-lg-1 col-lg-6\">\r\n            <ir-payment-details defaultTexts={this.defaultTexts} bookingDetails={this.bookingData}></ir-payment-details>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      <ir-sidebar\r\n        open={this.sidebarState !== null}\r\n        side={'right'}\r\n        id=\"editGuestInfo\"\r\n        onIrSidebarToggle={e => {\r\n          e.stopImmediatePropagation();\r\n          e.stopPropagation();\r\n          this.sidebarState = null;\r\n        }}\r\n        showCloseButton={false}\r\n      >\r\n        {this.sidebarState === 'guest' && (\r\n          <ir-guest-info\r\n            booking_nbr={this.bookingNumber}\r\n            defaultTexts={this.defaultTexts}\r\n            email={this.bookingData?.guest.email}\r\n            language={this.language}\r\n            onCloseSideBar={() => (this.sidebarState = null)}\r\n          ></ir-guest-info>\r\n        )}\r\n        {this.sidebarState === 'pickup' && (\r\n          <ir-pickup\r\n            defaultPickupData={this.bookingData.pickup_info}\r\n            bookingNumber={this.bookingData.booking_nbr}\r\n            numberOfPersons={this.bookingData.occupancy.adult_nbr + this.bookingData.occupancy.children_nbr}\r\n            onCloseModal={() => (this.sidebarState = null)}\r\n          ></ir-pickup>\r\n        )}\r\n      </ir-sidebar>,\r\n      <Fragment>\r\n        {this.bookingItem && (\r\n          <igl-book-property\r\n            allowedBookingSources={this.calendarData.allowed_booking_sources}\r\n            adultChildConstraints={this.calendarData.adult_child_constraints}\r\n            showPaymentDetails={this.showPaymentDetails}\r\n            countryNodeList={this.countryNodeList}\r\n            currency={this.calendarData.currency}\r\n            language={this.language}\r\n            propertyid={this.propertyid}\r\n            bookingData={this.bookingItem}\r\n            onCloseBookingWindow={() => this.handleCloseBookingWindow()}\r\n          ></igl-book-property>\r\n        )}\r\n      </Fragment>,\r\n    ];\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n}\r\n\r\n.close-icon {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 33px;\r\n  outline: none;\r\n}\r\n.close {\r\n  float: right;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #000;\r\n  text-shadow: 0 1px 0 #fff;\r\n  opacity: 0.5;\r\n\r\n  padding: 0;\r\n  background-color: transparent;\r\n  border: 0;\r\n  appearance: none;\r\n}\r\n.card {\r\n  top: 0;\r\n  z-index: 1000;\r\n}\r\n.card-title {\r\n  border-bottom: 1px solid #e4e5ec;\r\n  width: 100%;\r\n}\r\n.irfontgreen {\r\n  color: #0e930e;\r\n}\r\n.currency {\r\n  display: block;\r\n  position: absolute;\r\n  margin: 0;\r\n  padding: 0;\r\n  height: auto;\r\n  left: 10px;\r\n}\r\n.rate-input {\r\n  font-size: 14px;\r\n  line-height: 0;\r\n  padding: 0;\r\n  height: 0;\r\n  border-left: 0;\r\n  border-radius: 0.25rem !important;\r\n}\r\n.rate-input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n}\r\n.new-currency {\r\n  color: #3b4781;\r\n  border: 1px solid #cacfe7;\r\n  font-size: 0.975rem;\r\n  height: 2rem;\r\n  background: white;\r\n  border-right: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\r\n}\r\n.input-group-prepend span[data-state='focus'] {\r\n  border-color: var(--blue);\r\n}\r\n.input-group-prepend span[data-disabled] {\r\n  background-color: #eceff1;\r\n  border-color: rgba(118, 118, 118, 0.3);\r\n}\r\n","import { Component, Host, Prop, State, h, Event, EventEmitter, Fragment } from '@stencil/core';\r\nimport axios from 'axios';\r\nimport { BookingService } from '../../services/booking.service';\r\nimport { convertDatePrice, formatDate, getCurrencySymbol, getDaysArray } from '../../utils/utils';\r\nimport { Booking, Day, IUnit, Room } from '../../models/booking.dto';\r\nimport { IRoomNightsDataEventPayload } from '../../models/property-types';\r\nimport { v4 } from 'uuid';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'ir-room-nights',\r\n  styleUrl: 'ir-room-nights.css',\r\n  scoped: true,\r\n})\r\nexport class IrRoomNights {\r\n  @Prop() bookingNumber: string;\r\n  @Prop() baseUrl: string;\r\n  @Prop() propertyId: number;\r\n  @Prop() language: string;\r\n  @Prop() identifier: string;\r\n  @Prop() toDate: string;\r\n  @Prop() fromDate: string;\r\n  @Prop() pool: string;\r\n  @Prop() ticket: string;\r\n\r\n  @State() bookingEvent: Booking;\r\n  @State() selectedRoom: Room;\r\n  @State() rates: Day[] = [];\r\n  @State() isLoading = false;\r\n  @State() initialLoading = false;\r\n  @State() inventory: number | null = null;\r\n  @State() isEndDateBeforeFromDate: boolean = false;\r\n  @State() defaultTotalNights = 0;\r\n  @State() isInputFocused = -1;\r\n\r\n  @Event() closeRoomNightsDialog: EventEmitter<IRoomNightsDataEventPayload>;\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  componentWillLoad() {\r\n    if (this.baseUrl) {\r\n      axios.defaults.baseURL = this.baseUrl;\r\n    }\r\n    this.init();\r\n  }\r\n\r\n  isButtonDisabled() {\r\n    return this.isLoading || this.rates.some(rate => rate.amount === -1) || this.inventory === 0 || this.inventory === null;\r\n  }\r\n  async init() {\r\n    try {\r\n      this.bookingEvent = await this.bookingService.getExposedBooking(this.bookingNumber, this.language);\r\n\r\n      if (this.bookingEvent) {\r\n        const filteredRooms = this.bookingEvent.rooms.filter(room => room.identifier === this.identifier);\r\n        this.selectedRoom = filteredRooms[0];\r\n\r\n        const lastDay = this.selectedRoom?.days[this.selectedRoom.days.length - 1];\r\n        //let first_rate = this.selectedRoom.days[0].amount;\r\n        if (moment(this.toDate).add(-1, 'days').isSame(moment(lastDay.date))) {\r\n          const amount = await this.fetchBookingAvailability(\r\n            this.fromDate,\r\n            this.selectedRoom.days[0].date,\r\n            this.selectedRoom.rateplan.id,\r\n            this.selectedRoom.rateplan.selected_variation.adult_child_offering,\r\n          );\r\n          const newDatesArr = getDaysArray(this.selectedRoom.days[0].date, this.fromDate);\r\n          this.isEndDateBeforeFromDate = true;\r\n          this.rates;\r\n          this.rates = [\r\n            ...newDatesArr.map(day => ({\r\n              amount,\r\n              date: day,\r\n            })),\r\n            ...this.selectedRoom.days,\r\n          ];\r\n        } else {\r\n          const amount = await this.fetchBookingAvailability(\r\n            lastDay.date,\r\n            moment(this.toDate, 'YYYY-MM-DD').add(-1, 'days').format('YYYY-MM-DD'),\r\n            this.selectedRoom.rateplan.id,\r\n            this.selectedRoom.rateplan.selected_variation.adult_child_offering,\r\n          );\r\n          const newDatesArr = getDaysArray(lastDay.date, this.toDate);\r\n          this.rates = [\r\n            ...this.selectedRoom.days,\r\n            ...newDatesArr.map(day => ({\r\n              amount,\r\n              date: day,\r\n            })),\r\n          ];\r\n        }\r\n        this.defaultTotalNights = this.rates.length - this.selectedRoom.days.length;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  handleInput(event: InputEvent, index: number) {\r\n    let inputElement = event.target as HTMLInputElement;\r\n    let inputValue = inputElement.value;\r\n    let days = [...this.rates];\r\n    inputValue = inputValue.replace(/[^0-9.]/g, '');\r\n    if (inputValue === '') {\r\n      days[index].amount = -1;\r\n    } else {\r\n      const decimalCheck = inputValue.split('.');\r\n      if (decimalCheck.length > 2) {\r\n        inputValue = inputValue.substring(0, inputValue.length - 1);\r\n        inputElement.value = inputValue;\r\n      } else if (decimalCheck.length === 2 && decimalCheck[1].length > 2) {\r\n        inputValue = `${decimalCheck[0]}.${decimalCheck[1].substring(0, 2)}`;\r\n        inputElement.value = inputValue;\r\n      }\r\n      if (!isNaN(Number(inputValue))) {\r\n        days[index].amount = Number(inputValue);\r\n      }\r\n    }\r\n    this.rates = days;\r\n    console.log(this.rates);\r\n  }\r\n  async fetchBookingAvailability(from_date: string, to_date: string, rate_plan_id: number, selected_variation: string) {\r\n    try {\r\n      this.initialLoading = true;\r\n      const bookingAvailability = await this.bookingService.getBookingAvailability(\r\n        from_date,\r\n        to_date,\r\n        this.propertyId,\r\n        {\r\n          adult: this.selectedRoom.rateplan.selected_variation.adult_nbr,\r\n          child: this.selectedRoom.rateplan.selected_variation.child_nbr,\r\n        },\r\n        this.language,\r\n        [this.selectedRoom.roomtype.id],\r\n        this.bookingEvent.currency,\r\n      );\r\n      this.inventory = bookingAvailability.roomtypes[0].inventory;\r\n      const rate_plan_index = bookingAvailability.roomtypes[0].rateplans.find(rate => rate.id === rate_plan_id);\r\n      const { amount } = rate_plan_index.variations.find(variation => variation.adult_child_offering === selected_variation);\r\n      return amount;\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.initialLoading = false;\r\n    }\r\n  }\r\n\r\n  renderInputField(index: number, currency_symbol: string, day: Day) {\r\n    return (\r\n      <fieldset class=\"col-2 ml-1 position-relative has-icon-left m-0 p-0 rate-input-container\">\r\n        <div class=\"input-group-prepend\">\r\n          <span\r\n            data-disabled={this.inventory === 0 || this.inventory === null}\r\n            data-state={this.isInputFocused === index ? 'focus' : ''}\r\n            class=\"input-group-text new-currency\"\r\n            id=\"basic-addon1\"\r\n          >\r\n            {currency_symbol}\r\n          </span>\r\n        </div>\r\n        <input\r\n          onFocus={() => (this.isInputFocused = index)}\r\n          onBlur={() => (this.isInputFocused = -1)}\r\n          disabled={this.inventory === 0 || this.inventory === null}\r\n          type=\"text\"\r\n          class=\"form-control pl-0 input-sm rate-input py-0 m-0 rounded-0 rateInputBorder\"\r\n          id={v4()}\r\n          value={day.amount > 0 ? day.amount : ''}\r\n          placeholder={locales.entries.Lcz_Rate || 'Rate'}\r\n          onInput={event => this.handleInput(event, index)}\r\n        />\r\n      </fieldset>\r\n    );\r\n  }\r\n  renderReadOnlyField(currency_symbol: string, day: Day) {\r\n    return <p class=\"col-9 ml-1 m-0 p-0\">{`${currency_symbol}${Number(day.amount).toFixed(2)}`}</p>;\r\n  }\r\n  renderRateFields(index: number, currency_symbol: string, day: Day) {\r\n    if (this.isEndDateBeforeFromDate) {\r\n      if (index < this.defaultTotalNights) {\r\n        return this.renderInputField(index, currency_symbol, day);\r\n      } else {\r\n        return this.renderReadOnlyField(currency_symbol, day);\r\n      }\r\n    } else {\r\n      return index < this.selectedRoom.days.length ? this.renderReadOnlyField(currency_symbol, day) : this.renderInputField(index, currency_symbol, day);\r\n    }\r\n  }\r\n  renderDates() {\r\n    const currency_symbol = getCurrencySymbol(this.bookingEvent.currency.code);\r\n    return (\r\n      <div class={'mt-2 m-0'}>\r\n        {this.rates?.map((day, index) => (\r\n          <div class={'row m-0 mt-1 align-items-center'}>\r\n            <p class={'col-2 m-0 p-0'}>{convertDatePrice(day.date)}</p>\r\n            {this.renderRateFields(index, currency_symbol, day)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  async handleRoomConfirmation() {\r\n    try {\r\n      this.isLoading = true;\r\n      let oldRooms = [...this.bookingEvent.rooms];\r\n      let selectedRoomIndex = oldRooms.findIndex(room => room.identifier === this.identifier);\r\n      if (selectedRoomIndex === -1) {\r\n        throw new Error('Invalid Pool');\r\n      }\r\n      oldRooms[selectedRoomIndex] = { ...oldRooms[selectedRoomIndex], days: this.rates, to_date: this.toDate, from_date: this.fromDate };\r\n      const body = {\r\n        assign_units: true,\r\n        check_in: true,\r\n        is_pms: true,\r\n        is_direct: true,\r\n        booking: {\r\n          booking_nbr: this.bookingNumber,\r\n          from_date: this.fromDate,\r\n          to_date: this.toDate,\r\n          remark: this.bookingEvent.remark,\r\n          property: this.bookingEvent.property,\r\n          source: this.bookingEvent.source,\r\n          currency: this.bookingEvent.currency,\r\n          arrival: this.bookingEvent.arrival,\r\n          guest: this.bookingEvent.guest,\r\n          rooms: oldRooms,\r\n        },\r\n      };\r\n      const { data } = await axios.post(`/DoReservation?Ticket=${this.ticket}`, body);\r\n      if (data.ExceptionMsg !== '') {\r\n        throw new Error(data.ExceptionMsg);\r\n      }\r\n      this.closeRoomNightsDialog.emit({ type: 'confirm', pool: this.pool });\r\n    } catch (error) {\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  render() {\r\n    if (!this.bookingEvent) {\r\n      return <p>{locales.entries.Lcz_Loading}</p>;\r\n    }\r\n    return (\r\n      <Host>\r\n        <div class=\"card position-sticky mb-0 shadow-none p-0 \">\r\n          <div class=\"d-flex mt-2 align-items-center justify-content-between \">\r\n            <h3 class=\"card-title text-left pb-1 font-medium-2 px-2\">\r\n              {locales.entries.Lcz_AddingRoomNightsTo} {this.selectedRoom?.roomtype?.name} {(this.selectedRoom?.unit as IUnit).name}\r\n            </h3>\r\n            <button type=\"button\" class=\"close close-icon\" onClick={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}>\r\n              <ir-icon icon=\"ft-x\" class={'m-0'}></ir-icon>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <section class={'text-left px-2'}>\r\n          <p class={'font-medium-1'}>\r\n            {`${locales.entries.Lcz_Booking}#`} {this.bookingNumber}\r\n          </p>\r\n          <p class={'font-weight-bold font-medium-1'}>{`${formatDate(this.fromDate, 'YYYY-MM-DD')} - ${formatDate(this.toDate, 'YYYY-MM-DD')}`}</p>\r\n          {this.initialLoading ? (\r\n            <p class={'mt-2 text-secondary'}>{locales.entries['Lcz_CheckingRoomAvailability ']}</p>\r\n          ) : (\r\n            <Fragment>\r\n              <p class={'font-medium-1 mb-0'}>\r\n                {`${this.selectedRoom.rateplan.name}`} {this.selectedRoom.rateplan.is_non_refundable && <span class={'irfontgreen'}>{locales.entries.Lcz_NonRefundable}</span>}\r\n              </p>\r\n              {(this.inventory === 0 || this.inventory === null) && <p class=\"font-medium-1 text danger\">{locales.entries.Lcz_NoAvailabilityForAdditionalNights}</p>}\r\n\r\n              {this.selectedRoom.rateplan.custom_text && <p class={'text-secondary mt-0'}>{this.selectedRoom.rateplan.custom_text}</p>}\r\n              {this.renderDates()}\r\n            </Fragment>\r\n          )}\r\n        </section>\r\n        <section class={'d-flex align-items-center mt-2 px-2'}>\r\n          <ir-button\r\n            btn_color=\"secondary\"\r\n            btn_disabled={this.isLoading}\r\n            text={locales?.entries.Lcz_Cancel}\r\n            class=\"full-width\"\r\n            btn_styles=\"justify-content-center\"\r\n            onClickHanlder={() => this.closeRoomNightsDialog.emit({ type: 'cancel', pool: this.pool })}\r\n          ></ir-button>\r\n\r\n          {this.inventory > 0 && this.inventory !== null && (\r\n            <ir-button\r\n              isLoading={this.isLoading}\r\n              text={locales?.entries.Lcz_Confirm}\r\n              btn_disabled={this.isButtonDisabled()}\r\n              class=\"ml-1 full-width\"\r\n              btn_styles=\"justify-content-center\"\r\n              onClickHanlder={this.handleRoomConfirmation.bind(this)}\r\n            ></ir-button>\r\n          )}\r\n        </section>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}