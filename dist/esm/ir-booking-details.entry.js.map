{"file":"ir-booking-details.entry.js","mappings":"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","names":["moment"],"sources":["src/components/ir-booking-details/ir-booking-details.css?tag=ir-booking-details","src/components/ir-booking-details/ir-booking-details.tsx"],"sourcesContent":[".confirmed {\r\n  /* background-color: #28c76f; */\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\nir-select#update-status {\r\n  transform: translateY(0.5rem);\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n:root {\r\n  --sidebar-width: 50rem;\r\n}\r\n\r\n.sm-padding-right {\r\n  padding-right: 0.2rem;\r\n}\r\n.sm-padding-left {\r\n  padding-left: 0.2rem;\r\n}\r\n.sm-padding-top {\r\n  padding-top: 0.2rem;\r\n}\r\n.sm-padding-bottom {\r\n  padding-bottom: 0.2rem;\r\n}\r\n\r\n.info-notes {\r\n  list-style: none;\r\n  padding-left: 0;\r\n}\r\n.light-blue-bg {\r\n  background-color: #acecff;\r\n  padding: 0rem 0.1rem;\r\n}\r\n.iframeHeight {\r\n  height: 17.5rem;\r\n}\r\n","import { Component, Listen, h, Prop, Watch, State, Event, EventEmitter, Element } from '@stencil/core';\r\nimport moment from 'moment';\r\nimport { guestInfo, selectOption } from '../../common/models';\r\nimport { _formatDate, _formatTime } from './functions';\r\nimport { Booking, Guest, Room } from '../../models/booking.dto';\r\nimport axios from 'axios';\r\nimport { BookingService } from '../../services/booking.service';\r\n\r\n@Component({\r\n  tag: 'ir-booking-details',\r\n  styleUrl: 'ir-booking-details.css',\r\n})\r\nexport class IrBookingDetails {\r\n  // Booking Details\r\n  @Element() element: HTMLElement;\r\n  @Prop({ mutable: true, reflect: true }) bookingDetails: any = null;\r\n  // Setup Data\r\n  @Prop() setupDataCountries: selectOption[] = null;\r\n  @Prop() setupDataCountriesCode: selectOption[] = null;\r\n  @Prop() languageAbreviation: string = '';\r\n  @Prop() language: string = '';\r\n  @Prop() ticket: string = '';\r\n  @Prop() bookingNumber: string = '';\r\n  @Prop() baseurl: string = '';\r\n  @Prop({ mutable: true }) dropdownStatuses: any = [];\r\n\r\n  @Prop() paymentDetailsUrl: string = '';\r\n  @Prop() paymentExceptionMessage: string = '';\r\n\r\n  // Statuses and Codes\r\n  @Prop() statusCodes: any = [];\r\n\r\n  // Booleans Conditions\r\n  @Prop() hasPrint: boolean = false;\r\n  @Prop() hasReceipt: boolean = false;\r\n  @Prop() hasDelete: boolean = false;\r\n  @Prop() hasMenu: boolean = false;\r\n\r\n  // Room Booleans\r\n  @Prop() hasRoomEdit: boolean = false;\r\n  @Prop() hasRoomDelete: boolean = false;\r\n  @Prop() hasRoomAdd: boolean = false;\r\n  @Prop() hasCheckIn: boolean = false;\r\n  @Prop() hasCheckOut: boolean = false;\r\n\r\n  @State() statusData = [];\r\n  // Temp Status Before Save\r\n  @State() tempStatus: string = null;\r\n\r\n  @State() bookingData: Booking;\r\n  // Guest Data\r\n  @State() guestData: Guest = null;\r\n\r\n  // Rerender Flag\r\n  @State() rerenderFlag = false;\r\n\r\n  // Event Emitters\r\n\r\n  // Guest Event\r\n  @Event() sendDataToServer: EventEmitter<guestInfo>;\r\n  @Event() handlePrintClick: EventEmitter;\r\n  @Event() handleReceiptClick: EventEmitter;\r\n  @Event() handleDeleteClick: EventEmitter;\r\n  @Event() handleMenuClick: EventEmitter;\r\n  // Room Event\r\n  @Event() handleRoomAdd: EventEmitter;\r\n  @Event() handleRoomEdit: EventEmitter;\r\n  @Event() handleRoomDelete: EventEmitter;\r\n  // Payment Event\r\n  @Event() handleAddPayment: EventEmitter;\r\n\r\n  private bookingService = new BookingService();\r\n  componentDidLoad() {\r\n    if (this.baseurl) {\r\n      axios.defaults.baseURL = this.baseurl;\r\n    }\r\n    if (this.ticket !== '') {\r\n      this.initializeApp();\r\n    }\r\n  }\r\n  @Watch('ticket')\r\n  async ticketChanged() {\r\n    sessionStorage.setItem('token', JSON.stringify(this.ticket));\r\n    this.initializeApp();\r\n  }\r\n  async initializeApp() {\r\n    const result = await this.bookingService.getExoposedBooking(this.bookingNumber, this.language);\r\n    this.guestData = result.guest;\r\n    this.bookingData = result;\r\n    this.rerenderFlag = !this.rerenderFlag;\r\n    console.log(this.bookingData);\r\n  }\r\n  @Listen('iconClickHandler')\r\n  handleIconClick(e) {\r\n    const target = e.target;\r\n\r\n    switch (target.id) {\r\n      case 'print':\r\n        this.handlePrintClick.emit();\r\n        return;\r\n      case 'receipt':\r\n        this.handleReceiptClick.emit();\r\n        return;\r\n      case 'book-delete':\r\n        this.handleDeleteClick.emit();\r\n        return;\r\n      case 'menu':\r\n        this.element.querySelector('ir-sidebar').open = true;\r\n\r\n        this.handleMenuClick.emit();\r\n        return;\r\n      case 'room-add':\r\n        this.handleRoomAdd.emit();\r\n        return;\r\n      case 'add-payment':\r\n        this.handleAddPayment.emit();\r\n        return;\r\n    }\r\n\r\n    const targetID: string = target.id;\r\n    if (targetID.includes('roomEdit')) {\r\n      const roomID = target.id.split('-')[1];\r\n      this.handleRoomEdit.emit(roomID);\r\n    } else if (target.id.includes('roomDelete')) {\r\n      const roomID = target.id.split('-')[1];\r\n      this.handleRoomDelete.emit(roomID);\r\n    }\r\n  }\r\n\r\n  @Listen('irSidebarToggle')\r\n  handleSidebarToggle() {\r\n    const sidebar: any = document.querySelector('ir-sidebar#editGuestInfo');\r\n    sidebar.open = false;\r\n  }\r\n\r\n  @Listen('editSidebar')\r\n  handleEditSidebar() {\r\n    this.openEditSidebar();\r\n  }\r\n\r\n  @Listen('submitForm')\r\n  handleFormSubmit(e) {\r\n    const data = e.detail;\r\n    // handle changes in the booking details\r\n    const bookingDetails = this.bookingDetails;\r\n    bookingDetails.My_Guest.FIRST_NAME = data.firstName;\r\n    bookingDetails.My_Guest.LAST_NAME = data.lastName;\r\n    bookingDetails.My_Guest.COUNTRY_ID = data.country;\r\n    bookingDetails.My_Guest.CITY = data.city;\r\n    bookingDetails.My_Guest.ADDRESS = data.address;\r\n    bookingDetails.My_Guest.MOBILE = data.mobile;\r\n    bookingDetails.My_Guest.PHONE_PREFIX = data.prefix;\r\n    bookingDetails.My_Guest.IS_NEWS_LETTER = data.newsletter;\r\n    bookingDetails.My_Guest.My_User.CURRENCY = data.currency;\r\n    bookingDetails.My_Guest.My_User.DISCLOSED_EMAIL = data.altEmail;\r\n    bookingDetails.My_Guest.My_User.PASSWORD = data.password;\r\n    bookingDetails.My_Guest.My_User.EMAIL = data.email;\r\n    this.bookingDetails = bookingDetails;\r\n    console.log('Form submitted with data: ', this.bookingDetails);\r\n    this.rerenderFlag = !this.rerenderFlag;\r\n    // close the sidebar\r\n    const sidebar: any = document.querySelector('ir-sidebar#editGuestInfo');\r\n    sidebar.open = false;\r\n    this.sendDataToServer.emit(this.bookingDetails);\r\n  }\r\n\r\n  @Listen('selectChange')\r\n  handleSelectChange(e) {\r\n    const target = e.target;\r\n    const targetID = target.id;\r\n    switch (targetID) {\r\n      case 'update-status':\r\n        this.tempStatus = e.detail;\r\n        break;\r\n    }\r\n  }\r\n\r\n  @Listen('clickHanlder')\r\n  handleClick(e) {\r\n    const target = e.target;\r\n    const targetID = target.id;\r\n    switch (targetID) {\r\n      case 'update-status-btn':\r\n        this.updateStatus();\r\n        break;\r\n    }\r\n  }\r\n\r\n  @Watch('dropdownStatuses')\r\n  watchDropdownStatuses(newValue: any, oldValue: any) {\r\n    console.log('The new value of dropdownStatuses is: ', newValue);\r\n    console.log('The old value of dropdownStatuses is: ', oldValue);\r\n    // Make the newValue in way that can be handled by the dropdown\r\n    try {\r\n      const _newValue = newValue.map(item => {\r\n        return {\r\n          value: item.CODE_NAME,\r\n          text: this._getBookingStatus(item.CODE_NAME, '_BOOK_STATUS'),\r\n        };\r\n      });\r\n\r\n      this.statusData = _newValue;\r\n      console.log('The new value of statusData is: ', this.statusData);\r\n      this.rerenderFlag = !this.rerenderFlag;\r\n    } catch (e) {\r\n      console.log('Error in watchDropdownStatuses: ', e);\r\n    }\r\n  }\r\n\r\n  openEditSidebar() {\r\n    const sidebar: any = document.querySelector('ir-sidebar#editGuestInfo');\r\n    sidebar.open = true;\r\n  }\r\n\r\n  _calculateNights(fromDate: string, toDate: string) {\r\n    // calculate the difference between the two dates\r\n    const diff = moment(toDate).diff(moment(fromDate), 'days');\r\n    // return the difference\r\n    return diff;\r\n  }\r\n\r\n  _getBookingStatus(statusCode: string, tableName: string) {\r\n    // get the status from the statusCode and tableName and also where the language is CODE_VALUE_${language}\r\n    const status = this.statusCodes.find((status: any) => status.CODE_NAME === statusCode && status.TBL_NAME === tableName);\r\n\r\n    const value = status[`CODE_VALUE_${this.languageAbreviation}`];\r\n    // return the status\r\n    return value;\r\n  }\r\n\r\n  updateStatus() {\r\n    const bookingDetails = this.bookingDetails;\r\n    bookingDetails.BOOK_STATUS_CODE = this.tempStatus;\r\n    this.bookingDetails = bookingDetails;\r\n    this.rerenderFlag = !this.rerenderFlag;\r\n    this.sendDataToServer.emit(this.bookingDetails);\r\n  }\r\n\r\n  render() {\r\n    if (!this.bookingData) {\r\n      return null;\r\n    }\r\n\r\n    let confirmationBG: string = '';\r\n    switch (this.bookingData.status.code) {\r\n      case '001':\r\n        confirmationBG = 'bg-ir-orange';\r\n        break;\r\n      case '002':\r\n        confirmationBG = 'bg-ir-green';\r\n        break;\r\n      case '003':\r\n        confirmationBG = 'bg-ir-red';\r\n        break;\r\n      case '004':\r\n        confirmationBG = 'bg-ir-red';\r\n        break;\r\n    }\r\n\r\n    return [\r\n      <ir-common></ir-common>,\r\n      <div class=\"fluid-container pt-1 mr-2 ml-2\">\r\n        <div class=\"row\">\r\n          <div class=\"col-lg-7 col-md-12 d-flex justify-content-start align-items-end\">\r\n            <div class=\"font-size-large sm-padding-right\">{`Booking#${this.bookingNumber}`}</div>\r\n            <div>\r\n              {/* format date */}@ {_formatDate(this.bookingData.booked_on.date)} {/* format time */}\r\n              {_formatTime(this.bookingData.booked_on.hour.toString(), +' ' + this.bookingData.booked_on.minute.toString())}\r\n            </div>\r\n          </div>\r\n          <div class=\"col-lg-5 col-md-12 d-flex justify-content-end align-items-center\">\r\n            <span class={`confirmed btn-sm mr-2 ${confirmationBG}`}>{this.bookingData.status.description}</span>\r\n            <ir-select id=\"update-status\" size=\"sm\" label-available=\"false\" data={this.statusData} textSize=\"sm\" class=\"sm-padding-right\"></ir-select>\r\n            <ir-button  id=\"update-status-btn\" size=\"sm\" text=\"Update\"></ir-button>\r\n            {this.hasReceipt && <ir-icon id=\"receipt\" icon=\"ft-file-text h1 color-ir-dark-blue-hover ml-1 pointer\"></ir-icon>}\r\n            {this.hasPrint && <ir-icon id=\"print\" icon=\"ft-printer h1 color-ir-dark-blue-hover ml-1 pointer\"></ir-icon>}\r\n            {this.hasDelete && <ir-icon id=\"book-delete\" icon=\"ft-trash-2 h1 danger ml-1 pointer\"></ir-icon>}\r\n            {this.hasMenu && <ir-icon id=\"menu\" icon=\"ft-list h1 color-ir-dark-blue-hover ml-1 pointer\"></ir-icon>}\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      <div class=\"fluid-container m-1\">\r\n        <div class=\"row m-0\">\r\n          <div class=\"col-lg-7 col-md-12 pl-0 pr-lg-1 p-0\">\r\n            <div class=\"card\">\r\n              <div class=\"p-1\">\r\n                {this.bookingData.property.name || ''}\r\n                <ir-label label=\"Source:\" value={this.bookingData.origin.Label} imageSrc={this.bookingData.origin.Icon}></ir-label>\r\n                <ir-label label=\"Booked by:\" value={`${this.bookingData.guest.first_name} ${this.bookingData.guest.last_name}`} iconShown={true}></ir-label>\r\n                <ir-label label=\"Phone:\" value={this.bookingData.guest.mobile}></ir-label>\r\n                <ir-label label=\"Email:\" value={this.bookingData.guest.email}></ir-label>\r\n                {/* <ir-label label=\"Alternate Email:\" value={this.bookingData.guest.email}></ir-label> */}\r\n                <ir-label label=\"Address:\" value={this.bookingData.guest.address}></ir-label>\r\n                <ir-label label=\"Arrival Time:\" value={this.bookingData.arrival.description}></ir-label>\r\n                <ir-label label=\"Notes:\" value={this.bookingData.remark}></ir-label>\r\n              </div>\r\n            </div>\r\n            <div class=\"font-size-large d-flex justify-content-between align-items-center ml-1 mb-1\">\r\n              {`${_formatDate(this.bookingData.from_date)} - ${_formatDate(this.bookingData.to_date)} (${this._calculateNights(\r\n                this.bookingData.from_date,\r\n                this.bookingData.to_date,\r\n              )} ${this._calculateNights(this.bookingData.from_date, this.bookingData.to_date) > 1 ? 'nights' : 'night'})`}\r\n              {this.hasRoomAdd && <ir-icon id=\"room-add\" icon=\"ft-plus h3 color-ir-dark-blue-hover pointer\"></ir-icon>}\r\n            </div>\r\n            <div class=\"card\">\r\n              {this.bookingData.rooms.map((room: Room, index: number) => {\r\n                const mealCodeName = room.rateplan.name;\r\n                const myRoomTypeFoodCat = room.roomtype.name;\r\n\r\n                return [\r\n                  <ir-room\r\n                    myRoomTypeFoodCat={myRoomTypeFoodCat}\r\n                    mealCodeName={mealCodeName}\r\n                    currency={this.bookingData.currency.code}\r\n                    hasRoomEdit={this.hasRoomEdit}\r\n                    hasRoomDelete={this.hasRoomDelete}\r\n                    hasCheckIn={this.hasCheckIn}\r\n                    hasCheckOut={this.hasCheckOut}\r\n                    item={room}\r\n                  />,\r\n                  // add separator if not last item with marginHorizontal and alignCenter\r\n                  index !== this.bookingData.rooms.length - 1 && <hr class=\"mr-2 ml-2 mt-1 mb-1\" />,\r\n                ];\r\n              })}\r\n            </div>\r\n          </div>\r\n          <div class=\"col-lg-5 col-md-12 pr-0 pl-0 pl-md-1\">\r\n            <ir-payment-details item={this.bookingDetails} paymentDetailsUrl={this.paymentDetailsUrl} paymentExceptionMessage={this.paymentExceptionMessage}></ir-payment-details>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      <ir-sidebar side={'right'} id=\"editGuestInfo\">\r\n        <ir-guest-info data={this.guestData} setupDataCountries={this.setupDataCountries} setupDataCountriesCode={this.setupDataCountriesCode}></ir-guest-info>\r\n      </ir-sidebar>,\r\n    ];\r\n  }\r\n}\r\n"],"version":3}