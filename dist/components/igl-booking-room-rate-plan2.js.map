{"file":"igl-booking-room-rate-plan2.js","mappings":"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","names":[],"sources":["src/components/igloo-calendar/igl-booking-room-rate-plan/igl-booking-room-rate-plan.css?tag=igl-booking-room-rate-plan&encapsulation=scoped","src/components/igloo-calendar/igl-booking-room-rate-plan/igl-booking-room-rate-plan.tsx"],"sourcesContent":["@import url(\"../../../assets/feather/style.min.css\");\r\n@import url(\"../../../assets/fontawesome/css/all.css\");\r\n@import url(\"../../../assets/line-awesome/css/line-awesome.min.css\");\r\n:host {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  Prop,\r\n  h,\r\n  State,\r\n  Event,\r\n  EventEmitter,\r\n  Watch,\r\n} from \"@stencil/core\";\r\nimport { v4 } from \"uuid\";\r\nimport { getCurrencySymbol } from \"../../../utils/utils\";\r\n@Component({\r\n  tag: \"igl-booking-room-rate-plan\",\r\n  styleUrl: \"igl-booking-room-rate-plan.css\",\r\n  scoped: true,\r\n})\r\nexport class IglBookingRoomRatePlan {\r\n  @Prop() defaultData: { [key: string]: any };\r\n  @Prop({ mutable: true }) ratePlanData: { [key: string]: any };\r\n  @Prop() totalAvailableRooms: number;\r\n  @Prop() ratePricingMode = [];\r\n  @Prop() currency: any;\r\n  @Prop({ reflect: true }) dateDifference: number;\r\n  @Prop() bookingType: string = \"PLUS_BOOKING\";\r\n  @State() sourceOption: number;\r\n  @Event() dataUpdateEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() gotoSplitPageTwoEvent: EventEmitter<{ [key: string]: any }>;\r\n  @State() selectedData: { [key: string]: any };\r\n  @State() plan: { [key: string]: any };\r\n  componentWillLoad() {\r\n    this.selectedData = {\r\n      ratePlanId: this.ratePlanData.id,\r\n      adult_child_offering:\r\n        this.ratePlanData.variations[0].adult_child_offering,\r\n      rateType: 1,\r\n      totalRooms: 0,\r\n      rate: this.ratePlanData.variations[0].amount,\r\n      ratePlanName: this.ratePlanData.name,\r\n      adultCount: this.ratePlanData.variations[0].adult_nbr,\r\n      childrenCount: this.ratePlanData.variations[0].child_nbr,\r\n      cancelation: this.ratePlanData.cancelation,\r\n      guarantee: this.ratePlanData.guarantee,\r\n      isRateModified: false,\r\n      defaultSelectedRate: 0,\r\n    };\r\n    if (this.defaultData) {\r\n      for (const [key, value] of Object.entries(this.defaultData)) {\r\n        this.selectedData[key] = value;\r\n      }\r\n    }\r\n  }\r\n\r\n  getSelectedOffering(value: any) {\r\n    return this.ratePlanData.variations.find(\r\n      (variation) => variation.adult_child_offering === value\r\n    );\r\n  }\r\n  @Watch(\"ratePlanData\")\r\n  async ratePlanDataChanged() {\r\n    this.selectedData = {\r\n      ...this.selectedData,\r\n      rate: this.handleRateDaysUpdate(),\r\n    };\r\n    this.dataUpdateEvent.emit({\r\n      key: \"roomRatePlanUpdate\",\r\n      changedKey: \"rate\",\r\n      data: this.selectedData,\r\n    });\r\n  }\r\n\r\n  handleRateDaysUpdate() {\r\n    let rate = this.selectedData.defaultSelectedRate;\r\n    if (this.selectedData.isRateModified) {\r\n      return this.selectedData.rateType === 1\r\n        ? rate * this.dateDifference\r\n        : rate;\r\n    }\r\n    return this.getSelectedOffering(this.selectedData.adult_child_offering)\r\n      .amount;\r\n  }\r\n\r\n  handleInput(event: InputEvent) {\r\n    this.selectedData.isRateModified = true;\r\n    const inputElement = event.target as HTMLInputElement;\r\n    let inputValue = inputElement.value;\r\n    const numericRegex = /^[0-9]+$/;\r\n    if (!numericRegex.test(inputValue)) {\r\n      inputValue = inputValue.replace(/[^0-9]/g, \"\");\r\n      inputElement.value = inputValue;\r\n    }\r\n    if (inputValue === inputElement.value) {\r\n      this.handleDataChange(\"rate\", event);\r\n    }\r\n  }\r\n\r\n  handleDataChange(key, evt) {\r\n    if (key === \"adult_child_offering\") {\r\n      const offering = this.getSelectedOffering(evt.target.value);\r\n      this.selectedData = {\r\n        ...this.selectedData,\r\n        [key]: evt.target.value,\r\n        adultCount: offering.adult_nbr,\r\n        childrenCount: offering.child_nbr,\r\n        rate: offering.amount,\r\n      };\r\n    } else {\r\n      this.selectedData = {\r\n        ...this.selectedData,\r\n        [key]: evt.target.value === \"\" ? 0 : parseInt(evt.target.value),\r\n      };\r\n    }\r\n    if (key === \"rate\" && evt.target.value === \"\") {\r\n      this.selectedData = {\r\n        ...this.selectedData,\r\n        totalRooms: 0,\r\n      };\r\n    }\r\n    if (key === \"rate\") {\r\n      this.selectedData.defaultSelectedRate =\r\n        this.selectedData.rateType === 1\r\n          ? parseInt(evt.target.value) / this.dateDifference\r\n          : parseInt(evt.target.value);\r\n    }\r\n    this.dataUpdateEvent.emit({\r\n      key: \"roomRatePlanUpdate\",\r\n      changedKey: key,\r\n      data: this.selectedData,\r\n    });\r\n  }\r\n\r\n  bookProperty() {\r\n    this.dataUpdateEvent.emit({ key: \"clearData\", data: this.selectedData });\r\n    this.handleDataChange(\"totalRooms\", { target: { value: \"1\" } });\r\n    this.gotoSplitPageTwoEvent.emit({ key: \"gotoSplitPage\", data: \"\" });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"row m-0 p-0\">\r\n          <div class=\"col-md-6 col-sm-12 p-0 align-self-center\">\r\n            <span>{this.ratePlanData.name}</span>\r\n            <ir-tooltip\r\n              message={\r\n                this.ratePlanData.cancelation + this.ratePlanData.guarantee\r\n              }\r\n            ></ir-tooltip>\r\n          </div>\r\n          <div class=\"col-md-6 col-sm-12 row pr-0\">\r\n            <div class=\"col-4\">\r\n              <fieldset class=\"position-relative\">\r\n                <select\r\n                  class=\"form-control input-sm\"\r\n                  id={v4()}\r\n                  onChange={(evt) =>\r\n                    this.handleDataChange(\"adult_child_offering\", evt)\r\n                  }\r\n                >\r\n                  {this.ratePlanData.variations.map((variation) => (\r\n                    <option\r\n                      value={variation.adult_child_offering}\r\n                      selected={\r\n                        this.selectedData.adultCount ===\r\n                        variation.adult_child_offering\r\n                      }\r\n                    >\r\n                      {variation.adult_child_offering}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </fieldset>\r\n            </div>\r\n            <div class=\"row col-6 m-0 p-0\">\r\n              <fieldset class=\"position-relative has-icon-left col-6 m-0 p-0\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control input-sm\"\r\n                  value={\r\n                    this.selectedData.rateType === 1\r\n                      ? this.selectedData.rate\r\n                      : this.selectedData.rate / this.dateDifference\r\n                  }\r\n                  id={v4()}\r\n                  placeholder=\"Rate\"\r\n                  onInput={(event: InputEvent) => this.handleInput(event)}\r\n                />\r\n                <span class=\"form-control-position\">\r\n                  {getCurrencySymbol(this.currency.code)}\r\n                </span>\r\n              </fieldset>\r\n              <fieldset class=\"position-relative m-0 p-0\">\r\n                <select\r\n                  class=\"form-control input-sm\"\r\n                  id={v4()}\r\n                  onChange={(evt) => this.handleDataChange(\"rateType\", evt)}\r\n                >\r\n                  {this.ratePricingMode.map((data) => (\r\n                    <option\r\n                      value={data.CODE_NAME}\r\n                      selected={this.selectedData.rateType === +data.CODE_NAME}\r\n                    >\r\n                      {data.CODE_VALUE_EN}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </fieldset>\r\n            </div>\r\n\r\n            {this.bookingType === \"PLUS_BOOKING\" ||\r\n            this.bookingType === \"ADD_ROOM\" ? (\r\n              <div class=\"col-2 m-0 p-0\">\r\n                <fieldset class=\"position-relative\">\r\n                  <select\r\n                    disabled={this.selectedData.rate === 0}\r\n                    class=\"form-control input-sm\"\r\n                    id={v4()}\r\n                    onChange={(evt) => this.handleDataChange(\"totalRooms\", evt)}\r\n                  >\r\n                    {Array.from(\r\n                      { length: this.totalAvailableRooms + 1 },\r\n                      (_, i) => i\r\n                    ).map((i) => (\r\n                      <option\r\n                        value={i}\r\n                        selected={this.selectedData.totalRooms === i}\r\n                      >\r\n                        {i}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </fieldset>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.bookingType === \"EDIT_BOOKING\" ? (\r\n              <div class=\"col-2 m-0 p-0 align-self-center\">\r\n                <fieldset class=\"position-relative\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"ratePlanGroup\"\r\n                    value=\"1\"\r\n                    onChange={(evt) => this.handleDataChange(\"totalRooms\", evt)}\r\n                    checked={this.selectedData.totalRooms === 1}\r\n                  />\r\n                </fieldset>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.bookingType === \"BAR_BOOKING\" ||\r\n            this.bookingType === \"SPLIT_BOOKING\" ? (\r\n              <button\r\n                disabled={this.selectedData.rate === 0}\r\n                type=\"button\"\r\n                class=\"btn mb-1 btn-primary btn-sm\"\r\n                onClick={() => this.bookProperty()}\r\n              >\r\n                Book\r\n              </button>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}