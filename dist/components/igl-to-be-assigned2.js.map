{"file":"igl-to-be-assigned2.js","mappings":";;;;;;;;;;AAaA,MAAM,YAAY,GAAoB,EAAE,CAAC;AACzC,IAAI,EAAE,KAAK,EAAE,gBAAgB,EAAE,GAAG,WAAW,CAAkB,YAAY,CAAC,CAAC;SAC7D,kBAAkB,CAAC,IAAqB;EACtD,gBAAgB,mCAAQ,gBAAgB,GAAK,IAAI,CAAE,CAAC;AACtD,CAAC;SACe,kBAAkB;EAChC,OAAO,gBAAgB,CAAC;AAC1B,CAAC;SACe,qBAAqB,CAAC,SAAiB,EAAE,OAAe;EACtE,MAAM,aAAa,GAAG,sBAAsB,CAAC,SAAS,CAAC,CAAC;EACxD,MAAM,WAAW,GAAG,sBAAsB,CAAC,OAAO,CAAC,CAAC;EACpD,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,GAAG;IACvC,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;IACnC,IAAI,aAAa,IAAI,YAAY,IAAI,YAAY,IAAI,WAAW,EAAE;MAChE,OAAO,gBAAgB,CAAC,GAAG,CAAC,CAAC;KAC9B;GACF,CAAC,CAAC;AACL,CAAC;AACD,SAAS,sBAAsB,CAAC,OAAe;EAC7C,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC;EAC/B,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;EAC1B,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC;AACxB;;ACnCA,MAAM,kBAAkB,GAAG,g/CAAg/C;;MCa9/C,eAAe;;;;;;;;;IAiBlB,2BAAsB,GAAY,KAAK,CAAC;IACxC,cAAS,GAAY,IAAI,CAAC;IAC1B,iBAAY,GAAG,IAAI,CAAC;IACpB,SAAI,GAA2B,EAAE,CAAC;IAClC,UAAK,GAAG,IAAI,IAAI,EAAE,CAAC;IACnB,mBAAc,GAA2B,EAAE,CAAC;IAC5C,wBAAmB,GAAwB,IAAI,mBAAmB,EAAE,CAAC;;;;;;;yBAT3C,KAAK;uBACP,KAAK;4BACF,EAAE;;EASrC,iBAAiB;IACf,IAAI,CAAC,aAAa,EAAE,CAAC;IACrB,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,OAAO,CAAC,2BAA2B,CAAC;GACnE;EAGD,uCAAuC,CAAC,QAAa;IACnD,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,QAAQ,CAAC;IAC5C,IAAI,EAAE,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC5B,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACf,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACjB,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACjB,IAAI,OAAO,GAAG,EAAE,CAAC,OAAO,EAAE,CAAC;IAC3B,OAAO,OAAO,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,EAAE;MAC5C,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;QAC1E,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;OACtC;WAAM,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE;QAChC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;OAC/C;MACD,OAAO,GAAGA,KAAM,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC,OAAO,EAAE,CAAC;KAC7D;IACD,IAAI,CAAC,IAAI,qBAAQ,IAAI,CAAC,eAAe,CAAE,CAAC;IACxC,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;IAEzF,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE;MAChC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;QAChD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;OACpF;MACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;MAC3C,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;SAAM;MACL,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC1B;GACF;EACD,gBAAgB,CAAC,KAA0C;IACzD,MAAM,GAAG,GAA2B,KAAK,CAAC,MAAM,CAAC;IACjD,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;IACtB,KAAK,CAAC,wBAAwB,EAAE,CAAC;IACjC,KAAK,CAAC,eAAe,EAAE,CAAC;IAExB,IAAI,GAAG,CAAC,GAAG,KAAK,YAAY,EAAE;MAC5B,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;QACrE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;OACvB;MACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;MACnK,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;;;;;;;;;;MAYtC,IAAI,CAAC,UAAU,EAAE,CAAC;;KAGnB;GACF;EAED,MAAM,gBAAgB,CAAC,GAAG,EAAE,YAAY;IACtC,IAAI;;MAEF,IAAI,gBAAgB,GAAG,EAAE,CAAC;MAC1B,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,mBAAmB,CAAC,kBAAkB,CAC9D,IAAI,CAAC,UAAU,EACf,qBAAqB,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EACrC,YAAY,CAAC,SAAS,EACtB,YAAY,CAAC,mBAAmB,CACjC,CAAC;MACF,MAAM,CAAC,OAAO,CAAC,IAAI;QACjB,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;UAChD,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SACvC;aAAM;UACL,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACzC;OACF,CAAC,CAAC;MACH,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,UAAU,GAAG,gBAAgB,CAAC;KACzD;IAAC,OAAO,KAAK,EAAE;;KAEf;GACF;EAED,MAAM,aAAa;IACjB,IAAI;MACF,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;MAChC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ;QAC1C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG;UACjC,IAAI,EAAE,QAAQ,CAAC,IAAI;UACnB,SAAS,EAAE,QAAQ,CAAC,aAAa;UACjC,OAAO,EAAE,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI;YACtC,OAAO,IAAI,CAAC,EAAE,CAAC;WAChB,CAAC;SACH,CAAC;OACH,CAAC,CAAC;MAEH,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;MAEzB,IAAI,CAAC,eAAe,GAAG,kBAAkB,EAAE,CAAC;MAC5C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;MAElC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC;MACjC,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;MAEzF,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE;QACtD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;OAC9C;KACF;IAAC,OAAO,KAAK,EAAE;MACd,OAAO,CAAC,KAAK,CAAC,kCAAkC,EAAE,KAAK,CAAC,CAAC;;KAE1D;GACF;EACD,MAAM,gBAAgB;IACpB,UAAU,CAAC;MACT,IAAI,CAAC,IAAI,CAAC,sBAAsB,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;;QAEhF,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;QAEtD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;OAC5B;KACF,EAAE,GAAG,CAAC,CAAC;GACT;EAED,MAAM,QAAQ,CAAC,KAAkB;IAC/B,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;IACnC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACpC,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;IAC3B,IAAI,CAAC,UAAU,EAAE,CAAC;GACnB;EAED,MAAM,WAAW,CAAC,SAAS,EAAE,WAAW,GAAG,IAAI;IAC7C,IAAI;MACF,IAAI,WAAW,EAAE;QACf,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;OACvB;MACD,IAAI,IAAI,CAAC,aAAa,EAAE;QACtB,IAAI,CAAC,kBAAkB,EAAE,CAAC;OAC3B;MACD,MAAM,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;MAC1D,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,oBAAoB,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;MACxE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC;QACzB,GAAG,EAAE,UAAU;QACf,IAAI,EAAE,QAAQ,CAAC,SAAS,CAAC,GAAG,QAAQ;OACrC,CAAC,CAAC;MACH,IAAI,IAAI,CAAC,sBAAsB,EAAE;QAC/B,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;OACrC;MACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;MACvB,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;MAC9B,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;IAAC,OAAO,KAAK,EAAE;;KAEf;GACF;EAED,MAAM,CAAC,EAAE;IACP,MAAM,WAAW,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC;IACjC,MAAM,MAAM,GAAG,SAAS,CAAC;IACzB,MAAM,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;;IAElE,OAAO,SAAS,GAAG,GAAG,GAAG,WAAW,CAAC,OAAO,EAAE,GAAG,IAAI,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC;GACnF;EAED,qBAAqB,CAAC,IAAI,EAAE,MAAM;IAChC,MAAM,OAAO,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC;IACrC,OAAO,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;GACjD;EAED,iBAAiB,CAAC,GAAG,EAAE,IAAI,GAAG,EAAE;IAC9B,IAAI,CAAC,iCAAiC,CAAC,IAAI,CAAC;MAC1C,GAAG,EAAE,oBAAoB;MACzB,IAAI,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;KAC5B,CAAC,CAAC;IACH,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,oBAAoB,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;IACxE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;GACtC;EAED,kBAAkB;IAChB,IAAI,CAAC,aAAa,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;GAC1C;EAED,uBAAuB;;GAEtB;EAED,eAAe;IACb,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;MACrF,OAAO,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE,GAAG,MACvF,6BACE,YAAY,EAAE,IAAI,CAAC,YAAY,EAC/B,YAAY,EAAE,IAAI,CAAC,YAAY,EAC/B,UAAU,EAAE,EAAE,EACd,aAAa,EAAE,GAAG,EAClB,cAAc,EAAE,IAAI,CAAC,cAAc,EACnC,UAAU,EAAE,UAAU,EACtB,iBAAiB,EAAE,GAAG,IAAI,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAC7B,CAC1B,CAAC,CAAC;KACJ;SAAM;MACL,OAAO,IAAI,CAAC;KACb;GACF;EAED,UAAU;IACR,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;GACtC;EAED,MAAM;;IACJ,QACE,EAAC,IAAI,IAAC,KAAK,EAAC,sCAAsC,IAChD,eACE,eACE,WAAK,KAAK,EAAC,mBAAmB,IAC5B,SAAG,KAAK,EAAC,qBAAqB,IAAE,OAAO,CAAC,OAAO,CAAC,eAAe,CAAK,EAIpE,eAAS,KAAK,EAAC,eAAe,EAAC,kBAAkB,EAAE,MAAM,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,IAC9F,WAAK,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAC,OAAO,EAAC,aAAa,EAAC,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,IAC7F,YACE,IAAI,EAAC,SAAS,EACd,CAAC,EAAC,+UAA+U,GACjV,CACE,CACE,EACV,aAAM,EACL,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,IAClC,aAAI,OAAO,CAAC,OAAO,CAAC,0BAA0B,CAAK,IACjD,IAAI,CAAC,SAAS,IAChB,SAAG,KAAK,EAAC,2BAA2B,IAClC,YAAM,KAAK,EAAC,KAAK,IAAE,IAAI,CAAC,cAAc,CAAQ,EAC9C,WAAK,KAAK,EAAC,MAAM,IACf,WAAK,KAAK,EAAC,KAAK,GAAO,EACvB,WAAK,KAAK,EAAC,KAAK,GAAO,EACvB,WAAK,KAAK,EAAC,KAAK,GAAO,CACnB,CACJ,KAEJ,EAAC,QAAQ,QACN,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAC3B,WACE,KAAK,EAAE,0DAA0D,IAAI,IAAI,CAAC,aAAa,GAAG,MAAM,GAAG,EAAE,CAAC,EACtG,EAAE,EAAC,oBAAoB,iBACX,UAAU,mBACR,MAAM,mBACN,OAAO,IAErB,WACE,KAAK,EAAE,iBAAiB,IAGxB,YAAM,KAAK,EAAC,kBAAkB,IAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,OAAO,CAAQ,EAC5E,WAAK,KAAK,EAAE,YAAY,EAAE,KAAK,EAAC,4BAA4B,EAAC,OAAO,EAAC,aAAa,EAAC,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,IACtG,YACE,IAAI,EAAC,SAAS,EACd,CAAC,EAAC,0KAA0K,GAC5K,CACE,CACF,EACN,WAAK,KAAK,EAAC,8CAA8C,qBAAiB,oBAAoB,IAC3F,MAAA,IAAI,CAAC,gBAAgB,0CAAE,GAAG,CAAC,OAAO,KACjC,WAAK,KAAK,EAAC,uBAAuB,EAAC,OAAO,EAAE,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IACxE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CACvB,CACP,CAAC,CACE,CACF,KAEN,OAAO,CAAC,OAAO,CAAC,0BAA0B,CAC3C,CACQ,CACZ,CACG,EACL,CAAC,IAAI,CAAC,SAAS,KACd,WAAK,KAAK,EAAC,iBAAiB,IACzB,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAC3B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,IACzD,IAAI,CAAC,eAAe,EAAE,KAEtB,WAAK,KAAK,EAAC,MAAM,IAAE,OAAO,CAAC,OAAO,CAAC,uBAAuB,CAAO,CAClE,IACC,IAAI,CACJ,CACP,CACG,CACF,CACD,EACP;GACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":["moment"],"sources":["src/stores/unassigned_dates.store.ts","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.css?tag=igl-to-be-assigned&encapsulation=scoped","src/components/igloo-calendar/igl-to-be-assigned/igl-to-be-assigned.tsx"],"sourcesContent":["import { createStore } from '@stencil/store';\r\n\r\ntype EventCategories = {};\r\n\r\ntype EventInfo = {\r\n  categories: EventCategories;\r\n  dateStr: string;\r\n};\r\n\r\ntype UnassignedDates = {\r\n  [timestamp: string]: EventInfo;\r\n};\r\n\r\nconst initialState: UnassignedDates = {};\r\nlet { state: unassigned_dates } = createStore<UnassignedDates>(initialState);\r\nexport function addUnassingedDates(data: UnassignedDates) {\r\n  unassigned_dates = { ...unassigned_dates, ...data };\r\n}\r\nexport function getUnassignedDates() {\r\n  return unassigned_dates;\r\n}\r\nexport function removeUnassignedDates(from_date: string, to_date: string) {\r\n  const fromTimestamp = convertToDateTimestamp(from_date);\r\n  const toTimestamp = convertToDateTimestamp(to_date);\r\n  Object.keys(unassigned_dates).forEach(key => {\r\n    const keyTimestamp = parseInt(key);\r\n    if (fromTimestamp <= keyTimestamp && keyTimestamp <= toTimestamp) {\r\n      delete unassigned_dates[key];\r\n    }\r\n  });\r\n}\r\nfunction convertToDateTimestamp(dateStr: string) {\r\n  const date = new Date(dateStr);\r\n  date.setHours(0, 0, 0, 0);\r\n  return date.getTime();\r\n}\r\n\r\nexport default unassigned_dates;\r\n",":host {\r\n  display: block;\r\n}\r\n.custom-dropdown {\r\n  cursor: pointer;\r\n  padding: 5px 10px;\r\n  width: min-content;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n.dropdown-toggle {\r\n  all: unset;\r\n  display: flex;\r\n  width: max-content;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.dropdown-menu {\r\n  max-height: 250px;\r\n  overflow-y: auto;\r\n}\r\n.tobeAssignedHeader {\r\n  font-weight: 500;\r\n  letter-spacing: 0.05rem;\r\n  font-size: 1.12rem;\r\n  padding-top: 5px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.closeBtn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n  line-height: 1em;\r\n  padding: 0.4rem;\r\n}\r\n\r\n.closeBtn:hover {\r\n  background-color: #f6f6f6;\r\n}\r\n.dropdown-toggle::after {\r\n  content: none;\r\n  display: none;\r\n}\r\n.dropdown-toggle .caret-icon {\r\n  transition: transform 0.2s ease;\r\n}\r\n.show .caret-icon {\r\n  transform: rotate(-180deg);\r\n}\r\n.stickyHeader {\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: #ffffff;\r\n  z-index: 1;\r\n}\r\n\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.dots {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 0 3px;\r\n  padding: 0;\r\n}\r\n\r\n.dot {\r\n  width: 5px;\r\n  height: 5px;\r\n  margin: 5px 4px 0;\r\n  background-color: #6b6f82;\r\n  border-radius: 50%;\r\n  animation: dotFlashing 1s infinite linear alternate;\r\n}\r\n\r\n.dot:nth-child(2) {\r\n  animation-delay: 0.2s;\r\n}\r\n\r\n.dot:nth-child(3) {\r\n  animation-delay: 0.4s;\r\n}\r\n\r\n@keyframes dotFlashing {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  50%,\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n","import { Component, Host, h, Prop, Event, EventEmitter, State, Listen, Fragment, Watch } from '@stencil/core';\r\nimport { ToBeAssignedService } from '../../../services/toBeAssigned.service';\r\nimport { dateToFormattedString } from '../../../utils/utils';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\nimport { getUnassignedDates } from '@/stores/unassigned_dates.store';\r\n//import { updateCategories } from '../../../utils/events.utils';\r\n\r\n@Component({\r\n  tag: 'igl-to-be-assigned',\r\n  styleUrl: 'igl-to-be-assigned.css',\r\n  scoped: true,\r\n})\r\nexport class IglToBeAssigned {\r\n  @Prop() unassignedDatesProp: any;\r\n  @Prop() propertyid: number;\r\n  @Prop() from_date: string;\r\n  @Prop() to_date: string;\r\n  @State() loadingMessage: string;\r\n  @Prop({ mutable: true }) calendarData: { [key: string]: any };\r\n  @Event() optionEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event({ bubbles: true, composed: true })\r\n  reduceAvailableUnitEvent: EventEmitter<{ [key: string]: any }>;\r\n  @Event() showBookingPopup: EventEmitter;\r\n  @Event({ bubbles: true, composed: true }) addToBeAssignedEvent: EventEmitter;\r\n  @Event({ bubbles: true, composed: true })\r\n  highlightToBeAssignedBookingEvent: EventEmitter;\r\n  @State() showDatesList: boolean = false;\r\n  @State() renderAgain: boolean = false;\r\n  @State() orderedDatesList: any[] = [];\r\n  private isGotoToBeAssignedDate: boolean = false;\r\n  private isLoading: boolean = true;\r\n  private selectedDate = null;\r\n  private data: { [key: string]: any } = {};\r\n  private today = new Date();\r\n  private categoriesData: { [key: string]: any } = {};\r\n  private toBeAssignedService: ToBeAssignedService = new ToBeAssignedService();\r\n  private unassignedDates: any;\r\n  componentWillLoad() {\r\n    this.reArrangeData();\r\n    this.loadingMessage = locales.entries.Lcz_FetchingUnAssignedUnits;\r\n  }\r\n\r\n  @Watch('unassignedDatesProp')\r\n  handleUnassignedDatesToBeAssignedChange(newValue: any) {\r\n    const { fromDate, toDate, data } = newValue;\r\n    let dt = new Date(fromDate);\r\n    dt.setHours(0);\r\n    dt.setMinutes(0);\r\n    dt.setSeconds(0);\r\n    let endDate = dt.getTime();\r\n    while (endDate <= new Date(toDate).getTime()) {\r\n      if (data && !data[endDate] && this.unassignedDates.hasOwnProperty(endDate)) {\r\n        delete this.unassignedDates[endDate];\r\n      } else if (data && data[endDate]) {\r\n        this.unassignedDates[endDate] = data[endDate];\r\n      }\r\n      endDate = moment(endDate).add(1, 'days').toDate().getTime();\r\n    }\r\n    this.data = { ...this.unassignedDates };\r\n    this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\r\n\r\n    if (this.orderedDatesList.length) {\r\n      if (!this.data.hasOwnProperty(this.selectedDate)) {\r\n        this.selectedDate = this.orderedDatesList.length ? this.orderedDatesList[0] : null;\r\n      }\r\n      this.showForDate(this.selectedDate, false);\r\n      this.renderView();\r\n    } else {\r\n      this.selectedDate = null;\r\n    }\r\n  }\r\n  handleAssignUnit(event: CustomEvent<{ [key: string]: any }>) {\r\n    const opt: { [key: string]: any } = event.detail;\r\n    const data = opt.data;\r\n    event.stopImmediatePropagation();\r\n    event.stopPropagation();\r\n\r\n    if (opt.key === 'assignUnit') {\r\n      if (Object.keys(this.data[data.selectedDate].categories).length === 1) {\r\n        this.isLoading = true;\r\n      }\r\n      this.data[data.selectedDate].categories[data.RT_ID] = this.data[data.selectedDate].categories[data.RT_ID].filter(eventData => eventData.ID != data.assignEvent.ID);\r\n      this.calendarData = data.calendarData;\r\n      // this.calendarData.bookingEvents.push(data.assignEvent);\r\n\r\n      // if (!this.data[data.selectedDate].categories[data.RT_ID].length) {\r\n      //   delete this.data[data.selectedDate].categories[data.RT_ID];\r\n\r\n      //   if (!Object.keys(this.data[data.selectedDate].categories).length) {\r\n      //     delete this.data[data.selectedDate];\r\n      //     //this.orderedDatesList = this.orderedDatesList.filter(dateStamp => dateStamp != data.selectedDate);\r\n      //     //this.selectedDate = this.orderedDatesList.length ? this.orderedDatesList[0] : null;\r\n      //   }\r\n      // }\r\n      this.renderView();\r\n\r\n      // this.reduceAvailableUnitEvent.emit({key: \"reduceAvailableDays\", data: {selectedDate: data.selectedDate}});\r\n    }\r\n  }\r\n\r\n  async updateCategories(key, calendarData) {\r\n    try {\r\n      //console.log(\"called\")\r\n      let categorisedRooms = {};\r\n      const result = await this.toBeAssignedService.getUnassignedRooms(\r\n        this.propertyid,\r\n        dateToFormattedString(new Date(+key)),\r\n        calendarData.roomsInfo,\r\n        calendarData.formattedLegendData,\r\n      );\r\n      result.forEach(room => {\r\n        if (!categorisedRooms.hasOwnProperty(room.RT_ID)) {\r\n          categorisedRooms[room.RT_ID] = [room];\r\n        } else {\r\n          categorisedRooms[room.RT_ID].push(room);\r\n        }\r\n      });\r\n      this.unassignedDates[key].categories = categorisedRooms;\r\n    } catch (error) {\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n\r\n  async reArrangeData() {\r\n    try {\r\n      this.today.setHours(0, 0, 0, 0);\r\n      this.calendarData.roomsInfo.forEach(category => {\r\n        this.categoriesData[category.id] = {\r\n          name: category.name,\r\n          roomsList: category.physicalrooms,\r\n          roomIds: category.physicalrooms.map(room => {\r\n            return room.id;\r\n          }),\r\n        };\r\n      });\r\n\r\n      this.selectedDate = null;\r\n      //this.unassignedDates = await this.toBeAssignedService.getUnassignedDates(this.propertyid, dateToFormattedString(new Date()), this.to_date);\r\n      this.unassignedDates = getUnassignedDates();\r\n      console.log(this.unassignedDates);\r\n\r\n      this.data = this.unassignedDates;\r\n      this.orderedDatesList = Object.keys(this.data).sort((a, b) => parseInt(a) - parseInt(b));\r\n\r\n      if (!this.selectedDate && this.orderedDatesList.length) {\r\n        this.selectedDate = this.orderedDatesList[0];\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching unassigned dates:', error);\r\n      //  toastr.error(error);\r\n    }\r\n  }\r\n  async componentDidLoad() {\r\n    setTimeout(() => {\r\n      if (!this.isGotoToBeAssignedDate && Object.keys(this.unassignedDates).length > 0) {\r\n        //console.log(this.isGotoToBeAssignedDate);\r\n        const firstKey = Object.keys(this.unassignedDates)[0];\r\n\r\n        this.showForDate(firstKey);\r\n      }\r\n    }, 100);\r\n  }\r\n  @Listen('gotoToBeAssignedDate', { target: 'window' })\r\n  async gotoDate(event: CustomEvent) {\r\n    this.isGotoToBeAssignedDate = true;\r\n    this.showForDate(event.detail.data);\r\n    this.showDatesList = false;\r\n    this.renderView();\r\n  }\r\n\r\n  async showForDate(dateStamp, withLoading = true) {\r\n    try {\r\n      if (withLoading) {\r\n        this.isLoading = true;\r\n      }\r\n      if (this.showDatesList) {\r\n        this.showUnassignedDate();\r\n      }\r\n      await this.updateCategories(dateStamp, this.calendarData);\r\n      this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\r\n      this.showBookingPopup.emit({\r\n        key: 'calendar',\r\n        data: parseInt(dateStamp) - 86400000,\r\n      });\r\n      if (this.isGotoToBeAssignedDate) {\r\n        this.isGotoToBeAssignedDate = false;\r\n      }\r\n      this.isLoading = false;\r\n      this.selectedDate = dateStamp;\r\n      this.renderView();\r\n    } catch (error) {\r\n      // toastr.error(error);\r\n    }\r\n  }\r\n\r\n  getDay(dt) {\r\n    const currentDate = new Date(dt);\r\n    const locale = 'default'; //'en-US';\r\n    const dayOfWeek = this.getLocalizedDayOfWeek(currentDate, locale);\r\n    // const monthName = currentDate.toLocaleString(\"default\", { month: 'short' })\r\n    return dayOfWeek + ' ' + currentDate.getDate() + ', ' + currentDate.getFullYear();\r\n  }\r\n\r\n  getLocalizedDayOfWeek(date, locale) {\r\n    const options = { weekday: 'short' };\r\n    return date.toLocaleDateString(locale, options);\r\n  }\r\n\r\n  handleOptionEvent(key, data = '') {\r\n    this.highlightToBeAssignedBookingEvent.emit({\r\n      key: 'highlightBookingId',\r\n      data: { bookingId: '----' },\r\n    });\r\n    this.addToBeAssignedEvent.emit({ key: 'tobeAssignedEvents', data: [] });\r\n    this.optionEvent.emit({ key, data });\r\n  }\r\n\r\n  showUnassignedDate() {\r\n    this.showDatesList = !this.showDatesList;\r\n  }\r\n\r\n  getToBeAssignedEntities() {\r\n    // toBeAssignedEvents\r\n  }\r\n\r\n  getCategoryView() {\r\n    if (this.orderedDatesList.length && this.selectedDate && this.data[this.selectedDate]) {\r\n      return Object.entries(this.data[this.selectedDate].categories).map(([id, eventDatas], ind) => (\r\n        <igl-tba-category-view\r\n          calendarData={this.calendarData}\r\n          selectedDate={this.selectedDate}\r\n          categoryId={id}\r\n          categoryIndex={ind}\r\n          categoriesData={this.categoriesData}\r\n          eventDatas={eventDatas}\r\n          onAssignUnitEvent={evt => this.handleAssignUnit(evt)}\r\n        ></igl-tba-category-view>\r\n      ));\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  renderView() {\r\n    this.renderAgain = !this.renderAgain;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"tobeAssignedContainer pr-1 text-left\">\r\n        <div>\r\n          <div>\r\n            <div class=\"stickyHeader pt-1\">\r\n              <p class=\"tobeAssignedHeader \">{locales.entries.Lcz_Assignments}</p>\r\n              {/* <div class=\"closeBtn pt-1\" onClick={() => this.handleOptionEvent('closeSideMenu')}>\r\n                <i class=\"ft-chevrons-left\"></i>\r\n              </div> */}\r\n              <ir-icon class=\"closeBtn pt-2\" onIconClickHandler={() => this.handleOptionEvent('closeSideMenu')}>\r\n                <svg slot=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" height={18} width={18}>\r\n                  <path\r\n                    fill=\"#6b6f82\"\r\n                    d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z\"\r\n                  />\r\n                </svg>\r\n              </ir-icon>\r\n              <hr />\r\n              {Object.keys(this.data).length === 0 ? (\r\n                <p>{locales.entries.Lcz_AllBookingsAreAssigned}</p>\r\n              ) : this.isLoading ? (\r\n                <p class=\"d-flex align-items-center\">\r\n                  <span class=\"p-0\">{this.loadingMessage}</span>\r\n                  <div class=\"dots\">\r\n                    <div class=\"dot\"></div>\r\n                    <div class=\"dot\"></div>\r\n                    <div class=\"dot\"></div>\r\n                  </div>\r\n                </p>\r\n              ) : (\r\n                <Fragment>\r\n                  {this.orderedDatesList.length ? (\r\n                    <div\r\n                      class={`custom-dropdown border border-light rounded text-center ` + (this.showDatesList ? 'show' : '')}\r\n                      id=\"dropdownMenuButton\"\r\n                      data-toggle=\"dropdown\"\r\n                      aria-haspopup=\"true\"\r\n                      aria-expanded=\"false\"\r\n                    >\r\n                      <div\r\n                        class={'dropdown-toggle'}\r\n                        //onClick={() => this.showUnassignedDate()}\r\n                      >\r\n                        <span class=\"font-weight-bold\">{this.data[this.selectedDate].dateStr}</span>\r\n                        <svg class={'caret-icon'} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" height={14} width={14}>\r\n                          <path\r\n                            fill=\"#6b6f82\"\r\n                            d=\"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"\r\n                          />\r\n                        </svg>\r\n                      </div>\r\n                      <div class=\"dropdown-menu dropdown-menu-right full-width\" aria-labelledby=\"dropdownMenuButton\">\r\n                        {this.orderedDatesList?.map(ordDate => (\r\n                          <div class=\"dropdown-item pointer\" onClick={() => this.showForDate(ordDate)}>\r\n                            {this.data[ordDate].dateStr}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    locales.entries.Lcz_AllBookingsAreAssigned\r\n                  )}\r\n                </Fragment>\r\n              )}\r\n            </div>\r\n            {!this.isLoading && (\r\n              <div class=\"scrollabledArea\">\r\n                {this.orderedDatesList.length ? (\r\n                  Object.keys(this.data[this.selectedDate].categories).length ? (\r\n                    this.getCategoryView()\r\n                  ) : (\r\n                    <div class=\"mt-1\">{locales.entries.Lcz_AllAssignForThisDay}</div>\r\n                  )\r\n                ) : null}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}