{"file":"igl-book-property-header2.js","mappings":"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","names":["moment"],"sources":["src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.css?tag=igl-book-property-header&encapsulation=scoped","src/components/igloo-calendar/igl-book-property/igl-book-property-header/igl-book-property-header.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n.row {\r\n  padding: 0 0 0 15px;\r\n  margin: 0;\r\n}\r\n.sourceContainer{\r\n  max-width: 350px;\r\n}","import { Component, Host, Prop, h, Event, EventEmitter } from '@stencil/core';\r\nimport { TAdultChildConstraints, TPropertyButtonsTypes, TSourceOption, TSourceOptions } from '../../../../models/igl-book-property';\r\nimport { IToast } from '../../../ir-toast/toast';\r\nimport moment from 'moment';\r\nimport locales from '@/stores/locales.store';\r\n\r\n@Component({\r\n  tag: 'igl-book-property-header',\r\n  styleUrl: 'igl-book-property-header.css',\r\n  scoped: true,\r\n})\r\nexport class IglBookPropertyHeader {\r\n  @Prop() splitBookingId: any = '';\r\n  @Prop() bookingData: any = '';\r\n  @Prop() minDate: string;\r\n  @Prop() sourceOptions: TSourceOptions[] = [];\r\n  @Prop() message: string;\r\n  @Prop() bookingDataDefaultDateRange: { [key: string]: any };\r\n  @Prop() showSplitBookingOption: boolean = false;\r\n  @Prop() adultChildConstraints: TAdultChildConstraints;\r\n  @Prop() splitBookings: any[];\r\n  @Prop() adultChildCount: { adult: number; child: number };\r\n  @Prop() dateRangeData: any;\r\n  @Prop() bookedByInfoData: any;\r\n  @Prop() defaultDaterange: { from_date: string; to_date: string };\r\n  @Prop() propertyId: number;\r\n  @Event() splitBookingDropDownChange: EventEmitter<any>;\r\n  @Event() sourceDropDownChange: EventEmitter<string>;\r\n  @Event() adultChild: EventEmitter<any>;\r\n  @Event() checkClicked: EventEmitter<any>;\r\n  @Event() buttonClicked: EventEmitter<{ key: TPropertyButtonsTypes }>;\r\n  @Event() toast: EventEmitter<IToast>;\r\n  @Event() spiltBookingSelected: EventEmitter<{ key: string; data: unknown }>;\r\n  private sourceOption: TSourceOption = {\r\n    code: '',\r\n    description: '',\r\n    tag: '',\r\n  };\r\n\r\n  getSplitBookingList() {\r\n    return (\r\n      <fieldset class=\"form-group  text-left\">\r\n        <label class=\"h5\">{locales.entries.Lcz_Tobooking}# </label>\r\n        <div class=\"btn-group ml-1\">\r\n          <ir-autocomplete\r\n            value={\r\n              Object.keys(this.bookedByInfoData).length > 1 ? `${this.bookedByInfoData.bookingNumber} ${this.bookedByInfoData.firstName} ${this.bookedByInfoData.lastName}` : ''\r\n            }\r\n            from_date={moment(this.bookingDataDefaultDateRange.fromDate).format('YYYY-MM-DD')}\r\n            to_date={moment(this.bookingDataDefaultDateRange.toDate).format('YYYY-MM-DD')}\r\n            propertyId={this.propertyId}\r\n            placeholder={locales.entries.Lcz_BookingNumber}\r\n            onComboboxValue={e => {\r\n              e.stopImmediatePropagation();\r\n              e.stopPropagation;\r\n              this.spiltBookingSelected.emit(e.detail);\r\n            }}\r\n            isSplitBooking\r\n          ></ir-autocomplete>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  getSourceNode() {\r\n    return (\r\n      <fieldset class=\"d-flex flex-column text-left flex-lg-row align-items-lg-center\">\r\n        <label class=\"h5 mr-lg-1\">{locales.entries.Lcz_Source} </label>\r\n        <div class=\"btn-group mt-1 mt-lg-0 sourceContainer\">\r\n          <select class=\"form-control input-sm\" id=\"xSmallSelect\" onChange={evt => this.sourceDropDownChange.emit((evt.target as HTMLSelectElement).value)}>\r\n            {this.sourceOptions.map(option => {\r\n              if (option.type === 'LABEL') {\r\n                return <optgroup label={option.value}></optgroup>;\r\n              }\r\n              return (\r\n                <option value={option.id} selected={this.sourceOption.code === option.id}>\r\n                  {option.value}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </div>\r\n      </fieldset>\r\n    );\r\n  }\r\n  handleAdultChildChange(key: string, event: Event) {\r\n    const value = (event.target as HTMLSelectElement).value;\r\n    let obj = {};\r\n    if (value === '') {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: 0,\r\n      };\r\n    } else {\r\n      obj = {\r\n        ...this.adultChildCount,\r\n        [key]: value,\r\n      };\r\n    }\r\n    this.adultChild.emit(obj);\r\n  }\r\n\r\n  getAdultChildConstraints() {\r\n    return (\r\n      <div class={'mt-1 d-flex flex-column text-left'}>\r\n        <label class=\"h5 d-lg-none\">{locales.entries.Lcz_NumberOfGuests} </label>\r\n        <div class=\"form-group  text-left d-flex align-items-center justify-content-between justify-content-sm-start\">\r\n          <fieldset>\r\n            <div class=\"btn-group \">\r\n              <select class=\"form-control input-sm\" id=\"xAdultSmallSelect\" onChange={evt => this.handleAdultChildChange('adult', evt)}>\r\n                <option value=\"\">{locales.entries.Lcz_AdultsCaption}</option>\r\n                {Array.from(Array(this.adultChildConstraints.adult_max_nbr), (_, i) => i + 1).map(option => (\r\n                  <option value={option}>{option}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </fieldset>\r\n          {this.adultChildConstraints.child_max_nbr > 0 && (\r\n            <fieldset class={'ml-1'}>\r\n              <div class=\"btn-group ml-1\">\r\n                <select class=\"form-control input-sm\" id=\"xChildrenSmallSelect\" onChange={evt => this.handleAdultChildChange('child', evt)}>\r\n                  <option value={''}>{this.renderChildCaption()}</option>\r\n                  {Array.from(Array(this.adultChildConstraints.child_max_nbr), (_, i) => i + 1).map(option => (\r\n                    <option value={option}>{option}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </fieldset>\r\n          )}\r\n          <button class={'btn btn-primary btn-sm ml-2 '} onClick={() => this.handleButtonClicked()}>\r\n            {locales.entries.Lcz_Check}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  renderChildCaption() {\r\n    const maxAge = this.adultChildConstraints.child_max_age;\r\n    let years = locales.entries.Lcz_Years;\r\n\r\n    if (maxAge === 1) {\r\n      years = locales.entries.Lcz_Year;\r\n    }\r\n    return `${locales.entries.Lcz_ChildCaption} < ${this.adultChildConstraints.child_max_age} ${years}`;\r\n  }\r\n  handleButtonClicked() {\r\n    console.log(this.isEventType('SPLIT_BOOKING') && Object.keys(this.bookedByInfoData).length === 1);\r\n    if (this.isEventType('SPLIT_BOOKING') && Object.keys(this.bookedByInfoData).length <= 1) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: locales.entries.Lcz_ChooseBookingNumber,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n    } else if (this.minDate && new Date(this.dateRangeData.fromDate).getTime() > new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date).getTime()) {\r\n      this.toast.emit({\r\n        type: 'error',\r\n        title: `${locales.entries.Lcz_CheckInDateShouldBeMAx} ${moment(new Date(this.bookedByInfoData.to_date || this.defaultDaterange.to_date)).format('ddd, DD MMM YYYY')} `,\r\n        description: '',\r\n        position: 'top-right',\r\n      });\r\n    } else if (this.adultChildCount.adult === 0) {\r\n      this.toast.emit({ type: 'error', title: locales.entries.Lcz_PlzSelectNumberOfGuests, description: '', position: 'top-right' });\r\n    } else {\r\n      this.buttonClicked.emit({ key: 'check' });\r\n    }\r\n  }\r\n  isEventType(key: string) {\r\n    return this.bookingData.event_type === key;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {this.showSplitBookingOption ? this.getSplitBookingList() : this.isEventType('EDIT_BOOKING') || this.isEventType('ADD_ROOM') ? null : this.getSourceNode()}\r\n        <div class={'d-lg-flex align-items-center'}>\r\n          <fieldset class=\" mt-1 mt-lg-0  \">\r\n            <igl-date-range\r\n              dateLabel={locales.entries.Lcz_Dates}\r\n              minDate={this.minDate}\r\n              disabled={this.isEventType('BAR_BOOKING') || this.isEventType('SPLIT_BOOKING')}\r\n              defaultData={this.bookingDataDefaultDateRange}\r\n            ></igl-date-range>\r\n          </fieldset>\r\n          {!this.isEventType('EDIT_BOOKING') && this.getAdultChildConstraints()}\r\n        </div>\r\n        <p class=\"text-left mt-1\">{this.message}</p>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"version":3}